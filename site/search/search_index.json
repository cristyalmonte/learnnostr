{"config":{"lang":["en","es"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|(?!\\b)(?=[A-Z][a-z])|\\.(?!\\d)|&[lg]t;","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Why LearnNostr?","text":"<ul> <li> <p> True Digital Identity</p> <p>Own your identity with cryptographic keys. No central authority can delete your account, censor your content, or control your digital presence.</p> <p> Learn About Keys</p> </li> <li> <p> Censorship Resistant</p> <p>Built on a decentralized network of relays that no single entity controls. Your voice can't be silenced by corporations or governments.</p> <p> Getting Started</p> </li> <li> <p> Lightning Integration</p> <p>Seamless Bitcoin payments through Lightning Network integration. Send and receive value instantly across the protocol.</p> <p> Build Applications</p> </li> </ul> <p> Start Here: Protocol Fundamentals</p> <p>New to Nostr? Begin with the basics. Learn what makes Nostr different from traditional social platforms and understand the core concepts that power this decentralized protocol.</p> <p>What you'll learn:</p> <p>\u2022 Protocol architecture and design principles \u2022 Decentralization vs. centralized platforms \u2022 Basic terminology and concepts</p> <p> Start Learning</p> <p> Master: Identity &amp; Security</p> <p>Essential Skills. Dive deep into cryptographic keys, digital signatures, and identity management. These concepts are fundamental to everything you'll build on Nostr.</p> <p>What you'll learn:</p> <p>\u2022 Public/private key cryptography \u2022 Digital identity and signatures \u2022 Security best practices</p> <p> Master Keys</p> <p> Build: Your First Application</p> <p>Hands-on Development. Put theory into practice by building real Nostr applications. Learn to connect to relays, publish events, and create interactive experiences.</p> <p>What you'll build:</p> <p>\u2022 Simple Nostr client \u2022 Event publishing system \u2022 Relay communication</p> <p> Start Building</p> <p> Reference: Complete Definitions</p> <p>Deep Dive Resources. Access comprehensive definitions and explanations of all Nostr concepts, protocols, and technical specifications in one organized location.</p> <p>What you'll find:</p> <p>\u2022 Technical definitions and explanations \u2022 Protocol specifications (NIPs) \u2022 Development tools and libraries</p> <p> Browse Definitions</p>"},{"location":"#learning-path","title":"\ud83c\udfaf Learning Path","text":"<p>Master Nostr in 4 Progressive Steps \u2014 From understanding the basics to building your own applications, this guided learning path will take you from beginner to developer.</p>"},{"location":"#code-example","title":"Code Example","text":"<p>Here's how to publish your first event to the Nostr network:</p> JavaScriptPythonRust <pre><code>import { generatePrivateKey, getPublicKey, finishEvent, relayInit } from 'nostr-tools'\n\n// Generate your identity\nconst sk = generatePrivateKey()\nconst pk = getPublicKey(sk)\n\n// Create an event\nconst event = finishEvent({\n  kind: 1,\n  created_at: Math.floor(Date.now() / 1000),\n  tags: [],\n  content: 'Hello Nostr!',\n}, sk)\n\n// Publish to relay\nconst relay = relayInit('wss://relay.damus.io')\nawait relay.connect()\nawait relay.publish(event)\n</code></pre> <pre><code>from nostr.key import PrivateKey\nfrom nostr.event import Event\nfrom nostr.relay_manager import RelayManager\nimport time\n\n# Generate identity\nprivate_key = PrivateKey()\npublic_key = private_key.public_key\n\n# Create event\nevent = Event(\n    kind=1,\n    content=\"Hello Nostr!\",\n    created_at=int(time.time())\n)\nprivate_key.sign_event(event)\n\n# Publish event\nrelay_manager = RelayManager()\nrelay_manager.add_relay(\"wss://relay.damus.io\")\nrelay_manager.publish_event(event)\n</code></pre> <pre><code>use nostr_sdk::prelude::*;\n\n#[tokio::main]\nasync fn main() -&gt; Result&lt;()&gt; {\n    // Generate keys\n    let keys = Keys::generate();\n\n    // Connect to relay\n    let client = Client::new(&amp;keys);\n    client.add_relay(\"wss://relay.damus.io\", None).await?;\n    client.connect().await;\n\n    // Publish event\n    let event = EventBuilder::new_text_note(\"Hello Nostr!\", &amp;[])\n        .to_event(&amp;keys)?;\n\n    client.send_event(event).await?;\n    Ok(())\n}\n</code></pre>"},{"location":"definitions/","title":"Nostr Definitions: Complete Reference Guide","text":"<p>This comprehensive guide defines all essential Nostr concepts, protocols, and components in one place.</p>"},{"location":"definitions/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Protocol Fundamentals</li> <li>Keys and Identity</li> <li>Events and Messages</li> <li>Relays and Network</li> <li>Clients and Applications</li> <li>NIPs (Nostr Implementation Possibilities)</li> <li>Zaps and Lightning Integration</li> <li>Security and Privacy</li> <li>Development and Technical</li> </ul>"},{"location":"definitions/#protocol-fundamentals","title":"Protocol Fundamentals","text":""},{"location":"definitions/#nostr","title":"Nostr","text":"<p>\"Notes and Other Stuff Transmitted by Relays\" - A simple, open protocol for decentralized social networking and communication.</p>"},{"location":"definitions/#core-principles","title":"Core Principles","text":"<ul> <li>Decentralized: No central authority or single point of failure</li> <li>Censorship-resistant: Content cannot be universally censored</li> <li>Interoperable: All clients can communicate with each other</li> <li>User-owned: Users control their identity and data</li> <li>Simple: Easy to implement and understand</li> </ul>"},{"location":"definitions/#protocol-overview","title":"Protocol Overview","text":"<pre><code>graph TB\n    A[User with Keys] --&gt; B[Nostr Client]\n    B --&gt; C[Sign Events]\n    C --&gt; D[Send to Relays]\n    D --&gt; E[Other Users' Clients]\n    E --&gt; F[Verify Signatures]</code></pre>"},{"location":"definitions/#keys-and-identity","title":"Keys and Identity","text":""},{"location":"definitions/#private-key","title":"Private Key","text":"<p>Your secret cryptographic key that: - Controls your entire Nostr identity - Signs all your events and messages - Cannot be recovered if lost - Must be kept absolutely secure</p> <p>Format Examples: <pre><code>Hex: 5c0c523f52a5b6fad39ed2403092df8cebc36318b39383bca6c00808626fab3a\nnsec: nsec1ts8y20636km0450n6fqrxyktmrhtcd0cvwucnw6xvqygsp6wlv62q4ew66q\n</code></pre></p>"},{"location":"definitions/#public-key","title":"Public Key","text":"<p>Your public identity on Nostr: - Derived mathematically from your private key - Serves as your unique identifier - Can be shared freely - Used by others to verify your signatures</p> <p>Format Examples: <pre><code>Hex: 48d54b934bb2767a2980a4e6b2ee5ff86e3a4102b1e3f71c95e66bb06a1e7ff6\nnpub: npub1frw5hw6tkfm85t2qpfnty0hllrhkx5gzk83lw8y4uehmq6s70lmqqrr9nv\n</code></pre></p>"},{"location":"definitions/#key-security-best-practices","title":"Key Security Best Practices","text":"<ul> <li>Never share your private key</li> <li>Use hardware wallets when possible</li> <li>Keep multiple secure backups</li> <li>Use different keys for different purposes</li> <li>Consider key rotation strategies</li> </ul>"},{"location":"definitions/#events-and-messages","title":"Events and Messages","text":""},{"location":"definitions/#event-structure","title":"Event Structure","text":"<p>All Nostr data is transmitted as events with this structure:</p> <pre><code>{\n  \"id\": \"event-id-hash\",\n  \"pubkey\": \"author-public-key\",\n  \"created_at\": 1234567890,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"Event content\",\n  \"sig\": \"cryptographic-signature\"\n}\n</code></pre>"},{"location":"definitions/#event-kinds-common-types","title":"Event Kinds (Common Types)","text":""},{"location":"definitions/#basic-events","title":"Basic Events","text":"<ul> <li>Kind 0: User Metadata (profile information)</li> <li>Kind 1: Text Note (like a tweet)</li> <li>Kind 2: Recommend Relay</li> <li>Kind 3: Contact List (following list)</li> <li>Kind 4: Encrypted Direct Message</li> <li>Kind 5: Event Deletion Request</li> <li>Kind 6: Repost</li> <li>Kind 7: Reaction (like/dislike)</li> </ul>"},{"location":"definitions/#advanced-events","title":"Advanced Events","text":"<ul> <li>Kind 9735: Zap Receipt</li> <li>Kind 30023: Long-form Article</li> <li>Kind 40: Channel Creation</li> <li>Kind 41: Channel Metadata</li> <li>Kind 42: Channel Message</li> </ul>"},{"location":"definitions/#tags","title":"Tags","text":"<p>Metadata attached to events for: - Mentioning users (<code>[\"p\", \"pubkey\"]</code>) - Referencing events (<code>[\"e\", \"event-id\"]</code>) - Adding hashtags (<code>[\"t\", \"hashtag\"]</code>) - Specifying relays (<code>[\"r\", \"relay-url\"]</code>)</p>"},{"location":"definitions/#relays-and-network","title":"Relays and Network","text":""},{"location":"definitions/#relay","title":"Relay","text":"<p>A server that: - Accepts events from clients - Stores events (temporarily or permanently) - Forwards events to subscribers - Implements filtering and policies - Communicates via WebSocket</p>"},{"location":"definitions/#how-relays-work","title":"How Relays Work","text":"<pre><code>sequenceDiagram\n    participant C1 as Client 1\n    participant R as Relay\n    participant C2 as Client 2\n\n    C1-&gt;&gt;R: Connect (WebSocket)\n    C2-&gt;&gt;R: Connect (WebSocket)\n    C1-&gt;&gt;R: Publish Event\n    R-&gt;&gt;R: Store Event\n    C2-&gt;&gt;R: Subscribe to Events\n    R-&gt;&gt;C2: Send Matching Events</code></pre>"},{"location":"definitions/#relay-types","title":"Relay Types","text":"<ul> <li>Public Relays: Open to all users</li> <li>Private Relays: Restricted access</li> <li>Paid Relays: Require payment for service</li> <li>Specialized Relays: Focus on specific content types</li> </ul>"},{"location":"definitions/#popular-relays","title":"Popular Relays","text":"<ul> <li><code>wss://relay.damus.io</code></li> <li><code>wss://nos.lol</code></li> <li><code>wss://relay.snort.social</code></li> <li><code>wss://nostr.wine</code></li> </ul>"},{"location":"definitions/#clients-and-applications","title":"Clients and Applications","text":""},{"location":"definitions/#nostr-client","title":"Nostr Client","text":"<p>An application that allows users to interact with the Nostr network by: - Managing cryptographic keys - Creating and signing events - Connecting to relays - Displaying content - Handling user interactions</p>"},{"location":"definitions/#client-types","title":"Client Types","text":""},{"location":"definitions/#web-clients","title":"Web Clients","text":"<ul> <li>Iris: Feature-rich web interface</li> <li>Snort: Fast, modern design</li> <li>Coracle: Privacy-focused</li> <li>Nostrudel: Developer-oriented</li> </ul>"},{"location":"definitions/#mobile-clients","title":"Mobile Clients","text":"<ul> <li>Damus (iOS): Native iOS experience</li> <li>Amethyst (Android): Feature-complete Android app</li> <li>Primal (iOS/Android): Algorithm-driven feeds</li> </ul>"},{"location":"definitions/#desktop-clients","title":"Desktop Clients","text":"<ul> <li>Gossip: Desktop client with advanced relay management</li> <li>More!: Cross-platform Tauri-based client</li> </ul>"},{"location":"definitions/#client-features","title":"Client Features","text":"<ul> <li>Timeline management</li> <li>Direct messaging</li> <li>Profile management</li> <li>Relay configuration</li> <li>Lightning integration</li> <li>Content filtering</li> </ul>"},{"location":"definitions/#nips-nostr-implementation-possibilities","title":"NIPs (Nostr Implementation Possibilities)","text":""},{"location":"definitions/#what-are-nips","title":"What are NIPs?","text":"<p>Technical specifications that define: - Protocol features and extensions - Event formats and structures - Client and relay behaviors - Cryptographic standards</p>"},{"location":"definitions/#essential-nips","title":"Essential NIPs","text":""},{"location":"definitions/#nip-01-basic-protocol-flow","title":"NIP-01: Basic Protocol Flow","text":"<p>The foundation - defines events, signatures, and communication.</p>"},{"location":"definitions/#nip-02-contact-list-and-petnames","title":"NIP-02: Contact List and Petnames","text":"<p>Following lists and user labeling.</p>"},{"location":"definitions/#nip-04-encrypted-direct-messages","title":"NIP-04: Encrypted Direct Messages","text":"<p>Private messaging between users.</p>"},{"location":"definitions/#nip-05-mapping-nostr-keys-to-dns","title":"NIP-05: Mapping Nostr Keys to DNS","text":"<p>Human-readable identifiers (name@domain.com).</p>"},{"location":"definitions/#nip-07-browser-extension-for-signing","title":"NIP-07: Browser Extension for Signing","text":"<p>Secure key management in browsers.</p>"},{"location":"definitions/#nip-09-event-deletion","title":"NIP-09: Event Deletion","text":"<p>Requesting deletion of previously published events.</p>"},{"location":"definitions/#nip-10-text-note-references","title":"NIP-10: Text Note References","text":"<p>Proper threading and reply structures.</p>"},{"location":"definitions/#nip-11-relay-information-document","title":"NIP-11: Relay Information Document","text":"<p>Relay capabilities and policies.</p>"},{"location":"definitions/#nip-57-lightning-zaps","title":"NIP-57: Lightning Zaps","text":"<p>Bitcoin micropayments integrated with Nostr.</p>"},{"location":"definitions/#nip-categories","title":"NIP Categories","text":"<ul> <li>Core: Essential for basic functionality</li> <li>Optional: Additional features</li> <li>Informational: Best practices and guidelines</li> <li>Experimental: Testing new ideas</li> </ul>"},{"location":"definitions/#zaps-and-lightning-integration","title":"Zaps and Lightning Integration","text":""},{"location":"definitions/#zap","title":"Zap","text":"<p>Instant Bitcoin payments over Lightning Network cryptographically tied to Nostr events.</p>"},{"location":"definitions/#key-features","title":"Key Features","text":"<ul> <li>\u26a1 Instant settlement (milliseconds)</li> <li>\ud83d\udd12 Cryptographically verified</li> <li>\ud83d\udcb0 Micro-payments (1+ satoshi)</li> <li>\ud83c\udf0d Global and permissionless</li> </ul>"},{"location":"definitions/#how-zaps-work-nip-57","title":"How Zaps Work (NIP-57)","text":"<pre><code>sequenceDiagram\n    participant User as You\n    participant Client as Nostr Client\n    participant Wallet as Lightning Wallet\n    participant LNURL as Recipient LNURL\n    participant Relay as Nostr Relay\n\n    User-&gt;&gt;Client: Click Zap\n    Client-&gt;&gt;LNURL: Request zap endpoint\n    LNURL--&gt;&gt;Client: Return payment template\n    Client-&gt;&gt;Wallet: Generate invoice\n    Wallet--&gt;&gt;Client: Lightning invoice\n    Client-&gt;&gt;LNURL: Send payment + event\n    LNURL-&gt;&gt;Relay: Publish zap receipt\n    Relay--&gt;&gt;Client: Show confirmation</code></pre>"},{"location":"definitions/#zap-types","title":"Zap Types","text":"<ul> <li>Public Zaps: Visible to everyone</li> <li>Private Zaps: Only sender and recipient know</li> <li>Anonymous Zaps: No sender identification</li> </ul>"},{"location":"definitions/#lnurl","title":"LNURL","text":"<p>Lightning Network URL - enables seamless Lightning payments through simple URLs.</p>"},{"location":"definitions/#security-and-privacy","title":"Security and Privacy","text":""},{"location":"definitions/#cryptographic-security","title":"Cryptographic Security","text":"<ul> <li>ECDSA: Elliptic Curve Digital Signature Algorithm</li> <li>secp256k1: Same curve used by Bitcoin</li> <li>SHA-256: Hashing algorithm for event IDs</li> </ul>"},{"location":"definitions/#privacy-considerations","title":"Privacy Considerations","text":"<ul> <li>Public by Default: Most content is publicly visible</li> <li>Metadata Leakage: Timing and relay data can reveal information</li> <li>IP Privacy: Use Tor for enhanced anonymity</li> <li>Key Rotation: Regular key changes for enhanced security</li> </ul>"},{"location":"definitions/#best-practices","title":"Best Practices","text":"<ul> <li>Use reputable clients</li> <li>Verify software integrity</li> <li>Keep keys secure</li> <li>Understand data permanence</li> <li>Use multiple relays</li> </ul>"},{"location":"definitions/#development-and-technical","title":"Development and Technical","text":""},{"location":"definitions/#event-id-calculation","title":"Event ID Calculation","text":"<pre><code>function getEventId(event) {\n  const serialized = JSON.stringify([\n    0,\n    event.pubkey,\n    event.created_at,\n    event.kind,\n    event.tags,\n    event.content\n  ])\n  return sha256(utf8Encoder.encode(serialized))\n}\n</code></pre>"},{"location":"definitions/#signature-verification","title":"Signature Verification","text":"<p>Events are signed using the private key and verified using the public key to ensure authenticity.</p>"},{"location":"definitions/#websocket-communication","title":"WebSocket Communication","text":"<pre><code>// Connect to relay\nconst relay = new WebSocket('wss://relay.example.com')\n\n// Subscribe to events\nrelay.send(JSON.stringify(['REQ', subscriptionId, filter]))\n\n// Publish event\nrelay.send(JSON.stringify(['EVENT', signedEvent]))\n</code></pre>"},{"location":"definitions/#filters","title":"Filters","text":"<p>Query relays for specific events: <pre><code>{\n  \"ids\": [\"event-id\"],\n  \"authors\": [\"pubkey\"],\n  \"kinds\": [1],\n  \"since\": 1234567890,\n  \"until\": 1234567890,\n  \"limit\": 100\n}\n</code></pre></p>"},{"location":"definitions/#glossary-quick-reference","title":"Glossary Quick Reference","text":"Term Definition Nostr Notes and Other Stuff Transmitted by Relays NIP Nostr Implementation Possibility npub Public key in bech32 format nsec Private key in bech32 format Relay Server that stores and forwards Nostr events Event Basic unit of data in Nostr Kind Event type identifier Zap Lightning payment tied to a Nostr event LNURL Lightning Network URL protocol Tag Metadata attached to events Filter Query parameters for relay subscriptions <p>This definitions guide is a living document. As Nostr evolves, new concepts and refinements will be added. </p>"},{"location":"support/","title":"Support LearnNostr","text":"<p>Help Keep This Resource Free</p> <p>LearnNostr is a community-driven educational platform. Your support helps us maintain and expand this comprehensive Nostr learning resource for everyone.</p>"},{"location":"support/#donate-to-learnnostr-via-bitcoin-lightning","title":"\u26a1 Donate to LearnNostr via Bitcoin Lightning:","text":"<pre><code>greenmiracle695447@getalby.com\n</code></pre> <p>Copy and paste the address above into your Lightning wallet to support this project!</p>"},{"location":"concepts/clients/","title":"Understanding Nostr Clients","text":"<p>Learning Objectives</p> <p>By the end of this lesson, you'll understand:</p> <ul> <li>What Nostr clients are and their role in the ecosystem</li> <li>Different types of clients and their features</li> <li>How clients interact with relays and manage keys</li> <li>Popular client options and how to choose one</li> </ul>"},{"location":"concepts/clients/#what-is-a-nostr-client","title":"What is a Nostr Client?","text":"<p>A Nostr client is an application that allows users to interact with the Nostr network. Think of it as your window into the decentralized social web - it's how you create posts, read content, manage your identity, and connect with others.</p> <p>Unlike traditional social media where you're locked into one app (like Twitter or Facebook), Nostr clients are interoperable. You can switch between different clients while keeping the same identity and data.</p>"},{"location":"concepts/clients/#core-functions-of-clients","title":"Core Functions of Clients","text":""},{"location":"concepts/clients/#1-key-management","title":"1. Key Management","text":"<ul> <li>Generate new cryptographic key pairs</li> <li>Store private keys securely (or integrate with external key managers)</li> <li>Sign events with your private key</li> <li>Verify signatures from other users</li> </ul>"},{"location":"concepts/clients/#2-event-creation","title":"2. Event Creation","text":"<ul> <li>Compose different types of content (text notes, reactions, reposts)</li> <li>Format content with proper metadata and tags</li> <li>Sign events cryptographically</li> <li>Publish to selected relays</li> </ul>"},{"location":"concepts/clients/#3-relay-communication","title":"3. Relay Communication","text":"<ul> <li>Connect to multiple relays simultaneously</li> <li>Subscribe to event feeds and filters</li> <li>Fetch historical events and user profiles</li> <li>Manage relay lists and preferences</li> </ul>"},{"location":"concepts/clients/#4-content-display","title":"4. Content Display","text":"<ul> <li>Parse and display events in user-friendly formats</li> <li>Handle different event types (notes, reactions, profiles)</li> <li>Organize content (timelines, threads, notifications)</li> <li>Filter content based on user preferences</li> </ul>"},{"location":"concepts/clients/#types-of-nostr-clients","title":"Types of Nostr Clients","text":""},{"location":"concepts/clients/#web-clients","title":"Web Clients","text":"<p>Browser-based applications that run in your web browser.</p> <p>Examples: - Iris - Feature-rich web client with social features - Snort - Fast, modern web interface - Nostrgram - Instagram-like photo sharing - Coracle - Minimalist, privacy-focused client</p> <p>Pros: - \u2705 No installation required - \u2705 Cross-platform compatibility - \u2705 Easy to try different clients</p> <p>Cons: - \u274c Limited key storage options - \u274c Dependent on browser security - \u274c May have performance limitations</p>"},{"location":"concepts/clients/#mobile-apps","title":"Mobile Apps","text":"<p>Native applications for smartphones and tablets.</p> <p>Examples: - Damus (iOS) - Popular, user-friendly iOS client - Amethyst (Android) - Feature-rich Android client - Nostros (Android) - Open-source Android client - Plebstr (iOS/Android) - Simple, beginner-friendly</p> <p>Pros: - \u2705 Native performance and UX - \u2705 Push notifications - \u2705 Better key storage options - \u2705 Offline capabilities</p> <p>Cons: - \u274c Platform-specific - \u274c App store restrictions - \u274c Installation required</p>"},{"location":"concepts/clients/#desktop-applications","title":"Desktop Applications","text":"<p>Native applications for computers.</p> <p>Examples: - Gossip - Rust-based desktop client - More TBD - Desktop client ecosystem is growing</p> <p>Pros: - \u2705 Full-featured experience - \u2705 Better key management - \u2705 Advanced power-user features - \u2705 No browser limitations</p> <p>Cons: - \u274c Platform-specific builds - \u274c Larger download/install - \u274c Less portable</p>"},{"location":"concepts/clients/#specialized-clients","title":"Specialized Clients","text":"<p>Purpose-built for specific use cases.</p> <p>Examples: - Habla - Long-form content publishing - Zap.stream - Live streaming - Nostrudel - Advanced power-user features - Satellite - Minimalist text-only</p>"},{"location":"concepts/clients/#how-clients-work","title":"How Clients Work","text":"<pre><code>graph TB\n    U[User] --&gt;|interacts with| C[Client]\n    C --&gt;|manages| K[Private Keys]\n    C --&gt;|creates &amp; signs| E[Events]\n    C --&gt;|connects to| R1[Relay 1]\n    C --&gt;|connects to| R2[Relay 2]\n    C --&gt;|connects to| R3[Relay 3]\n\n    R1 --&gt;|delivers events| C\n    R2 --&gt;|delivers events| C\n    R3 --&gt;|delivers events| C\n\n    C --&gt;|displays| F[Feed/Timeline]\n    F --&gt;|shown to| U</code></pre>"},{"location":"concepts/clients/#the-client-workflow","title":"The Client Workflow","text":"<ol> <li>User Action: You want to post a note or read your timeline</li> <li>Event Creation: Client creates a properly formatted event</li> <li>Signing: Client signs the event with your private key</li> <li>Publishing: Client sends the event to your selected relays</li> <li>Fetching: Client requests events from relays for your timeline</li> <li>Display: Client formats and shows the content to you</li> </ol>"},{"location":"concepts/clients/#key-features-to-look-for","title":"Key Features to Look For","text":""},{"location":"concepts/clients/#essential-features","title":"Essential Features","text":"<ul> <li>Key Management: Secure storage and handling of private keys</li> <li>Multi-relay Support: Connect to multiple relays simultaneously</li> <li>Basic Event Types: Support for text notes, reactions, reposts</li> <li>User Profiles: View and edit profile information</li> <li>Timeline/Feed: Chronological display of events</li> </ul>"},{"location":"concepts/clients/#advanced-features","title":"Advanced Features","text":"<ul> <li>Thread Support: Proper display of conversation threads</li> <li>Media Support: Images, videos, and file attachments</li> <li>Lightning Integration: Zaps (Bitcoin Lightning payments)</li> <li>Advanced Filtering: Content filtering and moderation tools</li> <li>Backup/Export: Export your data and settings</li> </ul>"},{"location":"concepts/clients/#power-user-features","title":"Power User Features","text":"<ul> <li>Custom Relay Management: Advanced relay configuration</li> <li>Event Debugging: Raw event inspection and debugging</li> <li>Custom Event Types: Support for experimental NIPs</li> <li>API Access: Integration with external tools</li> <li>Plugin System: Extensibility through plugins</li> </ul>"},{"location":"concepts/clients/#choosing-the-right-client","title":"Choosing the Right Client","text":""},{"location":"concepts/clients/#for-beginners","title":"For Beginners","text":"<p>Recommended: Damus (iOS), Amethyst (Android), Iris (Web)</p> <ul> <li>Simple, intuitive interface</li> <li>Good onboarding experience</li> <li>Built-in key generation</li> <li>Reasonable default settings</li> </ul>"},{"location":"concepts/clients/#for-privacy-conscious-users","title":"For Privacy-Conscious Users","text":"<p>Recommended: Gossip (Desktop), Coracle (Web)</p> <ul> <li>Enhanced privacy features</li> <li>Local key storage</li> <li>Minimal data collection</li> <li>Tor support (some clients)</li> </ul>"},{"location":"concepts/clients/#for-power-users","title":"For Power Users","text":"<p>Recommended: Nostrudel (Web), Gossip (Desktop)</p> <ul> <li>Advanced configuration options</li> <li>Raw event inspection</li> <li>Custom relay management</li> <li>Experimental feature support</li> </ul>"},{"location":"concepts/clients/#for-content-creators","title":"For Content Creators","text":"<p>Recommended: Habla (Long-form), Nostrgram (Photos)</p> <ul> <li>Specialized content creation tools</li> <li>Rich media support</li> <li>Publishing workflows</li> <li>Audience engagement features</li> </ul>"},{"location":"concepts/clients/#client-interoperability","title":"Client Interoperability","text":"<p>One of Nostr's key advantages is client interoperability:</p> <p>Real-World Example</p> <p>Morning: Use Damus on your phone to check notifications</p> <p>Afternoon: Switch to Iris on your work computer to post updates</p> <p>Evening: Use Habla to write a long-form article</p> <p>Result: All your content appears seamlessly across all clients because they all use the same underlying protocol and relays.</p>"},{"location":"concepts/clients/#security-considerations","title":"Security Considerations","text":""},{"location":"concepts/clients/#key-storage","title":"Key Storage","text":"<ul> <li>Browser Storage: Convenient but less secure</li> <li>Mobile Keychain: Better security on mobile devices</li> <li>Hardware Wallets: Maximum security for valuable accounts</li> <li>External Signers: Dedicated key management apps</li> </ul>"},{"location":"concepts/clients/#best-practices","title":"Best Practices","text":"<ul> <li>\u2705 Use reputable, open-source clients</li> <li>\u2705 Verify client authenticity before downloading</li> <li>\u2705 Keep your private key backed up securely</li> <li>\u2705 Use different clients to avoid vendor lock-in</li> <li>\u274c Never share your private key</li> <li>\u274c Don't use untrusted or closed-source clients</li> </ul>"},{"location":"concepts/clients/#the-future-of-clients","title":"The Future of Clients","text":"<p>The Nostr client ecosystem is rapidly evolving:</p> <ul> <li>Specialized Clients: Purpose-built for specific use cases</li> <li>AI Integration: Smart content curation and assistance</li> <li>Enhanced Privacy: Better anonymity and privacy features</li> <li>Cross-Platform: Seamless experience across all devices</li> <li>Plugin Ecosystems: Extensible, customizable clients</li> </ul>"},{"location":"concepts/clients/#next-steps","title":"Next Steps","text":"<p>Now that you understand clients, explore how they interact with relays and the broader Nostr ecosystem.</p>      Understanding Relays \u2192"},{"location":"concepts/clients/#quick-quiz","title":"Quick Quiz","text":"<p>Test Your Understanding</p> <ol> <li>What are the core functions of a Nostr client?</li> <li>Why can you switch between different Nostr clients freely?</li> <li>What's the difference between web clients and mobile apps?</li> <li>What should you consider when choosing a client for privacy?</li> </ol> Answers <ol> <li>Key management, event creation, relay communication, and content display</li> <li>Because all clients use the same open protocol and can access the same relays</li> <li>Web clients run in browsers (cross-platform, no install) while mobile apps are native (better performance, platform-specific)</li> <li>Local key storage, minimal data collection, open-source code, and privacy-focused features </li> </ol>"},{"location":"concepts/events-and-messages/","title":"Events and Messages in Nostr","text":"<p>Learning Objectives</p> <p>After this lesson, you'll understand:</p> <ul> <li>How everything in Nostr is structured as events</li> <li>Different types of events and their purposes</li> <li>Event structure and required fields</li> <li>How events are signed and verified</li> <li>Common event kinds and their use cases</li> </ul>"},{"location":"concepts/events-and-messages/#understanding-events","title":"Understanding Events","text":"<p>In Nostr, everything is an event. Whether you're posting a text note, updating your profile, reacting to a post, or sending a direct message - it's all structured as events.</p> <p>This unified approach provides several benefits:</p> <ul> <li>Consistency: All data follows the same structure</li> <li>Extensibility: New features can be added as new event types</li> <li>Simplicity: One format to rule them all</li> <li>Interoperability: All clients understand the same basic structure</li> </ul>"},{"location":"concepts/events-and-messages/#event-structure","title":"Event Structure","text":"<p>Every Nostr event is a JSON object with specific required fields:</p> <pre><code>{\n  \"id\": \"event-id-hash\",\n  \"pubkey\": \"author-public-key\", \n  \"created_at\": 1234567890,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"Hello Nostr!\",\n  \"sig\": \"cryptographic-signature\"\n}\n</code></pre> <p>Let's break down each field:</p>"},{"location":"concepts/events-and-messages/#required-fields","title":"Required Fields","text":""},{"location":"concepts/events-and-messages/#id-event-id","title":"<code>id</code> (Event ID)","text":"<ul> <li>32-byte SHA-256 hash of the serialized event data</li> <li>Serves as the unique identifier for the event</li> <li>Calculated from other fields (not arbitrary)</li> </ul> <pre><code>// The ID is the SHA-256 of this serialized data:\n[\n  0,                    // Reserved\n  pubkey,              // Author public key\n  created_at,          // Timestamp\n  kind,                // Event type\n  tags,                // Tags array\n  content              // Event content\n]\n</code></pre>"},{"location":"concepts/events-and-messages/#pubkey-author","title":"<code>pubkey</code> (Author)","text":"<ul> <li>32-byte public key of the event creator</li> <li>Identifies who created the event</li> <li>Used to verify the signature</li> </ul>"},{"location":"concepts/events-and-messages/#created_at-timestamp","title":"<code>created_at</code> (Timestamp)","text":"<ul> <li>Unix timestamp in seconds</li> <li>When the event was created</li> <li>Used for chronological ordering</li> </ul>"},{"location":"concepts/events-and-messages/#kind-event-type","title":"<code>kind</code> (Event Type)","text":"<ul> <li>Integer that defines the event type</li> <li>Determines how clients should interpret the event</li> <li>Standardized in various NIPs</li> </ul>"},{"location":"concepts/events-and-messages/#tags-metadata","title":"<code>tags</code> (Metadata)","text":"<ul> <li>Array of arrays containing metadata</li> <li>Used for references, mentions, hashtags, etc.</li> <li>Each tag is an array of strings</li> </ul>"},{"location":"concepts/events-and-messages/#content-message-content","title":"<code>content</code> (Message Content)","text":"<ul> <li>The main content of the event</li> <li>Can be text, JSON, or empty depending on kind</li> <li>Often contains the user-visible message</li> </ul>"},{"location":"concepts/events-and-messages/#sig-signature","title":"<code>sig</code> (Signature)","text":"<ul> <li>64-byte Schnorr signature</li> <li>Proves the event was created by the pubkey owner</li> <li>Prevents tampering</li> </ul>"},{"location":"concepts/events-and-messages/#event-kinds","title":"Event Kinds","text":"<p>Event kinds determine how the event should be interpreted:</p>"},{"location":"concepts/events-and-messages/#text-events","title":"Text Events","text":""},{"location":"concepts/events-and-messages/#kind-1-text-note","title":"Kind 1: Text Note","text":"<p>The most common event type - like a tweet:</p> <pre><code>{\n  \"kind\": 1,\n  \"content\": \"Just learned about Nostr! This decentralized social media is amazing \ud83d\ude80\",\n  \"tags\": [\n    [\"t\", \"nostr\"],\n    [\"t\", \"decentralized\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#kind-0-user-metadata","title":"Kind 0: User Metadata","text":"<p>Profile information:</p> <pre><code>{\n  \"kind\": 0,\n  \"content\": \"{\\\"name\\\":\\\"Alice\\\",\\\"about\\\":\\\"Nostr enthusiast\\\",\\\"picture\\\":\\\"https://example.com/avatar.jpg\\\"}\"\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#social-events","title":"Social Events","text":""},{"location":"concepts/events-and-messages/#kind-7-reaction","title":"Kind 7: Reaction","text":"<p>Likes, hearts, and other reactions:</p> <pre><code>{\n  \"kind\": 7,\n  \"content\": \"\ud83e\udd19\",\n  \"tags\": [\n    [\"e\", \"note-id-being-reacted-to\"],\n    [\"p\", \"author-of-original-note\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#kind-6-repost","title":"Kind 6: Repost","text":"<p>Sharing someone else's note:</p> <pre><code>{\n  \"kind\": 6,\n  \"content\": \"\",\n  \"tags\": [\n    [\"e\", \"event-id-being-reposted\"],\n    [\"p\", \"original-author-pubkey\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#communication-events","title":"Communication Events","text":""},{"location":"concepts/events-and-messages/#kind-4-encrypted-direct-message","title":"Kind 4: Encrypted Direct Message","text":"<p>Private messages between users:</p> <pre><code>{\n  \"kind\": 4,\n  \"content\": \"encrypted-message-content\",\n  \"tags\": [\n    [\"p\", \"recipient-pubkey\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#kind-42-channel-message","title":"Kind 42: Channel Message","text":"<p>Public chat room messages:</p> <pre><code>{\n  \"kind\": 42,\n  \"content\": \"Hello everyone in this channel!\",\n  \"tags\": [\n    [\"e\", \"channel-creation-event-id\", \"\", \"root\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#management-events","title":"Management Events","text":""},{"location":"concepts/events-and-messages/#kind-3-contact-list","title":"Kind 3: Contact List","text":"<p>Who you follow:</p> <pre><code>{\n  \"kind\": 3,\n  \"content\": \"\",\n  \"tags\": [\n    [\"p\", \"pubkey1\", \"relay-url\", \"petname\"],\n    [\"p\", \"pubkey2\", \"relay-url\", \"alice\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#kind-5-event-deletion","title":"Kind 5: Event Deletion","text":"<p>Request to delete your own events:</p> <pre><code>{\n  \"kind\": 5,\n  \"content\": \"Deleting this post\",\n  \"tags\": [\n    [\"e\", \"event-id-to-delete\"],\n    [\"k\", \"1\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#advanced-events","title":"Advanced Events","text":""},{"location":"concepts/events-and-messages/#kind-30023-long-form-content","title":"Kind 30023: Long-form Content","text":"<p>Articles and blog posts:</p> <pre><code>{\n  \"kind\": 30023,\n  \"content\": \"# My Article\\n\\nThis is a long-form article...\",\n  \"tags\": [\n    [\"d\", \"my-article-slug\"],\n    [\"title\", \"My Amazing Article\"],\n    [\"summary\", \"A brief summary\"],\n    [\"published_at\", \"1234567890\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#kind-9735-zap","title":"Kind 9735: Zap","text":"<p>Lightning payments:</p> <pre><code>{\n  \"kind\": 9735,\n  \"content\": \"\",\n  \"tags\": [\n    [\"bolt11\", \"lightning-invoice\"],\n    [\"description\", \"zap-request-event\"],\n    [\"p\", \"recipient-pubkey\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#tag-system","title":"Tag System","text":"<p>Tags provide structured metadata for events:</p>"},{"location":"concepts/events-and-messages/#common-tag-types","title":"Common Tag Types","text":""},{"location":"concepts/events-and-messages/#e-tags-event-references","title":"\"e\" tags - Event References","text":"<p>Reference other events:</p> <pre><code>[\"e\", \"event-id\", \"relay-url\", \"marker\", \"pubkey\"]\n</code></pre> <ul> <li><code>event-id</code>: The event being referenced</li> <li><code>relay-url</code>: Where to find the event (optional)</li> <li><code>marker</code>: \"root\", \"reply\", or \"mention\" (optional)</li> <li><code>pubkey</code>: Author of referenced event (optional)</li> </ul>"},{"location":"concepts/events-and-messages/#p-tags-pubkey-references","title":"\"p\" tags - Pubkey References","text":"<p>Reference users:</p> <pre><code>[\"p\", \"pubkey\", \"relay-url\", \"petname\"]\n</code></pre>"},{"location":"concepts/events-and-messages/#t-tags-topicshashtags","title":"\"t\" tags - Topics/Hashtags","text":"<p>Categorize content:</p> <pre><code>[\"t\", \"nostr\"]\n[\"t\", \"bitcoin\"]\n</code></pre>"},{"location":"concepts/events-and-messages/#d-tags-identifiers","title":"\"d\" tags - Identifiers","text":"<p>For replaceable events:</p> <pre><code>[\"d\", \"unique-identifier\"]\n</code></pre>"},{"location":"concepts/events-and-messages/#advanced-tags","title":"Advanced Tags","text":"<pre><code>// Content warning\n[\"content-warning\", \"reason\"]\n\n// Expiration\n[\"expiration\", \"unix-timestamp\"]\n\n// Subject line\n[\"subject\", \"Email-like subject\"]\n\n// Geographic location\n[\"g\", \"geohash\"]\n</code></pre>"},{"location":"concepts/events-and-messages/#event-creation-process","title":"Event Creation Process","text":""},{"location":"concepts/events-and-messages/#1-build-event-object","title":"1. Build Event Object","text":"<pre><code>const event = {\n  kind: 1,\n  created_at: Math.floor(Date.now() / 1000),\n  tags: [\n    [\"t\", \"nostr\"],\n    [\"p\", \"some-pubkey\"]\n  ],\n  content: \"Hello Nostr!\"\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#2-add-pubkey","title":"2. Add Pubkey","text":"<pre><code>event.pubkey = getPublicKey(privateKey)\n</code></pre>"},{"location":"concepts/events-and-messages/#3-calculate-id","title":"3. Calculate ID","text":"<pre><code>import { getEventHash } from 'nostr-tools'\n\nevent.id = getEventHash(event)\n</code></pre>"},{"location":"concepts/events-and-messages/#4-sign-event","title":"4. Sign Event","text":"<pre><code>import { signEvent } from 'nostr-tools'\n\nevent.sig = signEvent(event, privateKey)\n</code></pre>"},{"location":"concepts/events-and-messages/#5-publish-to-relays","title":"5. Publish to Relays","text":"<pre><code>relays.forEach(relay =&gt; {\n  relay.publish(event)\n})\n</code></pre>"},{"location":"concepts/events-and-messages/#event-verification","title":"Event Verification","text":"<p>When receiving events, clients must verify them:</p>"},{"location":"concepts/events-and-messages/#1-verify-id","title":"1. Verify ID","text":"<pre><code>import { getEventHash } from 'nostr-tools'\n\nconst calculatedId = getEventHash(event)\nif (calculatedId !== event.id) {\n  throw new Error('Invalid event ID')\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#2-verify-signature","title":"2. Verify Signature","text":"<pre><code>import { verifySignature } from 'nostr-tools'\n\nconst isValid = verifySignature(event)\nif (!isValid) {\n  throw new Error('Invalid signature')\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#3-check-timestamp","title":"3. Check Timestamp","text":"<pre><code>const now = Math.floor(Date.now() / 1000)\nconst age = now - event.created_at\n\n// Reject events too far in the future\nif (event.created_at &gt; now + 60) {\n  throw new Error('Event from future')\n}\n\n// Optionally reject very old events\nif (age &gt; 86400 * 30) { // 30 days\n  console.warn('Very old event')\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#event-serialization","title":"Event Serialization","text":"<p>Events must be serialized consistently for ID calculation:</p> <pre><code>// Serialization for ID calculation\nconst serialized = JSON.stringify([\n  0,\n  event.pubkey,\n  event.created_at,\n  event.kind,\n  event.tags,\n  event.content\n])\n\n// No whitespace, specific character escaping\nconst id = sha256(utf8Encode(serialized))\n</code></pre>"},{"location":"concepts/events-and-messages/#character-escaping-rules","title":"Character Escaping Rules","text":"<p>Specific characters must be escaped in content:</p> <ul> <li>Line break (<code>0x0A</code>) \u2192 <code>\\n</code></li> <li>Double quote (<code>0x22</code>) \u2192 <code>\\\"</code></li> <li>Backslash (<code>0x5C</code>) \u2192 <code>\\\\</code></li> <li>Carriage return (<code>0x0D</code>) \u2192 <code>\\r</code></li> <li>Tab (<code>0x09</code>) \u2192 <code>\\t</code></li> <li>Backspace (<code>0x08</code>) \u2192 <code>\\b</code></li> <li>Form feed (<code>0x0C</code>) \u2192 <code>\\f</code></li> </ul>"},{"location":"concepts/events-and-messages/#event-relationships","title":"Event Relationships","text":"<p>Events can reference each other to create complex structures:</p>"},{"location":"concepts/events-and-messages/#threads-replies","title":"Threads (Replies)","text":"<pre><code>{\n  \"kind\": 1,\n  \"content\": \"This is a reply\",\n  \"tags\": [\n    [\"e\", \"root-event-id\", \"\", \"root\"],\n    [\"e\", \"parent-event-id\", \"\", \"reply\"],\n    [\"p\", \"original-author-pubkey\"],\n    [\"p\", \"parent-author-pubkey\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#mentions","title":"Mentions","text":"<pre><code>{\n  \"kind\": 1,\n  \"content\": \"Hey #[0], check this out!\",\n  \"tags\": [\n    [\"p\", \"mentioned-user-pubkey\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#quotes","title":"Quotes","text":"<pre><code>{\n  \"kind\": 1,\n  \"content\": \"This is interesting: nostr:note1abc...\",\n  \"tags\": [\n    [\"q\", \"quoted-event-id\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#replaceable-events","title":"Replaceable Events","text":"<p>Some events can be replaced by newer versions:</p>"},{"location":"concepts/events-and-messages/#regular-replaceable-10000-19999","title":"Regular Replaceable (10000-19999)","text":"<p>Only the latest event for each <code>kind</code> + <code>pubkey</code> is kept:</p> <pre><code>{\n  \"kind\": 10000,\n  \"content\": \"My mute list\",\n  \"tags\": [\n    [\"p\", \"muted-pubkey-1\"],\n    [\"p\", \"muted-pubkey-2\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#parameterized-replaceable-30000-39999","title":"Parameterized Replaceable (30000-39999)","text":"<p>Latest event for each <code>kind</code> + <code>pubkey</code> + <code>d</code> tag:</p> <pre><code>{\n  \"kind\": 30023,\n  \"tags\": [\n    [\"d\", \"my-article-slug\"],\n    [\"title\", \"My Article\"]\n  ],\n  \"content\": \"Article content...\"\n}\n</code></pre>"},{"location":"concepts/events-and-messages/#event-validation-rules","title":"Event Validation Rules","text":""},{"location":"concepts/events-and-messages/#required-validations","title":"Required Validations","text":"<ul> <li><code>id</code> matches SHA-256 of serialized event</li> <li><code>sig</code> is valid Schnorr signature</li> <li><code>pubkey</code> is valid 32-byte hex</li> <li><code>created_at</code> is reasonable timestamp</li> <li><code>kind</code> is valid integer</li> <li><code>tags</code> is array of arrays of strings</li> </ul>"},{"location":"concepts/events-and-messages/#optional-validations","title":"Optional Validations","text":"<ul> <li>Content length limits</li> <li>Tag count limits</li> <li>Timestamp freshness</li> <li>Proof of work requirements</li> <li>Content filtering</li> </ul>"},{"location":"concepts/events-and-messages/#working-with-events-in-code","title":"Working with Events in Code","text":""},{"location":"concepts/events-and-messages/#creating-a-text-note","title":"Creating a Text Note","text":"<pre><code>import { finishEvent } from 'nostr-tools'\n\nconst event = finishEvent({\n  kind: 1,\n  created_at: Math.floor(Date.now() / 1000),\n  tags: [\n    [\"t\", \"hello\"],\n    [\"t\", \"nostr\"]\n  ],\n  content: \"Hello Nostr world! \ud83d\udc4b\"\n}, privateKey)\n\nconsole.log('Created event:', event)\n</code></pre>"},{"location":"concepts/events-and-messages/#creating-a-reply","title":"Creating a Reply","text":"<pre><code>const replyEvent = finishEvent({\n  kind: 1,\n  created_at: Math.floor(Date.now() / 1000),\n  tags: [\n    [\"e\", originalEvent.id, \"\", \"root\"],\n    [\"p\", originalEvent.pubkey]\n  ],\n  content: \"Great post! Thanks for sharing.\"\n}, privateKey)\n</code></pre>"},{"location":"concepts/events-and-messages/#creating-a-reaction","title":"Creating a Reaction","text":"<pre><code>const reaction = finishEvent({\n  kind: 7,\n  created_at: Math.floor(Date.now() / 1000),\n  tags: [\n    [\"e\", noteEvent.id],\n    [\"p\", noteEvent.pubkey],\n    [\"k\", \"1\"] // kind of event being reacted to\n  ],\n  content: \"\ud83e\udd19\"\n}, privateKey)\n</code></pre>"},{"location":"concepts/events-and-messages/#best-practices","title":"Best Practices","text":""},{"location":"concepts/events-and-messages/#for-event-creation","title":"For Event Creation","text":"<p>Do This</p> <ul> <li>Always set reasonable <code>created_at</code> timestamps</li> <li>Include relevant <code>p</code> tags for notifications</li> <li>Use standard tag formats</li> <li>Keep content size reasonable</li> <li>Include proper event references in replies</li> </ul> <p>Avoid This</p> <ul> <li>Creating events with future timestamps</li> <li>Omitting required <code>p</code> tags in replies</li> <li>Using non-standard tag formats</li> <li>Creating excessive tag noise</li> <li>Forgetting to handle special characters</li> </ul>"},{"location":"concepts/events-and-messages/#for-event-processing","title":"For Event Processing","text":"<ul> <li>Always verify signatures before trusting events</li> <li>Implement reasonable timestamp checks</li> <li>Handle missing or malformed fields gracefully</li> <li>Cache verification results for performance</li> <li>Rate limit event processing to prevent spam</li> </ul>"},{"location":"concepts/events-and-messages/#common-patterns","title":"Common Patterns","text":""},{"location":"concepts/events-and-messages/#thread-creation","title":"Thread Creation","text":"<pre><code>// Root post\nconst rootPost = finishEvent({\n  kind: 1,\n  content: \"Starting a new thread about Nostr events...\",\n  // ...\n}, privateKey)\n\n// Reply to root\nconst reply = finishEvent({\n  kind: 1,\n  content: \"First point: events are the core data structure\",\n  tags: [\n    [\"e\", rootPost.id, \"\", \"root\"],\n    [\"p\", rootPost.pubkey]\n  ]\n  // ...\n}, privateKey)\n</code></pre>"},{"location":"concepts/events-and-messages/#content-discovery","title":"Content Discovery","text":"<pre><code>// Subscribe to hashtag\nconst sub = relay.sub([{\n  kinds: [1],\n  \"#t\": [\"nostr\"]\n}])\n\n// Subscribe to mentions\nconst mentionSub = relay.sub([{\n  kinds: [1],\n  \"#p\": [myPubkey]\n}])\n</code></pre>"},{"location":"concepts/events-and-messages/#event-updates","title":"Event Updates","text":"<pre><code>// Replaceable event (profile)\nconst profile = finishEvent({\n  kind: 0,\n  content: JSON.stringify({\n    name: \"Alice\",\n    about: \"Nostr developer\",\n    picture: \"https://example.com/avatar.jpg\"\n  })\n  // ...\n}, privateKey)\n</code></pre>"},{"location":"concepts/events-and-messages/#next-steps","title":"Next Steps","text":"<p>Understanding events is crucial for building Nostr applications. Next, explore:</p> <ul> <li>Relays and Communication - How events travel through the network</li> <li>NIPs - Specifications for different event types</li> <li>Building Applications - Putting it all together</li> </ul> <p>Practice Exercise</p> <p>Try creating different types of events using the examples above. Start with simple text notes and gradually explore more complex event types like replies and reactions.</p>"},{"location":"concepts/keys/","title":"Keys and Identity in Nostr","text":"<p>Learning Objectives</p> <p>After this lesson, you'll understand:</p> <ul> <li>How digital identity works in the Nostr protocol</li> <li>The difference between private and public keys</li> <li>Different key formats and their purposes</li> <li>Best practices for key security and management</li> <li>Why Nostr uses cryptographic identity instead of usernames</li> </ul>"},{"location":"concepts/keys/#cryptographic-identity","title":"Cryptographic Identity","text":"<p>Nostr uses a fundamentally different approach to identity compared to traditional social media platforms. Instead of usernames and passwords managed by a central authority, Nostr employs cryptographic key pairs to establish and verify identity.</p> <p>This approach provides users with complete ownership and control over their digital identity, eliminating dependence on any central platform or service provider.</p>"},{"location":"concepts/keys/#understanding-key-pairs","title":"Understanding Key Pairs","text":""},{"location":"concepts/keys/#cryptographic-fundamentals","title":"Cryptographic Fundamentals","text":"<p>Cryptographic keys work as mathematically related pairs that enable secure digital communication:</p> <ul> <li>One-way mathematical relationship: Public keys are derived from private keys, but the reverse is computationally infeasible</li> <li>Digital signatures: Private keys create signatures that public keys can verify</li> <li>Identity verification: Signatures prove ownership without revealing the private key</li> </ul> <pre><code>graph LR\n    A[Private Key&lt;br/&gt;Secret Component] --&gt;|generates| B[Public Key&lt;br/&gt;Identity Component]\n    A --&gt;|signs| C[Messages/Events]\n    B --&gt;|verifies| C\n    B --&gt;|becomes| D[Nostr Identity]</code></pre>"},{"location":"concepts/keys/#private-key-management","title":"Private Key Management","text":""},{"location":"concepts/keys/#definition-and-purpose","title":"Definition and Purpose","text":"<p>The private key serves as the master secret that controls your entire Nostr identity. It is a cryptographically secure random number that:</p> <ul> <li>Generates your public identity: Mathematically derives your public key</li> <li>Creates digital signatures: Proves authorship of your events</li> <li>Controls all interactions: Required for posting, following, and other actions</li> <li>Cannot be recovered: Loss results in permanent identity loss</li> </ul>"},{"location":"concepts/keys/#security-requirements","title":"Security Requirements","text":"<p>Private key security is critical for maintaining control of your Nostr identity:</p> <p>Critical Security Practices</p> <p>Never Share Your Private Key - Do not transmit via email, messaging, or any digital communication - Avoid storing in plain text files or unencrypted formats - Never enter into untrusted applications or websites</p> <p>Secure Storage Methods - Use hardware wallets for maximum security - Employ encrypted password managers - Create offline, encrypted backups - Store in multiple secure locations</p>"},{"location":"concepts/keys/#key-format-examples","title":"Key Format Examples","text":"Hex Formatnsec Format (Bech32) <pre><code>d63b64d9c2c4f8c7b8e9f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2\n</code></pre> <pre><code>nsec1mclkfkwu2n7v0wuwn6d2kwx56mn0029ceuxr6ul6xjm2k6l7qxsqrxqhp8\n</code></pre>"},{"location":"concepts/keys/#public-key-distribution","title":"Public Key Distribution","text":""},{"location":"concepts/keys/#purpose-and-function","title":"Purpose and Function","text":"<p>Your public key serves as your permanent Nostr address and identity. It enables:</p> <ul> <li>Global identification: Unique address in the Nostr network</li> <li>Signature verification: Others can verify your message authenticity  </li> <li>Social connections: Followers use this to find and follow you</li> <li>Cross-client compatibility: Works across all Nostr applications</li> </ul>"},{"location":"concepts/keys/#sharing-guidelines","title":"Sharing Guidelines","text":"<p>Unlike private keys, public keys are designed for open distribution:</p> <p>\u2705 Safe to share publicly \u2705 Include in social media profiles \u2705 Display on websites and business cards \u2705 Send via any communication method \u2705 Embed in QR codes</p>"},{"location":"concepts/keys/#public-key-formats","title":"Public Key Formats","text":"Hex Formatnpub Format (Bech32) <pre><code>a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2\n</code></pre> <pre><code>npub15xkv85x2um6h3jfgxhj259x54fvv7n7k9c5wxq9ewn64fhux5xeqz8p2qv\n</code></pre>"},{"location":"concepts/keys/#mathematical-relationship","title":"Mathematical Relationship","text":"<p>The relationship between private and public keys relies on elliptic curve cryptography:</p>"},{"location":"concepts/keys/#key-generation-process","title":"Key Generation Process","text":"<pre><code>graph TB\n    A[Cryptographically Secure&lt;br/&gt;Random Number] --&gt;|secp256k1| B[Private Key]\n    B --&gt;|Elliptic Curve&lt;br/&gt;Point Multiplication| C[Public Key]\n    B --&gt;|ECDSA| D[Digital Signatures]\n    C --&gt;|verifies| D</code></pre>"},{"location":"concepts/keys/#security-properties","title":"Security Properties","text":"<ul> <li>One-way function: Computing public key from private key is fast</li> <li>Computational security: Deriving private key from public key is infeasible</li> <li>Signature uniqueness: Each message produces a unique signature</li> <li>Non-repudiation: Signatures cannot be forged without the private key</li> </ul>"},{"location":"concepts/keys/#your-private-key-in-detail","title":"Your Private Key in Detail","text":"<p>Let's dive deeper into your most important digital possession.</p>"},{"location":"concepts/keys/#what-makes-it-special","title":"What Makes It Special","text":"<ul> <li>Completely random: Generated using cryptographically secure randomness</li> <li>Astronomically unique: The chances of two people getting the same key are basically zero</li> <li>Mathematically powerful: Can create unlimited verified signatures</li> <li>Irreplaceable: There's no customer service to call if you lose it</li> </ul>"},{"location":"concepts/keys/#what-it-looks-like","title":"What It Looks Like","text":"Hex Format (Raw)nsec Format (User-Friendly) <pre><code>d63b64d9c2c4f8c7b8e9f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2\n</code></pre> <pre><code>nsec1mclkfkwu2n7v0wuwn6d2kwx56mn0029ceuxr6ul6xjm2k6l7qxsqrxqhp8\n</code></pre>"},{"location":"concepts/keys/#creating-your-first-key-pair","title":"Creating Your First Key Pair","text":"JavaScriptPythonRust <pre><code>import { generatePrivateKey } from 'nostr-tools'\n\n// Generate your unique identity\nconst privateKey = generatePrivateKey()\nconsole.log('Your private key (keep secret!):', privateKey)\n</code></pre> <pre><code>from nostr.key import PrivateKey\n\n// Create your digital identity\nprivate_key = PrivateKey()\nprint(f\"Your private key (guard this!): {private_key.hex()}\")\n</code></pre> <pre><code>use nostr_sdk::prelude::*;\n\n// Generate your keys\nlet keys = Keys::generate();\nprintln!(\"Private key (keep safe!): {}\", keys.secret_key().display_secret());\n</code></pre>"},{"location":"concepts/keys/#your-public-key-in-detail","title":"Your Public Key in Detail","text":"<p>Now let's explore your public identity - the part of you that the Nostr world gets to see.</p>"},{"location":"concepts/keys/#what-makes-it-perfect-for-sharing","title":"What Makes It Perfect for Sharing","text":"<ul> <li>Derived from private: Mathematically created from your private key</li> <li>Always the same: Your private key always generates the same public key</li> <li>Safe to broadcast: No security risk in sharing it widely</li> <li>Verifiable: Others can use it to confirm your signatures are real</li> </ul>"},{"location":"concepts/keys/#key-formats-and-encoding","title":"Key Formats and Encoding","text":"<p>Nostr uses different formats for displaying keys to users:</p>"},{"location":"concepts/keys/#hex-format","title":"Hex Format","text":"<ul> <li>Raw format: 64 character hexadecimal string</li> <li>Use case: Internal processing, APIs</li> <li>Example: <code>d63b64d9c2c4f8c7b8e9f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2</code></li> </ul>"},{"location":"concepts/keys/#bech32-format-nip-19","title":"Bech32 Format (NIP-19)","text":"<ul> <li>User-friendly: Includes checksums and prefixes</li> <li>Private keys: Start with <code>nsec1</code></li> <li>Public keys: Start with <code>npub1</code></li> <li>Benefits: Error detection, easier to copy/paste</li> </ul> <p>Format Conversion</p> <p>Most Nostr libraries provide functions to convert between formats:</p> <pre><code>import { nip19 } from 'nostr-tools'\n\n// Hex to bech32\nconst npub = nip19.npubEncode(hexPublicKey)\nconst nsec = nip19.nsecEncode(hexPrivateKey)\n\n// Bech32 to hex\nconst { type, data } = nip19.decode(npub)\n</code></pre>"},{"location":"concepts/keys/#digital-signatures","title":"Digital Signatures","text":"<p>Your private key is used to create digital signatures that prove authenticity:</p>"},{"location":"concepts/keys/#how-signatures-work","title":"How Signatures Work","text":"<ol> <li>Create Event: You compose a message or event</li> <li>Hash Content: The event content is hashed</li> <li>Sign Hash: Your private key signs the hash</li> <li>Attach Signature: The signature is included with the event</li> <li>Verify: Others use your public key to verify the signature</li> </ol>"},{"location":"concepts/keys/#example-signing-an-event","title":"Example: Signing an Event","text":"JavaScriptPython <pre><code>import { finishEvent } from 'nostr-tools'\n\nconst event = {\n    kind: 1,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [],\n    content: 'Hello Nostr!'\n}\n\nconst signedEvent = finishEvent(event, privateKey)\nconsole.log('Signed event:', signedEvent)\n</code></pre> <pre><code>from nostr.event import Event\nfrom nostr.key import PrivateKey\nimport time\n\nprivate_key = PrivateKey()\n\nevent = Event(\n    kind=1,\n    content=\"Hello Nostr!\",\n    created_at=int(time.time())\n)\n\nprivate_key.sign_event(event)\nprint(f\"Signed event: {event.to_json()}\")\n</code></pre>"},{"location":"concepts/keys/#identity-without-usernames","title":"Identity Without Usernames","text":""},{"location":"concepts/keys/#traditional-vs-nostr-identity","title":"Traditional vs Nostr Identity","text":"Traditional Social Media Nostr Username + Password Cryptographic Keys Platform controls identity You control identity Can be banned/suspended Censorship resistant Tied to one platform Portable across clients Password can be reset Keys cannot be recovered"},{"location":"concepts/keys/#benefits-of-cryptographic-identity","title":"Benefits of Cryptographic Identity","text":"<p>Advantages</p> <ul> <li>True Ownership: You own your identity, not a platform</li> <li>Portability: Use the same identity across all Nostr clients</li> <li>Censorship Resistance: No central authority can ban you</li> <li>Verification: Cryptographic proof of authenticity</li> <li>Privacy: No personal information required</li> </ul> <p>Responsibilities</p> <ul> <li>Key Security: You must protect your private key</li> <li>No Recovery: Lost keys mean lost identity</li> <li>Backup Important: Always backup your keys securely</li> </ul>"},{"location":"concepts/keys/#key-management-best-practices","title":"Key Management Best Practices","text":""},{"location":"concepts/keys/#secure-storage","title":"Secure Storage","text":"<p>Never Do This</p> <ul> <li>Store private keys in plain text files</li> <li>Share private keys via email or messaging</li> <li>Use the same key across multiple devices without encryption</li> <li>Store keys in browser localStorage without encryption</li> </ul> <p>Best Practices</p> <ul> <li>Use hardware wallets when possible</li> <li>Encrypt private keys with strong passwords</li> <li>Use secure key management software</li> <li>Create offline backups in multiple locations</li> <li>Consider using key derivation for multiple identities</li> </ul>"},{"location":"concepts/keys/#key-backup-strategies","title":"Key Backup Strategies","text":"Paper BackupDigital BackupHardware Wallet <pre><code>1. Write down your private key (nsec format)\n2. Store in a fireproof safe\n3. Consider multiple copies in different locations\n4. Use tamper-evident storage\n</code></pre> <pre><code>1. Encrypt with strong password\n2. Store on multiple devices\n3. Use cloud storage with encryption\n4. Regular backup verification\n</code></pre> <pre><code>1. Use dedicated hardware device\n2. Secure with PIN/passphrase\n3. Backup seed phrase securely\n4. Test recovery process\n</code></pre>"},{"location":"concepts/keys/#multiple-identities","title":"Multiple Identities","text":"<p>You can have multiple Nostr identities for different purposes:</p>"},{"location":"concepts/keys/#use-cases","title":"Use Cases","text":"<ul> <li>Personal: Your main social identity</li> <li>Professional: Work-related content</li> <li>Anonymous: Privacy-focused interactions</li> <li>Bot: Automated accounts</li> <li>Testing: Development and experimentation</li> </ul>"},{"location":"concepts/keys/#managing-multiple-keys","title":"Managing Multiple Keys","text":"JavaScript <pre><code>class NostrIdentityManager {\n    constructor() {\n        this.identities = new Map()\n    }\n\n    createIdentity(name) {\n        const privateKey = generatePrivateKey()\n        const publicKey = getPublicKey(privateKey)\n\n        this.identities.set(name, {\n            privateKey,\n            publicKey,\n            npub: nip19.npubEncode(publicKey)\n        })\n\n        return this.identities.get(name)\n    }\n\n    getIdentity(name) {\n        return this.identities.get(name)\n    }\n\n    listIdentities() {\n        return Array.from(this.identities.keys())\n    }\n}\n</code></pre>"},{"location":"concepts/keys/#interactive-exercise","title":"Interactive Exercise","text":"<p>Let's practice working with keys:</p> <p>Try This</p> <ol> <li>Generate a new key pair</li> <li>Convert between hex and bech32 formats</li> <li>Create and sign a simple event</li> <li>Verify the signature</li> </ol> <p>Use the code examples above to experiment with key generation and signing.</p>"},{"location":"concepts/keys/#common-pitfalls","title":"Common Pitfalls","text":"<p>Avoid These Mistakes</p> <p>Key Confusion - Mixing up private and public keys - Using wrong key formats - Sharing private keys accidentally</p> <p>Security Issues - Storing keys insecurely - Not backing up keys - Using weak random number generation</p> <p>Format Errors - Invalid hex characters - Incorrect bech32 encoding - Wrong key length</p>"},{"location":"concepts/keys/#next-steps","title":"Next Steps","text":"<p>Now that you understand keys and identity, let's explore how events and messages work in Nostr.</p>      :material-arrow-right: Events &amp; Messages \u2192"},{"location":"concepts/keys/#quick-quiz","title":"Quick Quiz","text":"<p>Test Your Understanding</p> <ol> <li>What's the difference between a private key and public key?</li> <li>Which key format starts with \"npub1\"?</li> <li>What happens if you lose your private key?</li> <li>Why doesn't Nostr use usernames and passwords?</li> <li>What is the purpose of digital signatures?</li> </ol> Answers <ol> <li>Private key is secret and used for signing; public key is shared and used for verification</li> <li>Public keys in bech32 format start with \"npub1\"</li> <li>You lose access to that identity forever - there's no recovery</li> <li>Cryptographic keys provide better security, ownership, and censorship resistance</li> <li>Digital signatures prove authenticity and prevent tampering </li> </ol>"},{"location":"concepts/nips/","title":"Understanding NIPs (Nostr Implementation Possibilities)","text":"<p>Learning Objectives</p> <p>After this lesson, you'll understand:</p> <ul> <li>What NIPs are and why they're essential</li> <li>How NIPs enable interoperability and innovation</li> <li>Core NIPs that every implementation should support</li> <li>The NIP development and adoption process</li> <li>How to read and implement NIPs</li> </ul> <p>NIPs are the backbone of Nostr's extensibility and standardization. They define how different parts of the protocol work and enable interoperability between clients and relays.</p>"},{"location":"concepts/nips/#what-are-nips","title":"What are NIPs?","text":"<p>NIP stands for Nostr Implementation Possibility. NIPs are technical specifications that describe:</p> <ul> <li>Protocol features and extensions</li> <li>Event formats and structures</li> <li>Client and relay behaviors</li> <li>Cryptographic standards</li> <li>Communication patterns</li> </ul> <p>Think of NIPs as the \"rules of the game\" that all Nostr applications follow to ensure they can work together seamlessly.</p>"},{"location":"concepts/nips/#why-nips-matter","title":"Why NIPs Matter","text":""},{"location":"concepts/nips/#interoperability","title":"\ud83d\udd17 Interoperability","text":"<p>NIPs ensure that a note posted from Damus can be read on Amethyst, Iris, or any other Nostr client.</p>"},{"location":"concepts/nips/#innovation","title":"\ud83d\ude80 Innovation","text":"<p>New features can be proposed, tested, and standardized through the NIP process.</p>"},{"location":"concepts/nips/#standardization","title":"\ud83d\udccb Standardization","text":"<p>Common patterns and best practices are documented for developers.</p>"},{"location":"concepts/nips/#evolution","title":"\ud83d\udd04 Evolution","text":"<p>The protocol can evolve while maintaining backward compatibility.</p>"},{"location":"concepts/nips/#core-nips-essential","title":"Core NIPs (Essential)","text":"<p>These NIPs form the foundation of Nostr and should be implemented by all clients:</p>"},{"location":"concepts/nips/#nip-01-basic-protocol-flow-description","title":"NIP-01: Basic Protocol Flow Description","text":"<p>The foundation of Nostr - defines events, signatures, and basic communication.</p> <p>Key concepts: - Event structure and serialization - Digital signatures using Schnorr - Basic relay communication patterns - Event kinds and their meanings</p> <pre><code>{\n  \"id\": \"event-id\",\n  \"pubkey\": \"author-pubkey\",\n  \"created_at\": 1234567890,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"Hello Nostr!\",\n  \"sig\": \"signature\"\n}\n</code></pre>"},{"location":"concepts/nips/#nip-02-follow-list","title":"NIP-02: Follow List","text":"<p>Defines how users follow each other and manage contact lists.</p> <pre><code>{\n  \"kind\": 3,\n  \"tags\": [\n    [\"p\", \"pubkey1\", \"relay-url\", \"alice\"],\n    [\"p\", \"pubkey2\", \"relay-url\", \"bob\"]\n  ],\n  \"content\": \"\"\n}\n</code></pre> <p>Use cases: - Building social graphs - Contact management - Relay recommendations - Petname systems</p>"},{"location":"concepts/nips/#nip-19-bech32-encoded-entities","title":"NIP-19: bech32-encoded entities","text":"<p>Human-readable identifiers for Nostr entities.</p> <pre><code>npub1... (public keys)\nnsec1... (private keys)  \nnote1... (note IDs)\nnprofile1... (profiles with relay hints)\nnevent1... (events with relay hints)\nnaddr1... (addresses for replaceable events)\nnrelay1... (relay URLs)\n</code></pre>"},{"location":"concepts/nips/#communication-nips","title":"Communication NIPs","text":""},{"location":"concepts/nips/#nip-04-encrypted-direct-message-deprecated","title":"NIP-04: Encrypted Direct Message (Deprecated)","text":"<p>\u26a0\ufe0f Note: Deprecated in favor of NIP-17</p> <p>Enables private messaging between users using shared secrets.</p> <pre><code>{\n  \"kind\": 4,\n  \"tags\": [[\"p\", \"recipient-pubkey\"]],\n  \"content\": \"encrypted-message-content?iv=initialization-vector\"\n}\n</code></pre>"},{"location":"concepts/nips/#nip-17-private-direct-messages-current-standard","title":"NIP-17: Private Direct Messages (Current Standard)","text":"<p>Modern encrypted messaging with improved security.</p> <p>Key improvements: - Gift wrap pattern for metadata protection - Better forward secrecy - Reduced metadata leakage</p>"},{"location":"concepts/nips/#nip-10-text-notes-and-threads","title":"NIP-10: Text Notes and Threads","text":"<p>Standardizes how to reference other notes and create threads.</p> <pre><code>{\n  \"kind\": 1,\n  \"tags\": [\n    [\"e\", \"root-event-id\", \"\", \"root\"],\n    [\"e\", \"reply-to-id\", \"\", \"reply\"],\n    [\"p\", \"mentioned-pubkey\"]\n  ],\n  \"content\": \"This is a reply\"\n}\n</code></pre> <p>Tag markers: - <code>root</code>: Points to the thread root - <code>reply</code>: Points to the direct parent - <code>mention</code>: References without reply semantics</p>"},{"location":"concepts/nips/#identity-and-verification","title":"Identity and Verification","text":""},{"location":"concepts/nips/#nip-05-mapping-nostr-keys-to-dns-based-internet-identifiers","title":"NIP-05: Mapping Nostr keys to DNS-based internet identifiers","text":"<p>Links Nostr identities to domain names for verification.</p> <p>Process: 1. User sets <code>nip05</code> field in profile: <code>\"alice@example.com\"</code> 2. Client fetches <code>https://example.com/.well-known/nostr.json?name=alice</code> 3. Verifies pubkey matches</p> <pre><code>{\n  \"names\": {\n    \"alice\": \"npub1...\"\n  },\n  \"relays\": {\n    \"npub1...\": [\"wss://relay.example.com\"]\n  }\n}\n</code></pre>"},{"location":"concepts/nips/#nip-39-external-identities-in-profiles","title":"NIP-39: External Identities in Profiles","text":"<p>Link external platforms to Nostr profiles.</p> <pre><code>{\n  \"kind\": 0,\n  \"content\": \"{\\\"name\\\":\\\"Alice\\\"}\",\n  \"tags\": [\n    [\"i\", \"github:alice\", \"https://github.com/alice\"],\n    [\"i\", \"twitter:alice_crypto\", \"https://twitter.com/alice_crypto\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/nips/#content-types","title":"Content Types","text":""},{"location":"concepts/nips/#nip-23-long-form-content","title":"NIP-23: Long-form Content","text":"<p>Enables publishing articles and long-form content.</p> <pre><code>{\n  \"kind\": 30023,\n  \"tags\": [\n    [\"d\", \"article-slug\"],\n    [\"title\", \"My Article Title\"],\n    [\"summary\", \"Article summary\"],\n    [\"published_at\", \"1234567890\"]\n  ],\n  \"content\": \"# Article Content\\n\\nThis is a long article...\"\n}\n</code></pre>"},{"location":"concepts/nips/#nip-25-reactions","title":"NIP-25: Reactions","text":"<p>Standardizes reactions (likes, hearts, etc.) to events.</p> <pre><code>{\n  \"kind\": 7,\n  \"tags\": [\n    [\"e\", \"reacted-event-id\"],\n    [\"p\", \"reacted-event-author\"],\n    [\"k\", \"1\"]\n  ],\n  \"content\": \"\ud83e\udd19\"\n}\n</code></pre>"},{"location":"concepts/nips/#nip-18-reposts","title":"NIP-18: Reposts","text":"<p>Two types of reposts:</p> <p>Generic Repost (Kind 6): <pre><code>{\n  \"kind\": 6,\n  \"tags\": [[\"e\", \"reposted-event-id\"]],\n  \"content\": \"\"\n}\n</code></pre></p> <p>Quote Repost (Kind 1): <pre><code>{\n  \"kind\": 1,\n  \"tags\": [[\"q\", \"quoted-event-id\"]],\n  \"content\": \"This is interesting: nostr:note1...\"\n}\n</code></pre></p>"},{"location":"concepts/nips/#lightning-integration","title":"Lightning Integration","text":""},{"location":"concepts/nips/#nip-57-lightning-zaps","title":"NIP-57: Lightning Zaps","text":"<p>Enables Bitcoin Lightning payments (zaps) on Nostr.</p> <p>Zap Request (Kind 9734): <pre><code>{\n  \"kind\": 9734,\n  \"tags\": [\n    [\"p\", \"recipient-pubkey\"],\n    [\"amount\", \"21000\"],\n    [\"relays\", \"wss://relay1.com\", \"wss://relay2.com\"]\n  ],\n  \"content\": \"Great post! \u26a1\"\n}\n</code></pre></p> <p>Zap Receipt (Kind 9735): <pre><code>{\n  \"kind\": 9735,\n  \"tags\": [\n    [\"bolt11\", \"lightning-invoice\"],\n    [\"description\", \"zap-request-event\"],\n    [\"p\", \"recipient-pubkey\"]\n  ]\n}\n</code></pre></p>"},{"location":"concepts/nips/#nip-47-wallet-connect","title":"NIP-47: Wallet Connect","text":"<p>Allows remote wallet control for Lightning payments.</p> <p>Supported commands: - <code>pay_invoice</code> - <code>pay_keysend</code> - <code>make_invoice</code> - <code>lookup_invoice</code> - <code>get_balance</code> - <code>get_info</code></p>"},{"location":"concepts/nips/#relay-operations","title":"Relay Operations","text":""},{"location":"concepts/nips/#nip-11-relay-information-document","title":"NIP-11: Relay Information Document","text":"<p>Relays provide metadata about their capabilities.</p> <pre><code>{\n  \"name\": \"My Relay\",\n  \"description\": \"A Nostr relay\",\n  \"pubkey\": \"relay-pubkey\",\n  \"contact\": \"admin@relay.com\",\n  \"supported_nips\": [1, 2, 9, 11, 15, 16, 20, 22],\n  \"software\": \"strfry\",\n  \"version\": \"0.9.6\",\n  \"limitation\": {\n    \"max_message_length\": 16384,\n    \"max_subscriptions\": 300,\n    \"max_limit\": 5000,\n    \"auth_required\": false,\n    \"payment_required\": false\n  }\n}\n</code></pre>"},{"location":"concepts/nips/#nip-42-authentication-of-clients-to-relays","title":"NIP-42: Authentication of clients to relays","text":"<p>Enables authenticated connections to relays.</p> <p>Authentication flow: 1. Relay sends AUTH challenge 2. Client signs challenge with private key 3. Relay verifies signature 4. Authenticated session established</p>"},{"location":"concepts/nips/#nip-50-search-capability","title":"NIP-50: Search Capability","text":"<p>Standardizes search functionality across relays.</p> <pre><code>{\n  \"kinds\": [1],\n  \"search\": \"nostr protocol\",\n  \"limit\": 20\n}\n</code></pre>"},{"location":"concepts/nips/#advanced-features","title":"Advanced Features","text":""},{"location":"concepts/nips/#nip-26-delegated-event-signing-unrecommended","title":"NIP-26: Delegated Event Signing (Unrecommended)","text":"<p>\u26a0\ufe0f Note: Adds complexity for little gain</p> <p>Allows delegation of signing authority to other keys.</p>"},{"location":"concepts/nips/#nip-44-encrypted-payloads-versioned","title":"NIP-44: Encrypted Payloads (Versioned)","text":"<p>Improved encryption standard for sensitive data.</p> <p>Version 2 features: - ChaCha20-Poly1305 encryption - HMAC authentication - Versioned format for upgrades</p>"},{"location":"concepts/nips/#nip-59-gift-wrap","title":"NIP-59: Gift Wrap","text":"<p>Advanced encryption pattern for maximum privacy.</p> <p>Layers: 1. Rumor: The actual event content 2. Seal: Encrypted rumor with metadata 3. Gift Wrap: Public event containing the seal</p>"},{"location":"concepts/nips/#nip-65-relay-list-metadata","title":"NIP-65: Relay List Metadata","text":"<p>Users publish their preferred relays.</p> <pre><code>{\n  \"kind\": 10002,\n  \"tags\": [\n    [\"r\", \"wss://relay1.com\"],\n    [\"r\", \"wss://relay2.com\", \"write\"],\n    [\"r\", \"wss://relay3.com\", \"read\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/nips/#specialized-applications","title":"Specialized Applications","text":""},{"location":"concepts/nips/#nip-15-nostr-marketplace","title":"NIP-15: Nostr Marketplace","text":"<p>E-commerce on Nostr.</p> <p>Product listing (Kind 30017): <pre><code>{\n  \"kind\": 30017,\n  \"tags\": [\n    [\"d\", \"product-id\"],\n    [\"title\", \"Product Name\"],\n    [\"price\", \"100\", \"USD\"],\n    [\"location\", \"New York, NY\"]\n  ],\n  \"content\": \"{\\\"name\\\":\\\"Product\\\",\\\"description\\\":\\\"...\\\"}\"\n}\n</code></pre></p>"},{"location":"concepts/nips/#nip-52-calendar-events","title":"NIP-52: Calendar Events","text":"<p>Event planning and scheduling.</p> <p>Time-based event (Kind 31923): <pre><code>{\n  \"kind\": 31923,\n  \"tags\": [\n    [\"d\", \"event-id\"],\n    [\"title\", \"Nostr Meetup\"],\n    [\"start\", \"1234567890\"],\n    [\"end\", \"1234571490\"],\n    [\"location\", \"San Francisco\"]\n  ]\n}\n</code></pre></p>"},{"location":"concepts/nips/#nip-53-live-activities","title":"NIP-53: Live Activities","text":"<p>Real-time streaming and live events.</p> <p>Live event (Kind 30311): <pre><code>{\n  \"kind\": 30311,\n  \"tags\": [\n    [\"d\", \"stream-id\"],\n    [\"title\", \"Live Coding Session\"],\n    [\"streaming\", \"https://stream.example.com\"],\n    [\"status\", \"live\"]\n  ]\n}\n</code></pre></p>"},{"location":"concepts/nips/#development-and-management","title":"Development and Management","text":""},{"location":"concepts/nips/#nip-34-git-stuff","title":"NIP-34: git stuff","text":"<p>Git repository management on Nostr.</p> <p>Repository announcement (Kind 30617): <pre><code>{\n  \"kind\": 30617,\n  \"tags\": [\n    [\"d\", \"repo-id\"],\n    [\"name\", \"my-project\"],\n    [\"clone\", \"https://github.com/user/repo\"],\n    [\"web\", \"https://github.com/user/repo\"]\n  ]\n}\n</code></pre></p>"},{"location":"concepts/nips/#nip-90-data-vending-machines","title":"NIP-90: Data Vending Machines","text":"<p>Decentralized computing services.</p> <p>Job request (Kind 5000-5999): <pre><code>{\n  \"kind\": 5000,\n  \"tags\": [\n    [\"i\", \"input-data\"],\n    [\"output\", \"text/plain\"],\n    [\"relays\", \"wss://relay.com\"]\n  ],\n  \"content\": \"Please analyze this data\"\n}\n</code></pre></p>"},{"location":"concepts/nips/#complete-nip-reference","title":"Complete NIP Reference","text":"<p>Based on the protocol document, here are all current NIPs:</p>"},{"location":"concepts/nips/#core-protocol","title":"Core Protocol","text":"<ul> <li>NIP-01: Basic protocol flow description</li> <li>NIP-02: Follow List</li> <li>NIP-03: OpenTimestamps Attestations for Events</li> <li>NIP-04: Encrypted Direct Message (deprecated)</li> <li>NIP-05: Mapping Nostr keys to DNS-based internet identifiers</li> <li>NIP-06: Basic key derivation from mnemonic seed phrase</li> <li>NIP-07: window.nostr capability for web browsers</li> <li>NIP-08: Handling Mentions (deprecated)</li> <li>NIP-09: Event Deletion Request</li> <li>NIP-10: Text Notes and Threads</li> <li>NIP-11: Relay Information Document</li> <li>NIP-13: Proof of Work</li> <li>NIP-14: Subject tag in text events</li> <li>NIP-15: Nostr Marketplace</li> </ul>"},{"location":"concepts/nips/#communication-social","title":"Communication &amp; Social","text":"<ul> <li>NIP-17: Private Direct Messages</li> <li>NIP-18: Reposts</li> <li>NIP-19: bech32-encoded entities</li> <li>NIP-21: nostr: URI scheme</li> <li>NIP-22: Comment</li> <li>NIP-23: Long-form Content</li> <li>NIP-24: Extra metadata fields and tags</li> <li>NIP-25: Reactions</li> <li>NIP-26: Delegated Event Signing (unrecommended)</li> <li>NIP-27: Text Note References</li> <li>NIP-28: Public Chat</li> </ul>"},{"location":"concepts/nips/#advanced-features_1","title":"Advanced Features","text":"<ul> <li>NIP-29: Relay-based Groups</li> <li>NIP-30: Custom Emoji</li> <li>NIP-31: Dealing with Unknown Events</li> <li>NIP-32: Labeling</li> <li>NIP-34: git stuff</li> <li>NIP-35: Torrents</li> <li>NIP-36: Sensitive Content</li> <li>NIP-37: Draft Events</li> <li>NIP-38: User Statuses</li> <li>NIP-39: External Identities in Profiles</li> <li>NIP-40: Expiration Timestamp</li> </ul>"},{"location":"concepts/nips/#authentication-security","title":"Authentication &amp; Security","text":"<ul> <li>NIP-42: Authentication of clients to relays</li> <li>NIP-44: Encrypted Payloads (Versioned)</li> <li>NIP-45: Counting results</li> <li>NIP-46: Nostr Remote Signing</li> <li>NIP-47: Nostr Wallet Connect</li> <li>NIP-48: Proxy Tags</li> <li>NIP-49: Private Key Encryption</li> </ul>"},{"location":"concepts/nips/#discovery-search","title":"Discovery &amp; Search","text":"<ul> <li>NIP-50: Search Capability</li> <li>NIP-51: Lists</li> <li>NIP-52: Calendar Events</li> <li>NIP-53: Live Activities</li> <li>NIP-54: Wiki</li> <li>NIP-55: Android Signer Application</li> <li>NIP-56: Reporting</li> <li>NIP-57: Lightning Zaps</li> <li>NIP-58: Badges</li> <li>NIP-59: Gift Wrap</li> </ul>"},{"location":"concepts/nips/#specialized-applications_1","title":"Specialized Applications","text":"<ul> <li>NIP-60: Cashu Wallet</li> <li>NIP-61: Nutzaps</li> <li>NIP-62: Request to Vanish</li> <li>NIP-64: Chess (PGN)</li> <li>NIP-65: Relay List Metadata</li> <li>NIP-66: Relay Discovery and Liveness Monitoring</li> <li>NIP-68: Picture-first feeds</li> <li>NIP-69: Peer-to-peer Order events</li> <li>NIP-70: Protected Events</li> <li>NIP-71: Video Events</li> <li>NIP-72: Moderated Communities</li> <li>NIP-73: External Content IDs</li> <li>NIP-75: Zap Goals</li> <li>NIP-77: Negentropy Syncing</li> <li>NIP-78: Application-specific data</li> <li>NIP-7D: Threads</li> <li>NIP-84: Highlights</li> </ul>"},{"location":"concepts/nips/#infrastructure-tools","title":"Infrastructure &amp; Tools","text":"<ul> <li>NIP-86: Relay Management API</li> <li>NIP-88: Polls</li> <li>NIP-89: Recommended Application Handlers</li> <li>NIP-90: Data Vending Machines</li> <li>NIP-92: Media Attachments</li> <li>NIP-94: File Metadata</li> <li>NIP-96: HTTP File Storage Integration</li> <li>NIP-98: HTTP Auth</li> <li>NIP-99: Classified Listings</li> </ul>"},{"location":"concepts/nips/#nip-status-and-development","title":"NIP Status and Development","text":""},{"location":"concepts/nips/#status-levels","title":"Status Levels","text":"<ul> <li>Draft: Under active development, subject to changes</li> <li>Proposed: Stable specification, ready for implementation  </li> <li>Final: Widely implemented and stable</li> <li>Deprecated: No longer recommended</li> </ul>"},{"location":"concepts/nips/#development-process","title":"Development Process","text":"<ol> <li>Proposal: Identify need and write initial specification</li> <li>Discussion: Community review and feedback</li> <li>Implementation: Prototype and test</li> <li>Adoption: Multiple implementations and usage</li> <li>Finalization: Specification stabilizes</li> </ol>"},{"location":"concepts/nips/#contributing-to-nips","title":"Contributing to NIPs","text":"<p>How to contribute: - Join discussions on GitHub and Telegram - Propose improvements to existing NIPs - Submit new NIPs for missing functionality - Implement and test proposed specifications - Provide feedback on draft NIPs</p> <p>NIP writing guidelines: - Be specific and unambiguous - Include examples and test cases - Consider security implications - Ensure backward compatibility when possible - Follow existing formatting conventions</p>"},{"location":"concepts/nips/#implementation-strategy","title":"Implementation Strategy","text":""},{"location":"concepts/nips/#for-client-developers","title":"For Client Developers","text":"<p>Minimum viable client: - NIP-01 (Basic protocol) - NIP-02 (Contact lists) - NIP-19 (Bech32 encoding) - NIP-25 (Reactions)</p> <p>Enhanced client: - NIP-10 (Text note references) - NIP-17 (Private messages) - NIP-23 (Long-form content) - NIP-57 (Lightning zaps)</p> <p>Advanced client: - NIP-42 (Relay authentication) - NIP-50 (Search) - NIP-65 (Relay lists) - Application-specific NIPs</p>"},{"location":"concepts/nips/#for-relay-operators","title":"For Relay Operators","text":"<p>Basic relay: - NIP-01 (Basic protocol) - NIP-11 (Relay information) - NIP-20 (Command results)</p> <p>Enhanced relay: - NIP-42 (Authentication) - NIP-50 (Search) - NIP-65 (Relay metadata)</p>"},{"location":"concepts/nips/#testing-nip-compatibility","title":"Testing NIP Compatibility","text":""},{"location":"concepts/nips/#client-testing","title":"Client Testing","text":"<pre><code>// Check which NIPs a client supports\nconst supportedNIPs = client.getSupportedNIPs()\nconsole.log('Supported NIPs:', supportedNIPs)\n\n// Test specific functionality\nif (supportedNIPs.includes(57)) {\n  // Client supports zaps\n  enableZapFeatures()\n}\n</code></pre>"},{"location":"concepts/nips/#relay-testing","title":"Relay Testing","text":"<pre><code># Query relay information\ncurl -H \"Accept: application/nostr+json\" https://relay.example.com\n\n# Check supported NIPs\n{\n  \"supported_nips\": [1, 2, 9, 11, 15, 16, 20, 22, 33, 40]\n}\n</code></pre>"},{"location":"concepts/nips/#resources","title":"Resources","text":"<ul> <li>NIPs Repository: github.com/nostr-protocol/nips</li> <li>NIP Discussion: Telegram</li> <li>Implementation Examples: github.com/nostr-protocol/nostr</li> <li>NIP Status Tracker: nips.nostr.com</li> </ul> <p>Stay Updated</p> <p>NIPs are constantly evolving. Follow the GitHub repository and join community discussions to stay informed about new developments and proposals.</p> <p>Implementation Strategy</p> <p>Start with core NIPs (1, 2, 19) and gradually add more advanced features. Focus on interoperability and user experience over feature completeness.</p>"},{"location":"concepts/nips/#next-steps","title":"Next Steps","text":"<p>Now that you understand NIPs, explore:</p> <ul> <li>Relays and Communication - How NIPs work in practice</li> <li>Building Applications - Implementing NIPs in code</li> <li>Advanced Features - Specialized NIPs for your use case</li> </ul>"},{"location":"concepts/nostr-fundamentals/","title":"Nostr Fundamentals: What Does Nostr Stand For?","text":"<p>Nostr stands for \"Notes and Other Stuff Transmitted by Relays\" - a simple yet powerful protocol for decentralized social networking and communication.</p>"},{"location":"concepts/nostr-fundamentals/#breaking-down-the-acronym","title":"Breaking Down the Acronym","text":""},{"location":"concepts/nostr-fundamentals/#n-notes","title":"N - Notes","text":"<p>The primary content type in Nostr. Notes are short messages, similar to tweets, that users publish to share thoughts, updates, and information.</p>"},{"location":"concepts/nostr-fundamentals/#o-other-stuff","title":"O - Other Stuff","text":"<p>Nostr isn't limited to just text notes. \"Other stuff\" includes: - Images and media - Long-form articles - Direct messages - Reactions and likes - Lightning payments (zaps) - Live events and streams - Marketplace listings - And much more...</p>"},{"location":"concepts/nostr-fundamentals/#t-transmitted","title":"T - Transmitted","text":"<p>Data flows through the network via a simple, standardized protocol using WebSockets and JSON.</p>"},{"location":"concepts/nostr-fundamentals/#b-by","title":"B - By","text":"<p>The preposition connecting the transmission method to the infrastructure.</p>"},{"location":"concepts/nostr-fundamentals/#r-relays","title":"R - Relays","text":"<p>The servers that store and forward messages. Unlike traditional social media, no single entity controls all relays.</p>"},{"location":"concepts/nostr-fundamentals/#core-philosophy","title":"Core Philosophy","text":""},{"location":"concepts/nostr-fundamentals/#censorship-resistance","title":"\ud83d\udd13 Censorship Resistance","text":"<p>No single point of control means no single point of failure or censorship.</p>"},{"location":"concepts/nostr-fundamentals/#user-ownership","title":"\ud83d\udd11 User Ownership","text":"<p>Your identity and data belong to you, not to a platform.</p>"},{"location":"concepts/nostr-fundamentals/#interoperability","title":"\ud83c\udf10 Interoperability","text":"<p>All clients can communicate with each other through the same protocol.</p>"},{"location":"concepts/nostr-fundamentals/#simplicity","title":"\u26a1 Simplicity","text":"<p>The protocol is intentionally simple, making it easy to implement and understand.</p>"},{"location":"concepts/nostr-fundamentals/#how-nostr-works-the-big-picture","title":"How Nostr Works: The Big Picture","text":"<pre><code>graph TB\n    A[User with Keys] --&gt; B[Nostr Client]\n    B --&gt; C[Sign Events]\n    C --&gt; D[Send to Relays]\n    D --&gt; E[Relay 1]\n    D --&gt; F[Relay 2]\n    D --&gt; G[Relay 3]\n    E --&gt; H[Other Users]\n    F --&gt; H\n    G --&gt; H\n    H --&gt; I[Read Events]\n    I --&gt; J[Display in Client]</code></pre>"},{"location":"concepts/nostr-fundamentals/#1-identity-layer","title":"1. Identity Layer","text":"<ul> <li>Users generate cryptographic key pairs</li> <li>Public key = your identity</li> <li>Private key = your signature authority</li> </ul>"},{"location":"concepts/nostr-fundamentals/#2-content-layer","title":"2. Content Layer","text":"<ul> <li>Everything is an \"event\" (note, reaction, profile update, etc.)</li> <li>Events are signed with your private key</li> <li>Events have standardized formats (defined by NIPs)</li> </ul>"},{"location":"concepts/nostr-fundamentals/#3-network-layer","title":"3. Network Layer","text":"<ul> <li>Events are sent to multiple relays</li> <li>Relays store and forward events</li> <li>Clients connect to relays to read/write events</li> </ul>"},{"location":"concepts/nostr-fundamentals/#4-application-layer","title":"4. Application Layer","text":"<ul> <li>Clients provide user interfaces</li> <li>Different clients can have different features</li> <li>All clients can interoperate through the protocol</li> </ul>"},{"location":"concepts/nostr-fundamentals/#key-concepts","title":"Key Concepts","text":""},{"location":"concepts/nostr-fundamentals/#events","title":"Events","text":"<p>Everything in Nostr is an \"event\" - a JSON object with specific fields:</p> <pre><code>{\n  \"id\": \"unique-event-identifier\",\n  \"pubkey\": \"author-public-key\", \n  \"created_at\": 1234567890,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"Hello Nostr!\",\n  \"sig\": \"cryptographic-signature\"\n}\n</code></pre>"},{"location":"concepts/nostr-fundamentals/#event-kinds","title":"Event Kinds","text":"<p>Different types of content have different \"kind\" numbers:</p> <ul> <li>Kind 0: User metadata (profile info)</li> <li>Kind 1: Text notes (like tweets)</li> <li>Kind 3: Contact lists (who you follow)</li> <li>Kind 4: Encrypted direct messages</li> <li>Kind 7: Reactions (likes, etc.)</li> <li>And many more...</li> </ul>"},{"location":"concepts/nostr-fundamentals/#cryptographic-identity","title":"Cryptographic Identity","text":"<p>Your identity is your public key:</p> <pre><code>npub1xyz... (human-readable format)\n</code></pre> <p>Your private key is your password: <pre><code>nsec1abc... (keep this secret!)\n</code></pre></p>"},{"location":"concepts/nostr-fundamentals/#relays","title":"Relays","text":"<p>Servers that: - Store events temporarily or permanently - Forward events to connected clients - Can have their own policies and rules - Are operated by different entities</p>"},{"location":"concepts/nostr-fundamentals/#what-makes-nostr-different","title":"What Makes Nostr Different?","text":""},{"location":"concepts/nostr-fundamentals/#traditional-social-media","title":"Traditional Social Media","text":"<p><pre><code>User \u2192 Platform \u2192 Other Users\n</code></pre> - Platform controls everything - Single point of failure - Platform owns your data - Platform can censor or ban</p>"},{"location":"concepts/nostr-fundamentals/#nostr","title":"Nostr","text":"<p><pre><code>User \u2192 Multiple Relays \u2192 Other Users\n</code></pre> - No central control - Multiple paths for data - You own your identity and data - Censorship requires coordinated effort</p>"},{"location":"concepts/nostr-fundamentals/#nostr-vs-other-protocols","title":"Nostr vs Other Protocols","text":""},{"location":"concepts/nostr-fundamentals/#vs-mastodonactivitypub","title":"vs Mastodon/ActivityPub","text":"<ul> <li>Nostr: Simple, cryptographic identity, relay-based</li> <li>Mastodon: Complex, server-based identity, federation</li> </ul>"},{"location":"concepts/nostr-fundamentals/#vs-bitcoin","title":"vs Bitcoin","text":"<ul> <li>Nostr: Communication protocol, uses similar cryptography</li> <li>Bitcoin: Money protocol, proof-of-work consensus</li> </ul>"},{"location":"concepts/nostr-fundamentals/#vs-email","title":"vs Email","text":"<ul> <li>Nostr: Real-time, public by default, cryptographic identity</li> <li>Email: Store-and-forward, private by default, domain-based identity</li> </ul>"},{"location":"concepts/nostr-fundamentals/#the-nostr-ecosystem","title":"The Nostr Ecosystem","text":""},{"location":"concepts/nostr-fundamentals/#clients-user-interfaces","title":"Clients (User Interfaces)","text":"<ul> <li>Damus (iOS) - Native mobile experience</li> <li>Amethyst (Android) - Feature-rich Android client  </li> <li>Iris (Web) - Browser-based client</li> <li>Nostrudel (Web) - Advanced web client</li> <li>Primal (Multi-platform) - Caching and discovery</li> </ul>"},{"location":"concepts/nostr-fundamentals/#relays-infrastructure","title":"Relays (Infrastructure)","text":"<ul> <li>Public relays - Open to everyone</li> <li>Private relays - Restricted access</li> <li>Paid relays - Premium features</li> <li>Specialized relays - Specific content types</li> </ul>"},{"location":"concepts/nostr-fundamentals/#tools-and-services","title":"Tools and Services","text":"<ul> <li>Lightning integration - Bitcoin payments</li> <li>Media hosting - Image and video storage</li> <li>Search engines - Content discovery</li> <li>Analytics - Network insights</li> </ul>"},{"location":"concepts/nostr-fundamentals/#benefits-of-nostr","title":"Benefits of Nostr","text":""},{"location":"concepts/nostr-fundamentals/#for-users","title":"For Users","text":"<ul> <li>Own your identity - No platform can take it away</li> <li>Choose your experience - Pick clients that suit you</li> <li>Avoid censorship - Multiple relays provide redundancy</li> <li>Portable social graph - Take your followers anywhere</li> </ul>"},{"location":"concepts/nostr-fundamentals/#for-developers","title":"For Developers","text":"<ul> <li>Simple protocol - Easy to implement</li> <li>No API keys - Direct relay access</li> <li>Innovation freedom - Build any features you want</li> <li>Interoperability - Works with all other clients</li> </ul>"},{"location":"concepts/nostr-fundamentals/#for-society","title":"For Society","text":"<ul> <li>Decentralization - Reduces big tech power</li> <li>Free speech - Harder to censor globally</li> <li>Innovation - Permissionless development</li> <li>Resilience - No single point of failure</li> </ul>"},{"location":"concepts/nostr-fundamentals/#common-misconceptions","title":"Common Misconceptions","text":""},{"location":"concepts/nostr-fundamentals/#nostr-is-just-another-twitter-clone","title":"\u274c \"Nostr is just another Twitter clone\"","text":"<p>\u2705 Nostr is a protocol that can support many types of applications, not just social media.</p>"},{"location":"concepts/nostr-fundamentals/#nostr-is-completely-anonymous","title":"\u274c \"Nostr is completely anonymous\"","text":"<p>\u2705 Nostr provides pseudonymity through public keys, but additional privacy measures may be needed.</p>"},{"location":"concepts/nostr-fundamentals/#nostr-is-only-for-bitcoin-people","title":"\u274c \"Nostr is only for Bitcoin people\"","text":"<p>\u2705 While Bitcoin integration is popular, Nostr is useful for anyone wanting decentralized communication.</p>"},{"location":"concepts/nostr-fundamentals/#nostr-is-too-technical-for-normal-users","title":"\u274c \"Nostr is too technical for normal users\"","text":"<p>\u2705 While the underlying protocol is technical, user-friendly clients make it accessible to everyone.</p>"},{"location":"concepts/nostr-fundamentals/#getting-started-with-nostr","title":"Getting Started with Nostr","text":""},{"location":"concepts/nostr-fundamentals/#1-choose-a-client","title":"1. Choose a Client","text":"<p>Pick a user-friendly client like Damus (iOS), Amethyst (Android), or Iris (web).</p>"},{"location":"concepts/nostr-fundamentals/#2-generate-keys","title":"2. Generate Keys","text":"<p>Most clients will generate keys for you automatically.</p>"},{"location":"concepts/nostr-fundamentals/#3-set-up-profile","title":"3. Set Up Profile","text":"<p>Add your name, bio, and profile picture.</p>"},{"location":"concepts/nostr-fundamentals/#4-find-people","title":"4. Find People","text":"<p>Follow interesting accounts and join conversations.</p>"},{"location":"concepts/nostr-fundamentals/#5-start-posting","title":"5. Start Posting","text":"<p>Share your thoughts and engage with the community.</p>"},{"location":"concepts/nostr-fundamentals/#the-future-of-nostr","title":"The Future of Nostr","text":""},{"location":"concepts/nostr-fundamentals/#short-term","title":"Short Term","text":"<ul> <li>Better user experience</li> <li>More client features</li> <li>Improved relay infrastructure</li> <li>Enhanced privacy options</li> </ul>"},{"location":"concepts/nostr-fundamentals/#long-term","title":"Long Term","text":"<ul> <li>Integration with other protocols</li> <li>New application types beyond social media</li> <li>Global adoption as communication standard</li> <li>Economic layers and monetization</li> </ul>"},{"location":"concepts/nostr-fundamentals/#technical-deep-dive","title":"Technical Deep Dive","text":""},{"location":"concepts/nostr-fundamentals/#protocol-simplicity","title":"Protocol Simplicity","text":"<p>Nostr's power comes from its simplicity:</p> <pre><code>// The entire protocol in pseudocode\nfunction publishEvent(event, relays) {\n  const signedEvent = sign(event, privateKey)\n  relays.forEach(relay =&gt; relay.send(signedEvent))\n}\n\nfunction subscribeToEvents(filter, relays) {\n  relays.forEach(relay =&gt; {\n    relay.subscribe(filter, (event) =&gt; {\n      if (verify(event.signature, event.pubkey)) {\n        displayEvent(event)\n      }\n    })\n  })\n}\n</code></pre>"},{"location":"concepts/nostr-fundamentals/#cryptographic-foundation","title":"Cryptographic Foundation","text":"<ul> <li>Schnorr signatures (same as Bitcoin)</li> <li>secp256k1 elliptic curve</li> <li>SHA-256 hashing</li> <li>NIP-19 encoding for human-readable keys</li> </ul>"},{"location":"concepts/nostr-fundamentals/#resources-for-learning-more","title":"Resources for Learning More","text":""},{"location":"concepts/nostr-fundamentals/#official-documentation","title":"Official Documentation","text":"<ul> <li>Nostr Protocol</li> <li>NIPs Repository</li> </ul>"},{"location":"concepts/nostr-fundamentals/#community","title":"Community","text":"<ul> <li>Nostr Telegram</li> <li>Reddit r/nostr</li> <li>Nostr on Nostr</li> </ul>"},{"location":"concepts/nostr-fundamentals/#development","title":"Development","text":"<ul> <li>Awesome Nostr</li> <li>Nostr Tools</li> <li>Developer Chat</li> </ul> <p>Nostr's Vision</p> <p>\"The simplest open protocol that is able to create a censorship-resistant global 'social' network once and for all.\" - fiatjaf (Nostr creator)</p> <p>Remember</p> <p>Nostr is not just a social network - it's a communication protocol that can power many different types of applications. The social media use case is just the beginning! </p>"},{"location":"concepts/relays/","title":"Relays: The Infrastructure of Nostr","text":"<p>Learning Objectives</p> <p>After this lesson, you'll understand:</p> <ul> <li>What relays are and how they work</li> <li>The relay-client communication protocol</li> <li>Different types of relays and their purposes</li> <li>How to choose and manage relays</li> <li>Relay policies and limitations</li> </ul>"},{"location":"concepts/relays/#what-are-relays","title":"What are Relays?","text":"<p>Relays are the servers that form the backbone of the Nostr network. They store, forward, and serve events to clients. Unlike traditional social media where one company controls all the servers, Nostr's relay system is decentralized - anyone can run a relay.</p>"},{"location":"concepts/relays/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>Simple servers: Store and forward JSON events</li> <li>WebSocket-based: Real-time bidirectional communication</li> <li>No complex logic: Focus on data storage and delivery</li> <li>Interchangeable: Clients can use any relay</li> <li>Independently operated: Different people run different relays</li> </ul>"},{"location":"concepts/relays/#how-relays-work","title":"How Relays Work","text":""},{"location":"concepts/relays/#basic-functions","title":"Basic Functions","text":"<ol> <li>Accept events from clients</li> <li>Store events (temporarily or permanently)</li> <li>Forward events to subscribed clients</li> <li>Filter requests based on client queries</li> <li>Enforce policies (rate limiting, content rules, etc.)</li> </ol>"},{"location":"concepts/relays/#relay-client-communication","title":"Relay-Client Communication","text":"<p>Communication happens over WebSocket connections using simple JSON messages:</p> <pre><code>graph TB\n    A[Client] &lt;--&gt;|WebSocket| B[Relay]\n    B --&gt; C[Event Storage]\n    B --&gt; D[Other Clients]\n    A --&gt; E[Publish Events]\n    A --&gt; F[Subscribe to Events]\n    A --&gt; G[Query Events]</code></pre>"},{"location":"concepts/relays/#message-types","title":"Message Types","text":""},{"location":"concepts/relays/#client-to-relay-messages","title":"Client to Relay Messages","text":""},{"location":"concepts/relays/#event-publishing-events","title":"EVENT - Publishing Events","text":"<pre><code>[\"EVENT\", {\n  \"id\": \"event-id\",\n  \"pubkey\": \"author-pubkey\",\n  \"created_at\": 1234567890,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"Hello Nostr!\",\n  \"sig\": \"signature\"\n}]\n</code></pre>"},{"location":"concepts/relays/#req-subscribing-to-events","title":"REQ - Subscribing to Events","text":"<pre><code>[\"REQ\", \"subscription-id\", {\n  \"kinds\": [1],\n  \"authors\": [\"pubkey1\", \"pubkey2\"],\n  \"since\": 1234567890,\n  \"limit\": 100\n}]\n</code></pre>"},{"location":"concepts/relays/#close-closing-subscriptions","title":"CLOSE - Closing Subscriptions","text":"<pre><code>[\"CLOSE\", \"subscription-id\"]\n</code></pre>"},{"location":"concepts/relays/#auth-authentication","title":"AUTH - Authentication","text":"<pre><code>[\"AUTH\", {\n  \"id\": \"challenge-event-id\",\n  \"pubkey\": \"client-pubkey\",\n  \"created_at\": 1234567890,\n  \"kind\": 22242,\n  \"tags\": [[\"challenge\", \"challenge-string\"]],\n  \"content\": \"\",\n  \"sig\": \"signature\"\n}]\n</code></pre>"},{"location":"concepts/relays/#count-requesting-event-counts","title":"COUNT - Requesting Event Counts","text":"<pre><code>[\"COUNT\", \"subscription-id\", {\n  \"kinds\": [1],\n  \"authors\": [\"pubkey\"]\n}]\n</code></pre>"},{"location":"concepts/relays/#relay-to-client-messages","title":"Relay to Client Messages","text":""},{"location":"concepts/relays/#event-sending-events","title":"EVENT - Sending Events","text":"<pre><code>[\"EVENT\", \"subscription-id\", {\n  \"id\": \"event-id\",\n  \"pubkey\": \"author-pubkey\",\n  \"created_at\": 1234567890,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"Hello Nostr!\",\n  \"sig\": \"signature\"\n}]\n</code></pre>"},{"location":"concepts/relays/#eose-end-of-stored-events","title":"EOSE - End of Stored Events","text":"<pre><code>[\"EOSE\", \"subscription-id\"]\n</code></pre>"},{"location":"concepts/relays/#ok-event-acceptance-response","title":"OK - Event Acceptance Response","text":"<pre><code>[\"OK\", \"event-id\", true, \"\"]\n[\"OK\", \"event-id\", false, \"blocked: content policy violation\"]\n</code></pre>"},{"location":"concepts/relays/#closed-subscription-closed","title":"CLOSED - Subscription Closed","text":"<pre><code>[\"CLOSED\", \"subscription-id\", \"rate-limited: too many subscriptions\"]\n</code></pre>"},{"location":"concepts/relays/#notice-human-readable-messages","title":"NOTICE - Human-Readable Messages","text":"<pre><code>[\"NOTICE\", \"This relay requires authentication\"]\n</code></pre>"},{"location":"concepts/relays/#auth-authentication-challenge","title":"AUTH - Authentication Challenge","text":"<pre><code>[\"AUTH\", \"challenge-string\"]\n</code></pre>"},{"location":"concepts/relays/#count-event-count-response","title":"COUNT - Event Count Response","text":"<pre><code>[\"COUNT\", \"subscription-id\", {\"count\": 42}]\n</code></pre>"},{"location":"concepts/relays/#relay-information-document-nip-11","title":"Relay Information Document (NIP-11)","text":"<p>Relays can provide metadata about their capabilities:</p> <pre><code>curl -H \"Accept: application/nostr+json\" https://relay.example.com\n</code></pre> <pre><code>{\n  \"name\": \"My Nostr Relay\",\n  \"description\": \"A relay for the Nostr community\",\n  \"pubkey\": \"relay-admin-pubkey\",\n  \"contact\": \"admin@relay.example.com\",\n  \"supported_nips\": [1, 2, 9, 11, 12, 15, 16, 20, 22],\n  \"software\": \"strfry\",\n  \"version\": \"0.9.6\",\n  \"limitation\": {\n    \"max_message_length\": 16384,\n    \"max_subscriptions\": 300,\n    \"max_limit\": 5000,\n    \"max_subid_length\": 100,\n    \"max_event_tags\": 100,\n    \"max_content_length\": 8196,\n    \"min_pow_difficulty\": 0,\n    \"auth_required\": false,\n    \"payment_required\": false,\n    \"restricted_writes\": false\n  },\n  \"relay_countries\": [\"US\", \"CA\"],\n  \"language_tags\": [\"en\", \"en-419\"],\n  \"tags\": [\"sfw-only\", \"bitcoin-only\"],\n  \"posting_policy\": \"https://relay.example.com/policy\"\n}\n</code></pre>"},{"location":"concepts/relays/#key-information-fields","title":"Key Information Fields","text":""},{"location":"concepts/relays/#basic-info","title":"Basic Info","text":"<ul> <li><code>name</code>: Human-readable relay name</li> <li><code>description</code>: Detailed information about the relay</li> <li><code>pubkey</code>: Admin's public key for contact</li> <li><code>contact</code>: Alternative contact method</li> <li><code>software</code>: Relay implementation name</li> <li><code>version</code>: Software version</li> </ul>"},{"location":"concepts/relays/#capabilities","title":"Capabilities","text":"<ul> <li><code>supported_nips</code>: Which NIPs are implemented</li> <li><code>limitation</code>: Technical limits and requirements</li> <li><code>relay_countries</code>: Legal jurisdictions</li> <li><code>language_tags</code>: Primary languages</li> <li><code>tags</code>: Content policies and focus areas</li> </ul>"},{"location":"concepts/relays/#types-of-relays","title":"Types of Relays","text":""},{"location":"concepts/relays/#by-access-model","title":"By Access Model","text":""},{"location":"concepts/relays/#public-relays","title":"Public Relays","text":"<ul> <li>Open to everyone</li> <li>No registration required</li> <li>May have rate limits</li> <li>Examples: <code>relay.damus.io</code>, <code>nos.lol</code></li> </ul>"},{"location":"concepts/relays/#private-relays","title":"Private Relays","text":"<ul> <li>Restricted access</li> <li>Invitation or whitelist only</li> <li>Often for specific communities</li> <li>Examples: Family relays, corporate relays</li> </ul>"},{"location":"concepts/relays/#paid-relays","title":"Paid Relays","text":"<ul> <li>Require payment for access</li> <li>Better spam protection</li> <li>Often higher reliability</li> <li>May offer premium features</li> </ul>"},{"location":"concepts/relays/#by-purpose","title":"By Purpose","text":""},{"location":"concepts/relays/#general-purpose","title":"General Purpose","text":"<ul> <li>Accept all kinds of events</li> <li>Serve broad communities</li> <li>Most common type</li> </ul>"},{"location":"concepts/relays/#specialized-relays","title":"Specialized Relays","text":"<ul> <li>Focus on specific event kinds</li> <li>Examples:</li> <li>Media relays (images, videos)</li> <li>Long-form content relays</li> <li>Lightning zap relays</li> <li>Marketplace relays</li> </ul>"},{"location":"concepts/relays/#personal-relays","title":"Personal Relays","text":"<ul> <li>Run by individuals</li> <li>Store personal backup</li> <li>Share with friends/family</li> <li>Complete data control</li> </ul>"},{"location":"concepts/relays/#by-retention-policy","title":"By Retention Policy","text":""},{"location":"concepts/relays/#archive-relays","title":"Archive Relays","text":"<ul> <li>Store events permanently</li> <li>Historical data preservation</li> <li>May charge for long-term storage</li> </ul>"},{"location":"concepts/relays/#ephemeral-relays","title":"Ephemeral Relays","text":"<ul> <li>Short-term storage</li> <li>Focus on real-time communication</li> <li>Lower storage costs</li> </ul>"},{"location":"concepts/relays/#filtered-relays","title":"Filtered Relays","text":"<ul> <li>Selective storage</li> <li>Content moderation</li> <li>Topic-specific focus</li> </ul>"},{"location":"concepts/relays/#running-your-own-relay","title":"Running Your Own Relay","text":""},{"location":"concepts/relays/#why-run-a-relay","title":"Why Run a Relay?","text":""},{"location":"concepts/relays/#personal-benefits","title":"Personal Benefits","text":"<ul> <li>Complete data control</li> <li>Custom policies</li> <li>Data backup and preservation</li> <li>Privacy and security</li> <li>No dependence on third parties</li> </ul>"},{"location":"concepts/relays/#community-benefits","title":"Community Benefits","text":"<ul> <li>Support network decentralization</li> <li>Provide service to community</li> <li>Enable free speech</li> <li>Reduce censorship risks</li> </ul>"},{"location":"concepts/relays/#popular-relay-software","title":"Popular Relay Software","text":""},{"location":"concepts/relays/#strfry","title":"strfry","text":"<ul> <li>High-performance C++ implementation</li> <li>Efficient storage and indexing</li> <li>Production-ready</li> <li>Active development</li> </ul> <pre><code># Install strfry\ngit clone https://github.com/hoytech/strfry.git\ncd strfry\nmake setup-golpe\nmake -j4\n</code></pre>"},{"location":"concepts/relays/#nostream","title":"nostream","text":"<ul> <li>TypeScript/Node.js implementation</li> <li>Easy to modify and extend</li> <li>Good for development</li> <li>PostgreSQL backend</li> </ul> <pre><code># Install nostream\ngit clone https://github.com/Cameri/nostream.git\ncd nostream\nnpm install\nnpm run build\n</code></pre>"},{"location":"concepts/relays/#khatru","title":"khatru","text":"<ul> <li>Go implementation</li> <li>Simple and lightweight</li> <li>Easy to deploy</li> <li>Good performance</li> </ul> <pre><code># Install khatru\ngo install github.com/fiatjaf/khatru@latest\n</code></pre>"},{"location":"concepts/relays/#relay-configuration","title":"Relay Configuration","text":""},{"location":"concepts/relays/#basic-configuration","title":"Basic Configuration","text":"<pre><code># strfry.conf\ndb = \"./strfry-db/\"\nbind = \"0.0.0.0:7777\"\nnofiles = 1000000\n\nrelay:\n  name: \"My Personal Relay\"\n  description: \"A relay for my friends and family\"\n  pubkey: \"your-pubkey-here\"\n  contact: \"admin@myrelay.com\"\n\nrejectFilters:\n  - kinds: []\n    authors: []\n    tags:\n      \"#t\": [\"spam\", \"inappropriate\"]\n</code></pre>"},{"location":"concepts/relays/#access-control","title":"Access Control","text":"<pre><code># Authentication required\nauth:\n  required: true\n  whitelist:\n    - \"pubkey1\"\n    - \"pubkey2\"\n\n# Payment required\npayment:\n  required: true\n  amount: 1000  # sats per month\n  bolt11: \"payment-address\"\n</code></pre>"},{"location":"concepts/relays/#hosting-options","title":"Hosting Options","text":""},{"location":"concepts/relays/#self-hosted","title":"Self-Hosted","text":"<ul> <li>Complete control</li> <li>Custom hardware</li> <li>Network requirements</li> <li>Maintenance responsibility</li> </ul>"},{"location":"concepts/relays/#vpscloud","title":"VPS/Cloud","text":"<ul> <li>Professional hosting</li> <li>Managed infrastructure</li> <li>Scalable resources</li> <li>Geographic distribution</li> </ul>"},{"location":"concepts/relays/#docker-deployment","title":"Docker Deployment","text":"<pre><code>FROM ubuntu:22.04\n\n# Install dependencies\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    build-essential \\\n    git \\\n    pkg-config\n\n# Clone and build strfry\nRUN git clone https://github.com/hoytech/strfry.git\nWORKDIR /strfry\nRUN make setup-golpe &amp;&amp; make -j4\n\n# Configure and run\nCOPY strfry.conf .\nEXPOSE 7777\nCMD [\"./strfry\", \"relay\"]\n</code></pre>"},{"location":"concepts/relays/#next-steps","title":"Next Steps","text":"<p>Now that you understand relays, explore:</p> <ul> <li>Events and Messages - What relays store and forward</li> <li>Building Applications - How to work with relays in code</li> <li>Advanced Topics - Specialized relay features</li> </ul> <p>Getting Started</p> <p>Start by understanding how to use relays as a client, then experiment with running your own relay for learning. Consider the community and economic factors when deciding whether to run a public relay.</p>"},{"location":"concepts/zaps/","title":"Understanding Zaps","text":"<p>Learning Objectives</p> <p>By the end of this lesson, you'll understand:</p> <ul> <li>What zaps are and why they're revolutionary</li> <li>How zaps work technically (NIP-57)</li> <li>Different types of zaps and their use cases</li> <li>The economics and incentives zaps create</li> <li>Privacy considerations with zaps</li> </ul>"},{"location":"concepts/zaps/#what-are-zaps","title":"What Are Zaps?","text":"<p>Zaps are instant Bitcoin payments sent over the Lightning Network that are cryptographically tied to Nostr events. They represent a fundamental shift from traditional social media \"likes\" to value-for-value interactions.</p> <p>Value-for-Value</p> <p>Instead of giving away your attention for free to advertisers, zaps let you directly support creators and signal quality content with real economic value.</p>"},{"location":"concepts/zaps/#key-characteristics","title":"Key Characteristics","text":"<ul> <li>\u26a1 Instant: Payments settle in milliseconds</li> <li>\ud83d\udd12 Cryptographically Verified: Tied to specific Nostr events</li> <li>\ud83d\udcb0 Micro-payments: Can be as small as 1 satoshi (0.00000001 BTC)</li> <li>\ud83c\udf0d Global: Work anywhere in the world</li> <li>\ud83d\udd13 Permissionless: No intermediaries or gatekeepers</li> </ul>"},{"location":"concepts/zaps/#how-zaps-work-nip-57","title":"How Zaps Work (NIP-57)","text":"<p>Zaps are defined by NIP-57 (Nostr Implementation Possibility 57) and involve a sophisticated dance between your Nostr client, Lightning wallet, and the recipient's Lightning service.</p>"},{"location":"concepts/zaps/#the-zap-flow","title":"The Zap Flow","text":"<pre><code>sequenceDiagram\n    participant User as You\n    participant Client as Nostr Client\n    participant Wallet as Lightning Wallet\n    participant LNURL as Recipient LNURL\n    participant Relay as Nostr Relay\n\n    User-&gt;&gt;Client: Click Zap on post\n    Client-&gt;&gt;LNURL: Request zap endpoint\n    LNURL--&gt;&gt;Client: Return payment request template\n    Client-&gt;&gt;Wallet: Generate invoice for amount\n    Wallet--&gt;&gt;Client: Lightning invoice\n    Client-&gt;&gt;LNURL: Send invoice + Nostr event\n    LNURL-&gt;&gt;LNURL: Process payment\n    LNURL-&gt;&gt;Relay: Publish zap receipt (kind 9735)\n    Relay--&gt;&gt;Client: Zap receipt appears\n    Client-&gt;&gt;User: Show zap confirmation</code></pre>"},{"location":"concepts/zaps/#technical-components","title":"Technical Components","text":"<p>1. Lightning Address - Human-readable identifier (like email) - Example: <code>alice@getalby.com</code> - Resolves to LNURL-pay endpoint</p> <p>2. LNURL-pay - Protocol for requesting Lightning payments - Handles the payment request generation - Returns payment confirmation</p> <p>3. Zap Request (Kind 9734) - Nostr event that describes the intended zap - Contains recipient, amount, and optional message - Signed by the sender's private key</p> <p>4. Zap Receipt (Kind 9735) - Proof that payment was made - Published by recipient's Lightning service - Contains payment preimage as proof</p>"},{"location":"concepts/zaps/#types-of-zaps","title":"Types of Zaps","text":""},{"location":"concepts/zaps/#regular-zaps","title":"Regular Zaps","text":"<p>Standard zaps that appear publicly on posts:</p> <pre><code>{\n  \"kind\": 9735,\n  \"content\": \"Great post! \u26a1\",\n  \"tags\": [\n    [\"bolt11\", \"lnbc...\"],\n    [\"description\", \"...\"],\n    [\"p\", \"recipient_pubkey\"],\n    [\"e\", \"event_id\"]\n  ]\n}\n</code></pre>"},{"location":"concepts/zaps/#anonymous-zaps","title":"Anonymous Zaps","text":"<p>Zaps without revealing the sender's identity: - Payment is made but sender info is hidden - Useful for privacy-conscious users - Still cryptographically verifiable</p>"},{"location":"concepts/zaps/#private-zaps","title":"Private Zaps","text":"<p>Zaps that don't appear publicly: - Only sender and recipient know about them - No public zap receipt published - Maximum privacy</p>"},{"location":"concepts/zaps/#zap-goals","title":"Zap Goals","text":"<p>Crowdfunding mechanism using zaps: - Set a target amount for a project - Community can zap towards the goal - Transparent progress tracking</p>"},{"location":"concepts/zaps/#the-economics-of-zaps","title":"The Economics of Zaps","text":""},{"location":"concepts/zaps/#micro-economics","title":"Micro-Economics","text":"<p>Zaps enable micro-transactions that weren't possible before:</p> <ul> <li>1 sat = ~$0.0003 (varies with Bitcoin price)</li> <li>21 sats = Popular \"Bitcoin number\" </li> <li>100 sats = Meaningful appreciation</li> <li>1,000 sats = Strong support</li> <li>10,000+ sats = Significant contribution</li> </ul>"},{"location":"concepts/zaps/#creator-incentives","title":"Creator Incentives","text":"<p>Quality Content Rises - Good content gets zapped more - Creators earn directly from their audience - No need for advertising or sponsorships</p> <p>Immediate Feedback - Instant economic signal of content value - More meaningful than likes or hearts - Encourages thoughtful posting</p> <p>Global Monetization - Anyone, anywhere can earn Bitcoin - No geographic restrictions - No minimum payout thresholds</p>"},{"location":"concepts/zaps/#network-effects","title":"Network Effects","text":"<p>Value Flows to Value - Bitcoin naturally flows to valuable content - Creates positive feedback loops - Rewards genuine contribution over engagement farming</p> <p>Spam Reduction - Small cost to interact reduces spam - Economic incentive for quality - Self-regulating community standards</p>"},{"location":"concepts/zaps/#zap-etiquette-and-culture","title":"Zap Etiquette and Culture","text":""},{"location":"concepts/zaps/#common-zap-amounts","title":"Common Zap Amounts","text":"Amount Meaning Use Case 1 sat Acknowledgment \"I saw this\" 21 sats Bitcoin appreciation Standard like 100 sats Good content Quality post 500 sats Great content Excellent post 1,000+ sats Exceptional Outstanding work 10,000+ sats Support Major contribution"},{"location":"concepts/zaps/#when-to-zap","title":"When to Zap","text":"<p>\u2705 Good Times to Zap: - Content that taught you something - Posts that made you laugh - Helpful answers to questions - Original research or insights - Supporting creators you appreciate</p> <p>\u274c Avoid Zapping: - Content you disagree with (unless constructive) - Spam or low-effort posts - Just to get attention - Your own posts (generally frowned upon)</p>"},{"location":"concepts/zaps/#zap-messages","title":"Zap Messages","text":"<p>Many zaps include short messages: - Keep them positive and constructive - Emoji are popular (\u26a1\ud83d\ude80\ud83d\udd25\ud83d\udc9c) - Brief explanations of why you zapped - Encouragement for creators</p>"},{"location":"concepts/zaps/#privacy-considerations","title":"Privacy Considerations","text":""},{"location":"concepts/zaps/#whats-public","title":"What's Public","text":"<ul> <li>Zap amount (usually)</li> <li>Recipient (always)</li> <li>Associated post (if applicable)</li> <li>Zap message (if included)</li> </ul>"},{"location":"concepts/zaps/#what-can-be-private","title":"What Can Be Private","text":"<ul> <li>Sender identity (with anonymous zaps)</li> <li>Payment details (Lightning privacy)</li> <li>Exact timing (some obfuscation possible)</li> </ul>"},{"location":"concepts/zaps/#privacy-tips","title":"Privacy Tips","text":"<ul> <li>Use different Lightning addresses for different purposes</li> <li>Consider anonymous zaps for sensitive topics</li> <li>Be aware that payment patterns can be analyzed</li> <li>Lightning payments are more private than on-chain Bitcoin</li> </ul>"},{"location":"concepts/zaps/#setting-up-zaps","title":"Setting Up Zaps","text":""},{"location":"concepts/zaps/#requirements","title":"Requirements","text":"<ol> <li>Lightning Wallet (Alby, Wallet of Satoshi, etc.)</li> <li>Lightning Address (yourname@getalby.com)</li> <li>Nostr Client that supports zaps</li> <li>Some Bitcoin to send zaps</li> </ol>"},{"location":"concepts/zaps/#configuration-steps","title":"Configuration Steps","text":"<ol> <li>Set up Lightning wallet (see Wallet Setup Guide)</li> <li>Add Lightning address to Nostr profile</li> <li>Test with small zaps to yourself or friends</li> <li>Start zapping content you appreciate</li> </ol>"},{"location":"concepts/zaps/#advanced-zap-features","title":"Advanced Zap Features","text":""},{"location":"concepts/zaps/#zap-splits","title":"Zap Splits","text":"<p>Some clients support splitting zaps: - Send to multiple recipients - Useful for collaborations - Automatic revenue sharing</p>"},{"location":"concepts/zaps/#recurring-zaps","title":"Recurring Zaps","text":"<p>Subscription-like zaps: - Regular payments to creators - Automated support - Patreon-like functionality</p>"},{"location":"concepts/zaps/#conditional-zaps","title":"Conditional Zaps","text":"<p>Smart contract-like features: - Zaps that unlock at certain conditions - Goal-based releases - Time-locked payments</p>"},{"location":"concepts/zaps/#troubleshooting-zaps","title":"Troubleshooting Zaps","text":""},{"location":"concepts/zaps/#common-issues","title":"Common Issues","text":"<p>\"Zap failed to send\" - Check wallet balance - Verify Lightning address is correct - Try smaller amount - Check internet connection</p> <p>\"No zap button visible\" - Recipient may not have Lightning address set - Client may not support zaps - Check if zaps are enabled in settings</p> <p>\"Zap not appearing\" - May take a few seconds to process - Check if using compatible relays - Refresh the client</p>"},{"location":"concepts/zaps/#best-practices","title":"Best Practices","text":"<ul> <li>Start with small amounts while learning</li> <li>Keep some Bitcoin in your Lightning wallet</li> <li>Test zaps with friends first</li> <li>Monitor your spending</li> </ul>"},{"location":"concepts/zaps/#the-future-of-zaps","title":"The Future of Zaps","text":""},{"location":"concepts/zaps/#emerging-trends","title":"Emerging Trends","text":"<ul> <li>Zap-to-earn games and applications</li> <li>Algorithmic zapping based on preferences</li> <li>Cross-platform zaps beyond Nostr</li> <li>Integration with traditional payments</li> </ul>"},{"location":"concepts/zaps/#potential-developments","title":"Potential Developments","text":"<ul> <li>Stable coin zaps for price stability</li> <li>Programmable zaps with smart contracts</li> <li>Zap analytics for creators</li> <li>Enterprise zap solutions</li> </ul>"},{"location":"concepts/zaps/#impact-on-social-media","title":"Impact on Social Media","text":"<p>Zaps represent a fundamental shift in how we think about social media:</p>"},{"location":"concepts/zaps/#from-attention-economy-to-value-economy","title":"From Attention Economy to Value Economy","text":"<ul> <li>Traditional: Your attention is the product sold to advertisers</li> <li>Zaps: Your attention has direct economic value you control</li> </ul>"},{"location":"concepts/zaps/#from-engagement-farming-to-quality-content","title":"From Engagement Farming to Quality Content","text":"<ul> <li>Traditional: Optimize for clicks, views, time spent</li> <li>Zaps: Optimize for genuine value and appreciation</li> </ul>"},{"location":"concepts/zaps/#from-platform-lock-in-to-creator-freedom","title":"From Platform Lock-in to Creator Freedom","text":"<ul> <li>Traditional: Platform controls monetization and can ban you</li> <li>Zaps: Direct peer-to-peer payments, no intermediaries</li> </ul>"},{"location":"concepts/zaps/#quick-quiz","title":"Quick Quiz","text":"<p>Test Your Understanding</p> <ol> <li>What makes zaps different from traditional social media \"likes\"?</li> <li>What is NIP-57 and why is it important?</li> <li>What are the three types of zaps in terms of privacy?</li> <li>How do zaps change the incentives for content creators?</li> </ol> Answers <ol> <li>Zaps involve real Bitcoin payments that provide economic value, while likes are free and provide no direct value to creators</li> <li>NIP-57 is the Nostr Implementation Possibility that defines how zaps work technically, ensuring interoperability between clients and wallets</li> <li>Regular zaps (public), anonymous zaps (payment visible but sender hidden), and private zaps (completely private)</li> <li>Zaps create direct economic incentives for quality content, allowing creators to earn immediately from their audience without relying on advertising or platform monetization</li> </ol>      Start Building \u2192"},{"location":"getting-started/nostr-tools/","title":"Development Tools and Infrastructure","text":"<p>Learning Objectives</p> <p>By the end of this lesson, you'll understand:</p> <ul> <li>Essential development tools for Nostr protocol implementation</li> <li>Command-line utilities for network analysis and debugging</li> <li>Programming libraries and frameworks for different languages</li> <li>Infrastructure monitoring and relay management tools</li> </ul>"},{"location":"getting-started/nostr-tools/#development-ecosystem-overview","title":"Development Ecosystem Overview","text":"<p>The Nostr development ecosystem consists of multiple tool categories designed for different aspects of protocol implementation, from client development to network infrastructure management. Understanding these tools enables efficient development workflows and robust system deployment.</p>"},{"location":"getting-started/nostr-tools/#protocol-implementation-libraries","title":"Protocol Implementation Libraries","text":""},{"location":"getting-started/nostr-tools/#javascripttypescript-ecosystem","title":"JavaScript/TypeScript Ecosystem","text":""},{"location":"getting-started/nostr-tools/#nostr-tools","title":"nostr-tools","text":"<p>Primary Features: - Core protocol implementation with event creation, validation, and signing - WebSocket relay communication management - Cryptographic key generation and management utilities - NIP implementation support for protocol extensions</p> <p>Installation and Basic Usage: <pre><code>npm install nostr-tools\n</code></pre></p> <pre><code>import { generatePrivateKey, getPublicKey, finishEvent, relayInit } from 'nostr-tools'\n\n// Key generation and management\nconst privateKey = generatePrivateKey()\nconst publicKey = getPublicKey(privateKey)\n\n// Event creation and signing\nconst event = finishEvent({\n  kind: 1,\n  created_at: Math.floor(Date.now() / 1000),\n  tags: [[\"t\", \"nostr\"], [\"t\", \"development\"]],\n  content: 'Protocol implementation example'\n}, privateKey)\n\n// Relay communication\nconst relay = relayInit('wss://relay.damus.io')\nawait relay.connect()\nrelay.publish(event)\n</code></pre>"},{"location":"getting-started/nostr-tools/#ndk-nostr-development-kit","title":"NDK (Nostr Development Kit)","text":"<p>Advanced Features: - Higher-level abstractions for complex application development - Built-in caching and optimization mechanisms - Multi-relay coordination and failover handling - Enhanced developer experience with TypeScript support</p> <pre><code>npm install @nostr-dev-kit/ndk\n</code></pre> <pre><code>import NDK from '@nostr-dev-kit/ndk'\n\nconst ndk = new NDK({\n  explicitRelayUrls: ['wss://relay.damus.io', 'wss://nos.lol'],\n  outboxRelayUrls: ['wss://purplepag.es'],\n  enableOutboxModel: true\n})\n\nawait ndk.connect()\n\nconst note = new NDKEvent(ndk)\nnote.kind = 1\nnote.content = \"Advanced protocol implementation\"\nawait note.publish()\n</code></pre>"},{"location":"getting-started/nostr-tools/#python-implementation","title":"Python Implementation","text":""},{"location":"getting-started/nostr-tools/#python-nostr","title":"python-nostr","text":"<p>Core Capabilities: - Complete protocol implementation with cryptographic operations - Relay management and connection pooling - Event validation and network communication - Integration with existing Python infrastructure</p> <pre><code>pip install nostr\n</code></pre> <pre><code>from nostr.key import PrivateKey\nfrom nostr.event import Event\nfrom nostr.relay_manager import RelayManager\nimport time\n\n# Cryptographic key management\nprivate_key = PrivateKey()\npublic_key = private_key.public_key\n\n# Event creation and signing\nevent = Event(\n    kind=1,\n    content=\"Python protocol implementation\",\n    created_at=int(time.time()),\n    tags=[[\"t\", \"nostr\"], [\"t\", \"python\"]]\n)\nprivate_key.sign_event(event)\n\n# Network communication\nrelay_manager = RelayManager()\nrelay_manager.add_relay(\"wss://relay.damus.io\")\nrelay_manager.publish_event(event)\n</code></pre>"},{"location":"getting-started/nostr-tools/#rust-implementation","title":"Rust Implementation","text":""},{"location":"getting-started/nostr-tools/#nostr-sdk","title":"nostr-sdk","text":"<p>Performance Features: - High-performance implementation with memory safety - Cross-platform compatibility with foreign function interfaces - Comprehensive NIP support and protocol compliance - Integration with Rust's async ecosystem</p> <pre><code>[dependencies]\nnostr-sdk = \"0.29\"\ntokio = { version = \"1.0\", features = [\"full\"] }\n</code></pre> <pre><code>use nostr_sdk::prelude::*;\n\n#[tokio::main]\nasync fn main() -&gt; Result&lt;()&gt; {\n    let keys = Keys::generate();\n    let client = Client::new(&amp;keys);\n\n    client.add_relay(\"wss://relay.damus.io\", None).await?;\n    client.connect().await;\n\n    let event = EventBuilder::new_text_note(\"Rust implementation\", &amp;[])\n        .to_event(&amp;keys)?;\n\n    client.send_event(event).await?;\n    Ok(())\n}\n</code></pre>"},{"location":"getting-started/nostr-tools/#command-line-utilities","title":"Command-Line Utilities","text":""},{"location":"getting-started/nostr-tools/#nak-nostr-army-knife","title":"nak (Nostr Army Knife)","text":"<p>Operational Capabilities: - Event creation, signing, and publishing from command line - Relay querying and subscription management - Key generation and format conversion utilities - Network debugging and analysis tools</p> <p>Installation: <pre><code>go install github.com/fiatjaf/nak@latest\n</code></pre></p> <p>Core Operations: <pre><code># Key generation and management\nnak key generate\nnak key --npub npub1... # Convert to hex format\n\n# Event operations\nnak event --content \"Command line event\" --kind 1\nnak req -k 1 --limit 10 wss://relay.damus.io\n\n# Network analysis\nnak decode nevent1... # Decode Nostr entities\n</code></pre></p>"},{"location":"getting-started/nostr-tools/#nostril","title":"nostril","text":"<p>Event Publishing Utility: - Lightweight event creation and publishing - Simple integration with shell scripts and automation - Direct relay communication without client overhead</p> <pre><code># Install\ngo install github.com/fiatjaf/nostril@latest\n\n# Create and publish events\nnostril --content \"Direct event publishing\" --sec &lt;private-key&gt;\nnostril --dm &lt;pubkey&gt; --content \"Direct message\" --sec &lt;private-key&gt;\n</code></pre>"},{"location":"getting-started/nostr-tools/#network-analysis-and-monitoring","title":"Network Analysis and Monitoring","text":""},{"location":"getting-started/nostr-tools/#relay-discovery-and-testing","title":"Relay Discovery and Testing","text":""},{"location":"getting-started/nostr-tools/#nostrwatch","title":"nostr.watch","text":"<p>Network Monitoring: - Real-time relay status and performance metrics - Geographic distribution analysis - Protocol compliance verification - Network topology visualization</p> <p>Integration Example: <pre><code># Automated relay health checking\ncurl -s https://api.nostr.watch/v1/online | jq '.[]' | head -10\n</code></pre></p>"},{"location":"getting-started/nostr-tools/#nostrband","title":"nostr.band","text":"<p>Network Analytics: - Event search and analysis across the network - User activity patterns and statistics - Content discovery and trending analysis - Protocol usage metrics</p>"},{"location":"getting-started/nostr-tools/#development-and-debugging-tools","title":"Development and Debugging Tools","text":""},{"location":"getting-started/nostr-tools/#relay-testing-infrastructure","title":"Relay Testing Infrastructure","text":"<pre><code># Install relay testing tools\ngo install github.com/fiatjaf/relay-benchmark@latest\n\n# Performance testing\nrelay-benchmark --relay wss://relay.damus.io --connections 50 --duration 60s\n\n# Functionality testing\nnak req --limit 1 wss://relay.damus.io # Basic connectivity test\n</code></pre>"},{"location":"getting-started/nostr-tools/#practical-exercise-tool-integration-laboratory","title":"Practical Exercise: Tool Integration Laboratory","text":"<p>Development Environment Setup</p> <p>Objective: Configure a complete development environment for Nostr protocol work</p> <p>Phase 1: Environment Preparation 1. Install programming language runtimes (Node.js, Python, Go, Rust) 2. Configure package managers and dependency management 3. Set up version control and development workflows 4. Install command-line utilities (nak, nostril)</p> <p>Phase 2: Library Integration Testing 1. Implement basic event creation in multiple languages 2. Test relay communication and event publishing 3. Verify cryptographic operations and key management 4. Compare performance characteristics across implementations</p> <p>Phase 3: Network Analysis Exercise 1. Use nak to query different relays and analyze response patterns 2. Monitor relay performance using available tools 3. Analyze event patterns and network activity 4. Document relay capabilities and limitations</p>"},{"location":"getting-started/nostr-tools/#advanced-development-tools","title":"Advanced Development Tools","text":""},{"location":"getting-started/nostr-tools/#browser-extensions-for-development","title":"Browser Extensions for Development","text":""},{"location":"getting-started/nostr-tools/#nos2x","title":"nos2x","text":"<p>Key Management Features: - Secure private key storage in browser environment - NIP-07 event signing capabilities - Permission management for web applications - Development testing and debugging support</p>"},{"location":"getting-started/nostr-tools/#alby","title":"Alby","text":"<p>Comprehensive Development Platform: - Lightning Network integration for testing - Advanced key management with multiple accounts - Developer APIs for application integration - Testing environment for zap functionality</p>"},{"location":"getting-started/nostr-tools/#infrastructure-development","title":"Infrastructure Development","text":""},{"location":"getting-started/nostr-tools/#relay-implementation-tools","title":"Relay Implementation Tools","text":"<p>Strfry Development: <pre><code># Clone and build relay software\ngit clone https://github.com/hoytech/strfry.git\ncd strfry\ngit submodule update --init\nmake setup-golpe\nmake -j4\n\n# Configuration and testing\n./strfry relay # Start relay\n./strfry export --since=1day # Data export\n</code></pre></p> <p>Nostream Development: <pre><code># Node.js relay implementation\ngit clone https://github.com/Cameri/nostream.git\ncd nostream\nnpm install\nnpm run build\nnpm start\n</code></pre></p>"},{"location":"getting-started/nostr-tools/#event-analysis-and-debugging","title":"Event Analysis and Debugging","text":""},{"location":"getting-started/nostr-tools/#event-structure-validation","title":"Event Structure Validation","text":"<p>Automated Testing Framework: <pre><code>// Event validation testing\nimport { validateEvent, verifySignature } from 'nostr-tools'\n\nfunction testEventValidation(event) {\n  const isValid = validateEvent(event)\n  const sigValid = verifySignature(event)\n\n  return {\n    structureValid: isValid,\n    signatureValid: sigValid,\n    timestamp: new Date(event.created_at * 1000),\n    kind: event.kind,\n    contentLength: event.content.length\n  }\n}\n</code></pre></p>"},{"location":"getting-started/nostr-tools/#network-protocol-analysis","title":"Network Protocol Analysis","text":"<p>Traffic Monitoring: <pre><code># WebSocket traffic analysis\nwscat -c wss://relay.damus.io\n# Send: [\"REQ\", \"sub1\", {\"kinds\": [1], \"limit\": 5}]\n\n# Protocol compliance testing\nnak req -k 1 --limit 1 wss://relay.damus.io | jq '.[]'\n</code></pre></p>"},{"location":"getting-started/nostr-tools/#performance-optimization-tools","title":"Performance Optimization Tools","text":""},{"location":"getting-started/nostr-tools/#relay-performance-analysis","title":"Relay Performance Analysis","text":"<p>Metrics Collection: - Connection establishment latency - Event processing throughput - Query response times - Resource utilization patterns</p> <p>Benchmarking Framework: <pre><code># Comprehensive relay testing\nrelay-benchmark \\\n  --relay wss://relay.damus.io \\\n  --connections 100 \\\n  --events-per-second 10 \\\n  --duration 300s \\\n  --output results.json\n</code></pre></p>"},{"location":"getting-started/nostr-tools/#client-performance-testing","title":"Client Performance Testing","text":"<p>Load Testing Implementation: <pre><code>// Client performance testing\nasync function loadTest(relayUrls, eventCount) {\n  const clients = relayUrls.map(url =&gt; relayInit(url))\n  await Promise.all(clients.map(c =&gt; c.connect()))\n\n  const startTime = Date.now()\n\n  for (let i = 0; i &lt; eventCount; i++) {\n    const event = createTestEvent(i)\n    await Promise.all(clients.map(c =&gt; c.publish(event)))\n  }\n\n  const duration = Date.now() - startTime\n  return { eventsPerSecond: eventCount / (duration / 1000) }\n}\n</code></pre></p>"},{"location":"getting-started/nostr-tools/#security-and-compliance-tools","title":"Security and Compliance Tools","text":""},{"location":"getting-started/nostr-tools/#key-security-analysis","title":"Key Security Analysis","text":"<p>Cryptographic Validation: <pre><code># Key security verification\ndef validate_key_security(private_key_hex):\n    \"\"\"Validate private key entropy and security properties\"\"\"\n    key_bytes = bytes.fromhex(private_key_hex)\n\n    # Entropy analysis\n    entropy = calculate_entropy(key_bytes)\n\n    # Format validation\n    valid_format = len(key_bytes) == 32\n\n    # Weak key detection\n    is_weak = check_weak_patterns(key_bytes)\n\n    return {\n        'entropy': entropy,\n        'valid_format': valid_format,\n        'is_secure': entropy &gt; 7.0 and valid_format and not is_weak\n    }\n</code></pre></p>"},{"location":"getting-started/nostr-tools/#protocol-compliance-testing","title":"Protocol Compliance Testing","text":"<p>NIP Compliance Verification: <pre><code># Automated NIP compliance testing\nfor relay in $(cat relay_list.txt); do\n  echo \"Testing $relay\"\n  nak req -k 0 --limit 1 $relay &gt;/dev/null 2&gt;&amp;1 &amp;&amp; echo \"NIP-01: \u2713\" || echo \"NIP-01: \u2717\"\n  # Additional NIP tests...\ndone\n</code></pre></p>"},{"location":"getting-started/nostr-tools/#next-steps","title":"Next Steps","text":"<p>Mastering development tools and infrastructure components enables effective participation in Nostr protocol development. Understanding the ecosystem prepares you for advanced implementation work and network infrastructure deployment.</p>      Relay Infrastructure Deployment \u2192"},{"location":"getting-started/nostr-tools/#technical-proficiency-assessment","title":"Technical Proficiency Assessment","text":"<p>Development Tools Mastery</p> <ol> <li>What are the key differences between nostr-tools and NDK for JavaScript development?</li> <li>How do command-line utilities like nak facilitate protocol debugging and analysis?</li> <li>What performance considerations apply when choosing between different language implementations?</li> <li>How can relay testing tools inform infrastructure deployment decisions?</li> </ol> Technical Analysis <ol> <li>nostr-tools provides core protocol primitives, while NDK offers higher-level abstractions with built-in optimization and multi-relay coordination</li> <li>Command-line utilities enable direct protocol interaction for testing, debugging, and automation without the overhead of full client implementations</li> <li>Performance considerations include memory usage, cryptographic operation speed, concurrency models, and integration complexity with existing infrastructure</li> <li>Relay testing tools provide critical metrics on throughput, latency, compliance, and reliability that inform capacity planning, geographic distribution, and redundancy strategies for production deployments</li> </ol>"},{"location":"getting-started/relay-setup/","title":"Relay Infrastructure Deployment","text":"<p>Learning Objectives</p> <p>By the end of this lesson, you'll understand:</p> <ul> <li>Relay architecture and operational requirements</li> <li>Installation and configuration procedures for production deployment</li> <li>Security hardening and performance optimization techniques</li> <li>Monitoring, maintenance, and scaling strategies</li> </ul>"},{"location":"getting-started/relay-setup/#relay-infrastructure-overview","title":"Relay Infrastructure Overview","text":"<p>Nostr relays serve as the foundational infrastructure for the decentralized protocol, providing event storage, retrieval, and distribution services. Operating a relay contributes to network resilience while offering control over data persistence and access policies.</p> <p>Understanding relay deployment enables participation in protocol infrastructure and supports advanced use cases including private networks, content curation, and specialized services.</p>"},{"location":"getting-started/relay-setup/#deployment-architecture-considerations","title":"Deployment Architecture Considerations","text":""},{"location":"getting-started/relay-setup/#system-requirements","title":"System Requirements","text":""},{"location":"getting-started/relay-setup/#minimum-production-specifications","title":"Minimum Production Specifications","text":"<ul> <li>CPU: 2+ cores with modern instruction set support</li> <li>Memory: 4GB RAM minimum, 8GB+ recommended for higher throughput</li> <li>Storage: 50GB+ SSD with expansion capability for event database growth</li> <li>Network: Reliable internet connection with adequate bandwidth allocation</li> <li>Operating System: Linux distribution with current security updates</li> </ul>"},{"location":"getting-started/relay-setup/#scaling-considerations","title":"Scaling Considerations","text":"<ul> <li>Database storage grows approximately 1-10GB per month depending on relay policies</li> <li>Network bandwidth requirements scale with user count and activity patterns</li> <li>CPU utilization correlates with event validation and cryptographic operations</li> <li>Memory usage depends on connection concurrency and caching strategies</li> </ul>"},{"location":"getting-started/relay-setup/#software-architecture-options","title":"Software Architecture Options","text":""},{"location":"getting-started/relay-setup/#strfry-c-implementation","title":"Strfry (C++ Implementation)","text":"<p>Technical Characteristics: - High-performance implementation optimized for throughput and latency - LMDB database backend providing ACID compliance and crash resistance - Minimal resource footprint with efficient memory management - Plugin architecture for custom event filtering and policy enforcement</p> <p>Operational Benefits: - Proven stability under high-load conditions - Comprehensive administrative tooling for database management - Active development with regular security and performance updates - Extensive deployment documentation and community support</p>"},{"location":"getting-started/relay-setup/#nostream-typescriptnodejs","title":"Nostream (TypeScript/Node.js)","text":"<p>Technical Characteristics: - JavaScript ecosystem integration with extensive library support - PostgreSQL or SQLite database options for different deployment scales - Built-in payment processing and Lightning Network integration - Modular architecture supporting custom plugins and extensions</p> <p>Operational Benefits: - Familiar development environment for web developers - Comprehensive API endpoints for monitoring and administration - Advanced features including analytics and user management - Docker containerization support for simplified deployment</p>"},{"location":"getting-started/relay-setup/#production-deployment-strfry-implementation","title":"Production Deployment: Strfry Implementation","text":""},{"location":"getting-started/relay-setup/#system-preparation","title":"System Preparation","text":"<p>Server Provisioning: <pre><code># System updates and security hardening\napt update &amp;&amp; apt upgrade -y\napt install -y ufw fail2ban unattended-upgrades\n\n# Firewall configuration\nufw default deny incoming\nufw default allow outgoing\nufw allow ssh\nufw allow 80/tcp\nufw allow 443/tcp\nufw enable\n\n# Create dedicated system user\nuseradd -r -s /bin/false -d /opt/strfry strfry\nmkdir -p /opt/strfry\nchown strfry:strfry /opt/strfry\n</code></pre></p> <p>Dependency Installation: <pre><code># Build dependencies\napt install -y git build-essential libtool autotools-dev automake \\\npkg-config libssl-dev libevent-dev bsdmainutils python3 \\\nnginx certbot python3-certbot-nginx\n\n# Performance optimization libraries\napt install -y libjemalloc2 libjemalloc-dev\n</code></pre></p>"},{"location":"getting-started/relay-setup/#strfry-compilation-and-installation","title":"Strfry Compilation and Installation","text":"<p>Source Code Preparation: <pre><code>cd /opt/strfry\nsudo -u strfry git clone https://github.com/hoytech/strfry.git .\nsudo -u strfry git submodule update --init\n</code></pre></p> <p>Build Configuration: <pre><code># Configure build environment\nsudo -u strfry make setup-golpe\n\n# Compile with optimizations\nsudo -u strfry make -j$(nproc) CXXFLAGS=\"-O3 -march=native\"\n\n# Verify build integrity\nsudo -u strfry ./strfry --version\n</code></pre></p>"},{"location":"getting-started/relay-setup/#configuration-management","title":"Configuration Management","text":"<p>Primary Configuration File (<code>/opt/strfry/strfry.conf</code>): <pre><code># Database configuration\ndb = \"/opt/strfry/data/strfry-db/\"\n\ndbParams {\n    maxreaders = 512\n    mapsize = 1TB\n}\n\n# Network configuration\nrelay {\n    bind = \"127.0.0.1\"\n    port = 7777\n    nofiles = 65536\n\n    # Performance tuning\n    maxWebsocketPayloadSize = 131072\n    autoPingSeconds = 30\n    enableTcpKeepalive = true\n    queryTimesliceBudgetMicroseconds = 5000\n\n    # Rate limiting\n    maxFilterLimit = 1000\n    maxSubsPerConnection = 50\n\n    # Relay metadata (NIP-11)\n    info {\n        name = \"Production Nostr Relay\"\n        description = \"High-performance Nostr relay infrastructure\"\n        pubkey = \"&lt;relay_operator_pubkey&gt;\"\n        contact = \"admin@relay.example.com\"\n        supported_nips = [1, 2, 9, 11, 12, 15, 16, 20, 22]\n        software = \"strfry\"\n        version = \"0.9.6\"\n    }\n}\n\n# Event filtering and validation\nevents {\n    maxEventSize = 65536\n    rejectEventsNewerThanSeconds = 900\n    rejectEventsOlderThanSeconds = 31536000\n    rejectEphemeralEventsOlderThanSeconds = 60\n    maxNumTags = 1000\n    maxTagValSize = 1024\n}\n\n# Write policy configuration\nwritePolicy {\n    plugin = \"/opt/strfry/write-policy.sh\"\n}\n</code></pre></p> <p>Write Policy Implementation (<code>/opt/strfry/write-policy.sh</code>): <pre><code>#!/bin/bash\n\n# Read event from stdin\nevent=$(cat)\n\n# Extract event properties for analysis\nkind=$(echo \"$event\" | jq -r '.kind')\npubkey=$(echo \"$event\" | jq -r '.pubkey')\ncontent=$(echo \"$event\" | jq -r '.content')\n\n# Basic content filtering\nif echo \"$content\" | grep -qi \"spam\\|scam\\|malware\"; then\n    echo '{\"action\": \"reject\", \"msg\": \"Content policy violation\"}'\n    exit 0\nfi\n\n# Rate limiting by pubkey (implement with external storage)\n# rate_limit_check \"$pubkey\" || {\n#     echo '{\"action\": \"reject\", \"msg\": \"Rate limit exceeded\"}'\n#     exit 0\n# }\n\n# Accept compliant events\necho '{\"action\": \"accept\"}'\n</code></pre></p>"},{"location":"getting-started/relay-setup/#reverse-proxy-configuration","title":"Reverse Proxy Configuration","text":"<p>Nginx Configuration (<code>/etc/nginx/sites-available/nostr-relay</code>): <pre><code>upstream strfry_backend {\n    server 127.0.0.1:7777;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name relay.example.com;\n\n    # Redirect to HTTPS\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name relay.example.com;\n\n    # SSL configuration\n    ssl_certificate /etc/letsencrypt/live/relay.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/relay.example.com/privkey.pem;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n\n    # Performance optimization\n    keepalive_timeout 65;\n    keepalive_requests 1000;\n\n    # WebSocket proxy configuration\n    location / {\n        proxy_pass http://strfry_backend;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n\n        # Timeout configuration\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 60s;\n\n        # Buffer configuration\n        proxy_buffering off;\n        proxy_request_buffering off;\n    }\n\n    # NIP-11 relay information\n    location = / {\n        add_header Content-Type application/nostr+json;\n        add_header Access-Control-Allow-Origin *;\n        add_header Access-Control-Allow-Methods \"GET, POST, OPTIONS\";\n        add_header Access-Control-Allow-Headers \"Content-Type\";\n\n        if ($http_accept ~* \"application/nostr\\+json\") {\n            proxy_pass http://strfry_backend;\n        }\n\n        # Default response for web browsers\n        return 200 '{\"name\":\"Production Nostr Relay\",\"description\":\"High-performance relay infrastructure\",\"supported_nips\":[1,2,9,11,12,15,16,20,22],\"software\":\"strfry\",\"version\":\"0.9.6\"}';\n    }\n}\n</code></pre></p>"},{"location":"getting-started/relay-setup/#ssl-certificate-management","title":"SSL Certificate Management","text":"<p>Let's Encrypt Configuration: <pre><code># Initial certificate generation\ncertbot --nginx -d relay.example.com --email admin@example.com --agree-tos\n\n# Automatic renewal configuration\ncat &gt; /etc/cron.d/certbot &lt;&lt; EOF\n0 12 * * * root certbot renew --quiet --post-hook \"systemctl reload nginx\"\nEOF\n</code></pre></p>"},{"location":"getting-started/relay-setup/#system-service-configuration","title":"System Service Configuration","text":"<p>Systemd Service Unit (<code>/etc/systemd/system/strfry.service</code>): <pre><code>[Unit]\nDescription=Strfry Nostr Relay\nAfter=network.target\nWants=network.target\n\n[Service]\nType=simple\nUser=strfry\nGroup=strfry\nWorkingDirectory=/opt/strfry\nExecStart=/opt/strfry/strfry relay\nRestart=always\nRestartSec=5\nStandardOutput=journal\nStandardError=journal\n\n# Security hardening\nNoNewPrivileges=true\nPrivateTmp=true\nProtectSystem=strict\nProtectHome=true\nReadWritePaths=/opt/strfry/data\n\n# Resource limits\nLimitNOFILE=65536\nLimitNPROC=4096\n\n[Install]\nWantedBy=multi-user.target\n</code></pre></p> <p>Service Management: <pre><code># Enable and start service\nsystemctl daemon-reload\nsystemctl enable strfry\nsystemctl start strfry\n\n# Verify operation\nsystemctl status strfry\njournalctl -u strfry -f\n</code></pre></p>"},{"location":"getting-started/relay-setup/#monitoring-and-maintenance","title":"Monitoring and Maintenance","text":""},{"location":"getting-started/relay-setup/#performance-monitoring","title":"Performance Monitoring","text":"<p>System Metrics Collection: <pre><code># Install monitoring tools\napt install -y htop iotop nethogs\n\n# Database size monitoring\ndu -sh /opt/strfry/data/strfry-db/\n\n# Connection monitoring\nss -tuln | grep :7777\nnetstat -an | grep :443 | wc -l\n</code></pre></p> <p>Application Metrics: <pre><code># Relay statistics\n/opt/strfry/strfry export --count\n\n# Event analysis\n/opt/strfry/strfry export --since=1hour | jq '.kind' | sort | uniq -c\n\n# Performance testing\necho '[\"REQ\",\"test\",{\"kinds\":[1],\"limit\":10}]' | websocat wss://relay.example.com\n</code></pre></p>"},{"location":"getting-started/relay-setup/#database-maintenance","title":"Database Maintenance","text":"<p>Routine Maintenance Operations: <pre><code># Database compaction\nsystemctl stop strfry\nsudo -u strfry /opt/strfry/strfry compact\nsystemctl start strfry\n\n# Backup procedures\nsudo -u strfry /opt/strfry/strfry export &gt; backup-$(date +%Y%m%d).jsonl\ntar -czf backup-$(date +%Y%m%d).tar.gz /opt/strfry/data/\n\n# Database verification\nsudo -u strfry /opt/strfry/strfry verify\n</code></pre></p>"},{"location":"getting-started/relay-setup/#security-hardening","title":"Security Hardening","text":"<p>Access Control Implementation: <pre><code># Fail2ban configuration for WebSocket abuse\ncat &gt; /etc/fail2ban/jail.d/strfry.conf &lt;&lt; EOF\n[strfry]\nenabled = true\nport = 443\nfilter = strfry\nlogpath = /var/log/nginx/access.log\nmaxretry = 10\nbantime = 3600\nfindtime = 600\nEOF\n\n# Rate limiting at nginx level\n# Add to nginx configuration:\n# limit_req_zone $binary_remote_addr zone=websocket:10m rate=10r/s;\n# limit_req zone=websocket burst=20 nodelay;\n</code></pre></p> <p>Network Security: <pre><code># DDoS protection configuration\necho 'net.core.rmem_default = 262144' &gt;&gt; /etc/sysctl.conf\necho 'net.core.rmem_max = 16777216' &gt;&gt; /etc/sysctl.conf\necho 'net.core.wmem_default = 262144' &gt;&gt; /etc/sysctl.conf\necho 'net.core.wmem_max = 16777216' &gt;&gt; /etc/sysctl.conf\nsysctl -p\n</code></pre></p>"},{"location":"getting-started/relay-setup/#practical-exercise-relay-deployment-laboratory","title":"Practical Exercise: Relay Deployment Laboratory","text":"<p>Production Relay Implementation</p> <p>Objective: Deploy and configure a production-ready Nostr relay</p> <p>Phase 1: Infrastructure Setup 1. Provision VPS with appropriate specifications 2. Complete security hardening and system preparation 3. Install and configure all required dependencies 4. Implement monitoring and logging infrastructure</p> <p>Phase 2: Relay Configuration 1. Compile and install Strfry with optimizations 2. Configure relay policies and operational parameters 3. Implement reverse proxy with SSL termination 4. Create systemd service for process management</p> <p>Phase 3: Testing and Validation 1. Verify WebSocket connectivity and protocol compliance 2. Test event publishing and retrieval functionality 3. Validate SSL certificate configuration and renewal 4. Perform load testing and performance optimization</p> <p>Phase 4: Operational Procedures 1. Implement backup and recovery procedures 2. Configure monitoring and alerting systems 3. Document maintenance procedures and troubleshooting 4. Establish security update and patch management processes</p>"},{"location":"getting-started/relay-setup/#scaling-and-optimization","title":"Scaling and Optimization","text":""},{"location":"getting-started/relay-setup/#performance-optimization","title":"Performance Optimization","text":"<p>Database Tuning: <pre><code># Advanced LMDB configuration\ndbParams {\n    maxreaders = 1024\n    mapsize = 5TB\n\n    # Memory mapping optimization\n    mdb_env_set_mapsize = 5497558138880  # 5TB in bytes\n    mdb_env_set_maxdbs = 16\n}\n</code></pre></p> <p>Connection Optimization: <pre><code>relay {\n    # Increase connection limits\n    nofiles = 131072\n    maxSubsPerConnection = 100\n\n    # Optimize query performance\n    queryTimesliceBudgetMicroseconds = 10000\n    maxFilterLimit = 2000\n\n    # Network tuning\n    autoPingSeconds = 25\n    enableTcpKeepalive = true\n}\n</code></pre></p>"},{"location":"getting-started/relay-setup/#horizontal-scaling-strategies","title":"Horizontal Scaling Strategies","text":"<p>Load Balancing Configuration: <pre><code>upstream strfry_cluster {\n    least_conn;\n    server 10.0.1.10:7777 weight=3;\n    server 10.0.1.11:7777 weight=3;\n    server 10.0.1.12:7777 weight=2;\n\n    keepalive 64;\n}\n</code></pre></p> <p>Database Replication: <pre><code># Master-slave replication setup\n/opt/strfry/strfry sync --source wss://master-relay.example.com \\\n                        --target /opt/strfry/data/strfry-db/\n</code></pre></p>"},{"location":"getting-started/relay-setup/#troubleshooting-and-diagnostics","title":"Troubleshooting and Diagnostics","text":""},{"location":"getting-started/relay-setup/#common-issues-and-resolution","title":"Common Issues and Resolution","text":"<p>Connection Problems: <pre><code># WebSocket connectivity testing\nwscat -c wss://relay.example.com\n\n# SSL certificate validation\nopenssl s_client -connect relay.example.com:443 -servername relay.example.com\n\n# Network connectivity analysis\ntcptraceroute relay.example.com 443\n</code></pre></p> <p>Performance Issues: <pre><code># Resource utilization analysis\nhtop\niotop -a\niostat -x 1\n\n# Database performance monitoring\n/opt/strfry/strfry stats\nlmdb_stat /opt/strfry/data/strfry-db/\n</code></pre></p> <p>Event Processing Problems: <pre><code># Event validation testing\necho '{\"id\":\"test\",\"pubkey\":\"test\",\"created_at\":1234567890,\"kind\":1,\"tags\":[],\"content\":\"test\",\"sig\":\"test\"}' | /opt/strfry/strfry import\n\n# Write policy debugging\necho '{\"kind\":1,\"content\":\"test content\"}' | /opt/strfry/write-policy.sh\n</code></pre></p>"},{"location":"getting-started/relay-setup/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"getting-started/relay-setup/#custom-event-filtering","title":"Custom Event Filtering","text":"<p>Advanced Write Policy: <pre><code>#!/bin/bash\n\nevent=$(cat)\n\n# Extract event metadata\nkind=$(echo \"$event\" | jq -r '.kind')\npubkey=$(echo \"$event\" | jq -r '.pubkey')\ncreated_at=$(echo \"$event\" | jq -r '.created_at')\ncontent=$(echo \"$event\" | jq -r '.content')\n\n# Timestamp validation\ncurrent_time=$(date +%s)\ntime_diff=$((current_time - created_at))\n\nif [ $time_diff -gt 300 ] || [ $time_diff -lt -60 ]; then\n    echo '{\"action\": \"reject\", \"msg\": \"Invalid timestamp\"}'\n    exit 0\nfi\n\n# Content length validation\ncontent_length=${#content}\nif [ $content_length -gt 10000 ]; then\n    echo '{\"action\": \"reject\", \"msg\": \"Content too long\"}'\n    exit 0\nfi\n\n# Whitelist/blacklist implementation\nif grep -q \"$pubkey\" /opt/strfry/blacklist.txt; then\n    echo '{\"action\": \"reject\", \"msg\": \"Blocked user\"}'\n    exit 0\nfi\n\necho '{\"action\": \"accept\"}'\n</code></pre></p>"},{"location":"getting-started/relay-setup/#analytics-and-reporting","title":"Analytics and Reporting","text":"<p>Event Analytics Implementation: <pre><code># Daily event statistics\n/opt/strfry/strfry export --since=1day | \\\njq -r '[.kind, .pubkey[0:8]] | @csv' | \\\nsort | uniq -c | sort -nr &gt; daily-stats.txt\n\n# User activity analysis\n/opt/strfry/strfry export --since=1week | \\\njq -r '.pubkey' | sort | uniq -c | sort -nr | head -20\n</code></pre></p>"},{"location":"getting-started/relay-setup/#next-steps","title":"Next Steps","text":"<p>Successful relay deployment provides hands-on experience with Nostr infrastructure and prepares you for advanced protocol development. Understanding operational requirements enables effective contribution to network infrastructure and specialized service development.</p>      Advanced Protocol Concepts \u2192"},{"location":"getting-started/relay-setup/#infrastructure-mastery-assessment","title":"Infrastructure Mastery Assessment","text":"<p>Relay Operations Proficiency</p> <ol> <li>What are the critical considerations for relay database configuration and optimization?</li> <li>How do write policies enable content moderation while maintaining decentralization principles?</li> <li>What security measures are essential for production relay deployment?</li> <li>How can relay operators balance performance, scalability, and resource costs?</li> </ol> Infrastructure Analysis <ol> <li>Database configuration must balance storage efficiency, query performance, and concurrent access patterns while ensuring data integrity and crash resistance</li> <li>Write policies provide programmatic content filtering at the relay level, allowing operators to implement custom rules while users retain the ability to choose relays that align with their preferences</li> <li>Security measures include system hardening, network protection, SSL/TLS encryption, access control, monitoring, and regular security updates to protect against various attack vectors</li> <li>Performance optimization requires careful tuning of database parameters, connection limits, caching strategies, and hardware resources while implementing cost-effective scaling strategies</li> </ol>"},{"location":"getting-started/wallet-setup/","title":"Lightning Wallet Integration","text":"<p>Learning Objectives</p> <p>By the end of this lesson, you'll understand:</p> <ul> <li>The role of Lightning Network in the Nostr ecosystem</li> <li>Different wallet architectures and their security implications</li> <li>How to configure Lightning integration with Nostr clients</li> <li>Best practices for key management and operational security</li> </ul>"},{"location":"getting-started/wallet-setup/#lightning-network-integration","title":"Lightning Network Integration","text":"<p>The Lightning Network provides instant, low-cost Bitcoin payments that enable new economic models within the Nostr protocol. Zaps - Lightning-powered micropayments - create direct value transfer between users, facilitating content monetization and network incentives.</p> <p>This integration transforms social interaction from engagement-based metrics to value-based transactions, enabling creators to receive immediate compensation for their contributions.</p>"},{"location":"getting-started/wallet-setup/#wallet-architecture-types","title":"Wallet Architecture Types","text":""},{"location":"getting-started/wallet-setup/#custodial-wallets","title":"Custodial Wallets","text":"<p>Technical Characteristics: - Private keys managed by service provider - Simplified user experience with reduced technical complexity - Immediate availability without channel management requirements - Centralized counterparty risk</p> <p>Implementation Considerations: - Lower barrier to entry for new users - Regulatory compliance requirements for service providers - Potential for account restrictions or service termination - Simplified backup and recovery processes</p>"},{"location":"getting-started/wallet-setup/#non-custodial-wallets","title":"Non-Custodial Wallets","text":"<p>Technical Characteristics: - User-controlled private key management - Direct Lightning Network node operation or trusted node connection - Channel liquidity management requirements - Enhanced privacy and sovereignty</p> <p>Implementation Considerations: - Increased technical complexity and user responsibility - Backup and recovery procedures critical for fund security - Channel management and liquidity considerations - Greater resistance to external control or censorship</p>"},{"location":"getting-started/wallet-setup/#wallet-selection-matrix","title":"Wallet Selection Matrix","text":"Criteria Custodial Solutions Non-Custodial Solutions Security Model Trust-based Self-sovereign Key Management Service provider User responsibility Technical Complexity Low Medium to High Privacy Level Limited Enhanced Availability High Variable Regulatory Risk Higher Lower"},{"location":"getting-started/wallet-setup/#recommended-implementations","title":"Recommended Implementations","text":""},{"location":"getting-started/wallet-setup/#web-based-integration-alby","title":"Web-Based Integration: Alby","text":"<p>Technical Specifications: - Browser extension with WebLN protocol support - NIP-07 compliance for Nostr event signing - Built-in Lightning node connectivity - OAuth-style authorization for web applications</p> <p>Integration Process: 1. Install browser extension from official distribution channels 2. Complete account creation and backup phrase documentation 3. Configure Lightning node connectivity (custodial or self-hosted) 4. Enable NIP-07 permissions for Nostr applications</p>"},{"location":"getting-started/wallet-setup/#mobile-solutions","title":"Mobile Solutions","text":""},{"location":"getting-started/wallet-setup/#wallet-of-satoshi-custodial","title":"Wallet of Satoshi (Custodial)","text":"<p>Technical Features: - Simplified Lightning Network abstraction - Instant payment processing - Lightning address support (LNURL-pay) - Minimal configuration requirements</p>"},{"location":"getting-started/wallet-setup/#phoenix-non-custodial","title":"Phoenix (Non-Custodial)","text":"<p>Technical Features: - Automatic channel management - ACINQ node infrastructure - On-chain backup mechanisms - Advanced fee management options</p>"},{"location":"getting-started/wallet-setup/#breez-non-custodial","title":"Breez (Non-Custodial)","text":"<p>Technical Features: - Built-in Lightning Service Provider (LSP) - Self-hosted node option - Podcast integration with streaming payments - Point-of-sale functionality</p>"},{"location":"getting-started/wallet-setup/#configuration-and-integration","title":"Configuration and Integration","text":""},{"location":"getting-started/wallet-setup/#lightning-address-setup","title":"Lightning Address Setup","text":"<p>Lightning addresses provide human-readable payment identifiers following the format <code>username@domain.com</code>. This abstraction simplifies the payment process while maintaining Lightning Network compatibility.</p> <p>Implementation Steps: 1. Obtain Lightning address from wallet provider 2. Configure address in Nostr client profile metadata 3. Verify payment functionality through test transactions 4. Monitor payment notifications and confirmations</p>"},{"location":"getting-started/wallet-setup/#nostr-client-configuration","title":"Nostr Client Configuration","text":"<p>Profile Metadata Configuration: <pre><code>{\n  \"kind\": 0,\n  \"content\": {\n    \"name\": \"User Name\",\n    \"about\": \"User description\",\n    \"picture\": \"https://example.com/avatar.jpg\",\n    \"lud16\": \"username@domain.com\"\n  }\n}\n</code></pre></p> <p>The <code>lud16</code> field contains the Lightning address, enabling automatic zap functionality across compatible Nostr clients.</p>"},{"location":"getting-started/wallet-setup/#practical-exercise-wallet-setup-and-testing","title":"Practical Exercise: Wallet Setup and Testing","text":"<p>Lightning Integration Laboratory</p> <p>Objective: Configure and test Lightning wallet integration with Nostr protocol</p> <p>Phase 1: Wallet Selection and Setup 1. Evaluate wallet options based on technical requirements and risk tolerance 2. Complete wallet installation and initial configuration 3. Document backup procedures and security measures 4. Fund wallet with minimal amount for testing purposes</p> <p>Phase 2: Nostr Integration 1. Configure Lightning address in Nostr client profile 2. Verify profile propagation across relay network 3. Test zap functionality with small amounts 4. Monitor transaction confirmations and notifications</p> <p>Phase 3: Operational Validation 1. Send test zaps to other users or yourself 2. Receive zaps and verify notification systems 3. Analyze transaction fees and processing times 4. Document any connectivity or reliability issues</p>"},{"location":"getting-started/wallet-setup/#security-implementation","title":"Security Implementation","text":""},{"location":"getting-started/wallet-setup/#key-management-best-practices","title":"Key Management Best Practices","text":"<p>Backup Procedures: - Document seed phrases using offline, physical storage - Verify backup integrity through recovery testing - Implement multi-location storage with appropriate security - Establish clear succession planning for fund recovery</p> <p>Operational Security: - Use dedicated devices for significant fund management - Implement strong authentication mechanisms - Regular security audits of connected applications - Monitor for unauthorized access or unusual activity</p>"},{"location":"getting-started/wallet-setup/#fund-management-strategies","title":"Fund Management Strategies","text":"<p>Risk Mitigation: - Maintain minimal balances in hot wallets for daily operations - Use cold storage for long-term fund security - Implement spending limits and approval processes - Regular fund movement to reduce exposure windows</p>"},{"location":"getting-started/wallet-setup/#payment-flow-architecture","title":"Payment Flow Architecture","text":"<pre><code>sequenceDiagram\n    participant User as Nostr User\n    participant Client as Nostr Client\n    participant Relay as Nostr Relay\n    participant Wallet as Lightning Wallet\n    participant LN as Lightning Network\n\n    User-&gt;&gt;Client: Initiate Zap\n    Client-&gt;&gt;Wallet: Request Invoice\n    Wallet-&gt;&gt;LN: Generate Payment Request\n    LN--&gt;&gt;Wallet: Return Invoice\n    Wallet--&gt;&gt;Client: Provide Invoice\n    Client-&gt;&gt;User: Display Payment Details\n    User-&gt;&gt;Wallet: Authorize Payment\n    Wallet-&gt;&gt;LN: Execute Payment\n    LN--&gt;&gt;Wallet: Payment Confirmation\n    Wallet--&gt;&gt;Client: Notify Success\n    Client-&gt;&gt;Relay: Publish Zap Event\n    Relay--&gt;&gt;Client: Confirm Event Storage</code></pre>"},{"location":"getting-started/wallet-setup/#economic-model-analysis","title":"Economic Model Analysis","text":""},{"location":"getting-started/wallet-setup/#value-transfer-mechanisms","title":"Value Transfer Mechanisms","text":"<p>Micropayment Economics: - Transaction costs approaching zero enable micro-value transfer - Direct creator compensation without platform intermediaries - Market-driven content valuation through payment amounts - Network effects from value-based engagement metrics</p> <p>Network Incentives: - Quality content receives proportional compensation - Spam reduction through payment requirements - Relay operator compensation through usage fees - Developer incentives through application monetization</p>"},{"location":"getting-started/wallet-setup/#troubleshooting-and-diagnostics","title":"Troubleshooting and Diagnostics","text":""},{"location":"getting-started/wallet-setup/#common-integration-issues","title":"Common Integration Issues","text":"<p>Connection Problems: - Verify wallet application permissions and authorizations - Check Lightning Network connectivity and channel status - Confirm Lightning address configuration and propagation - Test with different Nostr clients for compatibility verification</p> <p>Payment Failures: - Analyze Lightning Network routing and liquidity constraints - Verify recipient Lightning address validity and functionality - Check payment amount limits and wallet balance sufficiency - Monitor for temporary network congestion or connectivity issues</p> <p>Performance Optimization: - Configure optimal relay selections for payment notifications - Implement connection pooling for improved responsiveness - Cache Lightning invoices to reduce generation latency - Monitor payment success rates and failure patterns</p>"},{"location":"getting-started/wallet-setup/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"getting-started/wallet-setup/#custom-lightning-infrastructure","title":"Custom Lightning Infrastructure","text":"<p>Self-Hosted Solutions: - Lightning node deployment and management - Channel liquidity management strategies - Backup and monitoring system implementation - Integration with existing infrastructure and security systems</p> <p>Enterprise Considerations: - Multi-signature wallet configurations - Automated payment processing and reconciliation - Compliance and audit trail requirements - Scalability planning for high-volume operations</p>"},{"location":"getting-started/wallet-setup/#next-steps","title":"Next Steps","text":"<p>Lightning wallet integration enables participation in Nostr's value-based economy. Understanding the technical architecture and security considerations prepares you for advanced protocol development and deployment.</p>      Development Tools and Infrastructure \u2192"},{"location":"getting-started/wallet-setup/#technical-validation","title":"Technical Validation","text":"<p>Integration Comprehension Assessment</p> <ol> <li>What are the primary trade-offs between custodial and non-custodial wallet architectures?</li> <li>How does the Lightning address system simplify payment processes?</li> <li>What security considerations are critical for Lightning wallet operations?</li> <li>How do zaps change the economic incentives in social networking?</li> </ol> Technical Analysis <ol> <li>Custodial wallets trade security and sovereignty for simplicity, while non-custodial wallets provide full control at the cost of increased complexity and responsibility</li> <li>Lightning addresses abstract complex payment requests into human-readable identifiers, enabling seamless integration with existing communication protocols</li> <li>Key management, backup procedures, and operational security are fundamental to preventing fund loss and maintaining system integrity</li> <li>Direct value transfer creates immediate feedback loops between content quality and creator compensation, fundamentally altering engagement incentives</li> </ol>"},{"location":"getting-started/what-is-nostr/","title":"What is Nostr?","text":"<p>Learning Objectives</p> <p>By the end of this lesson, you'll understand:</p> <ul> <li>What Nostr stands for and its core principles</li> <li>How Nostr differs from traditional social media platforms</li> <li>The fundamental components of the Nostr protocol</li> <li>The benefits of decentralized social networking</li> </ul>"},{"location":"getting-started/what-is-nostr/#introduction","title":"Introduction","text":"<p>Nostr stands for \"Notes and Other Stuff Transmitted by Relays.\" It is a simple, open protocol that enables global, decentralized, and censorship-resistant social networking.</p> <p>Unlike traditional social media platforms, Nostr operates without a central authority, giving users complete control over their identity and data through cryptographic key pairs.</p>"},{"location":"getting-started/what-is-nostr/#core-principles","title":"Core Principles","text":""},{"location":"getting-started/what-is-nostr/#decentralized-architecture","title":"Decentralized Architecture","text":"<p>Nostr operates on a network of independent relays rather than centralized servers, eliminating single points of failure and control.</p>"},{"location":"getting-started/what-is-nostr/#user-sovereignty","title":"User Sovereignty","text":"<p>Users maintain full ownership of their identity through cryptographic keys, ensuring no platform can ban or silence them permanently.</p>"},{"location":"getting-started/what-is-nostr/#protocol-simplicity","title":"Protocol Simplicity","text":"<p>The protocol prioritizes simplicity over complexity, making it reliable, performant, and easy to implement.</p>"},{"location":"getting-started/what-is-nostr/#censorship-resistance","title":"Censorship Resistance","text":"<p>The distributed nature of relays ensures that content cannot be globally censored by any single entity.</p>"},{"location":"getting-started/what-is-nostr/#protocol-architecture","title":"Protocol Architecture","text":"<pre><code>graph TB\n    User[\ud83d\udc64 User] --&gt;|publishes events| R1[\ud83d\udd04 Relay 1]\n    User --&gt;|publishes events| R2[\ud83d\udd04 Relay 2]\n    User --&gt;|publishes events| R3[\ud83d\udd04 Relay 3]\n\n    R1 --&gt;|distributes to| Follower[\ud83d\udc64 Follower]\n    R2 --&gt;|distributes to| Follower\n    R3 --&gt;|distributes to| OtherUsers[\ud83d\udc64 Other Users]\n\n    Follower --&gt;|publishes response| R1\n    Follower --&gt;|publishes response| R2\n\n    R1 --&gt;|delivers to| User\n    R2 --&gt;|delivers to| User\n\n    style User fill:#e1f5fe\n    style Follower fill:#e8f5e8\n    style OtherUsers fill:#e8f5e8\n    style R1 fill:#fff3e0\n    style R2 fill:#fff3e0\n    style R3 fill:#fff3e0</code></pre> <p>The protocol operates through the following process:</p> <ol> <li>Event Creation: Users create signed events using their private keys</li> <li>Relay Distribution: Events are sent to multiple relays for storage and distribution</li> <li>Content Discovery: Other users query relays to retrieve relevant events</li> <li>Network Interaction: Users can respond and interact, creating new events in the network</li> </ol>"},{"location":"getting-started/what-is-nostr/#protocol-components","title":"Protocol Components","text":""},{"location":"getting-started/what-is-nostr/#events","title":"Events","text":"<p>All content in Nostr is represented as events - JSON objects containing standardized fields:</p> <pre><code>{\n  \"id\": \"event_identifier_hash\",\n  \"pubkey\": \"author_public_key\", \n  \"created_at\": 1234567890,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"Message content\",\n  \"sig\": \"cryptographic_signature\"\n}\n</code></pre> <p>Key Properties: - Immutable: Events cannot be modified after creation - Verifiable: Digital signatures ensure authenticity - Portable: Events work across all Nostr clients and relays</p>"},{"location":"getting-started/what-is-nostr/#relays","title":"Relays","text":"<p>Independent servers that store and forward events. Relay characteristics include:</p> <ul> <li>Autonomous Operation: Each relay operates independently with its own policies</li> <li>Configurable Filtering: Relays can implement custom content moderation rules</li> <li>Network Redundancy: Multiple relays provide fault tolerance and censorship resistance</li> <li>Simple Protocol: Relays implement a straightforward WebSocket-based API</li> </ul>"},{"location":"getting-started/what-is-nostr/#clients","title":"Clients","text":"<p>Applications that provide user interfaces for interacting with the Nostr protocol:</p> <ul> <li>Key Management: Secure generation, storage, and usage of cryptographic keys</li> <li>Multi-Relay Communication: Connect to multiple relays simultaneously for redundancy</li> <li>Event Processing: Create, sign, verify, and display events according to protocol specifications</li> <li>User Experience: Abstract protocol complexity behind intuitive interfaces</li> </ul>"},{"location":"getting-started/what-is-nostr/#technical-implementation","title":"Technical Implementation","text":""},{"location":"getting-started/what-is-nostr/#event-structure-and-validation","title":"Event Structure and Validation","text":"<p>Events must conform to specific validation rules:</p> Required FieldsValidation Process <pre><code>{\n  \"id\": \"32-byte lowercase hex of sha256 of serialized event data\",\n  \"pubkey\": \"32-byte lowercase hex of the public key\",\n  \"created_at\": \"unix timestamp in seconds\",\n  \"kind\": \"integer between 0 and 65535\",\n  \"tags\": \"array of arrays of strings\",\n  \"content\": \"arbitrary string\",\n  \"sig\": \"64-byte lowercase hex of signature\"\n}\n</code></pre> <pre><code>// Pseudocode for event validation\nfunction validateEvent(event) {\n  // 1. Verify required fields are present\n  if (!hasRequiredFields(event)) return false;\n\n  // 2. Verify ID matches content hash\n  if (event.id !== computeEventId(event)) return false;\n\n  // 3. Verify signature\n  if (!verifySignature(event.sig, event.id, event.pubkey)) return false;\n\n  // 4. Check timestamp validity\n  if (!isValidTimestamp(event.created_at)) return false;\n\n  return true;\n}\n</code></pre>"},{"location":"getting-started/what-is-nostr/#relay-communication-protocol","title":"Relay Communication Protocol","text":"<p>Relays implement a WebSocket-based protocol with three message types:</p> Message Type Purpose Format EVENT Publish events to relay <code>[\"EVENT\", &lt;event JSON&gt;]</code> REQ Request events from relay <code>[\"REQ\", &lt;subscription_id&gt;, &lt;filters...&gt;]</code> CLOSE Close subscription <code>[\"CLOSE\", &lt;subscription_id&gt;]</code>"},{"location":"getting-started/what-is-nostr/#architectural-comparison","title":"Architectural Comparison","text":"Aspect Traditional Platforms Nostr Protocol Identity Control Platform-owned accounts User-controlled cryptographic keys Data Storage Centralized databases Distributed relay network Content Moderation Platform-wide policies Per-relay policies with user choice Algorithm Control Proprietary, profit-driven Open, user-configurable Vendor Lock-in High switching costs Portable identity and data Single Point of Failure Platform infrastructure No global dependencies"},{"location":"getting-started/what-is-nostr/#hands-on-exercise-network-exploration","title":"Hands-On Exercise: Network Exploration","text":"<p>Protocol Analysis Exercise</p> <p>Objective: Examine real Nostr events to understand protocol structure</p> <p>Steps: 1. Visit nostr.band to explore the network 2. Search for recent events using hashtag <code>#nostr</code> 3. Click on individual events to examine their JSON structure 4. Identify the different event kinds and their purposes 5. Note the variety of relays being used across the network</p> <p>Analysis Questions: - How many different event kinds can you identify? - What patterns do you notice in the tag structures? - How do public keys and signatures provide identity verification?</p>"},{"location":"getting-started/what-is-nostr/#protocol-benefits-and-trade-offs","title":"Protocol Benefits and Trade-offs","text":"<p>Protocol Advantages</p> <p>Decentralization Benefits</p> <ul> <li>\u2705 Elimination of single points of failure or control</li> <li>\u2705 Resistance to censorship and platform manipulation</li> <li>\u2705 User ownership of identity and data</li> <li>\u2705 Competitive ecosystem of clients and services</li> </ul> <p>Technical Advantages</p> <ul> <li>\u2705 Simple, well-defined protocol specification</li> <li>\u2705 Cryptographic security and verification</li> <li>\u2705 Extensible design through NIPs (Nostr Implementation Possibilities)</li> <li>\u2705 Low barrier to entry for developers and relay operators</li> </ul> <p>Technical Considerations</p> <p>Current Limitations</p> <ul> <li>\u26a0\ufe0f Key management complexity for average users</li> <li>\u26a0\ufe0f Potential for spam without centralized filtering</li> <li>\u26a0\ufe0f Relay discovery and selection challenges</li> <li>\u26a0\ufe0f Limited built-in privacy features for metadata</li> </ul> <p>Scalability Considerations</p> <ul> <li>\u26a0\ufe0f Relay storage and bandwidth requirements</li> <li>\u26a0\ufe0f Event verification computational overhead</li> <li>\u26a0\ufe0f Network effects and adoption challenges</li> </ul>"},{"location":"getting-started/what-is-nostr/#nips-protocol-extensions","title":"NIPs: Protocol Extensions","text":"<p>Nostr Implementation Possibilities (NIPs) define protocol extensions and standards:</p> NIP Title Purpose NIP-01 Basic protocol flow Core event and relay specifications NIP-02 Contact list and petnames Following and contact management NIP-04 Encrypted direct messages Private communication NIP-05 DNS-based verification Human-readable identifiers NIP-09 Event deletion Content removal mechanisms NIP-11 Relay information document Relay metadata and policies"},{"location":"getting-started/what-is-nostr/#practical-exercise-event-analysis","title":"Practical Exercise: Event Analysis","text":"<p>Technical Deep Dive</p> <p>Task: Analyze the structure of different Nostr event types</p> <p>Instructions: 1. Use a Nostr client or web interface to examine events 2. Document the differences between event kinds (0, 1, 3, 7) 3. Analyze tag usage patterns across different event types 4. Verify event signatures using available tools</p> <p>Expected Outcomes: - Understanding of event structure variations - Recognition of tag-based metadata patterns - Appreciation for cryptographic verification mechanisms</p>"},{"location":"getting-started/what-is-nostr/#next-steps","title":"Next Steps","text":"<p>Understanding Nostr's foundational architecture prepares you for implementing practical applications. The protocol's simplicity enables rapid development while its cryptographic foundations ensure security and user sovereignty.</p>      Lightning Wallet Integration \u2192"},{"location":"getting-started/what-is-nostr/#knowledge-verification","title":"Knowledge Verification","text":"<p>Technical Comprehension Check</p> <ol> <li>What are the three fundamental components of the Nostr protocol?</li> <li>How does event verification work in Nostr?</li> <li>What distinguishes Nostr relays from traditional social media servers?</li> <li>Why is the protocol designed around simple JSON events?</li> </ol> Technical Answers <ol> <li>Events (content data structures), Relays (storage and distribution infrastructure), and Clients (user interface applications)</li> <li>Digital signatures using cryptographic key pairs verify event authenticity, while content hashing ensures integrity</li> <li>Relays operate independently with individual policies, creating a distributed network without central control points</li> <li>JSON simplicity ensures broad compatibility, easy parsing, and straightforward protocol implementation across different programming languages</li> </ol>"},{"location":"modules/","title":"Learn Nostr Modules","text":"<p>Welcome to the Learn Nostr Modules! This comprehensive curriculum is designed to take you from a complete beginner to a Nostr expert through structured, progressive learning paths.</p>"},{"location":"modules/#learning-path-overview","title":"\ud83c\udfaf Learning Path Overview","text":"<p>Our modules are carefully structured to build your knowledge progressively:</p> <ul> <li>Modules 1-3: Foundation - Understanding the basics</li> <li>Modules 4-6: Intermediate - Building and interacting</li> <li>Modules 7-9: Advanced - Architecture and optimization</li> <li>Modules 10-12: Expert - Innovation and contribution</li> </ul>"},{"location":"modules/#available-modules","title":"\ud83d\udcda Available Modules","text":""},{"location":"modules/#foundation-track","title":"Foundation Track","text":"<ul> <li> <p> Module 1: Introduction to Nostr</p> <p>Start your journey by understanding what Nostr is, why it matters, and how it revolutionizes social communication.</p> <p> Begin Module 1</p> </li> <li> <p> Module 2: Keys &amp; Identity</p> <p>Master the fundamentals of cryptographic keys, digital identity, and account management in Nostr.</p> <p> Begin Module 2</p> </li> <li> <p> Module 3: Events &amp; Messages</p> <p>Learn how Nostr structures data, creates events, and enables communication through the protocol.</p> <p> Begin Module 3</p> </li> </ul>"},{"location":"modules/#intermediate-track","title":"Intermediate Track","text":"<ul> <li> <p> Module 4: Relays &amp; Architecture</p> <p>Master relay communication, WebSocket connections, and network architecture patterns.</p> <p> Begin Module 4</p> </li> <li> <p> Module 5: Building Your Client</p> <p>Build a complete, production-ready Nostr client application from scratch.</p> <p> Begin Module 5</p> </li> <li> <p> Module 6: Advanced NIPs</p> <p>Master advanced event types, NIPs, and protocol extensions for sophisticated applications.</p> <p> Begin Module 6</p> </li> </ul>"},{"location":"modules/#advanced-track","title":"Advanced Track","text":"<ul> <li> <p> Module 7: Production Relays</p> <p>Design, deploy, and operate production-grade Nostr relays at scale.</p> <p> Begin Module 7</p> </li> <li> <p> Module 8: Scaling &amp; Performance</p> <p>Optimize relay performance, implement caching, and scale to millions of users.</p> <p> Begin Module 8</p> </li> <li> <p> Module 9: Security Best Practices</p> <p>Coming Soon - Advanced security patterns, threat modeling, and hardening strategies.</p> </li> </ul>"},{"location":"modules/#coming-soon","title":"Coming Soon","text":"<ul> <li>Module 10: Protocol Development</li> <li>Module 11: Economic Models &amp; Lightning</li> <li>Module 12: Contributing to Nostr</li> </ul>"},{"location":"modules/#how-to-use-these-modules","title":"\ud83d\ude80 How to Use These Modules","text":"<ol> <li>Start from Module 1 if you're new to Nostr</li> <li>Complete exercises at the end of each module</li> <li>Join discussions in our Discord community</li> <li>Build projects to apply what you've learned</li> <li>Track your progress using the checkpoints</li> </ol>"},{"location":"modules/#skill-progression","title":"\ud83d\udcca Skill Progression","text":"<pre><code>graph LR\n    A[Beginner] --&gt;|Modules 1-3| B[Foundation]\n    B --&gt;|Modules 4-6| C[Intermediate]\n    C --&gt;|Modules 7-9| D[Advanced]\n    D --&gt;|Modules 10-12| E[Expert]</code></pre>"},{"location":"modules/#certification-track","title":"\ud83c\udf93 Certification Track","text":"<p>Complete all modules and projects to earn your Nostr Developer Certification (coming soon).</p> <p>Join Our Community</p> <p>Have questions? Join our Discord to connect with other learners and get help from experienced Nostr developers!</p>"},{"location":"modules/module-01-introduction/","title":"Module 1: Introduction to Nostr","text":"<p>Module Overview</p> <p>Duration: 2-3 hours Level: Beginner Prerequisites: None Goal: Understand what Nostr is, why it exists, and how it fundamentally works</p>"},{"location":"modules/module-01-introduction/#learning-objectives","title":"\ud83d\udccb Learning Objectives","text":"<p>By the end of this module, you will:</p> <ul> <li>\u2705 Understand what Nostr is and its core philosophy</li> <li>\u2705 Know the problems Nostr solves</li> <li>\u2705 Comprehend the basic architecture</li> <li>\u2705 Set up your first Nostr account</li> <li>\u2705 Send your first message on Nostr</li> </ul>"},{"location":"modules/module-01-introduction/#11-what-is-nostr","title":"1.1 What is Nostr?","text":""},{"location":"modules/module-01-introduction/#the-name","title":"The Name","text":"<p>Nostr stands for \"Notes and Other Stuff Transmitted by Relays\". It's a simple, open protocol that enables a truly decentralized and censorship-resistant global social network.</p>"},{"location":"modules/module-01-introduction/#core-concept","title":"Core Concept","text":"<p>At its heart, Nostr is:</p> <ul> <li>A protocol, not a platform or company</li> <li>Decentralized - no single entity controls it</li> <li>Simple - based on straightforward concepts</li> <li>Flexible - can be used for many applications beyond social media</li> </ul> <p>Key Insight</p> <p>\"Nostr is not an app, it's a protocol - like email or the web. Anyone can build on it, no one can shut it down.\"</p>"},{"location":"modules/module-01-introduction/#12-why-nostr-exists","title":"1.2 Why Nostr Exists","text":""},{"location":"modules/module-01-introduction/#problems-with-current-social-media","title":"Problems with Current Social Media","text":"<p>Traditional social media platforms face several critical issues:</p> <ol> <li>Centralized Control</li> <li>Single companies control your data</li> <li>Can ban or censor users arbitrarily</li> <li> <p>Can disappear, taking your content with them</p> </li> <li> <p>Data Ownership</p> </li> <li>Platforms own your content</li> <li>Cannot easily move between platforms</li> <li> <p>Your social graph is locked in</p> </li> <li> <p>Censorship</p> </li> <li>Content moderation by central authorities</li> <li>Varying standards across regions</li> <li> <p>No user choice in moderation policies</p> </li> <li> <p>Identity Portability</p> </li> <li>Usernames tied to specific platforms</li> <li>Must rebuild following on each platform</li> <li>No universal digital identity</li> </ol>"},{"location":"modules/module-01-introduction/#nostrs-solutions","title":"Nostr's Solutions","text":"Problem Nostr Solution Centralized servers Multiple independent relays Platform lock-in Portable identity via cryptographic keys Censorship Choose your own relays and filters Data ownership You sign and own your content Identity portability One identity works everywhere"},{"location":"modules/module-01-introduction/#13-how-nostr-works","title":"1.3 How Nostr Works","text":""},{"location":"modules/module-01-introduction/#the-three-pillars","title":"The Three Pillars","text":"<pre><code>graph TD\n    A[Users] --&gt;|Create &amp; Sign| B[Events]\n    B --&gt;|Broadcast to| C[Relays]\n    C --&gt;|Distribute to| A\n\n    style A fill:#9c27b0,stroke:#fff,color:#fff\n    style B fill:#7b1fa2,stroke:#fff,color:#fff\n    style C fill:#6a1b9a,stroke:#fff,color:#fff</code></pre> <ol> <li>Users (Clients)</li> <li>Create and consume content</li> <li>Hold private keys for identity</li> <li> <p>Connect to multiple relays</p> </li> <li> <p>Events</p> </li> <li>All data in Nostr is an \"event\"</li> <li>Cryptographically signed messages</li> <li> <p>Contains content, metadata, and signature</p> </li> <li> <p>Relays</p> </li> <li>Simple servers that store and forward events</li> <li>Anyone can run a relay</li> <li>Users choose which relays to use</li> </ol>"},{"location":"modules/module-01-introduction/#simple-architecture-example","title":"Simple Architecture Example","text":"<p>Imagine Alice wants to send a message:</p> <ol> <li>Alice writes \"Hello Nostr!\" in her client</li> <li>Her client creates an event and signs it with her private key</li> <li>The client sends this event to her chosen relays</li> <li>Bob's client queries these relays for new events</li> <li>Bob sees Alice's message and can verify it's really from her</li> </ol>"},{"location":"modules/module-01-introduction/#14-key-innovations","title":"1.4 Key Innovations","text":""},{"location":"modules/module-01-introduction/#1-cryptographic-identity","title":"1. Cryptographic Identity","text":"<p>Instead of usernames, Nostr uses cryptographic key pairs:</p> <ul> <li>Private Key: Your secret password (never share!)</li> <li>Public Key: Your identity that others see</li> </ul> <p>Important</p> <p>Your private key IS your identity. If you lose it, you lose your account. If someone else gets it, they can impersonate you.</p>"},{"location":"modules/module-01-introduction/#2-client-relay-architecture","title":"2. Client-Relay Architecture","text":"<ul> <li>Clients are apps you use (like Damus, Amethyst, Snort)</li> <li>Relays are servers that store messages</li> <li>You can use multiple clients with the same identity</li> <li>You can connect to multiple relays for redundancy</li> </ul>"},{"location":"modules/module-01-introduction/#3-censorship-resistance","title":"3. Censorship Resistance","text":"<ul> <li>No single relay can censor you completely</li> <li>If one relay bans you, use others</li> <li>Users choose their own content filters</li> <li>Market-based relay selection</li> </ul>"},{"location":"modules/module-01-introduction/#15-hands-on-your-first-nostr-experience","title":"1.5 Hands-On: Your First Nostr Experience","text":""},{"location":"modules/module-01-introduction/#step-1-choose-a-client","title":"Step 1: Choose a Client","text":"<p>Popular web clients for beginners:</p> <ul> <li>Snort.social - Feature-rich web client</li> <li>Iris.to - Simple and clean interface</li> <li>Coracle.social - Advanced features</li> </ul>"},{"location":"modules/module-01-introduction/#step-2-create-your-account","title":"Step 2: Create Your Account","text":"<ol> <li>Visit your chosen client</li> <li>Click \"Create Account\" or \"Get Started\"</li> <li>Save your private key immediately!</li> </ol> <p>Critical: Save Your Keys</p> <p><pre><code>Private Key (nsec): nsec1xxxxx... (NEVER SHARE THIS)\nPublic Key (npub): npub1xxxxx... (This is your public identity)\n</code></pre> Store your private key in a password manager or write it down securely!</p>"},{"location":"modules/module-01-introduction/#step-3-complete-your-profile","title":"Step 3: Complete Your Profile","text":"<ul> <li>Add a display name</li> <li>Write a short bio</li> <li>Add a profile picture (optional)</li> <li>Set up Lightning address for tips (optional)</li> </ul>"},{"location":"modules/module-01-introduction/#step-4-send-your-first-note","title":"Step 4: Send Your First Note","text":"<ol> <li>Find the compose/post button</li> <li>Write your first message: \"Hello #Nostr! Just joined this decentralized network \ud83d\ude80\"</li> <li>Click send/publish</li> </ol>"},{"location":"modules/module-01-introduction/#step-5-follow-others-and-explore","title":"Step 5: Follow Others and Explore","text":"<p>Recommended accounts to follow: - Nostr developers and builders - Content creators in your interests - News and update accounts</p>"},{"location":"modules/module-01-introduction/#16-practical-exercises","title":"1.6 Practical Exercises","text":""},{"location":"modules/module-01-introduction/#exercise-1-multi-client-experience","title":"Exercise 1: Multi-Client Experience","text":"<ol> <li>Log into a second client using your private key</li> <li>Notice how your profile and posts appear immediately</li> <li>Post from one client and see it in the other</li> </ol>"},{"location":"modules/module-01-introduction/#exercise-2-relay-exploration","title":"Exercise 2: Relay Exploration","text":"<ol> <li>Check which relays your client is using (usually in settings)</li> <li>Add a new relay: <code>wss://relay.damus.io</code></li> <li>Remove a relay and see if you still see content</li> </ol>"},{"location":"modules/module-01-introduction/#exercise-3-verify-a-message","title":"Exercise 3: Verify a Message","text":"<ol> <li>Find a popular account's message</li> <li>Look for verification checkmarks or indicators</li> <li>Understand how the signature proves authenticity</li> </ol>"},{"location":"modules/module-01-introduction/#17-common-misconceptions","title":"1.7 Common Misconceptions","text":"Misconception Reality \"Nostr is just another social media app\" Nostr is a protocol; apps are just clients \"It's only for Bitcoin/crypto people\" Nostr is for everyone; Bitcoin integration is optional \"It's too technical for regular users\" Modern clients are as easy as traditional social media \"There's no moderation\" Users and relays can implement their own moderation \"It can't scale\" Nostr's architecture allows horizontal scaling"},{"location":"modules/module-01-introduction/#18-use-cases-beyond-social-media","title":"1.8 Use Cases Beyond Social Media","text":"<p>Nostr isn't limited to social networking:</p> <ul> <li>Messaging: Encrypted direct messages</li> <li>Blogging: Long-form content platforms</li> <li>Marketplace: Decentralized commerce</li> <li>Gaming: High scores and achievements</li> <li>Identity: Universal login system</li> <li>IoT: Machine-to-machine communication</li> </ul>"},{"location":"modules/module-01-introduction/#module-1-quiz","title":"\ud83d\udcdd Module 1 Quiz","text":"<p>Test your understanding:</p> <ol> <li> <p>What does Nostr stand for? Answer    Notes and Other Stuff Transmitted by Relays     </p> </li> <li> <p>What are the three main components of Nostr? Answer    Users (Clients), Events, and Relays     </p> </li> <li> <p>Why is your private key important? Answer    It's your identity and password combined - losing it means losing your account, and anyone with it can impersonate you     </p> </li> <li> <p>Can one relay completely censor you on Nostr? Answer    No, because you can use multiple relays. If one blocks you, others can still distribute your content     </p> </li> <li> <p>What makes Nostr different from Twitter or Facebook? Answer    Nostr is a protocol (not a company), decentralized (no single control point), gives users data ownership, and provides identity portability     </p> </li> </ol>"},{"location":"modules/module-01-introduction/#module-1-checkpoint","title":"\ud83c\udfaf Module 1 Checkpoint","text":"<p>Before moving to Module 2, ensure you have:</p> <ul> <li>[ ] Created a Nostr account and saved your keys securely</li> <li>[ ] Successfully posted at least one note</li> <li>[ ] Logged into two different clients with the same key</li> <li>[ ] Followed at least 5 other accounts</li> <li>[ ] Added or removed at least one relay</li> <li>[ ] Understood the difference between public and private keys</li> </ul>"},{"location":"modules/module-01-introduction/#additional-resources","title":"\ud83d\udcda Additional Resources","text":"<ul> <li>Nostr Protocol Documentation</li> <li>Awesome Nostr - Curated list of Nostr resources</li> <li>Nostr.how - Beginner guides</li> <li>Video: \"What is Nostr?\" Explained Simply</li> </ul>"},{"location":"modules/module-01-introduction/#community-discussion","title":"\ud83d\udcac Community Discussion","text":"<p>Join our Discord to discuss Module 1: - Share your first Nostr experience - Ask questions about concepts - Help other beginners - Find people to follow</p> <p>Congratulations!</p> <p>You've completed Module 1! You now understand what Nostr is, why it matters, and have hands-on experience using it. Ready for Module 2 where we'll dive deep into keys and identity!</p> <p>Continue to Module 2: Keys &amp; Identity \u2192</p>"},{"location":"modules/module-02-keys-identity/","title":"Module 2: Keys &amp; Identity","text":"<p>Module Overview</p> <p>Duration: 3-4 hours Level: Beginner Prerequisites: Module 1 completed Goal: Master Nostr's cryptographic identity system and key management</p>"},{"location":"modules/module-02-keys-identity/#learning-objectives","title":"\ud83d\udccb Learning Objectives","text":"<p>By the end of this module, you will:</p> <ul> <li>\u2705 Understand public key cryptography basics</li> <li>\u2705 Master Nostr key formats (hex, npub, nsec)</li> <li>\u2705 Implement secure key management practices</li> <li>\u2705 Use NIP-07 browser extensions</li> <li>\u2705 Understand key delegation and rotation concepts</li> <li>\u2705 Build your cryptographic identity</li> </ul>"},{"location":"modules/module-02-keys-identity/#21-cryptography-fundamentals","title":"2.1 Cryptography Fundamentals","text":""},{"location":"modules/module-02-keys-identity/#what-is-public-key-cryptography","title":"What is Public Key Cryptography?","text":"<p>Public key cryptography uses a pair of mathematically related keys:</p> <pre><code>graph LR\n    A[Private Key&lt;br/&gt;Secret] --&gt;|Generates| B[Public Key&lt;br/&gt;Shareable]\n    B --&gt;|Cannot Derive| A\n\n    style A fill:#f44336,stroke:#fff,color:#fff\n    style B fill:#4caf50,stroke:#fff,color:#fff</code></pre> <p>Key Properties: - One-way relationship: Public key derives from private key, never reverse - Digital signatures: Private key signs, public key verifies - Encryption: Public key encrypts, private key decrypts</p>"},{"location":"modules/module-02-keys-identity/#how-it-works-in-nostr","title":"How It Works in Nostr","text":"<ol> <li> <p>Identity Creation <pre><code>Private Key \u2192 Public Key \u2192 Your Nostr Identity\n</code></pre></p> </li> <li> <p>Message Signing <pre><code>Your Message + Private Key \u2192 Signed Event\n</code></pre></p> </li> <li> <p>Verification <pre><code>Signed Event + Public Key \u2192 Verified as Authentic\n</code></pre></p> </li> </ol> <p>Real World Analogy</p> <p>Think of it like a wax seal on a letter: - Your private key is the unique seal stamp (keep it secret!) - Your public key is the pattern everyone recognizes as yours - The wax impression proves the letter came from you</p>"},{"location":"modules/module-02-keys-identity/#22-nostr-key-formats","title":"2.2 Nostr Key Formats","text":""},{"location":"modules/module-02-keys-identity/#understanding-key-encodings","title":"Understanding Key Encodings","text":"<p>Nostr uses different formats for the same keys:</p> Format Prefix Use Case Example Hex None Raw format, 64 characters <code>7e7e9c42a91b...</code> npub npub1 Public key (shareable) <code>npub1xxxxx...</code> nsec nsec1 Private key (SECRET!) <code>nsec1xxxxx...</code>"},{"location":"modules/module-02-keys-identity/#bech32-encoding-npubnsec","title":"Bech32 Encoding (npub/nsec)","text":"<p>Nostr uses Bech32 encoding for better user experience:</p> <ul> <li>Human-readable prefix (npub/nsec)</li> <li>Error detection built-in</li> <li>Case-insensitive (except prefix)</li> <li>Shorter than hex when displayed</li> </ul>"},{"location":"modules/module-02-keys-identity/#key-conversion-example","title":"Key Conversion Example","text":"<pre><code>// Same key in different formats:\nHex Private:  \"5426b5f89a7a5e1c8f4e9b5a8d7c3b2a1e9f8d7c6b5a4e3d2c1b0a9f8e7d6c5b\"\nnsec Format:  \"nsec1gaafdhet7fu5uu38f8nf3lemlt5cj32kfduxsjwudxy8ehdrqmrs8ktqmz\"\n\nHex Public:   \"8e9f3d5c7b4a2e1f9d8c7b6a5e4d3c2b1a0f9e8d7c6b5a4e3d2c1b0a9f8e7d6c\"\nnpub Format:  \"npub136lsxmeac6fqslvce76n4y9swfvslf65d73hykgjvs5u5a089kwqg43ezk\"\n</code></pre>"},{"location":"modules/module-02-keys-identity/#23-key-generation","title":"2.3 Key Generation","text":""},{"location":"modules/module-02-keys-identity/#methods-to-generate-keys","title":"Methods to Generate Keys","text":""},{"location":"modules/module-02-keys-identity/#method-1-client-generation-easiest","title":"Method 1: Client Generation (Easiest)","text":"<p>Most Nostr clients can generate keys for you: 1. Click \"Create New Account\" 2. Keys are generated in your browser 3. Save them immediately!</p>"},{"location":"modules/module-02-keys-identity/#method-2-command-line-technical","title":"Method 2: Command Line (Technical)","text":"<p>Using <code>openssl</code>: <pre><code># Generate private key\nopenssl rand -hex 32\n\n# Or using Nostr tools\nnpm install -g nostr-tools\nnostr-keygen\n</code></pre></p>"},{"location":"modules/module-02-keys-identity/#method-3-hardware-wallets-most-secure","title":"Method 3: Hardware Wallets (Most Secure)","text":"<p>Some hardware wallets support Nostr: - Generate keys offline - Never expose private key to internet - Sign events on device</p>"},{"location":"modules/module-02-keys-identity/#key-generation-best-practices","title":"Key Generation Best Practices","text":"<p>Security Rules</p> <ol> <li>Generate keys offline when possible</li> <li>Use cryptographically secure randomness</li> <li>Never use brain wallets (keys from passwords)</li> <li>Don't reuse keys across different purposes</li> <li>Generate backup keys for recovery</li> </ol>"},{"location":"modules/module-02-keys-identity/#24-key-management","title":"2.4 Key Management","text":""},{"location":"modules/module-02-keys-identity/#storage-options","title":"Storage Options","text":""},{"location":"modules/module-02-keys-identity/#password-managers-recommended","title":"\ud83d\udd12 Password Managers (Recommended)","text":"<p>Pros: - Encrypted storage - Sync across devices - Easy backup</p> <p>Setup Example (Bitwarden): 1. Create new secure note 2. Name: \"Nostr Identity\" 3. Add fields:    - nsec: <code>nsec1xxxxx...</code>    - npub: <code>npub1xxxxx...</code>    - Created: <code>2024-01-15</code>    - Clients used: <code>Damus, Snort</code></p>"},{"location":"modules/module-02-keys-identity/#physical-backup-essential","title":"\ud83d\udcdd Physical Backup (Essential)","text":"<p>Best Practices: - Write on paper with pen - Store in fireproof safe - Create multiple copies - Consider metal backup for long-term</p> <p>Template: <pre><code>NOSTR IDENTITY BACKUP\nDate: ___________\nPrivate Key (nsec): _________________\nPublic Key (npub): __________________\nRecovery Words (if applicable): ______\n</code></pre></p>"},{"location":"modules/module-02-keys-identity/#hardware-security","title":"\ud83d\udd10 Hardware Security","text":"<p>Cold Storage: - Air-gapped computer - Hardware wallet - Encrypted USB drive</p> <p>Multi-signature Setup (Advanced): - Split key into shares - Require M-of-N shares to reconstruct - Distribute shares to trusted parties</p>"},{"location":"modules/module-02-keys-identity/#security-threats-and-mitigations","title":"Security Threats and Mitigations","text":"Threat Risk Level Mitigation Phishing sites High Always verify URL, use bookmarks Clipboard malware Medium Use browser extensions, verify addresses Compromised client Medium Use trusted, open-source clients Physical theft Low-Medium Encrypt devices, use strong passwords Social engineering High Never share nsec, even with \"support\""},{"location":"modules/module-02-keys-identity/#25-nip-07-browser-extension-signing","title":"2.5 NIP-07: Browser Extension Signing","text":""},{"location":"modules/module-02-keys-identity/#what-is-nip-07","title":"What is NIP-07?","text":"<p>NIP-07 defines a standard for browser extensions to manage keys:</p> <ul> <li>Keys stay in extension (never exposed to websites)</li> <li>Permission-based signing (you approve each action)</li> <li>Works across all web clients</li> </ul>"},{"location":"modules/module-02-keys-identity/#popular-nip-07-extensions","title":"Popular NIP-07 Extensions","text":"<ol> <li>Alby (Recommended for beginners)</li> <li>Lightning wallet integration</li> <li>Multi-account support</li> <li> <p>Available for Chrome/Firefox/Edge</p> </li> <li> <p>nos2x (Minimal and secure)</p> </li> <li>Simple and focused</li> <li>Open source</li> <li> <p>Firefox and Chrome</p> </li> <li> <p>Flamingo</p> </li> <li>Advanced features</li> <li>Key derivation support</li> <li>Developer-friendly</li> </ol>"},{"location":"modules/module-02-keys-identity/#setting-up-alby","title":"Setting Up Alby","text":"<p>Installation: 1. Visit getalby.com 2. Install browser extension 3. Create new account or import existing</p> <p>Import Existing Key: 1. Click Alby extension icon 2. Select \"Import Nostr Key\" 3. Paste your <code>nsec</code> key 4. Set spending password 5. Configure permissions</p> <p>Using with Clients: 1. Visit any Nostr web client 2. Choose \"Login with Extension\" 3. Alby prompts for permission 4. Approve and you're logged in!</p>"},{"location":"modules/module-02-keys-identity/#nip-07-security-model","title":"NIP-07 Security Model","text":"<pre><code>graph TD\n    A[Web Client] --&gt;|Request signature| B[NIP-07 Extension]\n    B --&gt;|User approves?| C{Decision}\n    C --&gt;|Yes| D[Sign with key]\n    C --&gt;|No| E[Reject]\n    D --&gt;|Return signature| A\n    E --&gt;|Return error| A\n\n    style B fill:#9c27b0,stroke:#fff,color:#fff\n    style C fill:#7b1fa2,stroke:#fff,color:#fff</code></pre>"},{"location":"modules/module-02-keys-identity/#26-advanced-identity-concepts","title":"2.6 Advanced Identity Concepts","text":""},{"location":"modules/module-02-keys-identity/#key-delegation-nip-26","title":"Key Delegation (NIP-26)","text":"<p>Delegation allows temporary permission for another key to act on your behalf:</p> <p>Use Cases: - Social media managers - Scheduled posting services - Temporary device access</p> <p>How it works: 1. Create delegation token with your main key 2. Specify delegated pubkey and conditions 3. Delegated key can post with proof of delegation</p>"},{"location":"modules/module-02-keys-identity/#key-rotation-strategies","title":"Key Rotation Strategies","text":"<p>Since Nostr ties identity to keys, rotation is challenging:</p> <p>Approach 1: Social Migration 1. Create new key pair 2. Announce migration from old account 3. Ask followers to follow new account 4. Keep old account active with redirect</p> <p>Approach 2: Multi-key Identity - Use multiple keys for different purposes - Professional vs personal - High-security vs convenience</p>"},{"location":"modules/module-02-keys-identity/#identity-verification","title":"Identity Verification","text":"<p>Methods to verify you control an identity:</p> <ol> <li>Cross-platform verification</li> <li>Post same message on Twitter/GitHub</li> <li> <p>Include Nostr npub in bio</p> </li> <li> <p>Domain verification (NIP-05)</p> </li> <li>Link your npub to your domain</li> <li> <p>Example: <code>bob@example.com</code> \u2192 <code>npub1xxx...</code></p> </li> <li> <p>Web of Trust</p> </li> <li>Get endorsed by known accounts</li> <li>Build reputation over time</li> </ol>"},{"location":"modules/module-02-keys-identity/#27-practical-exercises","title":"2.7 Practical Exercises","text":""},{"location":"modules/module-02-keys-identity/#exercise-1-key-format-conversion","title":"Exercise 1: Key Format Conversion","text":"<ol> <li>Take your hex public key</li> <li>Convert it to npub format manually (or use a tool)</li> <li>Verify both represent the same identity</li> </ol>"},{"location":"modules/module-02-keys-identity/#exercise-2-secure-backup-creation","title":"Exercise 2: Secure Backup Creation","text":"<ol> <li>Create a complete backup of your Nostr identity</li> <li>Include:</li> <li>Both key formats</li> <li>Associated NIP-05 identifier</li> <li>List of primary relays</li> <li>Recovery date</li> <li>Store in at least two secure locations</li> </ol>"},{"location":"modules/module-02-keys-identity/#exercise-3-nip-07-setup-and-testing","title":"Exercise 3: NIP-07 Setup and Testing","text":"<ol> <li>Install a NIP-07 extension</li> <li>Import your key</li> <li>Log into three different web clients using only the extension</li> <li>Configure different permission levels</li> </ol>"},{"location":"modules/module-02-keys-identity/#exercise-4-identity-verification","title":"Exercise 4: Identity Verification","text":"<ol> <li>Set up NIP-05 verification (if you have a domain)</li> <li>Cross-verify on another platform</li> <li>Get at least one other user to verify you</li> </ol>"},{"location":"modules/module-02-keys-identity/#28-recovery-scenarios","title":"2.8 Recovery Scenarios","text":""},{"location":"modules/module-02-keys-identity/#scenario-1-lost-password-manager","title":"Scenario 1: Lost Password Manager","text":"<p>Prevention: - Regular encrypted backups - Physical paper backup - Trusted contact with recovery share</p> <p>Recovery: - Check all backup locations - Use physical backup to restore - Create new identity if truly lost</p>"},{"location":"modules/module-02-keys-identity/#scenario-2-compromised-key","title":"Scenario 2: Compromised Key","text":"<p>Immediate Actions: 1. Create new key pair immediately 2. Post warning from compromised account (if possible) 3. Notify close contacts directly 4. Update all NIP-05 verifications</p>"},{"location":"modules/module-02-keys-identity/#scenario-3-device-theft","title":"Scenario 3: Device Theft","text":"<p>If device had keys: 1. Assume keys compromised 2. Migrate to new identity 3. Revoke any delegations 4. Update security practices</p>"},{"location":"modules/module-02-keys-identity/#module-2-quiz","title":"\ud83d\udcdd Module 2 Quiz","text":"<ol> <li> <p>What's the relationship between private and public keys? Answer    Public key is derived from private key using one-way cryptographic function. You cannot derive the private key from the public key.     </p> </li> <li> <p>What does \"nsec\" stand for and when should you share it? Answer    \"nsec\" is the Bech32-encoded format for Nostr secret (private) keys. You should NEVER share it with anyone or any service.     </p> </li> <li> <p>What is NIP-07 and why is it important? Answer    NIP-07 is a standard for browser extensions to manage Nostr keys securely. It keeps private keys in the extension, never exposing them to websites, while allowing permission-based signing.     </p> </li> <li> <p>Name three secure ways to store your Nostr private key Answer    1. Encrypted password manager (like Bitwarden)    2. Physical paper backup in a safe    3. Hardware wallet or air-gapped device     </p> </li> <li> <p>What should you do if your private key is compromised? Answer    Create new key pair immediately, warn followers from old account if possible, notify close contacts, update all verifications, and migrate to the new identity.     </p> </li> </ol>"},{"location":"modules/module-02-keys-identity/#module-2-checkpoint","title":"\ud83c\udfaf Module 2 Checkpoint","text":"<p>Before moving to Module 3, ensure you have:</p> <ul> <li>[ ] Understood the relationship between public and private keys</li> <li>[ ] Saved your keys in at least two secure locations</li> <li>[ ] Created a physical backup of your keys</li> <li>[ ] Installed and configured a NIP-07 browser extension</li> <li>[ ] Successfully used extension to log into multiple clients</li> <li>[ ] Set up at least one form of identity verification</li> <li>[ ] Practiced key format conversion</li> <li>[ ] Created a key recovery plan</li> </ul>"},{"location":"modules/module-02-keys-identity/#additional-resources","title":"\ud83d\udcda Additional Resources","text":"<ul> <li>NIP-01: Basic Protocol</li> <li>NIP-07: Browser Extensions</li> <li>NIP-26: Delegated Event Signing</li> <li>Key Management Best Practices</li> <li>Tool: Nostr Army Knife - Key conversion utilities</li> </ul>"},{"location":"modules/module-02-keys-identity/#community-discussion","title":"\ud83d\udcac Community Discussion","text":"<p>Join our Discord to discuss Module 2: - Share your key management strategies - Get help with NIP-07 setup - Discuss identity verification methods - Learn from others' security practices</p> <p>Congratulations!</p> <p>You've mastered Nostr's identity system! You now understand cryptographic keys, can manage them securely, and use advanced features like NIP-07. Ready for Module 3 where we'll explore how Nostr structures and transmits data!</p> <p>Continue to Module 3: Events &amp; Messages \u2192</p>"},{"location":"modules/module-03-events-messages/","title":"Module 3: Events &amp; Messages","text":"<p>Module Overview</p> <p>Duration: 4-5 hours Level: Beginner-Intermediate Prerequisites: Modules 1-2 completed Goal: Master Nostr's event system, message types, and data structures</p>"},{"location":"modules/module-03-events-messages/#learning-objectives","title":"\ud83d\udccb Learning Objectives","text":"<p>By the end of this module, you will:</p> <ul> <li>\u2705 Understand Nostr event structure and JSON format</li> <li>\u2705 Master different event kinds and their purposes</li> <li>\u2705 Create and validate events programmatically</li> <li>\u2705 Implement filters and subscriptions</li> <li>\u2705 Handle replies, mentions, and threads</li> <li>\u2705 Work with metadata and special event types</li> </ul>"},{"location":"modules/module-03-events-messages/#31-understanding-nostr-events","title":"3.1 Understanding Nostr Events","text":""},{"location":"modules/module-03-events-messages/#what-is-an-event","title":"What is an Event?","text":"<p>In Nostr, everything is an event. An event is a JSON object that contains:</p> <ul> <li>Content (the actual message or data)</li> <li>Metadata (who, when, what type)</li> <li>Cryptographic signature (proof of authenticity)</li> </ul> <pre><code>{\n  \"id\": \"4376c65d2f232afbe9b882a35baa4f6fe8667c4e684749af565f981833ed6a65\",\n  \"pubkey\": \"6e468422dfb74a5738702a8823b9b28168abab8655faacb6853cd0ee15e3d882\",\n  \"created_at\": 1673347337,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"Hello Nostr! This is my first event.\",\n  \"sig\": \"908a15e46fb4d8675bab026fc230a0e3542bfade63da02d542fb78b2a8513fcd...\"\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#event-fields-explained","title":"Event Fields Explained","text":"Field Type Description Required <code>id</code> string SHA256 hash of serialized event Yes <code>pubkey</code> string Author's public key (hex) Yes <code>created_at</code> number Unix timestamp Yes <code>kind</code> number Event type (0, 1, 3, etc.) Yes <code>tags</code> array Metadata and references Yes <code>content</code> string Main event content Yes <code>sig</code> string Schnorr signature Yes"},{"location":"modules/module-03-events-messages/#event-id-calculation","title":"Event ID Calculation","text":"<p>The event ID is a SHA256 hash of a specifically serialized format:</p> <pre><code>// Serialization format for ID calculation\n[\n  0,                    // Reserved for future use\n  pubkey,              // Author's public key\n  created_at,          // Unix timestamp\n  kind,                // Event kind\n  tags,                // Tags array\n  content              // Content string\n]\n</code></pre>"},{"location":"modules/module-03-events-messages/#32-event-kinds","title":"3.2 Event Kinds","text":""},{"location":"modules/module-03-events-messages/#standard-event-kinds-nip-01","title":"Standard Event Kinds (NIP-01)","text":"Kind Type Description Example Use 0 Metadata User profile information Name, about, picture 1 Text Note Short text message Social media posts 2 Recommend Relay Relay recommendation (Deprecated) 3 Contact List Following list Who you follow 4 Encrypted DM Private message Direct messages 5 Event Deletion Request deletion Delete your posts 6 Repost Share someone's note Like retweet 7 Reaction React to content Likes, emojis"},{"location":"modules/module-03-events-messages/#extended-event-kinds","title":"Extended Event Kinds","text":"<pre><code>graph TD\n    A[Event Kinds] --&gt; B[Regular Events&lt;br/&gt;1-999]\n    A --&gt; C[Replaceable Events&lt;br/&gt;10000-19999]\n    A --&gt; D[Ephemeral Events&lt;br/&gt;20000-29999]\n    A --&gt; E[Parameterized Replaceable&lt;br/&gt;30000-39999]\n\n    B --&gt; B1[Kind 1: Text Notes]\n    B --&gt; B2[Kind 6: Reposts]\n    B --&gt; B3[Kind 7: Reactions]\n\n    C --&gt; C1[Kind 10002: Relay List]\n    C --&gt; C2[Kind 10003: Bookmark List]\n\n    D --&gt; D1[Kind 20000: Auth]\n    D --&gt; D2[Kind 21000: Lightning]\n\n    E --&gt; E1[Kind 30023: Long-form]\n    E --&gt; E2[Kind 30078: App Data]</code></pre>"},{"location":"modules/module-03-events-messages/#event-kind-ranges","title":"Event Kind Ranges","text":"<ul> <li>0-999: Regular Events (stored and transmitted)</li> <li>1000-9999: Regular Events (reserved for future)</li> <li>10000-19999: Replaceable Events (only latest is kept)</li> <li>20000-29999: Ephemeral Events (not stored)</li> <li>30000-39999: Parameterized Replaceable Events</li> </ul>"},{"location":"modules/module-03-events-messages/#33-working-with-tags","title":"3.3 Working with Tags","text":""},{"location":"modules/module-03-events-messages/#tag-structure","title":"Tag Structure","text":"<p>Tags are arrays within arrays that add metadata to events:</p> <pre><code>\"tags\": [\n  [\"e\", \"event_id\", \"relay_url\", \"marker\"],\n  [\"p\", \"pubkey\", \"relay_url\", \"petname\"],\n  [\"t\", \"hashtag\"],\n  [\"r\", \"reference_url\"]\n]\n</code></pre>"},{"location":"modules/module-03-events-messages/#common-tag-types","title":"Common Tag Types","text":"Tag Name Purpose Example <code>e</code> Event Reference another event Reply, mention event <code>p</code> Pubkey Reference a user Mention, reply to <code>t</code> Hashtag Topic tag #nostr #bitcoin <code>r</code> Reference External link Website URL <code>a</code> Address Reference replaceable event Article, list <code>d</code> Identifier Unique identifier For replaceable events"},{"location":"modules/module-03-events-messages/#tag-examples-in-practice","title":"Tag Examples in Practice","text":""},{"location":"modules/module-03-events-messages/#example-1-reply-to-a-note","title":"Example 1: Reply to a Note","text":"<pre><code>{\n  \"kind\": 1,\n  \"tags\": [\n    [\"e\", \"original_event_id\", \"\", \"root\"],\n    [\"e\", \"reply_to_event_id\", \"\", \"reply\"],\n    [\"p\", \"original_author_pubkey\", \"\"]\n  ],\n  \"content\": \"Great point! I totally agree with this.\"\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#example-2-mention-someone","title":"Example 2: Mention Someone","text":"<pre><code>{\n  \"kind\": 1,\n  \"tags\": [\n    [\"p\", \"mentioned_user_pubkey\", \"\", \"Alice\"]\n  ],\n  \"content\": \"Hey @Alice, check this out!\"\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#example-3-hashtags","title":"Example 3: Hashtags","text":"<pre><code>{\n  \"kind\": 1,\n  \"tags\": [\n    [\"t\", \"nostr\"],\n    [\"t\", \"decentralized\"],\n    [\"t\", \"freedom\"]\n  ],\n  \"content\": \"Learning about #nostr #decentralized #freedom\"\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#34-creating-events-programmatically","title":"3.4 Creating Events Programmatically","text":""},{"location":"modules/module-03-events-messages/#using-javascripttypescript","title":"Using JavaScript/TypeScript","text":"<pre><code>import { getPublicKey, getEventHash, signEvent } from 'nostr-tools';\n\n// Your private key (keep secret!)\nconst privateKey = 'your_hex_private_key_here';\nconst publicKey = getPublicKey(privateKey);\n\n// Create an event\nfunction createTextNote(content) {\n  const event = {\n    kind: 1,\n    pubkey: publicKey,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [],\n    content: content\n  };\n\n  // Calculate event ID\n  event.id = getEventHash(event);\n\n  // Sign the event\n  event.sig = signEvent(event, privateKey);\n\n  return event;\n}\n\n// Create a reply\nfunction createReply(originalEventId, replyContent) {\n  const event = {\n    kind: 1,\n    pubkey: publicKey,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [\n      ['e', originalEventId, '', 'reply']\n    ],\n    content: replyContent\n  };\n\n  event.id = getEventHash(event);\n  event.sig = signEvent(event, privateKey);\n\n  return event;\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#event-validation","title":"Event Validation","text":"<pre><code>import { verifySignature } from 'nostr-tools';\n\nfunction validateEvent(event) {\n  // Check required fields\n  if (!event.id || !event.pubkey || !event.sig) {\n    return { valid: false, error: 'Missing required fields' };\n  }\n\n  // Verify signature\n  if (!verifySignature(event)) {\n    return { valid: false, error: 'Invalid signature' };\n  }\n\n  // Check event ID\n  const calculatedId = getEventHash(event);\n  if (event.id !== calculatedId) {\n    return { valid: false, error: 'Invalid event ID' };\n  }\n\n  // Validate timestamp (not too far in future)\n  const now = Math.floor(Date.now() / 1000);\n  if (event.created_at &gt; now + 900) { // 15 minutes tolerance\n    return { valid: false, error: 'Event timestamp too far in future' };\n  }\n\n  return { valid: true };\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#35-metadata-events-kind-0","title":"3.5 Metadata Events (Kind 0)","text":""},{"location":"modules/module-03-events-messages/#profile-information-structure","title":"Profile Information Structure","text":"<p>Kind 0 events contain user profile information in JSON format:</p> <pre><code>{\n  \"kind\": 0,\n  \"content\": \"{\\\"name\\\":\\\"Alice\\\",\\\"about\\\":\\\"Nostr enthusiast\\\",\\\"picture\\\":\\\"https://example.com/alice.jpg\\\",\\\"nip05\\\":\\\"alice@example.com\\\",\\\"lud16\\\":\\\"alice@ln.tips\\\"}\",\n  \"tags\": []\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#standard-metadata-fields","title":"Standard Metadata Fields","text":"Field Description Example <code>name</code> Display name \"Alice\" <code>about</code> Bio/description \"Bitcoin &amp; Nostr developer\" <code>picture</code> Avatar URL \"https://...\" <code>banner</code> Cover image \"https://...\" <code>nip05</code> Verification \"alice@example.com\" <code>lud16</code> Lightning address \"alice@ln.tips\" <code>website</code> Personal website \"https://alice.com\""},{"location":"modules/module-03-events-messages/#creating-and-updating-profile","title":"Creating and Updating Profile","text":"<pre><code>function updateProfile(profileData) {\n  const metadata = {\n    name: profileData.name,\n    about: profileData.about,\n    picture: profileData.picture,\n    nip05: profileData.nip05,\n    lud16: profileData.lightning\n  };\n\n  const event = {\n    kind: 0,\n    pubkey: publicKey,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [],\n    content: JSON.stringify(metadata)\n  };\n\n  event.id = getEventHash(event);\n  event.sig = signEvent(event, privateKey);\n\n  return event;\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#36-filters-and-subscriptions","title":"3.6 Filters and Subscriptions","text":""},{"location":"modules/module-03-events-messages/#understanding-filters","title":"Understanding Filters","text":"<p>Filters tell relays what events you want to receive:</p> <pre><code>{\n  \"ids\": [\"event_id1\", \"event_id2\"],\n  \"authors\": [\"pubkey1\", \"pubkey2\"],\n  \"kinds\": [0, 1, 7],\n  \"since\": 1673347337,\n  \"until\": 1673347937,\n  \"limit\": 100,\n  \"#t\": [\"nostr\", \"bitcoin\"],\n  \"#p\": [\"pubkey_to_find\"]\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#filter-parameters","title":"Filter Parameters","text":"Parameter Type Description <code>ids</code> string[] Event IDs to fetch <code>authors</code> string[] Public keys of authors <code>kinds</code> number[] Event kinds to fetch <code>since</code> number Events after timestamp <code>until</code> number Events before timestamp <code>limit</code> number Maximum events to return <code>#e</code> string[] Events with these e tags <code>#p</code> string[] Events with these p tags <code>#t</code> string[] Events with these hashtags"},{"location":"modules/module-03-events-messages/#subscription-examples","title":"Subscription Examples","text":""},{"location":"modules/module-03-events-messages/#get-users-recent-notes","title":"Get User's Recent Notes","text":"<pre><code>const filter = {\n  authors: [\"user_pubkey\"],\n  kinds: [1],\n  limit: 20\n};\n</code></pre>"},{"location":"modules/module-03-events-messages/#get-replies-to-an-event","title":"Get Replies to an Event","text":"<pre><code>const filter = {\n  kinds: [1],\n  \"#e\": [\"original_event_id\"]\n};\n</code></pre>"},{"location":"modules/module-03-events-messages/#get-user-profile-and-notes","title":"Get User Profile and Notes","text":"<pre><code>const filters = [\n  {\n    authors: [\"user_pubkey\"],\n    kinds: [0],  // Profile\n    limit: 1\n  },\n  {\n    authors: [\"user_pubkey\"],\n    kinds: [1],  // Notes\n    limit: 50\n  }\n];\n</code></pre>"},{"location":"modules/module-03-events-messages/#37-working-with-threads","title":"3.7 Working with Threads","text":""},{"location":"modules/module-03-events-messages/#thread-structure","title":"Thread Structure","text":"<p>Nostr uses <code>e</code> tags with markers to create threaded conversations:</p> <pre><code>graph TD\n    A[Root Note] --&gt; B[Reply 1]\n    A --&gt; C[Reply 2]\n    B --&gt; D[Reply to Reply 1]\n    C --&gt; E[Reply to Reply 2]\n\n    style A fill:#9c27b0,stroke:#fff,color:#fff</code></pre>"},{"location":"modules/module-03-events-messages/#thread-tag-markers","title":"Thread Tag Markers","text":"<ul> <li><code>root</code>: The original note that started the thread</li> <li><code>reply</code>: The note being directly replied to</li> <li><code>mention</code>: Just mentioning an event</li> </ul>"},{"location":"modules/module-03-events-messages/#creating-a-thread-reply","title":"Creating a Thread Reply","text":"<pre><code>function createThreadedReply(rootId, replyToId, content) {\n  const event = {\n    kind: 1,\n    pubkey: publicKey,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [\n      ['e', rootId, '', 'root'],\n      ['e', replyToId, '', 'reply'],\n      ['p', authorPubkey]  // Original author\n    ],\n    content: content\n  };\n\n  event.id = getEventHash(event);\n  event.sig = signEvent(event, privateKey);\n\n  return event;\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#38-special-event-types","title":"3.8 Special Event Types","text":""},{"location":"modules/module-03-events-messages/#encrypted-direct-messages-kind-4","title":"Encrypted Direct Messages (Kind 4)","text":"<pre><code>import { nip04 } from 'nostr-tools';\n\nasync function sendEncryptedMessage(recipientPubkey, message) {\n  // Encrypt the message\n  const ciphertext = await nip04.encrypt(\n    privateKey,\n    recipientPubkey,\n    message\n  );\n\n  const event = {\n    kind: 4,\n    pubkey: publicKey,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [['p', recipientPubkey]],\n    content: ciphertext\n  };\n\n  event.id = getEventHash(event);\n  event.sig = signEvent(event, privateKey);\n\n  return event;\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#reactions-kind-7","title":"Reactions (Kind 7)","text":"<pre><code>function createReaction(eventId, reaction = '+') {\n  const event = {\n    kind: 7,\n    pubkey: publicKey,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [\n      ['e', eventId],\n      ['p', authorPubkey]\n    ],\n    content: reaction  // '+', '-', '\u2764\ufe0f', '\ud83d\udd25', etc.\n  };\n\n  event.id = getEventHash(event);\n  event.sig = signEvent(event, privateKey);\n\n  return event;\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#deletion-requests-kind-5","title":"Deletion Requests (Kind 5)","text":"<pre><code>function deleteEvents(eventIds, reason = '') {\n  const event = {\n    kind: 5,\n    pubkey: publicKey,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: eventIds.map(id =&gt; ['e', id]),\n    content: reason\n  };\n\n  event.id = getEventHash(event);\n  event.sig = signEvent(event, privateKey);\n\n  return event;\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#39-practical-exercises","title":"3.9 Practical Exercises","text":""},{"location":"modules/module-03-events-messages/#exercise-1-create-your-first-events","title":"Exercise 1: Create Your First Events","text":"<ol> <li>Create a text note (kind 1) with content</li> <li>Create a profile metadata event (kind 0)</li> <li>Verify both events have valid signatures</li> <li>Calculate and verify event IDs manually</li> </ol>"},{"location":"modules/module-03-events-messages/#exercise-2-build-a-reply-chain","title":"Exercise 2: Build a Reply Chain","text":"<ol> <li>Create an original note</li> <li>Create a reply to that note</li> <li>Create a reply to the reply</li> <li>Properly use root and reply markers</li> </ol>"},{"location":"modules/module-03-events-messages/#exercise-3-implement-mentions","title":"Exercise 3: Implement Mentions","text":"<ol> <li>Create a note that mentions 3 users</li> <li>Use proper <code>p</code> tags for mentions</li> <li>Include mention markers in content</li> <li>Test with actual npub addresses</li> </ol>"},{"location":"modules/module-03-events-messages/#exercise-4-work-with-filters","title":"Exercise 4: Work with Filters","text":"<ol> <li>Create a filter for your last 10 notes</li> <li>Create a filter for all replies to a specific event</li> <li>Create a filter for notes with specific hashtags</li> <li>Combine multiple filters in one subscription</li> </ol>"},{"location":"modules/module-03-events-messages/#exercise-5-event-validation","title":"Exercise 5: Event Validation","text":"<ol> <li>Write a complete event validator</li> <li>Test with valid events</li> <li>Test with invalid signatures</li> <li>Test with tampered event IDs</li> </ol>"},{"location":"modules/module-03-events-messages/#310-common-patterns","title":"3.10 Common Patterns","text":""},{"location":"modules/module-03-events-messages/#pagination-pattern","title":"Pagination Pattern","text":"<pre><code>// Load more events as user scrolls\nlet lastTimestamp = Math.floor(Date.now() / 1000);\n\nfunction loadMoreEvents() {\n  const filter = {\n    kinds: [1],\n    until: lastTimestamp,\n    limit: 20\n  };\n\n  // Update lastTimestamp with oldest event received\n  // for next pagination request\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#real-time-history-pattern","title":"Real-time + History Pattern","text":"<pre><code>// Subscribe to new events and load history\nconst now = Math.floor(Date.now() / 1000);\n\n// Historical events\nconst historyFilter = {\n  kinds: [1],\n  until: now,\n  limit: 100\n};\n\n// Real-time events\nconst realtimeFilter = {\n  kinds: [1],\n  since: now\n};\n</code></pre>"},{"location":"modules/module-03-events-messages/#profile-caching-pattern","title":"Profile Caching Pattern","text":"<pre><code>const profileCache = new Map();\n\nasync function getProfile(pubkey) {\n  // Check cache first\n  if (profileCache.has(pubkey)) {\n    return profileCache.get(pubkey);\n  }\n\n  // Fetch from relay\n  const filter = {\n    authors: [pubkey],\n    kinds: [0],\n    limit: 1\n  };\n\n  // Cache result\n  profileCache.set(pubkey, profile);\n  return profile;\n}\n</code></pre>"},{"location":"modules/module-03-events-messages/#module-3-quiz","title":"\ud83d\udcdd Module 3 Quiz","text":"<ol> <li> <p>What are the required fields in every Nostr event? Answer    id, pubkey, created_at, kind, tags, content, and sig (signature)     </p> </li> <li> <p>How is an event ID calculated? Answer    It's a SHA256 hash of a serialized array containing: [0, pubkey, created_at, kind, tags, content]     </p> </li> <li> <p>What's the difference between kind 1 and kind 0 events? Answer    Kind 0 is for user metadata/profile information (replaceable), while Kind 1 is for text notes/posts (regular events)     </p> </li> <li> <p>What tags would you use to create a reply? Answer    Use 'e' tags with markers: one for the root note (marked as \"root\") and one for the direct reply (marked as \"reply\"), plus a 'p' tag for the author being replied to     </p> </li> <li> <p>What's the difference between replaceable and ephemeral events? Answer    Replaceable events (10000-19999) only keep the latest version, while ephemeral events (20000-29999) are not stored by relays at all     </p> </li> </ol>"},{"location":"modules/module-03-events-messages/#module-3-checkpoint","title":"\ud83c\udfaf Module 3 Checkpoint","text":"<p>Before continuing, ensure you have:</p> <ul> <li>[ ] Created and signed events programmatically</li> <li>[ ] Implemented event validation</li> <li>[ ] Used different event kinds (0, 1, 7)</li> <li>[ ] Created replies with proper threading</li> <li>[ ] Implemented mentions using tags</li> <li>[ ] Built and tested various filters</li> <li>[ ] Worked with metadata events</li> <li>[ ] Understood replaceable vs regular events</li> </ul>"},{"location":"modules/module-03-events-messages/#additional-resources","title":"\ud83d\udcda Additional Resources","text":"<ul> <li>NIP-01: Basic Protocol Flow</li> <li>Nostr Tools Library</li> <li>Event Kind Registry</li> <li>Nostr Event Inspector</li> <li>Video: Understanding Nostr Events Deep Dive</li> </ul>"},{"location":"modules/module-03-events-messages/#community-discussion","title":"\ud83d\udcac Community Discussion","text":"<p>Join our Discord to discuss Module 3: - Share your event creation code - Debug event validation issues - Discuss threading strategies - Learn about advanced event types</p> <p>Congratulations!</p> <p>You've mastered Nostr events and messages! You can now create, validate, and work with all types of Nostr events. You understand tags, filters, and the complete event lifecycle. You're ready to start building real Nostr applications!</p> <p>Next Steps: - Module 4: Relays &amp; Network Architecture (Coming Soon) - Module 5: Building Your First Nostr Client (Coming Soon) - Practice creating different event types - Explore more NIPs for specialized events</p> <p>\u2190 Back to Modules</p>"},{"location":"modules/module-04-relays-architecture/","title":"Module 4: Relays &amp; Network Architecture","text":"<p>Module Overview</p> <p>Duration: 5-6 hours Level: Intermediate Prerequisites: Modules 1-3 completed Goal: Master Nostr's relay architecture, network topology, and relay selection strategies</p>"},{"location":"modules/module-04-relays-architecture/#learning-objectives","title":"\ud83d\udccb Learning Objectives","text":"<p>By the end of this module, you will:</p> <ul> <li>\u2705 Understand relay architecture and protocols</li> <li>\u2705 Master WebSocket connections and message flow</li> <li>\u2705 Implement relay pool management</li> <li>\u2705 Configure relay selection strategies</li> <li>\u2705 Set up and run your own relay</li> <li>\u2705 Optimize network performance and reliability</li> </ul>"},{"location":"modules/module-04-relays-architecture/#41-understanding-relays","title":"4.1 Understanding Relays","text":""},{"location":"modules/module-04-relays-architecture/#what-is-a-relay","title":"What is a Relay?","text":"<p>A relay is a simple server that: - Accepts events from clients - Stores events (based on its policy) - Forwards events to interested clients - Filters events based on subscriptions</p> <pre><code>graph LR\n    C1[Client 1] --&gt;|Publish| R[Relay]\n    C2[Client 2] --&gt;|Subscribe| R\n    R --&gt;|Broadcast| C2\n    C3[Client 3] --&gt;|Subscribe| R\n    R --&gt;|Broadcast| C3\n\n    style R fill:#9c27b0,stroke:#fff,color:#fff</code></pre>"},{"location":"modules/module-04-relays-architecture/#relay-responsibilities","title":"Relay Responsibilities","text":"Function Description Implementation Accept Events Validate and store incoming events Check signatures, apply policies Store Events Persist events to database PostgreSQL, MongoDB, SQLite Query Events Retrieve based on filters Index by id, pubkey, kind, tags Broadcast Send events to subscribers WebSocket connections Apply Policies Enforce rules and limits Rate limiting, content filtering"},{"location":"modules/module-04-relays-architecture/#relay-types","title":"Relay Types","text":"<ol> <li>Public Relays</li> <li>Open to everyone</li> <li>Free or paid</li> <li>May have content policies</li> <li> <p>Examples: relay.damus.io, nos.lol</p> </li> <li> <p>Private Relays</p> </li> <li>Restricted access</li> <li>Whitelist/invite only</li> <li>Custom for communities</li> <li> <p>Enhanced privacy</p> </li> <li> <p>Specialized Relays</p> </li> <li>Long-form content</li> <li>Media storage</li> <li>Geographic specific</li> <li> <p>Topic focused</p> </li> <li> <p>Personal Relays</p> </li> <li>Run by individuals</li> <li>Complete control</li> <li>Backup storage</li> <li>Privacy focused</li> </ol>"},{"location":"modules/module-04-relays-architecture/#42-websocket-protocol","title":"4.2 WebSocket Protocol","text":""},{"location":"modules/module-04-relays-architecture/#connection-lifecycle","title":"Connection Lifecycle","text":"<pre><code>// Connecting to a relay\nconst relay = new WebSocket('wss://relay.example.com');\n\n// Connection states\nrelay.onopen = () =&gt; {\n  console.log('Connected to relay');\n};\n\nrelay.onmessage = (event) =&gt; {\n  const message = JSON.parse(event.data);\n  handleRelayMessage(message);\n};\n\nrelay.onerror = (error) =&gt; {\n  console.error('Relay error:', error);\n};\n\nrelay.onclose = () =&gt; {\n  console.log('Disconnected from relay');\n  // Implement reconnection logic\n};\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#message-types","title":"Message Types","text":"<p>Nostr uses three main message types between clients and relays:</p>"},{"location":"modules/module-04-relays-architecture/#1-client-relay-messages","title":"1. CLIENT \u2192 RELAY Messages","text":"<p>EVENT - Publish an event: <pre><code>[\"EVENT\", {event_object}]\n</code></pre></p> <p>REQ - Request/subscribe to events: <pre><code>[\"REQ\", \"subscription_id\", {filter1}, {filter2}, ...]\n</code></pre></p> <p>CLOSE - Cancel subscription: <pre><code>[\"CLOSE\", \"subscription_id\"]\n</code></pre></p>"},{"location":"modules/module-04-relays-architecture/#2-relay-client-messages","title":"2. RELAY \u2192 CLIENT Messages","text":"<p>EVENT - Send requested event: <pre><code>[\"EVENT\", \"subscription_id\", {event_object}]\n</code></pre></p> <p>OK - Acknowledge event status: <pre><code>[\"OK\", \"event_id\", true, \"message\"]\n</code></pre></p> <p>EOSE - End of stored events: <pre><code>[\"EOSE\", \"subscription_id\"]\n</code></pre></p> <p>NOTICE - Relay message: <pre><code>[\"NOTICE\", \"message\"]\n</code></pre></p> <p>AUTH - Authentication required: <pre><code>[\"AUTH\", \"challenge\"]\n</code></pre></p>"},{"location":"modules/module-04-relays-architecture/#filter-objects","title":"Filter Objects","text":"<p>Filters are JSON objects used in <code>REQ</code> messages to specify which events you want to receive. Understanding filters is essential for efficient relay communication.</p>"},{"location":"modules/module-04-relays-architecture/#filter-properties","title":"Filter Properties","text":"Property Type Description Example <code>ids</code> array Event IDs (prefix match) <code>[\"abc123...\", \"def456...\"]</code> <code>authors</code> array Pubkey prefixes <code>[\"npub1abc...\"]</code> <code>kinds</code> array Event kind numbers <code>[0, 1, 3]</code> <code>#e</code> array Referenced event IDs <code>[\"event_id\"]</code> <code>#p</code> array Referenced pubkeys <code>[\"pubkey\"]</code> <code>#t</code> array Hashtags <code>[\"bitcoin\", \"nostr\"]</code> <code>since</code> integer Unix timestamp (inclusive) <code>1640000000</code> <code>until</code> integer Unix timestamp (inclusive) <code>1650000000</code> <code>limit</code> integer Max events to return <code>100</code>"},{"location":"modules/module-04-relays-architecture/#filter-examples","title":"Filter Examples","text":"<pre><code>// Get all text notes from a specific user\nconst userNotesFilter = {\n  authors: [\"user_pubkey\"],\n  kinds: [1],\n  limit: 50\n};\n\n// Get recent global feed\nconst globalFeedFilter = {\n  kinds: [1],\n  since: Math.floor(Date.now() / 1000) - 3600, // Last hour\n  limit: 100\n};\n\n// Get replies to a specific note\nconst repliesFilter = {\n  kinds: [1],\n  \"#e\": [\"note_event_id\"]\n};\n\n// Get user profile and metadata\nconst profileFilter = {\n  authors: [\"user_pubkey\"],\n  kinds: [0, 3] // Metadata and contacts\n};\n\n// Get events with specific hashtags\nconst hashtagFilter = {\n  kinds: [1],\n  \"#t\": [\"bitcoin\", \"nostr\"],\n  limit: 20\n};\n\n// Combine multiple conditions\nconst complexFilter = {\n  authors: [\"user1\", \"user2\", \"user3\"],\n  kinds: [1, 6, 7], // Notes, reposts, reactions\n  since: 1640000000,\n  limit: 100\n};\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#multiple-filters-in-one-subscription","title":"Multiple Filters in One Subscription","text":"<p>You can pass multiple filter objects in a single <code>REQ</code> - results will be the union:</p> <pre><code>// Subscribe to notes from followed users AND mentions of you\nrelay.send([\n  \"REQ\",\n  \"combined_feed\",\n  // Filter 1: Notes from people I follow\n  {\n    authors: followedPubkeys,\n    kinds: [1],\n    limit: 50\n  },\n  // Filter 2: Mentions of me\n  {\n    \"#p\": [myPubkey],\n    kinds: [1],\n    limit: 20\n  }\n]);\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#communication-flow","title":"Communication Flow","text":"<pre><code>sequenceDiagram\n    participant C as Client\n    participant R as Relay\n\n    C-&gt;&gt;R: Connect WebSocket\n    R-&gt;&gt;C: Connected\n\n    C-&gt;&gt;R: [\"REQ\", \"sub1\", {filter}]\n    R-&gt;&gt;C: [\"EVENT\", \"sub1\", {event1}]\n    R-&gt;&gt;C: [\"EVENT\", \"sub1\", {event2}]\n    R-&gt;&gt;C: [\"EOSE\", \"sub1\"]\n\n    C-&gt;&gt;R: [\"EVENT\", {new_event}]\n    R-&gt;&gt;C: [\"OK\", \"event_id\", true, \"\"]\n\n    R-&gt;&gt;C: [\"EVENT\", \"sub1\", {new_event}]\n\n    C-&gt;&gt;R: [\"CLOSE\", \"sub1\"]\n    C-&gt;&gt;R: Disconnect</code></pre>"},{"location":"modules/module-04-relays-architecture/#43-relay-pool-management","title":"4.3 Relay Pool Management","text":""},{"location":"modules/module-04-relays-architecture/#why-use-multiple-relays","title":"Why Use Multiple Relays?","text":"<ol> <li>Redundancy - If one relay is down</li> <li>Censorship Resistance - No single point of failure</li> <li>Geographic Distribution - Better latency</li> <li>Content Availability - Different relays have different events</li> <li>Load Balancing - Distribute traffic</li> </ol>"},{"location":"modules/module-04-relays-architecture/#implementing-a-relay-pool","title":"Implementing a Relay Pool","text":"<pre><code>class RelayPool {\n  constructor() {\n    this.relays = new Map();\n    this.subscriptions = new Map();\n  }\n\n  addRelay(url, options = {}) {\n    if (this.relays.has(url)) return;\n\n    const relay = {\n      url,\n      ws: null,\n      status: 'disconnected',\n      stats: {\n        eventsReceived: 0,\n        eventsSent: 0,\n        latency: null\n      },\n      options\n    };\n\n    this.connect(relay);\n    this.relays.set(url, relay);\n  }\n\n  connect(relay) {\n    relay.ws = new WebSocket(relay.url);\n\n    relay.ws.onopen = () =&gt; {\n      relay.status = 'connected';\n      console.log(`Connected to ${relay.url}`);\n      this.syncSubscriptions(relay);\n    };\n\n    relay.ws.onmessage = (event) =&gt; {\n      relay.stats.eventsReceived++;\n      this.handleMessage(relay, JSON.parse(event.data));\n    };\n\n    relay.ws.onerror = (error) =&gt; {\n      console.error(`Error with ${relay.url}:`, error);\n      this.reconnect(relay);\n    };\n\n    relay.ws.onclose = () =&gt; {\n      relay.status = 'disconnected';\n      this.reconnect(relay);\n    };\n  }\n\n  publish(event) {\n    const results = [];\n\n    this.relays.forEach((relay) =&gt; {\n      if (relay.status === 'connected') {\n        relay.ws.send(JSON.stringify(['EVENT', event]));\n        relay.stats.eventsSent++;\n        results.push({ relay: relay.url, status: 'sent' });\n      }\n    });\n\n    return results;\n  }\n\n  subscribe(filters, callback, id = null) {\n    const subId = id || Math.random().toString(36).substring(7);\n\n    this.subscriptions.set(subId, {\n      filters,\n      callback,\n      events: new Set() // Deduplication\n    });\n\n    this.relays.forEach((relay) =&gt; {\n      if (relay.status === 'connected') {\n        relay.ws.send(JSON.stringify(['REQ', subId, ...filters]));\n      }\n    });\n\n    return subId;\n  }\n\n  handleMessage(relay, message) {\n    const [type, ...args] = message;\n\n    switch (type) {\n      case 'EVENT':\n        const [subId, event] = args;\n        const sub = this.subscriptions.get(subId);\n\n        if (sub &amp;&amp; !sub.events.has(event.id)) {\n          sub.events.add(event.id);\n          sub.callback(event, relay.url);\n        }\n        break;\n\n      case 'EOSE':\n        console.log(`End of stored events from ${relay.url}`);\n        break;\n\n      case 'OK':\n        const [eventId, success, message] = args;\n        console.log(`Event ${eventId}: ${success ? 'accepted' : 'rejected'} - ${message}`);\n        break;\n\n      case 'NOTICE':\n        console.log(`Notice from ${relay.url}: ${args[0]}`);\n        break;\n    }\n  }\n\n  reconnect(relay, delay = 5000) {\n    setTimeout(() =&gt; {\n      console.log(`Reconnecting to ${relay.url}...`);\n      this.connect(relay);\n    }, delay);\n  }\n}\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#relay-selection-strategies","title":"Relay Selection Strategies","text":""},{"location":"modules/module-04-relays-architecture/#1-geographic-strategy","title":"1. Geographic Strategy","text":"<pre><code>function selectRelaysByLocation(userLocation) {\n  const relayLocations = {\n    'wss://relay.damus.io': { lat: 37.7749, lon: -122.4194 }, // SF\n    'wss://relay.nostr.band': { lat: 52.5200, lon: 13.4050 }, // Berlin\n    'wss://relay.snort.social': { lat: 40.7128, lon: -74.0060 }, // NYC\n  };\n\n  return Object.entries(relayLocations)\n    .map(([url, location]) =&gt; ({\n      url,\n      distance: calculateDistance(userLocation, location)\n    }))\n    .sort((a, b) =&gt; a.distance - b.distance)\n    .slice(0, 3)\n    .map(r =&gt; r.url);\n}\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#2-performance-strategy","title":"2. Performance Strategy","text":"<pre><code>class PerformanceRelaySelector {\n  constructor() {\n    this.metrics = new Map();\n  }\n\n  updateMetrics(relayUrl, latency, uptime, eventsPerSecond) {\n    this.metrics.set(relayUrl, {\n      latency,\n      uptime,\n      eventsPerSecond,\n      score: this.calculateScore(latency, uptime, eventsPerSecond)\n    });\n  }\n\n  calculateScore(latency, uptime, eventsPerSecond) {\n    return (uptime * 100) + (eventsPerSecond * 10) - (latency * 0.1);\n  }\n\n  selectBestRelays(count = 5) {\n    return Array.from(this.metrics.entries())\n      .sort((a, b) =&gt; b[1].score - a[1].score)\n      .slice(0, count)\n      .map(([url]) =&gt; url);\n  }\n}\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#3-content-strategy","title":"3. Content Strategy","text":"<pre><code>function selectRelaysByContent(desiredEventKinds) {\n  const relaySpecialties = {\n    'wss://relay.damus.io': [0, 1, 3, 7], // General purpose\n    'wss://relay.nostr.band': [1, 6, 7], // Social content\n    'wss://nostr.wine': [0, 1, 30023], // Long-form\n    'wss://purplepag.es': [0, 3], // Profiles\n  };\n\n  return Object.entries(relaySpecialties)\n    .filter(([url, kinds]) =&gt; \n      desiredEventKinds.some(k =&gt; kinds.includes(k))\n    )\n    .map(([url]) =&gt; url);\n}\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#44-running-your-own-relay","title":"4.4 Running Your Own Relay","text":""},{"location":"modules/module-04-relays-architecture/#popular-relay-implementations","title":"Popular Relay Implementations","text":"Implementation Language Features Best For nostr-rs-relay Rust Fast, efficient Production use strfry C++ High performance Large scale nostream TypeScript Feature-rich Customization nostr-relay-nestjs TypeScript Modular Development knostr Kotlin JVM ecosystem Java developers"},{"location":"modules/module-04-relays-architecture/#setting-up-nostr-rs-relay","title":"Setting Up nostr-rs-relay","text":""},{"location":"modules/module-04-relays-architecture/#step-1-installation","title":"Step 1: Installation","text":"<pre><code># Using Docker\ndocker pull scsibug/nostr-rs-relay\ndocker run -p 7000:8080 scsibug/nostr-rs-relay\n\n# From source\ngit clone https://github.com/scsibug/nostr-rs-relay.git\ncd nostr-rs-relay\ncargo build --release\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#step-2-configuration","title":"Step 2: Configuration","text":"<pre><code># config.toml\n[info]\nrelay_url = \"wss://your-relay.com/\"\nname = \"Your Relay Name\"\ndescription = \"A Nostr relay\"\npubkey = \"your-hex-pubkey\"\ncontact = \"admin@your-relay.com\"\n\n[database]\nengine = \"sqlite\"\ndata_directory = \"./data\"\n\n[network]\nport = 8080\naddress = \"0.0.0.0\"\n\n[limits]\nmessages_per_sec = 10\nmax_event_bytes = 65536\nmax_ws_message_bytes = 131072\nmax_subscriptions = 20\nmax_filters = 100\n\n[authorization]\npubkey_whitelist = []\npubkey_blacklist = []\n\n[retention]\n# Days to keep events\ndefault = 30\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#step-3-nginx-reverse-proxy","title":"Step 3: Nginx Reverse Proxy","text":"<pre><code>server {\n    listen 443 ssl http2;\n    server_name relay.yoursite.com;\n\n    ssl_certificate /path/to/cert.pem;\n    ssl_certificate_key /path/to/key.pem;\n\n    location / {\n        proxy_pass http://localhost:8080;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_read_timeout 86400;\n    }\n}\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#relay-policies","title":"Relay Policies","text":""},{"location":"modules/module-04-relays-architecture/#content-filtering","title":"Content Filtering","text":"<pre><code>// Example relay policy implementation\nclass RelayPolicy {\n  constructor() {\n    this.rules = [];\n  }\n\n  addRule(rule) {\n    this.rules.push(rule);\n  }\n\n  async validateEvent(event) {\n    for (const rule of this.rules) {\n      const result = await rule.validate(event);\n      if (!result.valid) {\n        return {\n          accepted: false,\n          reason: result.reason\n        };\n      }\n    }\n    return { accepted: true };\n  }\n}\n\n// Spam filter rule\nclass SpamFilterRule {\n  constructor() {\n    this.recentEvents = new Map();\n  }\n\n  async validate(event) {\n    const key = event.pubkey;\n    const now = Date.now();\n\n    if (!this.recentEvents.has(key)) {\n      this.recentEvents.set(key, []);\n    }\n\n    const recent = this.recentEvents.get(key)\n      .filter(time =&gt; now - time &lt; 60000); // Last minute\n\n    if (recent.length &gt; 10) {\n      return {\n        valid: false,\n        reason: 'Rate limit exceeded'\n      };\n    }\n\n    recent.push(now);\n    this.recentEvents.set(key, recent);\n\n    return { valid: true };\n  }\n}\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#relay-authentication-nip-42","title":"Relay Authentication (NIP-42)","text":"<p>Some relays require authentication to access certain features or content. NIP-42 defines how clients authenticate with relays.</p>"},{"location":"modules/module-04-relays-architecture/#authentication-flow","title":"Authentication Flow","text":"<pre><code>sequenceDiagram\n    participant C as Client\n    participant R as Relay\n\n    C-&gt;&gt;R: Connect WebSocket\n    R-&gt;&gt;C: [\"AUTH\", \"&lt;challenge&gt;\"]\n    Note over C: Create kind 22242 event&lt;br/&gt;with challenge\n    C-&gt;&gt;R: [\"AUTH\", {signed_event}]\n    R-&gt;&gt;C: [\"OK\", event_id, true, \"\"]\n    Note over C,R: Now authenticated</code></pre>"},{"location":"modules/module-04-relays-architecture/#authentication-event-kind-22242","title":"Authentication Event (Kind 22242)","text":"<pre><code>async function authenticateToRelay(relay, challenge, privateKey) {\n  const authEvent = {\n    kind: 22242,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [\n      [\"relay\", relay.url],\n      [\"challenge\", challenge]\n    ],\n    content: \"\"\n  };\n\n  const signedEvent = finishEvent(authEvent, privateKey);\n\n  relay.send([\"AUTH\", signedEvent]);\n\n  return new Promise((resolve, reject) =&gt; {\n    const timeout = setTimeout(() =&gt; {\n      reject(new Error(\"Authentication timeout\"));\n    }, 5000);\n\n    relay.once(\"message\", (msg) =&gt; {\n      const [type, eventId, success, message] = JSON.parse(msg.data);\n      clearTimeout(timeout);\n\n      if (type === \"OK\" &amp;&amp; success) {\n        resolve({ authenticated: true });\n      } else {\n        reject(new Error(`Authentication failed: ${message}`));\n      }\n    });\n  });\n}\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#handling-auth-challenges","title":"Handling AUTH Challenges","text":"<pre><code>class AuthenticatedRelayConnection {\n  constructor(url, privateKey) {\n    this.url = url;\n    this.privateKey = privateKey;\n    this.authenticated = false;\n    this.ws = null;\n  }\n\n  async connect() {\n    this.ws = new WebSocket(this.url);\n\n    return new Promise((resolve, reject) =&gt; {\n      this.ws.onopen = () =&gt; {\n        resolve();\n      };\n\n      this.ws.onerror = (error) =&gt; {\n        reject(error);\n      };\n\n      this.ws.onmessage = async (event) =&gt; {\n        const message = JSON.parse(event.data);\n\n        if (message[0] === \"AUTH\") {\n          const challenge = message[1];\n          await this.handleAuthChallenge(challenge);\n        }\n      };\n    });\n  }\n\n  async handleAuthChallenge(challenge) {\n    const authEvent = {\n      kind: 22242,\n      created_at: Math.floor(Date.now() / 1000),\n      tags: [\n        [\"relay\", this.url],\n        [\"challenge\", challenge]\n      ],\n      content: \"\"\n    };\n\n    const signedEvent = finishEvent(authEvent, this.privateKey);\n    this.ws.send(JSON.stringify([\"AUTH\", signedEvent]));\n    this.authenticated = true;\n  }\n\n  send(message) {\n    if (this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(JSON.stringify(message));\n    } else {\n      throw new Error(\"WebSocket not connected\");\n    }\n  }\n}\n\n// Usage\nconst authedRelay = new AuthenticatedRelayConnection(\n  'wss://private-relay.com',\n  privateKey\n);\n\nawait authedRelay.connect();\n// Relay will send AUTH challenge, client auto-responds\n// Now you can use the relay\nauthedRelay.send([\"REQ\", \"sub1\", { kinds: [1], limit: 10 }]);\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#when-authentication-is-required","title":"When Authentication is Required","text":"<p>Relays may require authentication for: - Private content - Access to restricted events - Write permissions - Publishing events - Rate limit increases - Higher limits for authenticated users - Premium features - Special capabilities - Analytics - Track authenticated user activity</p>"},{"location":"modules/module-04-relays-architecture/#45-network-topology","title":"4.5 Network Topology","text":""},{"location":"modules/module-04-relays-architecture/#relay-discovery","title":"Relay Discovery","text":""},{"location":"modules/module-04-relays-architecture/#nip-65-relay-list-metadata","title":"NIP-65: Relay List Metadata","text":"<pre><code>// Users publish their relay preferences\nconst relayListEvent = {\n  kind: 10002,\n  tags: [\n    [\"r\", \"wss://relay.damus.io\", \"read\"],\n    [\"r\", \"wss://nos.lol\", \"write\"],\n    [\"r\", \"wss://relay.nostr.band\", \"read\"],\n  ],\n  content: \"\"\n};\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#gossip-model","title":"Gossip Model","text":"<pre><code>class GossipRelayDiscovery {\n  constructor(pool) {\n    this.pool = pool;\n    this.discoveredRelays = new Set();\n    this.userRelayMap = new Map();\n  }\n\n  async discoverRelaysForUser(pubkey) {\n    // Get user's relay list\n    const filter = {\n      authors: [pubkey],\n      kinds: [10002],\n      limit: 1\n    };\n\n    const relayList = await this.pool.queryOne(filter);\n\n    if (relayList) {\n      const relays = relayList.tags\n        .filter(tag =&gt; tag[0] === 'r')\n        .map(tag =&gt; ({\n          url: tag[1],\n          type: tag[2] || 'both'\n        }));\n\n      this.userRelayMap.set(pubkey, relays);\n      relays.forEach(r =&gt; this.discoveredRelays.add(r.url));\n\n      return relays;\n    }\n\n    return [];\n  }\n\n  async findUserAcrossRelays(pubkey) {\n    // Query known relays for user\n    const relays = this.userRelayMap.get(pubkey) || [];\n\n    if (relays.length === 0) {\n      // Try popular relays\n      return this.tryPopularRelays(pubkey);\n    }\n\n    return relays.map(r =&gt; r.url);\n  }\n}\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#relay-synchronization","title":"Relay Synchronization","text":"<pre><code>class RelaySyncManager {\n  constructor(primaryRelay, backupRelays) {\n    this.primary = primaryRelay;\n    this.backups = backupRelays;\n    this.syncedEvents = new Set();\n  }\n\n  async syncUserData(pubkey) {\n    // Get all user events from primary\n    const events = await this.primary.query({\n      authors: [pubkey]\n    });\n\n    // Sync to backups\n    for (const backup of this.backups) {\n      for (const event of events) {\n        if (!this.syncedEvents.has(event.id)) {\n          await backup.publish(event);\n          this.syncedEvents.add(event.id);\n        }\n      }\n    }\n\n    return {\n      eventsCount: events.length,\n      syncedTo: this.backups.length\n    };\n  }\n\n  async setupBidirectionalSync() {\n    // Subscribe to new events on primary\n    this.primary.subscribe(\n      [{ since: Math.floor(Date.now() / 1000) }],\n      (event) =&gt; {\n        // Forward to backups\n        this.backups.forEach(backup =&gt; {\n          backup.publish(event);\n        });\n      }\n    );\n\n    // Subscribe to backups\n    this.backups.forEach(backup =&gt; {\n      backup.subscribe(\n        [{ since: Math.floor(Date.now() / 1000) }],\n        (event) =&gt; {\n          // Forward to primary and other backups\n          this.primary.publish(event);\n          this.backups\n            .filter(b =&gt; b !== backup)\n            .forEach(b =&gt; b.publish(event));\n        }\n      );\n    });\n  }\n}\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#46-performance-optimization","title":"4.6 Performance Optimization","text":""},{"location":"modules/module-04-relays-architecture/#connection-management","title":"Connection Management","text":"<pre><code>class OptimizedRelayConnection {\n  constructor(url) {\n    this.url = url;\n    this.ws = null;\n    this.messageQueue = [];\n    this.reconnectDelay = 1000;\n    this.maxReconnectDelay = 30000;\n    this.pingInterval = null;\n  }\n\n  connect() {\n    this.ws = new WebSocket(this.url);\n\n    this.ws.onopen = () =&gt; {\n      this.reconnectDelay = 1000;\n      this.flushQueue();\n      this.startPing();\n    };\n\n    this.ws.onclose = () =&gt; {\n      this.stopPing();\n      this.reconnect();\n    };\n  }\n\n  startPing() {\n    this.pingInterval = setInterval(() =&gt; {\n      if (this.ws.readyState === WebSocket.OPEN) {\n        this.ws.send('ping');\n      }\n    }, 30000);\n  }\n\n  stopPing() {\n    if (this.pingInterval) {\n      clearInterval(this.pingInterval);\n      this.pingInterval = null;\n    }\n  }\n\n  send(message) {\n    if (this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(JSON.stringify(message));\n    } else {\n      this.messageQueue.push(message);\n    }\n  }\n\n  flushQueue() {\n    while (this.messageQueue.length &gt; 0) {\n      const message = this.messageQueue.shift();\n      this.ws.send(JSON.stringify(message));\n    }\n  }\n\n  reconnect() {\n    setTimeout(() =&gt; {\n      this.connect();\n      this.reconnectDelay = Math.min(\n        this.reconnectDelay * 2,\n        this.maxReconnectDelay\n      );\n    }, this.reconnectDelay);\n  }\n}\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#batch-processing","title":"Batch Processing","text":"<pre><code>class BatchedRelayClient {\n  constructor(relay) {\n    this.relay = relay;\n    this.eventBatch = [];\n    this.batchSize = 10;\n    this.batchTimeout = 100; // ms\n    this.batchTimer = null;\n  }\n\n  publishEvent(event) {\n    this.eventBatch.push(event);\n\n    if (this.eventBatch.length &gt;= this.batchSize) {\n      this.flush();\n    } else if (!this.batchTimer) {\n      this.batchTimer = setTimeout(() =&gt; this.flush(), this.batchTimeout);\n    }\n  }\n\n  flush() {\n    if (this.batchTimer) {\n      clearTimeout(this.batchTimer);\n      this.batchTimer = null;\n    }\n\n    if (this.eventBatch.length === 0) return;\n\n    const batch = this.eventBatch.splice(0);\n\n    // Send all events efficiently\n    batch.forEach(event =&gt; {\n      this.relay.send(['EVENT', event]);\n    });\n  }\n}\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#caching-strategy","title":"Caching Strategy","text":"<pre><code>class CachedRelayClient {\n  constructor() {\n    this.eventCache = new Map();\n    this.profileCache = new Map();\n    this.cacheExpiry = 5 * 60 * 1000; // 5 minutes\n  }\n\n  async getEvent(eventId, relay) {\n    // Check cache first\n    const cached = this.eventCache.get(eventId);\n    if (cached &amp;&amp; Date.now() - cached.timestamp &lt; this.cacheExpiry) {\n      return cached.event;\n    }\n\n    // Fetch from relay\n    const event = await relay.queryOne({ ids: [eventId] });\n\n    if (event) {\n      this.eventCache.set(eventId, {\n        event,\n        timestamp: Date.now()\n      });\n    }\n\n    return event;\n  }\n\n  async getProfile(pubkey, relay) {\n    const cached = this.profileCache.get(pubkey);\n    if (cached &amp;&amp; Date.now() - cached.timestamp &lt; this.cacheExpiry) {\n      return cached.profile;\n    }\n\n    const profileEvent = await relay.queryOne({\n      authors: [pubkey],\n      kinds: [0],\n      limit: 1\n    });\n\n    if (profileEvent) {\n      const profile = JSON.parse(profileEvent.content);\n      this.profileCache.set(pubkey, {\n        profile,\n        timestamp: Date.now()\n      });\n      return profile;\n    }\n\n    return null;\n  }\n\n  pruneCache() {\n    const now = Date.now();\n\n    for (const [key, value] of this.eventCache.entries()) {\n      if (now - value.timestamp &gt; this.cacheExpiry) {\n        this.eventCache.delete(key);\n      }\n    }\n\n    for (const [key, value] of this.profileCache.entries()) {\n      if (now - value.timestamp &gt; this.cacheExpiry) {\n        this.profileCache.delete(key);\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#47-practical-exercises","title":"4.7 Practical Exercises","text":""},{"location":"modules/module-04-relays-architecture/#exercise-1-build-a-relay-client","title":"Exercise 1: Build a Relay Client","text":"<ol> <li>Create a WebSocket connection to a relay</li> <li>Implement all message types (EVENT, REQ, CLOSE)</li> <li>Handle reconnection on disconnect</li> <li>Add proper error handling</li> </ol>"},{"location":"modules/module-04-relays-architecture/#exercise-2-implement-relay-pool","title":"Exercise 2: Implement Relay Pool","text":"<ol> <li>Connect to 3 different relays</li> <li>Implement event deduplication</li> <li>Add relay health monitoring</li> <li>Test failover when a relay disconnects</li> </ol>"},{"location":"modules/module-04-relays-architecture/#exercise-3-set-up-your-own-relay","title":"Exercise 3: Set Up Your Own Relay","text":"<ol> <li>Install nostr-rs-relay or strfry</li> <li>Configure with custom policies</li> <li>Set up SSL with Let's Encrypt</li> <li>Test with multiple clients</li> </ol>"},{"location":"modules/module-04-relays-architecture/#exercise-4-relay-discovery","title":"Exercise 4: Relay Discovery","text":"<ol> <li>Implement NIP-65 relay list fetching</li> <li>Discover relays from user's contacts</li> <li>Build a relay recommendation system</li> <li>Test with real Nostr data</li> </ol>"},{"location":"modules/module-04-relays-architecture/#exercise-5-performance-testing","title":"Exercise 5: Performance Testing","text":"<ol> <li>Measure latency to different relays</li> <li>Test throughput with batch publishing</li> <li>Implement and measure caching effectiveness</li> <li>Create a relay benchmark tool</li> </ol>"},{"location":"modules/module-04-relays-architecture/#48-troubleshooting-common-issues","title":"4.8 Troubleshooting Common Issues","text":""},{"location":"modules/module-04-relays-architecture/#connection-problems","title":"Connection Problems","text":"Issue Cause Solution Connection drops Network instability Implement exponential backoff Can't connect Firewall/SSL issues Check WebSocket support, certificates Slow responses High latency Use geographic relay selection Missing events Relay didn't store Query multiple relays"},{"location":"modules/module-04-relays-architecture/#performance-issues","title":"Performance Issues","text":"<pre><code>// Diagnostic tool for relay performance\nclass RelayDiagnostics {\n  async runDiagnostics(relayUrl) {\n    const results = {\n      connectivity: false,\n      latency: null,\n      throughput: null,\n      eventSupport: {},\n      errors: []\n    };\n\n    try {\n      // Test connection\n      const ws = new WebSocket(relayUrl);\n      await new Promise((resolve, reject) =&gt; {\n        ws.onopen = resolve;\n        ws.onerror = reject;\n        setTimeout(reject, 5000);\n      });\n      results.connectivity = true;\n\n      // Test latency\n      const start = Date.now();\n      ws.send(JSON.stringify(['REQ', 'test', { limit: 1 }]));\n      await new Promise(resolve =&gt; {\n        ws.onmessage = resolve;\n        setTimeout(resolve, 5000);\n      });\n      results.latency = Date.now() - start;\n\n      ws.close();\n    } catch (error) {\n      results.errors.push(error.message);\n    }\n\n    return results;\n  }\n}\n</code></pre>"},{"location":"modules/module-04-relays-architecture/#module-4-quiz","title":"\ud83d\udcdd Module 4 Quiz","text":"<ol> <li> <p>What are the three main message types clients send to relays? Answer    EVENT (publish), REQ (subscribe/request), and CLOSE (end subscription)     </p> </li> <li> <p>Why should you use multiple relays? Answer    For redundancy, censorship resistance, geographic distribution, content availability, and load balancing     </p> </li> <li> <p>What does EOSE mean and when is it sent? Answer    \"End Of Stored Events\" - sent by relay after all stored events matching a subscription have been sent     </p> </li> <li> <p>What is NIP-65 used for? Answer    Relay List Metadata - allows users to publish their preferred relays for reading and writing     </p> </li> <li> <p>What strategies can optimize relay performance? Answer    Connection pooling, batch processing, caching, geographic selection, and implementing reconnection with exponential backoff     </p> </li> </ol>"},{"location":"modules/module-04-relays-architecture/#module-4-checkpoint","title":"\ud83c\udfaf Module 4 Checkpoint","text":"<p>Before moving to Module 5, ensure you have:</p> <ul> <li>[ ] Connected to multiple relays via WebSocket</li> <li>[ ] Implemented a basic relay pool manager</li> <li>[ ] Set up and configured your own relay</li> <li>[ ] Handled all relay message types</li> <li>[ ] Implemented relay discovery using NIP-65</li> <li>[ ] Created performance monitoring for relays</li> <li>[ ] Tested failover and redundancy</li> <li>[ ] Optimized with caching and batching</li> </ul>"},{"location":"modules/module-04-relays-architecture/#additional-resources","title":"\ud83d\udcda Additional Resources","text":"<ul> <li>NIP-01: Basic Protocol</li> <li>NIP-65: Relay List Metadata</li> <li>Relay Implementations List</li> <li>WebSocket API Documentation</li> <li>Tool: Relay Info Inspector</li> </ul>"},{"location":"modules/module-04-relays-architecture/#community-discussion","title":"\ud83d\udcac Community Discussion","text":"<p>Join our Discord to discuss Module 4: - Share your relay setup experiences - Get help with relay configuration - Discuss relay selection strategies - Compare relay performance metrics</p> <p>Congratulations!</p> <p>You've mastered Nostr's relay architecture! You understand WebSocket communication, can manage relay pools, run your own relay, and optimize network performance. You're ready to build robust Nostr applications!</p> <p>Continue to Module 5: Building Your First Nostr Client \u2192</p>"},{"location":"modules/module-05-building-client/","title":"Module 5: Building Your First Nostr Client","text":"<p>Module Overview</p> <p>Duration: 6-8 hours Level: Intermediate Prerequisites: Modules 1-4 completed Goal: Build a complete, production-ready Nostr client application from scratch</p>"},{"location":"modules/module-05-building-client/#learning-objectives","title":"\ud83d\udccb Learning Objectives","text":"<p>By the end of this module, you will:</p> <ul> <li>\u2705 Design and architect a complete Nostr client application</li> <li>\u2705 Implement all core client features (posting, reading, profiles)</li> <li>\u2705 Create an intuitive and responsive user interface</li> <li>\u2705 Handle real-time updates and WebSocket connections</li> <li>\u2705 Implement proper error handling and edge cases</li> <li>\u2705 Deploy your client to production</li> </ul>"},{"location":"modules/module-05-building-client/#51-planning-your-client","title":"5.1 Planning Your Client","text":""},{"location":"modules/module-05-building-client/#defining-features","title":"Defining Features","text":"<p>Before writing code, let's define what features our client will have:</p> <p>Core Features (Must-Have) - \u2705 User authentication (key generation/import) - \u2705 Create and publish notes - \u2705 View global feed - \u2705 View user profiles - \u2705 Follow/unfollow users - \u2705 React to posts (likes) - \u2705 Reply to posts</p> <p>Advanced Features (Nice-to-Have) - \ud83d\udd04 Thread visualization - \ud83d\udd04 Media uploads - \ud83d\udd04 Search functionality - \ud83d\udd04 Relay management - \ud83d\udd04 Notifications</p>"},{"location":"modules/module-05-building-client/#architecture-overview","title":"Architecture Overview","text":"<pre><code>graph TB\n    UI[User Interface Layer]\n    STATE[State Management]\n    NOSTR[Nostr Protocol Layer]\n    STORAGE[Local Storage]\n    RELAYS[Relay Pool]\n\n    UI --&gt; STATE\n    STATE --&gt; NOSTR\n    STATE --&gt; STORAGE\n    NOSTR --&gt; RELAYS\n\n    style UI fill:#667eea,stroke:#fff,color:#fff\n    style NOSTR fill:#9c27b0,stroke:#fff,color:#fff\n    style RELAYS fill:#764ba2,stroke:#fff,color:#fff</code></pre>"},{"location":"modules/module-05-building-client/#52-project-setup","title":"5.2 Project Setup","text":""},{"location":"modules/module-05-building-client/#technology-stack","title":"Technology Stack","text":"<p>We'll use modern web technologies:</p> <ul> <li>Frontend: HTML5, CSS3, JavaScript (ES6+)</li> <li>Build Tool: Vite</li> <li>Library: nostr-tools</li> <li>Styling: Custom CSS with CSS Variables</li> <li>State: Vanilla JS with Proxy for reactivity</li> </ul>"},{"location":"modules/module-05-building-client/#initialize-project","title":"Initialize Project","text":"<pre><code># Create project directory\nmkdir nostr-client-pro\ncd nostr-client-pro\n\n# Initialize npm\nnpm init -y\n\n# Install dependencies\nnpm install nostr-tools\nnpm install --save-dev vite\n\n# Create project structure\nmkdir -p src/{components,utils,services,styles}\ntouch src/main.js src/index.html\n</code></pre>"},{"location":"modules/module-05-building-client/#project-structure","title":"Project Structure","text":"<pre><code>nostr-client-pro/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 components/\n\u2502   \u2502   \u251c\u2500\u2500 Auth.js          # Authentication component\n\u2502   \u2502   \u251c\u2500\u2500 Feed.js          # Feed display component\n\u2502   \u2502   \u251c\u2500\u2500 Composer.js      # Note composer\n\u2502   \u2502   \u251c\u2500\u2500 Profile.js       # User profile\n\u2502   \u2502   \u2514\u2500\u2500 Header.js        # App header\n\u2502   \u251c\u2500\u2500 services/\n\u2502   \u2502   \u251c\u2500\u2500 NostrService.js  # Nostr protocol layer\n\u2502   \u2502   \u251c\u2500\u2500 RelayPool.js     # Relay connection manager\n\u2502   \u2502   \u2514\u2500\u2500 Storage.js       # LocalStorage wrapper\n\u2502   \u251c\u2500\u2500 utils/\n\u2502   \u2502   \u251c\u2500\u2500 helpers.js       # Utility functions\n\u2502   \u2502   \u2514\u2500\u2500 constants.js     # App constants\n\u2502   \u251c\u2500\u2500 styles/\n\u2502   \u2502   \u251c\u2500\u2500 main.css         # Main styles\n\u2502   \u2502   \u251c\u2500\u2500 components.css   # Component styles\n\u2502   \u2502   \u2514\u2500\u2500 theme.css        # Theme variables\n\u2502   \u251c\u2500\u2500 main.js              # App entry point\n\u2502   \u2514\u2500\u2500 index.html           # HTML template\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 vite.config.js\n</code></pre>"},{"location":"modules/module-05-building-client/#53-building-the-core-services","title":"5.3 Building the Core Services","text":""},{"location":"modules/module-05-building-client/#nostrservice-protocol-layer","title":"NostrService - Protocol Layer","text":"<p>Create <code>src/services/NostrService.js</code>:</p> <pre><code>import { generatePrivateKey, getPublicKey, finishEvent, nip19 } from 'nostr-tools'\n\nclass NostrService {\n  constructor() {\n    this.privateKey = null\n    this.publicKey = null\n  }\n\n  // Generate new keys\n  generateKeys() {\n    this.privateKey = generatePrivateKey()\n    this.publicKey = getPublicKey(this.privateKey)\n    return {\n      privateKey: this.privateKey,\n      publicKey: this.publicKey,\n      npub: nip19.npubEncode(this.publicKey),\n      nsec: nip19.nsecEncode(this.privateKey)\n    }\n  }\n\n  // Import keys\n  importKeys(privateKey) {\n    // Handle both hex and nsec formats\n    if (privateKey.startsWith('nsec')) {\n      const decoded = nip19.decode(privateKey)\n      this.privateKey = decoded.data\n    } else {\n      this.privateKey = privateKey\n    }\n    this.publicKey = getPublicKey(this.privateKey)\n    return this.getKeys()\n  }\n\n  // Get current keys\n  getKeys() {\n    if (!this.publicKey) return null\n    return {\n      publicKey: this.publicKey,\n      npub: nip19.npubEncode(this.publicKey)\n    }\n  }\n\n  // Create a text note\n  createTextNote(content, tags = []) {\n    if (!this.privateKey) throw new Error('No keys loaded')\n\n    return finishEvent({\n      kind: 1,\n      created_at: Math.floor(Date.now() / 1000),\n      tags: tags,\n      content: content,\n    }, this.privateKey)\n  }\n\n  // Create a reply\n  createReply(content, originalEvent) {\n    const tags = [\n      ['e', originalEvent.id, '', 'reply'],\n      ['p', originalEvent.pubkey]\n    ]\n\n    // Add root tag if this is a nested reply\n    const rootTag = originalEvent.tags.find(t =&gt; t[0] === 'e' &amp;&amp; t[3] === 'root')\n    if (rootTag) {\n      tags.unshift(['e', rootTag[1], '', 'root'])\n    } else {\n      tags[0][3] = 'root'\n    }\n\n    return this.createTextNote(content, tags)\n  }\n\n  // Create a reaction\n  createReaction(eventId, pubkey, emoji = '+') {\n    if (!this.privateKey) throw new Error('No keys loaded')\n\n    return finishEvent({\n      kind: 7,\n      created_at: Math.floor(Date.now() / 1000),\n      tags: [\n        ['e', eventId],\n        ['p', pubkey]\n      ],\n      content: emoji,\n    }, this.privateKey)\n  }\n\n  // Create/update profile\n  createProfile(metadata) {\n    if (!this.privateKey) throw new Error('No keys loaded')\n\n    return finishEvent({\n      kind: 0,\n      created_at: Math.floor(Date.now() / 1000),\n      tags: [],\n      content: JSON.stringify(metadata),\n    }, this.privateKey)\n  }\n\n  // Create follow list\n  createFollowList(pubkeys) {\n    if (!this.privateKey) throw new Error('No keys loaded')\n\n    const tags = pubkeys.map(pk =&gt; ['p', pk])\n\n    return finishEvent({\n      kind: 3,\n      created_at: Math.floor(Date.now() / 1000),\n      tags: tags,\n      content: '',\n    }, this.privateKey)\n  }\n}\n\nexport default new NostrService()\n</code></pre>"},{"location":"modules/module-05-building-client/#relaypool-connection-manager","title":"RelayPool - Connection Manager","text":"<p>Create <code>src/services/RelayPool.js</code>:</p> <pre><code>import { relayInit } from 'nostr-tools'\n\nclass RelayPool {\n  constructor() {\n    this.relays = new Map()\n    this.subscriptions = new Map()\n    this.eventHandlers = new Map()\n  }\n\n  // Add and connect to a relay\n  async addRelay(url) {\n    if (this.relays.has(url)) {\n      return this.relays.get(url)\n    }\n\n    const relay = relayInit(url)\n\n    relay.on('connect', () =&gt; {\n      console.log(`\u2705 Connected to ${url}`)\n      this.emit('relay:connect', { url })\n    })\n\n    relay.on('disconnect', () =&gt; {\n      console.log(`\u274c Disconnected from ${url}`)\n      this.emit('relay:disconnect', { url })\n    })\n\n    relay.on('error', () =&gt; {\n      console.log(`\u26a0\ufe0f Error with ${url}`)\n      this.emit('relay:error', { url })\n    })\n\n    try {\n      await relay.connect()\n      this.relays.set(url, relay)\n      return relay\n    } catch (error) {\n      console.error(`Failed to connect to ${url}:`, error)\n      throw error\n    }\n  }\n\n  // Remove a relay\n  removeRelay(url) {\n    const relay = this.relays.get(url)\n    if (relay) {\n      relay.close()\n      this.relays.delete(url)\n    }\n  }\n\n  // Subscribe to events\n  subscribe(filters, onEvent, subId = null) {\n    const id = subId || `sub_${Date.now()}`\n    const subs = []\n\n    for (const [url, relay] of this.relays) {\n      if (relay.status !== 1) continue // Only connected relays\n\n      try {\n        const sub = relay.sub(filters)\n\n        sub.on('event', (event) =&gt; {\n          onEvent(event, url)\n        })\n\n        sub.on('eose', () =&gt; {\n          this.emit('subscription:eose', { id, url })\n        })\n\n        subs.push({ relay: url, sub })\n      } catch (error) {\n        console.error(`Subscription error on ${url}:`, error)\n      }\n    }\n\n    this.subscriptions.set(id, subs)\n    return id\n  }\n\n  // Unsubscribe\n  unsubscribe(subId) {\n    const subs = this.subscriptions.get(subId)\n    if (subs) {\n      subs.forEach(({ sub }) =&gt; sub.unsub())\n      this.subscriptions.delete(subId)\n    }\n  }\n\n  // Publish event to all relays\n  async publish(event) {\n    const results = []\n\n    for (const [url, relay] of this.relays) {\n      if (relay.status !== 1) continue\n\n      try {\n        const pub = await relay.publish(event)\n        results.push({ url, success: true, pub })\n      } catch (error) {\n        results.push({ url, success: false, error })\n      }\n    }\n\n    return results\n  }\n\n  // Get connected relays\n  getConnectedRelays() {\n    return Array.from(this.relays.entries())\n      .filter(([_, relay]) =&gt; relay.status === 1)\n      .map(([url]) =&gt; url)\n  }\n\n  // Event emitter\n  on(event, handler) {\n    if (!this.eventHandlers.has(event)) {\n      this.eventHandlers.set(event, [])\n    }\n    this.eventHandlers.get(event).push(handler)\n  }\n\n  emit(event, data) {\n    const handlers = this.eventHandlers.get(event)\n    if (handlers) {\n      handlers.forEach(handler =&gt; handler(data))\n    }\n  }\n\n  // Cleanup\n  close() {\n    this.subscriptions.forEach((_, id) =&gt; this.unsubscribe(id))\n    this.relays.forEach(relay =&gt; relay.close())\n    this.relays.clear()\n  }\n}\n\nexport default new RelayPool()\n</code></pre>"},{"location":"modules/module-05-building-client/#storage-service","title":"Storage Service","text":"<p>Create <code>src/services/Storage.js</code>:</p> <pre><code>class StorageService {\n  constructor() {\n    this.prefix = 'nostr_client_'\n  }\n\n  // Save data\n  set(key, value) {\n    try {\n      const serialized = JSON.stringify(value)\n      localStorage.setItem(this.prefix + key, serialized)\n      return true\n    } catch (error) {\n      console.error('Storage error:', error)\n      return false\n    }\n  }\n\n  // Get data\n  get(key) {\n    try {\n      const item = localStorage.getItem(this.prefix + key)\n      return item ? JSON.parse(item) : null\n    } catch (error) {\n      console.error('Storage error:', error)\n      return null\n    }\n  }\n\n  // Remove data\n  remove(key) {\n    localStorage.removeItem(this.prefix + key)\n  }\n\n  // Clear all app data\n  clear() {\n    const keys = Object.keys(localStorage)\n    keys.forEach(key =&gt; {\n      if (key.startsWith(this.prefix)) {\n        localStorage.removeItem(key)\n      }\n    })\n  }\n\n  // Specific storage methods\n  saveKeys(keys) {\n    return this.set('keys', keys)\n  }\n\n  getKeys() {\n    return this.get('keys')\n  }\n\n  saveRelays(relays) {\n    return this.set('relays', relays)\n  }\n\n  getRelays() {\n    return this.get('relays') || [\n      'wss://relay.damus.io',\n      'wss://nos.lol',\n      'wss://relay.snort.social',\n      'wss://relay.nostr.band'\n    ]\n  }\n\n  saveProfile(pubkey, profile) {\n    const profiles = this.get('profiles') || {}\n    profiles[pubkey] = profile\n    return this.set('profiles', profiles)\n  }\n\n  getProfile(pubkey) {\n    const profiles = this.get('profiles') || {}\n    return profiles[pubkey]\n  }\n\n  saveFollowing(following) {\n    return this.set('following', following)\n  }\n\n  getFollowing() {\n    return this.get('following') || []\n  }\n}\n\nexport default new StorageService()\n</code></pre>"},{"location":"modules/module-05-building-client/#54-state-management-reactivity","title":"5.4 State Management &amp; Reactivity","text":""},{"location":"modules/module-05-building-client/#creating-a-reactive-state-system","title":"Creating a Reactive State System","text":"<p>Before building UI components, implement a simple reactive state management system:</p> <pre><code>// src/utils/state.js\nclass ReactiveState {\n  constructor(initialState = {}) {\n    this.listeners = new Map();\n    this.state = new Proxy(initialState, {\n      set: (target, property, value) =&gt; {\n        const oldValue = target[property];\n        target[property] = value;\n\n        // Notify listeners\n        if (oldValue !== value) {\n          this.notify(property, value, oldValue);\n        }\n\n        return true;\n      }\n    });\n  }\n\n  // Subscribe to state changes\n  subscribe(property, callback) {\n    if (!this.listeners.has(property)) {\n      this.listeners.set(property, new Set());\n    }\n    this.listeners.get(property).add(callback);\n\n    // Return unsubscribe function\n    return () =&gt; {\n      const listeners = this.listeners.get(property);\n      if (listeners) {\n        listeners.delete(callback);\n      }\n    };\n  }\n\n  // Notify all listeners of a property\n  notify(property, newValue, oldValue) {\n    const listeners = this.listeners.get(property);\n    if (listeners) {\n      listeners.forEach(callback =&gt; callback(newValue, oldValue));\n    }\n\n    // Also notify global listeners\n    const globalListeners = this.listeners.get('*');\n    if (globalListeners) {\n      globalListeners.forEach(callback =&gt; \n        callback(property, newValue, oldValue)\n      );\n    }\n  }\n\n  // Get current state value\n  get(property) {\n    return this.state[property];\n  }\n\n  // Set state value\n  set(property, value) {\n    this.state[property] = value;\n  }\n\n  // Batch updates\n  update(updates) {\n    Object.entries(updates).forEach(([key, value]) =&gt; {\n      this.state[key] = value;\n    });\n  }\n}\n\n// Create global app state\nconst appState = new ReactiveState({\n  user: null,\n  authenticated: false,\n  loading: false,\n  events: [],\n  profiles: new Map(),\n  following: new Set(),\n  relays: [],\n  currentView: 'feed',\n  error: null\n});\n\nexport default appState;\n</code></pre>"},{"location":"modules/module-05-building-client/#event-cache-deduplication","title":"Event Cache &amp; Deduplication","text":"<pre><code>// src/utils/eventCache.js\nclass EventCache {\n  constructor() {\n    this.events = new Map();\n    this.eventsByKind = new Map();\n    this.eventsByAuthor = new Map();\n    this.maxSize = 10000; // Prevent memory issues\n  }\n\n  add(event) {\n    // Check if event already exists\n    if (this.events.has(event.id)) {\n      return false; // Duplicate\n    }\n\n    // Add to main cache\n    this.events.set(event.id, event);\n\n    // Index by kind\n    if (!this.eventsByKind.has(event.kind)) {\n      this.eventsByKind.set(event.kind, new Set());\n    }\n    this.eventsByKind.get(event.kind).add(event.id);\n\n    // Index by author\n    if (!this.eventsByAuthor.has(event.pubkey)) {\n      this.eventsByAuthor.set(event.pubkey, new Set());\n    }\n    this.eventsByAuthor.get(event.pubkey).add(event.id);\n\n    // Enforce max size\n    if (this.events.size &gt; this.maxSize) {\n      this.evictOldest();\n    }\n\n    return true; // New event added\n  }\n\n  get(eventId) {\n    return this.events.get(eventId);\n  }\n\n  getByKind(kind) {\n    const eventIds = this.eventsByKind.get(kind) || new Set();\n    return Array.from(eventIds).map(id =&gt; this.events.get(id));\n  }\n\n  getByAuthor(pubkey) {\n    const eventIds = this.eventsByAuthor.get(pubkey) || new Set();\n    return Array.from(eventIds).map(id =&gt; this.events.get(id));\n  }\n\n  evictOldest() {\n    // Find oldest event\n    let oldest = null;\n    for (const event of this.events.values()) {\n      if (!oldest || event.created_at &lt; oldest.created_at) {\n        oldest = event;\n      }\n    }\n\n    if (oldest) {\n      this.remove(oldest.id);\n    }\n  }\n\n  remove(eventId) {\n    const event = this.events.get(eventId);\n    if (!event) return;\n\n    this.events.delete(eventId);\n\n    // Remove from indices\n    const kindSet = this.eventsByKind.get(event.kind);\n    if (kindSet) kindSet.delete(eventId);\n\n    const authorSet = this.eventsByAuthor.get(event.pubkey);\n    if (authorSet) authorSet.delete(eventId);\n  }\n\n  clear() {\n    this.events.clear();\n    this.eventsByKind.clear();\n    this.eventsByAuthor.clear();\n  }\n\n  // Get sorted feed\n  getFeed(limit = 50) {\n    return Array.from(this.events.values())\n      .filter(e =&gt; e.kind === 1) // Only text notes\n      .sort((a, b) =&gt; b.created_at - a.created_at)\n      .slice(0, limit);\n  }\n}\n\nexport default new EventCache();\n</code></pre>"},{"location":"modules/module-05-building-client/#profile-cache","title":"Profile Cache","text":"<pre><code>// src/utils/profileCache.js\nclass ProfileCache {\n  constructor() {\n    this.profiles = new Map();\n    this.pending = new Map(); // Prevent duplicate fetches\n  }\n\n  async get(pubkey, pool) {\n    // Return cached if available\n    if (this.profiles.has(pubkey)) {\n      return this.profiles.get(pubkey);\n    }\n\n    // Check if already fetching\n    if (this.pending.has(pubkey)) {\n      return this.pending.get(pubkey);\n    }\n\n    // Fetch profile\n    const promise = this.fetch(pubkey, pool);\n    this.pending.set(pubkey, promise);\n\n    try {\n      const profile = await promise;\n      this.profiles.set(pubkey, profile);\n      return profile;\n    } finally {\n      this.pending.delete(pubkey);\n    }\n  }\n\n  async fetch(pubkey, pool) {\n    const events = await pool.query({\n      kinds: [0],\n      authors: [pubkey],\n      limit: 1\n    });\n\n    if (events.length &gt; 0) {\n      try {\n        return JSON.parse(events[0].content);\n      } catch {\n        return this.getDefaultProfile(pubkey);\n      }\n    }\n\n    return this.getDefaultProfile(pubkey);\n  }\n\n  getDefaultProfile(pubkey) {\n    return {\n      name: pubkey.substring(0, 8) + '...',\n      display_name: pubkey.substring(0, 8),\n      about: '',\n      picture: '',\n      pubkey\n    };\n  }\n\n  set(pubkey, profile) {\n    this.profiles.set(pubkey, profile);\n  }\n\n  clear() {\n    this.profiles.clear();\n    this.pending.clear();\n  }\n}\n\nexport default new ProfileCache();\n</code></pre>"},{"location":"modules/module-05-building-client/#56-error-handling-resilience","title":"5.6 Error Handling &amp; Resilience","text":""},{"location":"modules/module-05-building-client/#comprehensive-error-handler","title":"Comprehensive Error Handler","text":"<pre><code>// src/utils/errorHandler.js\nclass ErrorHandler {\n  constructor() {\n    this.errors = [];\n    this.maxErrors = 100;\n    this.listeners = new Set();\n  }\n\n  handle(error, context = {}) {\n    const errorObj = {\n      message: error.message || String(error),\n      stack: error.stack,\n      timestamp: Date.now(),\n      context,\n      type: this.categorizeError(error)\n    };\n\n    this.errors.push(errorObj);\n    if (this.errors.length &gt; this.maxErrors) {\n      this.errors.shift();\n    }\n\n    // Notify listeners\n    this.notify(errorObj);\n\n    return errorObj;\n  }\n\n  categorizeError(error) {\n    if (error.message?.includes('relay')) return 'RELAY_ERROR';\n    if (error.message?.includes('signature')) return 'CRYPTO_ERROR';\n    if (error.message?.includes('network')) return 'NETWORK_ERROR';\n    if (error.message?.includes('timeout')) return 'TIMEOUT_ERROR';\n    return 'UNKNOWN_ERROR';\n  }\n\n  subscribe(listener) {\n    this.listeners.add(listener);\n    return () =&gt; this.listeners.delete(listener);\n  }\n\n  notify(error) {\n    this.listeners.forEach(listener =&gt; listener(error));\n  }\n}\n\nexport default new ErrorHandler();\n</code></pre>"},{"location":"modules/module-05-building-client/#retry-logic","title":"Retry Logic","text":"<pre><code>// src/utils/retryHandler.js\nclass RetryHandler {\n  async retry(fn, options = {}) {\n    const { maxRetries = 3, baseDelay = 1000 } = options;\n    let lastError;\n\n    for (let i = 0; i &lt;= maxRetries; i++) {\n      try {\n        return await fn();\n      } catch (error) {\n        lastError = error;\n        if (i &lt; maxRetries) {\n          await new Promise(r =&gt; setTimeout(r, baseDelay * Math.pow(2, i)));\n        }\n      }\n    }\n    throw lastError;\n  }\n}\n\nexport default new RetryHandler();\n</code></pre>"},{"location":"modules/module-05-building-client/#57-building-the-ui-components","title":"5.7 Building the UI Components","text":""},{"location":"modules/module-05-building-client/#main-application","title":"Main Application","text":"<p>Create <code>src/main.js</code>:</p> <pre><code>import NostrService from './services/NostrService.js'\nimport RelayPool from './services/RelayPool.js'\nimport Storage from './services/Storage.js'\nimport './styles/main.css'\n\nclass NostrClient {\n  constructor() {\n    this.state = {\n      authenticated: false,\n      loading: false,\n      currentView: 'feed',\n      events: new Map(),\n      profiles: new Map(),\n      following: new Set()\n    }\n\n    this.init()\n  }\n\n  async init() {\n    // Check for saved keys\n    const savedKeys = Storage.getKeys()\n    if (savedKeys) {\n      NostrService.importKeys(savedKeys.privateKey)\n      this.state.authenticated = true\n    }\n\n    // Connect to relays\n    const relays = Storage.getRelays()\n    for (const relay of relays) {\n      try {\n        await RelayPool.addRelay(relay)\n      } catch (error) {\n        console.error(`Failed to add relay ${relay}`)\n      }\n    }\n\n    // Load following list\n    const following = Storage.getFollowing()\n    this.state.following = new Set(following)\n\n    // Setup UI\n    this.setupUI()\n\n    if (this.state.authenticated) {\n      this.showFeed()\n      this.subscribeToFeed()\n    } else {\n      this.showAuth()\n    }\n  }\n\n  setupUI() {\n    // We'll implement the actual UI in the next section\n    console.log('Setting up UI...')\n  }\n\n  showAuth() {\n    document.getElementById('app').innerHTML = `\n      &lt;div class=\"auth-container\"&gt;\n        &lt;h1&gt;\ud83d\udd10 Welcome to Nostr&lt;/h1&gt;\n        &lt;button id=\"generate-keys\"&gt;Generate New Keys&lt;/button&gt;\n        &lt;button id=\"import-keys\"&gt;Import Existing Keys&lt;/button&gt;\n      &lt;/div&gt;\n    `\n\n    document.getElementById('generate-keys').onclick = () =&gt; this.generateKeys()\n    document.getElementById('import-keys').onclick = () =&gt; this.importKeys()\n  }\n\n  generateKeys() {\n    const keys = NostrService.generateKeys()\n    Storage.saveKeys(keys)\n    this.state.authenticated = true\n\n    alert(`Your keys have been generated!\\n\\nNPUB: ${keys.npub}\\n\\n\u26a0\ufe0f Save your NSEC key securely: ${keys.nsec}`)\n\n    this.showFeed()\n    this.subscribeToFeed()\n  }\n\n  importKeys() {\n    const nsec = prompt('Enter your NSEC key:')\n    if (nsec) {\n      try {\n        const keys = NostrService.importKeys(nsec)\n        Storage.saveKeys({ privateKey: NostrService.privateKey })\n        this.state.authenticated = true\n        this.showFeed()\n        this.subscribeToFeed()\n      } catch (error) {\n        alert('Invalid key format')\n      }\n    }\n  }\n\n  showFeed() {\n    // We'll implement the full feed UI next\n    console.log('Showing feed...')\n  }\n\n  subscribeToFeed() {\n    const filters = [\n      { kinds: [1], limit: 50 },\n      { kinds: [0], limit: 100 },\n      { kinds: [3], authors: [NostrService.publicKey], limit: 1 }\n    ]\n\n    RelayPool.subscribe(filters, (event) =&gt; {\n      this.handleEvent(event)\n    })\n  }\n\n  handleEvent(event) {\n    switch (event.kind) {\n      case 0: // Profile\n        this.state.profiles.set(event.pubkey, JSON.parse(event.content))\n        break\n      case 1: // Text note\n        this.state.events.set(event.id, event)\n        break\n      case 3: // Contacts\n        if (event.pubkey === NostrService.publicKey) {\n          const following = event.tags.filter(t =&gt; t[0] === 'p').map(t =&gt; t[1])\n          this.state.following = new Set(following)\n          Storage.saveFollowing(following)\n        }\n        break\n    }\n  }\n}\n\n// Initialize app\nnew NostrClient()\n</code></pre>"},{"location":"modules/module-05-building-client/#55-practical-exercises","title":"5.5 Practical Exercises","text":""},{"location":"modules/module-05-building-client/#exercise-1-complete-the-feed-ui","title":"Exercise 1: Complete the Feed UI","text":"<p>Build a fully functional feed display: 1. Render events in chronological order 2. Show author profiles with avatars 3. Display timestamps relative to now 4. Add infinite scroll/pagination</p>"},{"location":"modules/module-05-building-client/#exercise-2-implement-posting","title":"Exercise 2: Implement Posting","text":"<p>Create a note composer: 1. Text input with character counter 2. Image attachment support 3. Tag suggestions (@mentions) 4. Draft saving to localStorage</p>"},{"location":"modules/module-05-building-client/#exercise-3-add-interactions","title":"Exercise 3: Add Interactions","text":"<p>Implement social features: 1. Like/reaction buttons 2. Reply threading 3. Repost functionality 4. Share options</p>"},{"location":"modules/module-05-building-client/#exercise-4-profile-management","title":"Exercise 4: Profile Management","text":"<p>Build profile functionality: 1. View user profiles 2. Edit your own profile 3. Follow/unfollow users 4. Display follower counts</p>"},{"location":"modules/module-05-building-client/#exercise-5-error-handling-ux","title":"Exercise 5: Error Handling &amp; UX","text":"<p>Polish the experience: 1. Loading states for all async operations 2. Error messages with retry options 3. Offline detection and handling 4. Success notifications</p>"},{"location":"modules/module-05-building-client/#module-5-quiz","title":"\ud83d\udcdd Module 5 Quiz","text":"<ol> <li> <p>What are the three main responsibilities of a Nostr client? Answer    1) Manage cryptographic keys securely, 2) Connect to and communicate with relays, 3) Create, sign, and display events with a user-friendly interface     </p> </li> <li> <p>Why should you connect to multiple relays in a client? Answer    For redundancy (if one goes down), better content discovery (different relays have different events), censorship resistance, and improved performance     </p> </li> <li> <p>What's the recommended way to store private keys in a client? Answer    Never store them in your app - use NIP-07 browser extensions that keep keys secure and only provide signing capabilities to the app     </p> </li> <li> <p>How do you ensure you don't miss events when subscribing? Answer    Use appropriate filters with `since` timestamps, handle the EOSE message to know when historical events are complete, and maintain subscriptions for real-time updates     </p> </li> <li> <p>What state management considerations are important for Nostr clients? Answer    Event deduplication across relays, caching for performance, maintaining connection state, handling subscription lifecycle, and persisting user preferences     </p> </li> </ol>"},{"location":"modules/module-05-building-client/#module-5-checkpoint","title":"\ud83c\udfaf Module 5 Checkpoint","text":"<p>Before moving to Module 6, ensure you have:</p> <ul> <li>[ ] Built a working relay connection manager</li> <li>[ ] Implemented event subscription and querying</li> <li>[ ] Created a basic UI to display events</li> <li>[ ] Integrated NIP-07 for key management</li> <li>[ ] Published at least one event from your client</li> <li>[ ] Handled real-time event updates</li> <li>[ ] Implemented proper error handling</li> <li>[ ] Tested your client with multiple relays</li> </ul>"},{"location":"modules/module-05-building-client/#additional-resources","title":"\ud83d\udcda Additional Resources","text":"<ul> <li>nostr-tools Documentation</li> <li>Nostr Client Development Guide</li> <li>React Nostr Hooks</li> <li>Vue Nostr Composables</li> <li>Example Clients: Damus, Snort, Nostrudel</li> </ul>"},{"location":"modules/module-05-building-client/#community-discussion","title":"\ud83d\udcac Community Discussion","text":"<p>Join our Discord to discuss Module 5: - Share your client projects - Get help debugging relay connections - Discuss UI/UX best practices - Show off your implementations</p> <p>Congratulations!</p> <p>You've built your first Nostr client! You understand how to connect to relays, manage events, and create user interfaces for the Nostr protocol. You're ready to explore advanced NIPs and features!</p> <p>Continue to Module 6: Advanced Event Types &amp; NIPs \u2192</p>"},{"location":"modules/module-06-advanced-nips/","title":"Module 6: Advanced Event Types &amp; NIPs","text":"<p>Module Overview</p> <p>Duration: 6-7 hours Level: Advanced Prerequisites: Modules 1-5 completed Goal: Master advanced Nostr event types, NIPs, and protocol extensions</p>"},{"location":"modules/module-06-advanced-nips/#learning-objectives","title":"\ud83d\udccb Learning Objectives","text":"<p>By the end of this module, you will:</p> <ul> <li>\u2705 Understand advanced event kinds and their use cases</li> <li>\u2705 Implement replaceable and parameterized replaceable events</li> <li>\u2705 Master long-form content (NIP-23)</li> <li>\u2705 Work with encrypted direct messages (NIP-04, NIP-44)</li> <li>\u2705 Implement reactions, reposts, and quotes</li> <li>\u2705 Build lists and sets (NIP-51)</li> <li>\u2705 Handle badges and achievements (NIP-58)</li> <li>\u2705 Integrate Zaps and Lightning (NIP-57)</li> </ul>"},{"location":"modules/module-06-advanced-nips/#nip-reference-quick-guide","title":"\ud83d\udcda NIP Reference Quick Guide","text":""},{"location":"modules/module-06-advanced-nips/#core-nips-covered-in-this-module","title":"Core NIPs Covered in This Module","text":"NIP Title Event Kinds Status Use Case NIP-01 Basic Protocol 0, 1, 2, 3, 4, 5, 6, 7 Mandatory Event structure, kinds, filters NIP-02 Follow List 3 Recommended Contact list management NIP-04 Encrypted DM 4 Deprecated Old DM encryption (use NIP-17) NIP-05 DNS Identifiers - Optional username@domain verification NIP-09 Event Deletion 5 Optional Request event deletion NIP-10 Text Notes 1 Recommended Reply/thread handling NIP-11 Relay Info - Recommended Relay metadata document NIP-13 Proof of Work - Optional Anti-spam PoW NIP-14 Subject Tag - Optional Email-like subjects NIP-17 Private DMs 14 Recommended Modern encrypted messaging NIP-18 Reposts 6, 16 Optional Boost/repost events NIP-19 bech32 Entities - Recommended npub, note, nevent encoding NIP-21 nostr: URI - Optional nostr: URL scheme NIP-23 Long-form 30023 Recommended Articles, blog posts NIP-25 Reactions 7 Recommended Likes, emoji reactions NIP-26 Event Delegation - Optional Delegate event signing NIP-27 Text References - Recommended Mention formatting NIP-28 Public Chat 40-44 Optional IRC-style channels NIP-29 Relay Groups 9000-9030 Optional Private relay groups NIP-31 Unknown Events - Recommended Graceful degradation NIP-32 Labeling 1985 Optional Content classification NIP-36 Sensitive Content - Optional Content warnings NIP-38 User Statuses 30315 Optional Status updates NIP-39 External IDs - Optional Link external identities NIP-42 Auth 22242 Optional Client authentication NIP-44 Encrypted Payload - Recommended Modern encryption (versioned) NIP-45 Event Counts - Optional COUNT queries NIP-50 Search - Optional Full-text search NIP-51 Lists 10000-10030, 30000-30030 Recommended Mutes, pins, bookmarks NIP-56 Reporting 1984 Optional Report spam/illegal content NIP-57 Zaps 9734, 9735 Recommended Lightning tips NIP-58 Badges 30009, 8 Optional Achievements, awards NIP-59 Gift Wrap 1059 Recommended Metadata-hiding wrapper NIP-65 Relay List 10002 Recommended User relay preferences"},{"location":"modules/module-06-advanced-nips/#event-kind-categories-reference","title":"Event Kind Categories Reference","text":"<p>Understanding how event kinds are organized in the Nostr protocol:</p> <pre><code>// Event Kind Categories (NIP-01)\nconst KIND_RANGES = {\n  // Regular Events (stored permanently)\n  REGULAR: {\n    range: [1, 10000],\n    behavior: 'Stored by all relays',\n    examples: [1, 6, 7, 40, 1984]\n  },\n\n  // Replaceable Events (only latest kept)\n  REPLACEABLE: {\n    range: [10000, 20000],\n    behavior: 'Only newest per pubkey kept',\n    examples: [0, 3, 10000, 10002]\n  },\n\n  // Ephemeral Events (not stored)\n  EPHEMERAL: {\n    range: [20000, 30000],\n    behavior: 'Never stored, realtime only',\n    examples: [20000, 22242]\n  },\n\n  // Parameterized Replaceable (latest per d-tag)\n  PARAMETERIZED: {\n    range: [30000, 40000],\n    behavior: 'Only newest per pubkey+d-tag',\n    examples: [30000, 30001, 30023, 30315]\n  }\n};\n\n// Complete Event Kind Map (from nostr protocol spec)\nconst EVENT_KINDS = {\n  // Metadata &amp; Profiles\n  0: 'User Metadata (NIP-01)',\n  3: 'Contacts/Follow List (NIP-02)',\n\n  // Notes &amp; Content\n  1: 'Short Text Note (NIP-01)',\n  6: 'Repost (NIP-18)',\n  16: 'Generic Repost (NIP-18)',\n  30023: 'Long-form Article (NIP-23)',\n  30024: 'Draft Article (NIP-23)',\n\n  // Reactions &amp; Engagement\n  7: 'Reaction (NIP-25)',\n  9734: 'Zap Request (NIP-57)',\n  9735: 'Zap Receipt (NIP-57)',\n\n  // Direct Messages\n  4: 'Encrypted DM (NIP-04, deprecated)',\n  14: 'Private DM (NIP-17)',\n  1059: 'Gift Wrap (NIP-59)',\n\n  // Moderation\n  5: 'Event Deletion Request (NIP-09)',\n  1984: 'Reporting (NIP-56)',\n\n  // Lists &amp; Collections (NIP-51)\n  10000: 'Mute List',\n  10001: 'Pin List',\n  10002: 'Relay List (NIP-65)',\n  10003: 'Bookmark List',\n  10004: 'Communities List',\n  10005: 'Public Chats List',\n  10006: 'Blocked Relays',\n  10007: 'Search Relays',\n  10015: 'Interests List',\n  10030: 'User Emoji List',\n\n  30000: 'Follow Sets',\n  30001: 'Generic Lists (deprecated)',\n  30002: 'Relay Sets',\n  30003: 'Bookmark Sets',\n  30004: 'Curation Sets',\n  30008: 'Profile Badges (NIP-58)',\n  30009: 'Badge Definition (NIP-58)',\n  30015: 'Interest Sets',\n  30030: 'Emoji Sets',\n\n  // Community &amp; Channels (NIP-28)\n  40: 'Channel Creation',\n  41: 'Channel Metadata',\n  42: 'Channel Message',\n  43: 'Channel Hide Message',\n  44: 'Channel Mute User',\n\n  // Authentication &amp; Security\n  22242: 'Client Authentication (NIP-42)',\n\n  // Status &amp; Presence\n  30315: 'User Status (NIP-38)',\n\n  // Marketplace (NIP-15)\n  30017: 'Create/Update Stall',\n  30018: 'Create/Update Product',\n\n  // Other\n  8: 'Badge Award (NIP-58)',\n  1111: 'Comments (NIP-22)',\n  1985: 'Label (NIP-32)'\n};\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#message-types-reference","title":"Message Types Reference","text":"<p>Client-to-Relay and Relay-to-Client messages:</p> <pre><code>// Client to Relay Messages\nconst CLIENT_MESSAGES = {\n  EVENT: ['EVENT', event],        // Publish an event\n  REQ: ['REQ', subId, ...filters], // Request events &amp; subscribe\n  CLOSE: ['CLOSE', subId],        // End subscription\n  AUTH: ['AUTH', event],          // Authentication (NIP-42)\n  COUNT: ['COUNT', subId, filter] // Request counts (NIP-45)\n};\n\n// Relay to Client Messages\nconst RELAY_MESSAGES = {\n  EVENT: ['EVENT', subId, event],     // Send requested event\n  OK: ['OK', eventId, accepted, msg], // Accept/reject EVENT\n  EOSE: ['EOSE', subId],             // End of stored events\n  CLOSED: ['CLOSED', subId, msg],     // Subscription ended\n  NOTICE: ['NOTICE', humanMsg],       // Human-readable message\n  AUTH: ['AUTH', challenge],          // Request auth (NIP-42)\n  COUNT: ['COUNT', subId, {count}]    // Send count (NIP-45)\n};\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#common-tags-reference","title":"Common Tags Reference","text":"<p>Standard tags used across event kinds:</p> Tag Description Values NIPs <code>e</code> Event reference <code>[eventId, relay, marker, pubkey]</code> 01, 10 <code>p</code> Pubkey reference <code>[pubkey, relay, petname]</code> 01, 02 <code>a</code> Parameterized event ref <code>[kind:pubkey:d-tag, relay]</code> 01 <code>d</code> Identifier/d-tag <code>[string]</code> 01 (addressable) <code>t</code> Hashtag <code>[topic]</code> 24 <code>r</code> URL reference <code>[url]</code> 24, 25 <code>q</code> Quote reference <code>[eventId, relay, pubkey]</code> 18 <code>amount</code> Millisats <code>[msats]</code> 57 (zaps) <code>bolt11</code> Lightning invoice <code>[invoice]</code> 57 <code>lnurl</code> LNURL <code>[lnurl]</code> 57 <code>relays</code> Relay list <code>[url1, url2, ...]</code> 57 <code>client</code> Client name <code>[name, url]</code> 89 <code>title</code> Title <code>[text]</code> 23 <code>image</code> Image URL <code>[url, dimensions]</code> 23, 52 <code>summary</code> Summary <code>[text]</code> 23 <code>published_at</code> Publish time <code>[timestamp]</code> 23 <code>subject</code> Subject line <code>[text]</code> 14, 17 <code>alt</code> Alt description <code>[text]</code> 31 <code>expiration</code> Expiration time <code>[timestamp]</code> 40 <code>content-warning</code> Warning <code>[reason]</code> 36 <code>delegation</code> Delegation token <code>[delegator, conditions, token]</code> 26 <code>proxy</code> External ID <code>[id, protocol]</code> 48 <code>i</code> External identity <code>[platform:identity, proof]</code> 39, 73 <code>k</code> Kind number <code>[number]</code> 18, 25 <code>l</code> Label <code>[label, namespace]</code> 32 <code>L</code> Label namespace <code>[namespace]</code> 32"},{"location":"modules/module-06-advanced-nips/#61-event-kind-categories","title":"6.1 Event Kind Categories","text":""},{"location":"modules/module-06-advanced-nips/#event-structure-nip-01","title":"Event Structure (NIP-01)","text":"<p>Every Nostr event follows a standard structure defined in NIP-01:</p> <pre><code>{\n  \"id\": \"&lt;32-bytes lowercase hex-encoded sha256 of serialized event&gt;\",\n  \"pubkey\": \"&lt;32-bytes lowercase hex-encoded public key&gt;\",\n  \"created_at\": \"&lt;unix timestamp in seconds&gt;\",\n  \"kind\": \"&lt;integer&gt;\",\n  \"tags\": [\n    [\"&lt;single-letter&gt;\", \"&lt;value&gt;\", \"&lt;optional-value&gt;\"],\n    // ... more tags\n  ],\n  \"content\": \"&lt;arbitrary string&gt;\",\n  \"sig\": \"&lt;64-bytes lowercase hex of signature of id&gt;\"\n}\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#event-id-calculation","title":"Event ID Calculation","text":"<p>The event ID is the SHA256 hash of the UTF-8 serialized event data:</p> <pre><code>import { sha256 } from '@noble/hashes/sha256';\nimport { bytesToHex } from '@noble/hashes/utils';\n\nfunction getEventHash(event) {\n  const serialized = JSON.stringify([\n    0, // reserved for future use\n    event.pubkey,\n    event.created_at,\n    event.kind,\n    event.tags,\n    event.content\n  ]);\n\n  const hash = sha256(new TextEncoder().encode(serialized));\n  return bytesToHex(hash);\n}\n\n// Example\nconst event = {\n  pubkey: \"abc123...\",\n  created_at: 1640000000,\n  kind: 1,\n  tags: [],\n  content: \"Hello Nostr!\"\n};\n\nevent.id = getEventHash(event);\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#event-signature-verification","title":"Event Signature Verification","text":"<pre><code>import { schnorr } from '@noble/curves/secp256k1';\nimport { hexToBytes } from '@noble/hashes/utils';\n\nfunction verifySignature(event) {\n  try {\n    return schnorr.verify(\n      event.sig,\n      event.id,\n      event.pubkey\n    );\n  } catch {\n    return false;\n  }\n}\n\n// Validate complete event\nfunction validateEvent(event) {\n  // Check required fields\n  if (!event.id || !event.pubkey || !event.sig) {\n    return { valid: false, reason: 'Missing required fields' };\n  }\n\n  // Verify ID matches content\n  const calculatedId = getEventHash(event);\n  if (calculatedId !== event.id) {\n    return { valid: false, reason: 'Invalid event ID' };\n  }\n\n  // Verify signature\n  if (!verifySignature(event)) {\n    return { valid: false, reason: 'Invalid signature' };\n  }\n\n  // Check timestamp reasonableness (not too far in future)\n  const now = Math.floor(Date.now() / 1000);\n  if (event.created_at &gt; now + 900) { // 15 minutes tolerance\n    return { valid: false, reason: 'Timestamp too far in future' };\n  }\n\n  return { valid: true };\n}\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#standard-event-kinds","title":"Standard Event Kinds","text":"<p>Nostr events are categorized by their <code>kind</code> number, which determines their behavior and purpose.</p> Range Category Behavior Examples 0-999 Regular Events Stored permanently Profiles, notes, reactions 1000-9999 Regular Events Stored permanently Long-form, lists 10000-19999 Replaceable Events Only latest kept Metadata, contact lists 20000-29999 Ephemeral Events Not stored Typing indicators, presence 30000-39999 Parameterized Replaceable Latest per param Articles, products"},{"location":"modules/module-06-advanced-nips/#common-event-kinds","title":"Common Event Kinds","text":"<pre><code>const EVENT_KINDS = {\n  // Regular Events\n  METADATA: 0,              // User profile\n  TEXT_NOTE: 1,             // Short text note\n  RECOMMEND_RELAY: 2,       // Relay recommendation\n  CONTACTS: 3,              // Contact list\n  ENCRYPTED_DM: 4,          // Encrypted direct message\n  EVENT_DELETION: 5,        // Delete request\n  REPOST: 6,                // Repost/boost\n  REACTION: 7,              // Like/emoji reaction\n  BADGE_AWARD: 8,           // Badge award\n\n  // Long-form Content\n  LONG_FORM: 30023,         // Articles, blog posts\n\n  // Replaceable Events\n  RELAY_LIST: 10002,        // User's relay list (NIP-65)\n\n  // Lists (NIP-51)\n  MUTE_LIST: 10000,\n  PIN_LIST: 10001,\n  BOOKMARK_LIST: 10003,\n\n  // Zaps\n  ZAP_REQUEST: 9734,\n  ZAP_RECEIPT: 9735,\n\n  // Ephemeral\n  AUTH: 22242,              // Client authentication\n\n  // Community\n  CHANNEL_CREATE: 40,\n  CHANNEL_METADATA: 41,\n  CHANNEL_MESSAGE: 42,\n  CHANNEL_HIDE_MESSAGE: 43,\n  CHANNEL_MUTE_USER: 44,\n};\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#62-replaceable-events","title":"6.2 Replaceable Events","text":""},{"location":"modules/module-06-advanced-nips/#understanding-replaceability","title":"Understanding Replaceability","text":"<p>Replaceable events are automatically replaced when a newer event of the same kind from the same author is received.</p> <pre><code>class ReplaceableEvent {\n  constructor(kind, content, tags = []) {\n    if (kind &lt; 10000 || kind &gt;= 20000) {\n      throw new Error('Not a replaceable event kind');\n    }\n\n    this.kind = kind;\n    this.content = content;\n    this.tags = tags;\n  }\n\n  async publish(pool, privateKey) {\n    const event = {\n      kind: this.kind,\n      created_at: Math.floor(Date.now() / 1000),\n      tags: this.tags,\n      content: this.content,\n    };\n\n    // Sign and publish\n    const signedEvent = await signEvent(event, privateKey);\n    await pool.publish(signedEvent);\n\n    // Relays will automatically replace any older event\n    // with the same kind from this pubkey\n    return signedEvent;\n  }\n}\n\n// Example: Update user metadata (kind 0)\nconst metadata = {\n  name: \"Alice\",\n  about: \"Nostr developer\",\n  picture: \"https://example.com/avatar.jpg\",\n  nip05: \"alice@example.com\"\n};\n\nconst metadataEvent = new ReplaceableEvent(\n  0,\n  JSON.stringify(metadata)\n);\n\nawait metadataEvent.publish(pool, privateKey);\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#nip-02-contact-lists-kind-3","title":"NIP-02: Contact Lists (Kind 3)","text":"<pre><code>class ContactList {\n  constructor() {\n    this.contacts = [];\n  }\n\n  addContact(pubkey, relay = '', petname = '') {\n    this.contacts.push({\n      pubkey,\n      relay,\n      petname\n    });\n  }\n\n  removeContact(pubkey) {\n    this.contacts = this.contacts.filter(c =&gt; c.pubkey !== pubkey);\n  }\n\n  toEvent() {\n    return {\n      kind: 3,\n      content: '',\n      tags: this.contacts.map(c =&gt; [\n        'p',\n        c.pubkey,\n        c.relay,\n        c.petname\n      ]),\n      created_at: Math.floor(Date.now() / 1000)\n    };\n  }\n\n  static fromEvent(event) {\n    const list = new ContactList();\n\n    event.tags\n      .filter(tag =&gt; tag[0] === 'p')\n      .forEach(tag =&gt; {\n        list.contacts.push({\n          pubkey: tag[1],\n          relay: tag[2] || '',\n          petname: tag[3] || ''\n        });\n      });\n\n    return list;\n  }\n}\n\n// Usage\nconst contacts = new ContactList();\ncontacts.addContact(\n  'pubkey123',\n  'wss://relay.damus.io',\n  'Alice'\n);\ncontacts.addContact(\n  'pubkey456',\n  'wss://nos.lol',\n  'Bob'\n);\n\nconst event = contacts.toEvent();\n// Sign and publish\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#63-parameterized-replaceable-events","title":"6.3 Parameterized Replaceable Events","text":""},{"location":"modules/module-06-advanced-nips/#nip-33-parameterized-replaceable-events","title":"NIP-33: Parameterized Replaceable Events","text":"<p>These events use a <code>d</code> tag to create multiple replaceable events of the same kind.</p> <pre><code>class ParameterizedReplaceableEvent {\n  constructor(kind, identifier, content, tags = []) {\n    if (kind &lt; 30000 || kind &gt;= 40000) {\n      throw new Error('Not a parameterized replaceable event kind');\n    }\n\n    this.kind = kind;\n    this.identifier = identifier;\n    this.content = content;\n    this.tags = [['d', identifier], ...tags];\n  }\n\n  toEvent() {\n    return {\n      kind: this.kind,\n      content: this.content,\n      tags: this.tags,\n      created_at: Math.floor(Date.now() / 1000)\n    };\n  }\n}\n\n// Example: Create a product listing\nconst product = new ParameterizedReplaceableEvent(\n  30018, // Product listing kind\n  'vintage-keyboard-001', // Unique identifier\n  JSON.stringify({\n    title: 'Vintage Mechanical Keyboard',\n    description: 'IBM Model M from 1987',\n    price: '150 USD',\n    images: ['https://...']\n  }),\n  [\n    ['t', 'keyboards'],\n    ['t', 'vintage'],\n    ['price', '150', 'USD']\n  ]\n);\n\n// Later, update the same product\nconst updatedProduct = new ParameterizedReplaceableEvent(\n  30018,\n  'vintage-keyboard-001', // Same identifier\n  JSON.stringify({\n    title: 'Vintage Mechanical Keyboard',\n    description: 'IBM Model M from 1987',\n    price: '120 USD', // Price updated\n    images: ['https://...']\n  }),\n  [\n    ['t', 'keyboards'],\n    ['t', 'vintage'],\n    ['price', '120', 'USD']\n  ]\n);\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#64-long-form-content-nip-23","title":"6.4 Long-form Content (NIP-23)","text":""},{"location":"modules/module-06-advanced-nips/#creating-articles","title":"Creating Articles","text":"<pre><code>class Article {\n  constructor(title, summary, content, image = '') {\n    this.title = title;\n    this.summary = summary;\n    this.content = content;\n    this.image = image;\n    this.tags = [];\n    this.publishedAt = null;\n  }\n\n  setPublishedAt(timestamp) {\n    this.publishedAt = timestamp;\n    return this;\n  }\n\n  addTag(tag) {\n    this.tags.push(tag);\n    return this;\n  }\n\n  addHashtag(hashtag) {\n    this.tags.push(['t', hashtag]);\n    return this;\n  }\n\n  setIdentifier(identifier) {\n    this.identifier = identifier;\n    return this;\n  }\n\n  toEvent() {\n    const tags = [\n      ['d', this.identifier || this.generateSlug()],\n      ['title', this.title],\n      ['summary', this.summary],\n      ...this.tags\n    ];\n\n    if (this.image) {\n      tags.push(['image', this.image]);\n    }\n\n    if (this.publishedAt) {\n      tags.push(['published_at', this.publishedAt.toString()]);\n    }\n\n    return {\n      kind: 30023,\n      content: this.content,\n      tags: tags,\n      created_at: Math.floor(Date.now() / 1000)\n    };\n  }\n\n  generateSlug() {\n    return this.title\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/(^-|-$)/g, '');\n  }\n\n  static fromEvent(event) {\n    const getTag = (name) =&gt; {\n      const tag = event.tags.find(t =&gt; t[0] === name);\n      return tag ? tag[1] : '';\n    };\n\n    const article = new Article(\n      getTag('title'),\n      getTag('summary'),\n      event.content,\n      getTag('image')\n    );\n\n    article.identifier = getTag('d');\n\n    const publishedAt = getTag('published_at');\n    if (publishedAt) {\n      article.publishedAt = parseInt(publishedAt);\n    }\n\n    article.tags = event.tags.filter(t =&gt; t[0] === 't');\n\n    return article;\n  }\n}\n\n// Create and publish an article\nconst article = new Article(\n  'Understanding Nostr Relays',\n  'A deep dive into relay architecture and best practices',\n  `# Understanding Nostr Relays\n\nNostr relays are the backbone of the protocol...\n\n## Architecture\n\nRelays use WebSocket connections...\n\n## Best Practices\n\nWhen running a relay...`\n)\n  .setIdentifier('understanding-nostr-relays')\n  .addHashtag('nostr')\n  .addHashtag('relays')\n  .addHashtag('tutorial')\n  .setPublishedAt(Math.floor(Date.now() / 1000));\n\nconst event = article.toEvent();\n// Sign and publish\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#querying-articles","title":"Querying Articles","text":"<pre><code>async function getArticlesByAuthor(pool, authorPubkey) {\n  return await pool.query({\n    kinds: [30023],\n    authors: [authorPubkey]\n  });\n}\n\nasync function getArticlesByTag(pool, tag) {\n  return await pool.query({\n    kinds: [30023],\n    '#t': [tag]\n  });\n}\n\nasync function getArticle(pool, authorPubkey, identifier) {\n  const results = await pool.query({\n    kinds: [30023],\n    authors: [authorPubkey],\n    '#d': [identifier]\n  });\n\n  return results[0] ? Article.fromEvent(results[0]) : null;\n}\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#65-reactions-engagement-nip-25","title":"6.5 Reactions &amp; Engagement (NIP-25)","text":""},{"location":"modules/module-06-advanced-nips/#implementing-reactions","title":"Implementing Reactions","text":"<p>Reactions in Nostr use kind 7 events with the <code>content</code> field containing the reaction. While the standard like is <code>+</code>, clients can use emojis or any text to create expressive reactions.</p> <pre><code>class Reaction {\n  static LIKE = '+';\n  static DISLIKE = '-';\n\n  static create(targetEvent, content = '+') {\n    return {\n      kind: 7,\n      content: content,  // Can be '+', emoji, or any text\n      tags: [\n        ['e', targetEvent.id],\n        ['p', targetEvent.pubkey]\n      ],\n      created_at: Math.floor(Date.now() / 1000)\n    };\n  }\n\n  static createCustom(targetEvent, content) {\n    return this.create(targetEvent, content);\n  }\n\n  static async getReactions(pool, eventId) {\n    const reactions = await pool.query({\n      kinds: [7],\n      '#e': [eventId]\n    });\n\n    // Group by reaction type\n    const grouped = {};\n    reactions.forEach(r =&gt; {\n      const content = r.content || '+';\n      if (!grouped[content]) {\n        grouped[content] = [];\n      }\n      grouped[content].push(r);\n    });\n\n    return grouped;\n  }\n\n  static async getReactionCount(pool, eventId) {\n    const reactions = await this.getReactions(pool, eventId);\n    const counts = {};\n\n    Object.keys(reactions).forEach(emoji =&gt; {\n      counts[emoji] = reactions[emoji].length;\n    });\n\n    return counts;\n  }\n}\n\n// Usage Examples - Reactions in Practice\n\n// Standard like (universally supported)\nconst likeEvent = Reaction.create(someEvent, '+');\n\n// Emoji reactions (popular in modern clients)\nconst heartEvent = Reaction.create(someEvent, '\u2764\ufe0f');\nconst fireEvent = Reaction.create(someEvent, '\ud83d\udd25');\nconst laughEvent = Reaction.create(someEvent, '\ud83d\ude02');\n\n// Text-based reactions (also valid)\nconst customReaction = Reaction.create(someEvent, 'awesome');\n\n// The content field accepts any string - clients determine how to display it\n\n// Get reaction counts grouped by type\nconst counts = await Reaction.getReactionCount(pool, eventId);\n// Example result: { '+': 42, '\u2764\ufe0f': 15, '\ud83d\udd25': 8, '\ud83d\ude02': 3 }\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#reposts-nip-18","title":"Reposts (NIP-18)","text":"<pre><code>class Repost {\n  static create(originalEvent) {\n    return {\n      kind: 6,\n      content: JSON.stringify(originalEvent),\n      tags: [\n        ['e', originalEvent.id],\n        ['p', originalEvent.pubkey]\n      ],\n      created_at: Math.floor(Date.now() / 1000)\n    };\n  }\n\n  static createQuote(originalEvent, comment) {\n    return {\n      kind: 1, // Regular note\n      content: comment,\n      tags: [\n        ['e', originalEvent.id, '', 'mention'],\n        ['p', originalEvent.pubkey]\n      ],\n      created_at: Math.floor(Date.now() / 1000)\n    };\n  }\n}\n\n// Simple repost\nconst repost = Repost.create(originalEvent);\n\n// Quote repost (with comment)\nconst quote = Repost.createQuote(\n  originalEvent,\n  'This is insightful! Everyone should read this.'\n);\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#66-lists-and-sets-nip-51","title":"6.6 Lists and Sets (NIP-51)","text":""},{"location":"modules/module-06-advanced-nips/#user-lists","title":"User Lists","text":"<pre><code>class UserList {\n  constructor(kind, title = '') {\n    this.kind = kind;\n    this.title = title;\n    this.items = [];\n  }\n\n  addPubkey(pubkey, relay = '', petname = '') {\n    this.items.push({\n      type: 'p',\n      value: pubkey,\n      relay,\n      petname\n    });\n  }\n\n  addEvent(eventId, relay = '', reason = '') {\n    this.items.push({\n      type: 'e',\n      value: eventId,\n      relay,\n      reason\n    });\n  }\n\n  addHashtag(hashtag) {\n    this.items.push({\n      type: 't',\n      value: hashtag\n    });\n  }\n\n  toEvent() {\n    return {\n      kind: this.kind,\n      content: '',\n      tags: this.items.map(item =&gt; {\n        if (item.type === 'p') {\n          return ['p', item.value, item.relay || '', item.petname || ''];\n        } else if (item.type === 'e') {\n          return ['e', item.value, item.relay || ''];\n        } else if (item.type === 't') {\n          return ['t', item.value];\n        }\n      }),\n      created_at: Math.floor(Date.now() / 1000)\n    };\n  }\n}\n\n// Mute List (kind 10000)\nconst muteList = new UserList(10000, 'Muted Users');\nmuteList.addPubkey('spammer123');\nmuteList.addPubkey('troll456');\nmuteList.addHashtag('spam');\n\n// Pin List (kind 10001)\nconst pinList = new UserList(10001, 'Pinned Notes');\npinList.addEvent('note1abc', '', 'Important announcement');\npinList.addEvent('note2def', '', 'Tutorial');\n\n// Bookmark List (kind 10003)\nconst bookmarks = new UserList(10003, 'Reading List');\nbookmarks.addEvent('article1');\nbookmarks.addEvent('article2');\n\n// Categorized Lists (kind 30000-30001)\nclass CategorizedList extends UserList {\n  constructor(identifier, title) {\n    super(30001, title);\n    this.identifier = identifier;\n  }\n\n  toEvent() {\n    const event = super.toEvent();\n    event.tags.unshift(['d', this.identifier]);\n    event.tags.push(['title', this.title]);\n    return event;\n  }\n}\n\nconst favoriteDevs = new CategorizedList('favorite-devs', 'Favorite Developers');\nfavoriteDevs.addPubkey('dev1');\nfavoriteDevs.addPubkey('dev2');\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#67-encrypted-direct-messages","title":"6.7 Encrypted Direct Messages","text":""},{"location":"modules/module-06-advanced-nips/#nip-04-basic-encryption-deprecated","title":"NIP-04: Basic Encryption (Deprecated)","text":"<pre><code>import { nip04 } from 'nostr-tools';\n\nclass EncryptedDM {\n  static async send(pool, senderPrivkey, recipientPubkey, message) {\n    const encrypted = await nip04.encrypt(\n      senderPrivkey,\n      recipientPubkey,\n      message\n    );\n\n    const event = {\n      kind: 4,\n      content: encrypted,\n      tags: [['p', recipientPubkey]],\n      created_at: Math.floor(Date.now() / 1000)\n    };\n\n    const signed = await signEvent(event, senderPrivkey);\n    await pool.publish(signed);\n\n    return signed;\n  }\n\n  static async decrypt(privkey, senderPubkey, encryptedContent) {\n    return await nip04.decrypt(\n      privkey,\n      senderPubkey,\n      encryptedContent\n    );\n  }\n\n  static async getConversation(pool, userPubkey, otherPubkey) {\n    const sent = await pool.query({\n      kinds: [4],\n      authors: [userPubkey],\n      '#p': [otherPubkey]\n    });\n\n    const received = await pool.query({\n      kinds: [4],\n      authors: [otherPubkey],\n      '#p': [userPubkey]\n    });\n\n    return [...sent, ...received].sort(\n      (a, b) =&gt; a.created_at - b.created_at\n    );\n  }\n}\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#nip-44-improved-encryption-recommended","title":"NIP-44: Improved Encryption (Recommended)","text":"<pre><code>import { nip44 } from 'nostr-tools';\n\nclass SecureEncryptedDM {\n  static async send(pool, senderPrivkey, recipientPubkey, message) {\n    const encrypted = nip44.encrypt(\n      senderPrivkey,\n      recipientPubkey,\n      message\n    );\n\n    const event = {\n      kind: 4,\n      content: encrypted,\n      tags: [['p', recipientPubkey]],\n      created_at: Math.floor(Date.now() / 1000)\n    };\n\n    const signed = await signEvent(event, senderPrivkey);\n    await pool.publish(signed);\n\n    return signed;\n  }\n\n  static decrypt(privkey, senderPubkey, encryptedContent) {\n    return nip44.decrypt(\n      privkey,\n      senderPubkey,\n      encryptedContent\n    );\n  }\n}\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#68-zaps-lightning-integration-nip-57","title":"6.8 Zaps &amp; Lightning Integration (NIP-57)","text":""},{"location":"modules/module-06-advanced-nips/#understanding-zaps","title":"Understanding Zaps","text":"<p>Zaps are Lightning Network payments associated with Nostr events.</p> <pre><code>class ZapService {\n  constructor(lnurlEndpoint) {\n    this.lnurlEndpoint = lnurlEndpoint;\n  }\n\n  async createZapRequest(recipientPubkey, amount, comment = '', eventToZap = null) {\n    const zapRequest = {\n      kind: 9734,\n      content: comment,\n      tags: [\n        ['p', recipientPubkey],\n        ['amount', amount.toString()],\n        ['relays', 'wss://relay.damus.io', 'wss://nos.lol']\n      ],\n      created_at: Math.floor(Date.now() / 1000)\n    };\n\n    if (eventToZap) {\n      zapRequest.tags.push(['e', eventToZap.id]);\n    }\n\n    return zapRequest;\n  }\n\n  async requestInvoice(zapRequest, amount) {\n    const params = new URLSearchParams({\n      amount: amount.toString(),\n      nostr: JSON.stringify(zapRequest)\n    });\n\n    const response = await fetch(\n      `${this.lnurlEndpoint}?${params}`\n    );\n\n    const data = await response.json();\n    return data.pr; // Payment request (invoice)\n  }\n\n  static async getZapsForEvent(pool, eventId) {\n    return await pool.query({\n      kinds: [9735], // Zap receipts\n      '#e': [eventId]\n    });\n  }\n\n  static async getZapsForPubkey(pool, pubkey) {\n    return await pool.query({\n      kinds: [9735],\n      '#p': [pubkey]\n    });\n  }\n\n  static calculateTotalSats(zapReceipts) {\n    return zapReceipts.reduce((total, zap) =&gt; {\n      const boltTag = zap.tags.find(t =&gt; t[0] === 'bolt11');\n      if (boltTag) {\n        const invoice = boltTag[1];\n        const amount = this.parseInvoiceAmount(invoice);\n        return total + amount;\n      }\n      return total;\n    }, 0);\n  }\n\n  static parseInvoiceAmount(invoice) {\n    // Parse Lightning invoice to extract amount\n    // This is simplified - use a proper library\n    const match = invoice.match(/lnbc(\\d+)([munp]?)/);\n    if (match) {\n      const amount = parseInt(match[1]);\n      const unit = match[2];\n\n      const multipliers = {\n        'm': 100000,      // milli-satoshi\n        'u': 100,         // micro-satoshi\n        'n': 0.1,         // nano-satoshi\n        'p': 0.0001,      // pico-satoshi\n        '': 100000000     // bitcoin\n      };\n\n      return amount * (multipliers[unit] || 1);\n    }\n    return 0;\n  }\n}\n\n// Usage\nconst zapService = new ZapService('https://lnurl.example.com');\n\n// Create zap request\nconst zapRequest = await zapService.createZapRequest(\n  recipientPubkey,\n  1000, // sats\n  'Great post!',\n  eventToZap\n);\n\n// Get invoice\nconst invoice = await zapService.requestInvoice(zapRequest, 1000);\n\n// Pay invoice with Lightning wallet\n// ...\n\n// Query zaps for an event\nconst zaps = await ZapService.getZapsForEvent(pool, eventId);\nconst totalSats = ZapService.calculateTotalSats(zaps);\nconsole.log(`Total zapped: ${totalSats} sats`);\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#69-badges-achievements-nip-58","title":"6.9 Badges &amp; Achievements (NIP-58)","text":""},{"location":"modules/module-06-advanced-nips/#creating-badge-definitions","title":"Creating Badge Definitions","text":"<pre><code>class Badge {\n  constructor(identifier, name, description, image) {\n    this.identifier = identifier;\n    this.name = name;\n    this.description = description;\n    this.image = image;\n  }\n\n  toDefinitionEvent() {\n    return {\n      kind: 30009,\n      content: '',\n      tags: [\n        ['d', this.identifier],\n        ['name', this.name],\n        ['description', this.description],\n        ['image', this.image]\n      ],\n      created_at: Math.floor(Date.now() / 1000)\n    };\n  }\n\n  createAward(recipientPubkey) {\n    return {\n      kind: 8,\n      content: '',\n      tags: [\n        ['a', `30009:${this.creatorPubkey}:${this.identifier}`],\n        ['p', recipientPubkey]\n      ],\n      created_at: Math.floor(Date.now() / 1000)\n    };\n  }\n}\n\n// Create badge definition\nconst contributorBadge = new Badge(\n  'nostr-contributor-2024',\n  'Nostr Contributor 2024',\n  'Awarded to significant Nostr protocol contributors',\n  'https://example.com/badges/contributor.png'\n);\n\nconst badgeDefEvent = contributorBadge.toDefinitionEvent();\n// Sign and publish\n\n// Award badge to someone\nconst awardEvent = contributorBadge.createAward(developerPubkey);\n// Sign and publish\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#610-bech32-encoded-identifiers-nip-19","title":"6.10 Bech32-Encoded Identifiers (NIP-19)","text":"<p>NIP-19 defines special bech32-encoded identifiers for user-friendly representation of keys and events.</p>"},{"location":"modules/module-06-advanced-nips/#entity-types","title":"Entity Types","text":"Prefix Entity Use Case <code>npub</code> Public key User profiles, mentions <code>nsec</code> Private key Backup/import (handle securely!) <code>note</code> Event ID Share individual notes <code>nprofile</code> Profile with relays Share profile with relay hints <code>nevent</code> Event with relays Share event with relay hints <code>naddr</code> Replaceable event address Reference articles, products"},{"location":"modules/module-06-advanced-nips/#encoding-and-decoding","title":"Encoding and Decoding","text":"<pre><code>import { nip19 } from 'nostr-tools';\n\n// Encode public key\nconst hexPubkey = \"3bf0c63fcb93463407af97a5e5ee64fa883d107ef9e558472c4eb9aaaefa459d\";\nconst npub = nip19.npubEncode(hexPubkey);\n// \"npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6\"\n\n// Decode npub\nconst decoded = nip19.decode(npub);\nconsole.log(decoded);\n// { type: 'npub', data: '3bf0c63fcb...' }\n\n// Encode private key (WARNING: Handle with extreme care!)\nconst hexPrivkey = \"...\";\nconst nsec = nip19.nsecEncode(hexPrivkey);\n// \"nsec1...\"\n\n// Encode note ID\nconst noteId = \"note1abc...\";\nconst note1 = nip19.noteEncode(noteId);\n\n// Encode profile with relay hints\nconst profilePointer = nip19.nprofileEncode({\n  pubkey: hexPubkey,\n  relays: ['wss://relay.damus.io', 'wss://nos.lol']\n});\n\n// Encode event with context\nconst eventPointer = nip19.neventEncode({\n  id: eventId,\n  relays: ['wss://relay.damus.io'],\n  author: authorPubkey,\n  kind: 1\n});\n\n// Encode parameterized replaceable event address\nconst addressPointer = nip19.naddrEncode({\n  identifier: 'my-article',\n  pubkey: authorPubkey,\n  kind: 30023,\n  relays: ['wss://relay.damus.io']\n});\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#practical-uses","title":"Practical Uses","text":"<pre><code>class Nip19Helper {\n  // Display-friendly public key\n  static displayPubkey(hexPubkey) {\n    const npub = nip19.npubEncode(hexPubkey);\n    return npub.substring(0, 12) + '...' + npub.substring(npub.length - 6);\n    // \"npub180cvv07...jh6w6\"\n  }\n\n  // Create shareable note link\n  static createNoteLink(eventId, relays = []) {\n    if (relays.length &gt; 0) {\n      return nip19.neventEncode({ id: eventId, relays });\n    }\n    return nip19.noteEncode(eventId);\n  }\n\n  // Parse user input (could be hex or bech32)\n  static parseUserInput(input) {\n    try {\n      // Try bech32 decode\n      const decoded = nip19.decode(input);\n      return {\n        type: decoded.type,\n        data: decoded.data\n      };\n    } catch {\n      // Assume hex if decode fails\n      if (/^[0-9a-f]{64}$/i.test(input)) {\n        return {\n          type: 'hex',\n          data: input.toLowerCase()\n        };\n      }\n      throw new Error('Invalid input format');\n    }\n  }\n\n  // Extract mentions from text\n  static extractMentions(text) {\n    const mentionRegex = /(npub1[a-z0-9]{58}|nprofile1[a-z0-9]+)/g;\n    const matches = text.match(mentionRegex) || [];\n\n    return matches.map(mention =&gt; {\n      const decoded = nip19.decode(mention);\n      return {\n        mention,\n        pubkey: decoded.type === 'npub' ? decoded.data : decoded.data.pubkey\n      };\n    });\n  }\n\n  // Replace mentions with user-friendly names\n  static async formatMentions(text, pool) {\n    const mentions = this.extractMentions(text);\n    let formatted = text;\n\n    for (const { mention, pubkey } of mentions) {\n      // Fetch user profile\n      const profile = await pool.queryOne({\n        kinds: [0],\n        authors: [pubkey]\n      });\n\n      const name = profile \n        ? JSON.parse(profile.content).name \n        : this.displayPubkey(pubkey);\n\n      formatted = formatted.replace(mention, `@${name}`);\n    }\n\n    return formatted;\n  }\n}\n\n// Usage examples\nconst shareableNote = Nip19Helper.createNoteLink(\n  eventId, \n  ['wss://relay.damus.io']\n);\nconsole.log(`Share this: nostr:${shareableNote}`);\n\nconst parsed = Nip19Helper.parseUserInput('npub180cvv07...');\nconsole.log(parsed); // { type: 'npub', data: '3bf0c63...' }\n\nconst mentions = Nip19Helper.extractMentions(\n  'Hey npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6 check this out!'\n);\nconsole.log(mentions); // [{ mention: 'npub1...', pubkey: '3bf0c...' }]\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#security-considerations","title":"Security Considerations","text":"<pre><code>class SecureNip19Handler {\n  // NEVER expose nsec in UI or logs\n  static handleNsec(nsec) {\n    try {\n      const { data: privateKey } = nip19.decode(nsec);\n\n      // Immediately encrypt or store securely\n      this.secureStore(privateKey);\n\n      // Clear from memory\n      nsec = null;\n\n      return { success: true };\n    } catch (error) {\n      return { success: false, error: error.message };\n    }\n  }\n\n  // Validate before decoding\n  static validateNip19(input) {\n    const validPrefixes = ['npub', 'nsec', 'note', 'nprofile', 'nevent', 'naddr'];\n    const prefix = input.substring(0, input.indexOf('1'));\n\n    if (!validPrefixes.includes(prefix)) {\n      throw new Error(`Invalid NIP-19 prefix: ${prefix}`);\n    }\n\n    try {\n      nip19.decode(input);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n}\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#611-practical-exercises","title":"6.11 Practical Exercises","text":""},{"location":"modules/module-06-advanced-nips/#exercise-1-article-platform","title":"Exercise 1: Article Platform","text":"<p>Build a long-form content platform: 1. Create article publishing interface 2. Implement article editing (update existing) 3. Add hashtag filtering 4. Build article feed with pagination</p>"},{"location":"modules/module-06-advanced-nips/#exercise-2-social-interactions","title":"Exercise 2: Social Interactions","text":"<p>Implement engagement features: 1. Like/reaction system with custom emojis 2. Repost functionality 3. Quote reposts with comments 4. Reaction statistics dashboard</p>"},{"location":"modules/module-06-advanced-nips/#exercise-3-list-management","title":"Exercise 3: List Management","text":"<p>Create a bookmark manager: 1. Multiple categorized lists 2. Add/remove items 3. Share lists publicly 4. Import/export lists</p>"},{"location":"modules/module-06-advanced-nips/#exercise-4-encrypted-chat","title":"Exercise 4: Encrypted Chat","text":"<p>Build a DM application: 1. Implement NIP-44 encryption 2. Real-time message updates 3. Conversation threading 4. Read receipts</p>"},{"location":"modules/module-06-advanced-nips/#exercise-5-zap-integration","title":"Exercise 5: Zap Integration","text":"<p>Add zapping to your client: 1. Display zap button on events 2. Show total zaps received 3. List top zappers 4. Create zap leaderboard</p>"},{"location":"modules/module-06-advanced-nips/#612-event-delegation-nip-26","title":"6.12 Event Delegation (NIP-26)","text":"<p>Event delegation allows one user to authorize another to publish events on their behalf. This is useful for: - Social media managers posting for brands - Bot accounts publishing automated content - Multi-device key management - Service integrations</p>"},{"location":"modules/module-06-advanced-nips/#creating-a-delegation-token","title":"Creating a Delegation Token","text":"<pre><code>import { getSignature, getEventHash } from 'nostr-tools';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { bytesToHex } from '@noble/hashes/utils';\n\nclass EventDelegation {\n  static createDelegation(delegatorPrivateKey, delegatePubkey, conditions = {}) {\n    const {\n      kinds = [],        // Allowed event kinds\n      since = 0,         // Unix timestamp - valid from\n      until = null,      // Unix timestamp - valid until\n    } = conditions;\n\n    // Build conditions string\n    const conditionStrings = [];\n\n    if (kinds.length &gt; 0) {\n      conditionStrings.push(`kind=${kinds.join(',')}`);\n    }\n    if (since &gt; 0) {\n      conditionStrings.push(`created_at&gt;${since}`);\n    }\n    if (until) {\n      conditionStrings.push(`created_at&lt;${until}`);\n    }\n\n    const conditionsStr = conditionStrings.join('&amp;');\n\n    // Create delegation token\n    const token = `nostr:delegation:${delegatePubkey}:${conditionsStr}`;\n    const hash = sha256(new TextEncoder().encode(token));\n    const sig = getSignature(hash, delegatorPrivateKey);\n\n    return {\n      delegatePubkey,\n      conditions: conditionsStr,\n      token: bytesToHex(sig)\n    };\n  }\n\n  static applyDelegationToEvent(event, delegatorPubkey, delegationToken) {\n    // Add delegation tag\n    event.tags.push([\n      'delegation',\n      delegatorPubkey,\n      delegationToken.conditions,\n      delegationToken.token\n    ]);\n\n    return event;\n  }\n\n  static verifyDelegation(event) {\n    const delegationTag = event.tags.find(t =&gt; t[0] === 'delegation');\n\n    if (!delegationTag) {\n      return { valid: false, reason: 'No delegation tag' };\n    }\n\n    const [_, delegatorPubkey, conditions, token] = delegationTag;\n\n    // Verify conditions match event\n    const conditionChecks = conditions.split('&amp;');\n\n    for (const condition of conditionChecks) {\n      if (condition.startsWith('kind=')) {\n        const allowedKinds = condition.substring(5).split(',').map(Number);\n        if (!allowedKinds.includes(event.kind)) {\n          return { valid: false, reason: 'Kind not allowed by delegation' };\n        }\n      }\n\n      if (condition.startsWith('created_at&gt;')) {\n        const since = parseInt(condition.substring(11));\n        if (event.created_at &lt;= since) {\n          return { valid: false, reason: 'Event too old for delegation' };\n        }\n      }\n\n      if (condition.startsWith('created_at&lt;')) {\n        const until = parseInt(condition.substring(11));\n        if (event.created_at &gt;= until) {\n          return { valid: false, reason: 'Event too new for delegation' };\n        }\n      }\n    }\n\n    // Verify delegation signature\n    const delegationString = `nostr:delegation:${event.pubkey}:${conditions}`;\n    const hash = sha256(new TextEncoder().encode(delegationString));\n\n    // In practice, use schnorr.verify here\n    // For now, assume token is valid if format is correct\n\n    return { valid: true, delegator: delegatorPubkey };\n  }\n}\n\n// Usage Example\nconst delegatorPrivateKey = \"...\"; // Brand's key\nconst delegatePubkey = \"...\";      // Social media manager's public key\n\n// Create delegation for kind 1 notes, valid for 30 days\nconst delegation = EventDelegation.createDelegation(\n  delegatorPrivateKey,\n  delegatePubkey,\n  {\n    kinds: [1],\n    since: Math.floor(Date.now() / 1000),\n    until: Math.floor(Date.now() / 1000) + (30 * 86400)\n  }\n);\n\n// Social media manager creates an event\nconst event = {\n  kind: 1,\n  pubkey: delegatePubkey,\n  created_at: Math.floor(Date.now() / 1000),\n  tags: [],\n  content: \"Posted on behalf of the brand\"\n};\n\n// Apply delegation\nEventDelegation.applyDelegationToEvent(\n  event,\n  getDelegatorPubkey(delegatorPrivateKey), // Derive from private key\n  delegation\n);\n\n// Sign with delegate's key and publish\n// Relays will show this as from the delegator\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#practical-delegation-use-cases","title":"Practical Delegation Use Cases","text":"<pre><code>// 1. Bot Account Delegation\nclass BotDelegation {\n  constructor(ownerPrivateKey, botPubkey) {\n    this.delegation = EventDelegation.createDelegation(\n      ownerPrivateKey,\n      botPubkey,\n      {\n        kinds: [1], // Only allow text notes\n        since: Math.floor(Date.now() / 1000),\n        until: Math.floor(Date.now() / 1000) + (365 * 86400) // 1 year\n      }\n    );\n  }\n\n  createBotPost(content, botPrivateKey) {\n    const event = {\n      kind: 1,\n      pubkey: getPublicKey(botPrivateKey),\n      created_at: Math.floor(Date.now() / 1000),\n      tags: [],\n      content\n    };\n\n    EventDelegation.applyDelegationToEvent(event, this.ownerPubkey, this.delegation);\n    return finishEvent(event, botPrivateKey);\n  }\n}\n\n// 2. Temporary Access Delegation\nclass TemporaryDelegation {\n  static createHourlyAccess(ownerKey, tempPubkey) {\n    const now = Math.floor(Date.now() / 1000);\n\n    return EventDelegation.createDelegation(\n      ownerKey,\n      tempPubkey,\n      {\n        since: now,\n        until: now + 3600 // 1 hour\n      }\n    );\n  }\n}\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#613-advanced-patterns","title":"6.13 Advanced Patterns","text":""},{"location":"modules/module-06-advanced-nips/#event-threading","title":"Event Threading","text":"<pre><code>class Thread {\n  static createReply(parentEvent, content, mentions = []) {\n    const tags = [\n      ['e', parentEvent.id, '', 'reply']\n    ];\n\n    // Add root event if this is a nested reply\n    const rootTag = parentEvent.tags.find(t =&gt; t[0] === 'e' &amp;&amp; t[3] === 'root');\n    if (rootTag) {\n      tags.unshift(['e', rootTag[1], '', 'root']);\n    } else {\n      tags.unshift(['e', parentEvent.id, '', 'root']);\n    }\n\n    // Add author of parent\n    tags.push(['p', parentEvent.pubkey]);\n\n    // Add mentioned users\n    mentions.forEach(pubkey =&gt; {\n      tags.push(['p', pubkey]);\n    });\n\n    return {\n      kind: 1,\n      content,\n      tags,\n      created_at: Math.floor(Date.now() / 1000)\n    };\n  }\n\n  static async getThread(pool, rootEventId) {\n    const replies = await pool.query({\n      kinds: [1],\n      '#e': [rootEventId]\n    });\n\n    // Build tree structure\n    const threadMap = new Map();\n    threadMap.set(rootEventId, { replies: [] });\n\n    replies.forEach(reply =&gt; {\n      const replyTag = reply.tags.find(t =&gt; t[0] === 'e' &amp;&amp; t[3] === 'reply');\n      const parentId = replyTag ? replyTag[1] : rootEventId;\n\n      if (!threadMap.has(reply.id)) {\n        threadMap.set(reply.id, { event: reply, replies: [] });\n      } else {\n        threadMap.get(reply.id).event = reply;\n      }\n\n      if (!threadMap.has(parentId)) {\n        threadMap.set(parentId, { replies: [] });\n      }\n\n      threadMap.get(parentId).replies.push(reply.id);\n    });\n\n    return threadMap;\n  }\n}\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#content-discovery","title":"Content Discovery","text":"<pre><code>class ContentDiscovery {\n  static async getTrending(pool, timeWindow = 86400) {\n    const since = Math.floor(Date.now() / 1000) - timeWindow;\n\n    // Get recent notes\n    const notes = await pool.query({\n      kinds: [1],\n      since,\n      limit: 1000\n    });\n\n    // Get reactions for these notes\n    const noteIds = notes.map(n =&gt; n.id);\n    const reactions = await pool.query({\n      kinds: [7],\n      '#e': noteIds,\n      since\n    });\n\n    // Count reactions per note\n    const reactionCounts = {};\n    reactions.forEach(r =&gt; {\n      const noteId = r.tags.find(t =&gt; t[0] === 'e')[1];\n      reactionCounts[noteId] = (reactionCounts[noteId] || 0) + 1;\n    });\n\n    // Sort by reaction count\n    return notes\n      .map(note =&gt; ({\n        ...note,\n        reactions: reactionCounts[note.id] || 0\n      }))\n      .sort((a, b) =&gt; b.reactions - a.reactions);\n  }\n\n  static async getRecommended(pool, userPubkey) {\n    // Get user's contacts\n    const contacts = await pool.queryOne({\n      kinds: [3],\n      authors: [userPubkey]\n    });\n\n    if (!contacts) return [];\n\n    const following = contacts.tags\n      .filter(t =&gt; t[0] === 'p')\n      .map(t =&gt; t[1]);\n\n    // Get recent notes from contacts\n    return await pool.query({\n      kinds: [1],\n      authors: following,\n      limit: 100\n    });\n  }\n}\n</code></pre>"},{"location":"modules/module-06-advanced-nips/#module-6-quiz","title":"\ud83d\udcdd Module 6 Quiz","text":"<ol> <li> <p>What's the difference between replaceable and parameterized replaceable events? Answer    Replaceable events (10000-19999) keep only the latest event of that kind per pubkey. Parameterized replaceable events (30000-39999) use a 'd' tag to allow multiple instances, keeping the latest per pubkey+identifier combination.     </p> </li> <li> <p>Why is NIP-44 preferred over NIP-04 for encrypted messages? Answer    NIP-44 provides better security with improved encryption, padding to prevent message length analysis, and protection against various cryptographic attacks that NIP-04 is vulnerable to.     </p> </li> <li> <p>What are the three main components of a Zap? Answer    1) Zap request (kind 9734) - client creates and signs    2) Lightning invoice - LNURL server generates    3) Zap receipt (kind 9735) - published after payment     </p> </li> <li> <p>How do you create a thread reply that maintains the conversation structure? Answer    Use 'e' tags with markers: one 'e' tag marked 'root' pointing to the thread root, and one 'e' tag marked 'reply' pointing to the immediate parent comment.     </p> </li> <li> <p>What makes long-form content (kind 30023) different from regular notes? Answer    Long-form content is parameterized replaceable, supports metadata tags (title, summary, image, published_at), uses a 'd' tag for identification, and is intended for articles and blog posts rather than short messages.     </p> </li> </ol>"},{"location":"modules/module-06-advanced-nips/#module-6-checkpoint","title":"\ud83c\udfaf Module 6 Checkpoint","text":"<p>Before completing this module, ensure you have:</p> <ul> <li>[ ] Implemented replaceable events (profile updates, contact lists)</li> <li>[ ] Created and updated parameterized replaceable events</li> <li>[ ] Built long-form content publishing</li> <li>[ ] Added reactions and reposts to your client</li> <li>[ ] Implemented at least one type of list (mute, bookmark, etc.)</li> <li>[ ] Integrated encrypted direct messaging</li> <li>[ ] Understood Zap flow (even if not fully implemented)</li> <li>[ ] Experimented with badges or another advanced NIP</li> </ul>"},{"location":"modules/module-06-advanced-nips/#additional-resources","title":"\ud83d\udcda Additional Resources","text":"<ul> <li>NIP-01: Basic Protocol Flow</li> <li>NIP-23: Long-form Content</li> <li>NIP-25: Reactions</li> <li>NIP-33: Parameterized Replaceable Events</li> <li>NIP-44: Encrypted Direct Message</li> <li>NIP-51: Lists</li> <li>NIP-57: Lightning Zaps</li> <li>NIP-58: Badges</li> <li>nostr-tools Documentation</li> </ul>"},{"location":"modules/module-06-advanced-nips/#community-discussion","title":"\ud83d\udcac Community Discussion","text":"<p>Join our Discord to discuss Module 6: - Share your advanced implementations - Get help with NIPs integration - Discuss protocol proposals - Collaborate on NIP development</p> <p>Congratulations!</p> <p>You've mastered advanced Nostr event types and NIPs! You can now build sophisticated applications with long-form content, encrypted messaging, social interactions, and Lightning integration. You're ready to contribute to the Nostr ecosystem!</p> <p>\ud83c\udf93 Course Complete - Next Steps \u2192</p>"},{"location":"modules/module-06-advanced-nips/#next-steps","title":"Next Steps","text":"<p>Now that you've completed all 6 modules, consider:</p> <ol> <li>Build a Production App - Take what you've learned and create a real Nostr client</li> <li>Contribute to NIPs - Propose improvements or new protocol features</li> <li>Run Infrastructure - Set up relays, LNURL servers, or other services</li> <li>Join Development - Contribute to existing Nostr projects</li> <li>Create Content - Share tutorials and help others learn</li> </ol> <p>Welcome to the Nostr ecosystem! \ud83d\ude80\ud83d\udc9c</p>"},{"location":"modules/module-07-production-relays/","title":"Module 7: Running Production Relays","text":"<p>Module Overview</p> <p>Duration: 8-10 hours Level: Advanced Prerequisites: Modules 1-6 completed Goal: Design, deploy, and operate production-grade Nostr relays at scale</p>"},{"location":"modules/module-07-production-relays/#learning-objectives","title":"\ud83d\udccb Learning Objectives","text":"<p>By the end of this module, you will:</p> <ul> <li>\u2705 Understand relay architecture and infrastructure requirements</li> <li>\u2705 Deploy and configure production relays</li> <li>\u2705 Implement advanced filtering and spam prevention</li> <li>\u2705 Optimize relay performance and scalability</li> <li>\u2705 Monitor relay health and troubleshoot issues</li> <li>\u2705 Implement relay monetization strategies</li> <li>\u2705 Handle security threats and abuse</li> <li>\u2705 Plan for high availability and disaster recovery</li> </ul>"},{"location":"modules/module-07-production-relays/#relay-implementation-nips-reference","title":"\ud83d\udcda Relay Implementation NIPs Reference","text":""},{"location":"modules/module-07-production-relays/#essential-nips-for-relay-operators","title":"Essential NIPs for Relay Operators","text":"NIP Title Implementation Priority Purpose NIP-01 Basic Protocol Mandatory Critical Event structure, message types NIP-11 Relay Info Document Mandatory Critical Relay metadata &amp; capabilities NIP-09 Event Deletion Optional High Handle deletion requests NIP-13 Proof of Work Optional High Anti-spam PoW validation NIP-42 Authentication Optional High Client AUTH (access control) NIP-40 Expiration Optional Medium Expire events automatically NIP-45 Event Counts Optional Medium COUNT query support NIP-50 Search Optional Medium Full-text search capability NIP-65 Relay List Metadata Recommended Medium User relay preferences NIP-70 Protected Events Optional Low Author-only republishing"},{"location":"modules/module-07-production-relays/#relay-message-flow-nip-01","title":"Relay Message Flow (NIP-01)","text":"<pre><code>// CLIENT TO RELAY MESSAGES\nconst ClientMessages = {\n  // Publish an event\n  EVENT: ['EVENT', {\n    id: '...',\n    pubkey: '...',\n    created_at: 1234567890,\n    kind: 1,\n    tags: [],\n    content: 'Hello',\n    sig: '...'\n  }],\n\n  // Subscribe to events\n  REQ: ['REQ', 'subscription-id', {\n    kinds: [1],\n    authors: ['pubkey...'],\n    since: 1234567890,\n    limit: 100\n  }],\n\n  // Close subscription\n  CLOSE: ['CLOSE', 'subscription-id'],\n\n  // Authenticate (NIP-42)\n  AUTH: ['AUTH', {\n    kind: 22242,\n    tags: [\n      ['relay', 'wss://relay.example.com'],\n      ['challenge', '...']\n    ]\n    // ...\n  }],\n\n  // Request count (NIP-45)\n  COUNT: ['COUNT', 'count-id', {kinds: [1]}]\n};\n\n// RELAY TO CLIENT MESSAGES\nconst RelayMessages = {\n  // Send event to subscriber\n  EVENT: ['EVENT', 'subscription-id', event],\n\n  // Acknowledge event receipt\n  OK: ['OK', 'event-id', true, ''],\n  OK_REJECTED: ['OK', 'event-id', false, 'blocked: spam detected'],\n\n  // End of stored events\n  EOSE: ['EOSE', 'subscription-id'],\n\n  // Closed subscription\n  CLOSED: ['CLOSED', 'subscription-id', 'auth-required: must authenticate'],\n\n  // Human-readable notice\n  NOTICE: ['NOTICE', 'This relay requires payment'],\n\n  // Auth challenge (NIP-42)\n  AUTH: ['AUTH', 'random-challenge-string'],\n\n  // Count response (NIP-45)\n  COUNT: ['COUNT', 'count-id', {count: 42}]\n};\n</code></pre>"},{"location":"modules/module-07-production-relays/#relay-information-document-nip-11","title":"Relay Information Document (NIP-11)","text":"<p>Your relay MUST serve a JSON document at <code>/.well-known/nostr.json</code>:</p> <pre><code>// Example NIP-11 Document\n{\n  \"name\": \"My Production Relay\",\n  \"description\": \"A high-performance Nostr relay\",\n  \"pubkey\": \"relay-admin-pubkey-hex\",\n  \"contact\": \"admin@example.com\",\n  \"supported_nips\": [1, 2, 9, 11, 12, 13, 15, 16, 20, 22, 33, 40, 42, 45, 50],\n  \"software\": \"https://github.com/myrelay/nostr-relay\",\n  \"version\": \"1.2.3\",\n  \"limitation\": {\n    \"max_message_length\": 65536,\n    \"max_subscriptions\": 20,\n    \"max_filters\": 10,\n    \"max_limit\": 5000,\n    \"max_subid_length\": 64,\n    \"max_event_tags\": 2000,\n    \"max_content_length\": 65536,\n    \"min_pow_difficulty\": 0,\n    \"auth_required\": false,\n    \"payment_required\": true,\n    \"restricted_writes\": false\n  },\n  \"retention\": [\n    {\n      \"kinds\": [0, 3, 10000, 10001, 10002],\n      \"time\": null  // Keep replaceable events forever\n    },\n    {\n      \"kinds\": [1, 7],\n      \"time\": 3600  // Keep regular events for 1 hour\n    }\n  ],\n  \"relay_countries\": [\"US\", \"CA\"],\n  \"language_tags\": [\"en\", \"en-US\"],\n  \"tags\": [\"bitcoin\", \"lightning\", \"freedom\"],\n  \"posting_policy\": \"https://example.com/policy\",\n  \"payments_url\": \"https://example.com/payments\",\n  \"fees\": {\n    \"admission\": [{\n      \"amount\": 5000000,\n      \"unit\": \"msats\",\n      \"period\": 2592000  // 30 days\n    }],\n    \"subscription\": [{\n      \"amount\": 1000000,\n      \"unit\": \"msats\",\n      \"period\": 2592000\n    }],\n    \"publication\": [{\n      \"kinds\": [4],\n      \"amount\": 100,\n      \"unit\": \"msats\"\n    }]\n  }\n}\n</code></pre>"},{"location":"modules/module-07-production-relays/#event-kind-handling","title":"Event Kind Handling","text":"<pre><code>// Relay storage policy based on event kind ranges (NIP-01)\nclass EventKindHandler {\n  shouldStore(event) {\n    const kind = event.kind;\n\n    // Regular events (stored permanently)\n    if ((kind &gt;= 1 &amp;&amp; kind &lt; 10000) || \n        (kind &gt;= 4 &amp;&amp; kind &lt; 45) || \n        kind === 1 || kind === 2) {\n      return {\n        store: true,\n        strategy: 'permanent'\n      };\n    }\n\n    // Replaceable events (keep only latest)\n    if ((kind &gt;= 10000 &amp;&amp; kind &lt; 20000) || \n        kind === 0 || kind === 3) {\n      return {\n        store: true,\n        strategy: 'replaceable',\n        replaceKey: event.pubkey\n      };\n    }\n\n    // Ephemeral events (never store)\n    if (kind &gt;= 20000 &amp;&amp; kind &lt; 30000) {\n      return {\n        store: false,\n        strategy: 'ephemeral'\n      };\n    }\n\n    // Parameterized replaceable (keep latest per d-tag)\n    if (kind &gt;= 30000 &amp;&amp; kind &lt; 40000) {\n      const dTag = event.tags.find(t =&gt; t[0] === 'd')?.[1] || '';\n      return {\n        store: true,\n        strategy: 'parameterized-replaceable',\n        replaceKey: `${event.pubkey}:${kind}:${dTag}`\n      };\n    }\n\n    return { store: true, strategy: 'permanent' };\n  }\n\n  async handleEvent(event, db) {\n    const policy = this.shouldStore(event);\n\n    if (!policy.store) {\n      // Just broadcast to active subscriptions\n      return { stored: false, broadcasted: true };\n    }\n\n    switch (policy.strategy) {\n      case 'replaceable':\n        // Delete older events from same author with same kind\n        await db.query(\n          'DELETE FROM events WHERE pubkey = $1 AND kind = $2',\n          [event.pubkey, event.kind]\n        );\n        break;\n\n      case 'parameterized-replaceable':\n        // Delete older events with same pubkey:kind:d-tag\n        const dTag = event.tags.find(t =&gt; t[0] === 'd')?.[1] || '';\n        await db.query(\n          'DELETE FROM events WHERE pubkey = $1 AND kind = $2 AND d_tag = $3',\n          [event.pubkey, event.kind, dTag]\n        );\n        break;\n    }\n\n    // Store the new event\n    await db.storeEvent(event);\n    return { stored: true, broadcasted: true };\n  }\n}\n</code></pre>"},{"location":"modules/module-07-production-relays/#authentication-flow-nip-42","title":"Authentication Flow (NIP-42)","text":"<pre><code>// Relay-side AUTH implementation\nclass RelayAuth {\n  constructor() {\n    this.challenges = new Map();\n    this.authenticatedClients = new Map();\n  }\n\n  // Send AUTH challenge to client\n  sendChallenge(ws, clientId) {\n    const challenge = crypto.randomBytes(32).toString('hex');\n    this.challenges.set(clientId, {\n      challenge,\n      timestamp: Date.now()\n    });\n\n    ws.send(JSON.stringify(['AUTH', challenge]));\n\n    // Challenge expires in 5 minutes\n    setTimeout(() =&gt; {\n      this.challenges.delete(clientId);\n    }, 300000);\n  }\n\n  // Verify AUTH response\n  async verifyAuth(event, clientId) {\n    // Validate event kind\n    if (event.kind !== 22242) {\n      return { valid: false, reason: 'invalid kind' };\n    }\n\n    // Check challenge tag\n    const challengeTag = event.tags.find(t =&gt; t[0] === 'challenge');\n    if (!challengeTag) {\n      return { valid: false, reason: 'missing challenge' };\n    }\n\n    // Verify challenge matches\n    const stored = this.challenges.get(clientId);\n    if (!stored || stored.challenge !== challengeTag[1]) {\n      return { valid: false, reason: 'invalid challenge' };\n    }\n\n    // Check relay tag\n    const relayTag = event.tags.find(t =&gt; t[0] === 'relay');\n    if (!relayTag || !this.isMyRelay(relayTag[1])) {\n      return { valid: false, reason: 'wrong relay' };\n    }\n\n    // Check timestamp (within 10 minutes)\n    const now = Math.floor(Date.now() / 1000);\n    if (Math.abs(event.created_at - now) &gt; 600) {\n      return { valid: false, reason: 'timestamp out of range' };\n    }\n\n    // Verify signature\n    if (!await this.verifySignature(event)) {\n      return { valid: false, reason: 'invalid signature' };\n    }\n\n    // Authentication successful\n    this.authenticatedClients.set(clientId, {\n      pubkey: event.pubkey,\n      authenticatedAt: Date.now()\n    });\n\n    this.challenges.delete(clientId);\n\n    return { valid: true, pubkey: event.pubkey };\n  }\n\n  isAuthenticated(clientId) {\n    return this.authenticatedClients.has(clientId);\n  }\n\n  getAuthenticatedPubkey(clientId) {\n    return this.authenticatedClients.get(clientId)?.pubkey;\n  }\n}\n</code></pre>"},{"location":"modules/module-07-production-relays/#filter-validation-nip-01","title":"Filter Validation (NIP-01)","text":"<pre><code>// Comprehensive filter validation for relay\nclass FilterValidator {\n  constructor(config) {\n    this.config = {\n      maxFilterIds: 1000,\n      maxFilterAuthors: 1000,\n      maxFilterKinds: 20,\n      maxFilterTags: 100,\n      maxLimit: 5000,\n      ...config\n    };\n  }\n\n  validate(filter) {\n    const errors = [];\n\n    // Validate ids array\n    if (filter.ids) {\n      if (!Array.isArray(filter.ids)) {\n        errors.push('ids must be an array');\n      } else if (filter.ids.length &gt; this.config.maxFilterIds) {\n        errors.push(`too many ids (max ${this.config.maxFilterIds})`);\n      } else if (!filter.ids.every(id =&gt; /^[0-9a-f]{64}$/i.test(id))) {\n        errors.push('invalid id format (must be 64-char hex)');\n      }\n    }\n\n    // Validate authors array\n    if (filter.authors) {\n      if (!Array.isArray(filter.authors)) {\n        errors.push('authors must be an array');\n      } else if (filter.authors.length &gt; this.config.maxFilterAuthors) {\n        errors.push(`too many authors (max ${this.config.maxFilterAuthors})`);\n      } else if (!filter.authors.every(pk =&gt; /^[0-9a-f]{64}$/i.test(pk))) {\n        errors.push('invalid pubkey format');\n      }\n    }\n\n    // Validate kinds array\n    if (filter.kinds) {\n      if (!Array.isArray(filter.kinds)) {\n        errors.push('kinds must be an array');\n      } else if (filter.kinds.length &gt; this.config.maxFilterKinds) {\n        errors.push(`too many kinds (max ${this.config.maxFilterKinds})`);\n      } else if (!filter.kinds.every(k =&gt; Number.isInteger(k) &amp;&amp; k &gt;= 0 &amp;&amp; k &lt;= 65535)) {\n        errors.push('invalid kind (must be 0-65535)');\n      }\n    }\n\n    // Validate tag filters (#e, #p, etc.)\n    for (const [key, values] of Object.entries(filter)) {\n      if (key.startsWith('#')) {\n        const tagName = key.slice(1);\n        if (!/^[a-zA-Z]$/.test(tagName)) {\n          errors.push(`invalid tag filter: ${key}`);\n        }\n        if (!Array.isArray(values)) {\n          errors.push(`${key} must be an array`);\n        }\n        if (values.length &gt; this.config.maxFilterTags) {\n          errors.push(`too many ${key} values (max ${this.config.maxFilterTags})`);\n        }\n      }\n    }\n\n    // Validate timestamps\n    if (filter.since !== undefined &amp;&amp; !Number.isInteger(filter.since)) {\n      errors.push('since must be an integer');\n    }\n    if (filter.until !== undefined &amp;&amp; !Number.isInteger(filter.until)) {\n      errors.push('until must be an integer');\n    }\n    if (filter.since &amp;&amp; filter.until &amp;&amp; filter.since &gt; filter.until) {\n      errors.push('since must be &lt;= until');\n    }\n\n    // Validate limit\n    if (filter.limit !== undefined) {\n      if (!Number.isInteger(filter.limit) || filter.limit &lt; 0) {\n        errors.push('limit must be a positive integer');\n      }\n      if (filter.limit &gt; this.config.maxLimit) {\n        errors.push(`limit too high (max ${this.config.maxLimit})`);\n      }\n    }\n\n    return {\n      valid: errors.length === 0,\n      errors\n    };\n  }\n}\n</code></pre>"},{"location":"modules/module-07-production-relays/#71-relay-architecture-fundamentals","title":"7.1 Relay Architecture Fundamentals","text":""},{"location":"modules/module-07-production-relays/#relay-responsibilities","title":"Relay Responsibilities","text":"<p>A Nostr relay has three core responsibilities:</p> <ol> <li>Accept Events - Receive and validate events from clients</li> <li>Store Events - Persist events according to storage policies</li> <li>Serve Events - Respond to subscription filters with matching events</li> </ol> <pre><code>graph TB\n    C1[Client 1] --&gt;|Publish Event| R[Relay]\n    C2[Client 2] --&gt;|Subscribe Filter| R\n    C3[Client 3] --&gt;|Publish Event| R\n\n    R --&gt;|Validate| V[Validator]\n    V --&gt;|Store| S[Storage Layer]\n    S --&gt;|Query| Q[Query Engine]\n    Q --&gt;|Stream Events| C2\n\n    style R fill:#667eea,stroke:#fff,color:#fff\n    style V fill:#f093fb,stroke:#fff,color:#fff\n    style S fill:#4facfe,stroke:#fff,color:#fff\n    style Q fill:#43e97b,stroke:#fff,color:#fff</code></pre>"},{"location":"modules/module-07-production-relays/#architecture-layers","title":"Architecture Layers","text":"<pre><code>// High-level relay architecture\nclass NostrRelay {\n  constructor(config) {\n    // WebSocket server for client connections\n    this.wsServer = new WebSocketServer(config.port);\n\n    // Event validation and processing\n    this.validator = new EventValidator();\n    this.processor = new EventProcessor();\n\n    // Storage backend\n    this.storage = new StorageEngine(config.database);\n\n    // Query and subscription management\n    this.subscriptionManager = new SubscriptionManager();\n\n    // Rate limiting and spam prevention\n    this.rateLimiter = new RateLimiter(config.limits);\n\n    // Monitoring and metrics\n    this.metrics = new MetricsCollector();\n  }\n\n  async start() {\n    await this.storage.connect();\n    await this.wsServer.listen();\n    console.log(`Relay started on port ${this.config.port}`);\n  }\n}\n</code></pre>"},{"location":"modules/module-07-production-relays/#72-storage-layer-design","title":"7.2 Storage Layer Design","text":""},{"location":"modules/module-07-production-relays/#database-selection","title":"Database Selection","text":"<p>Different storage backends for different needs:</p> Database Best For Pros Cons PostgreSQL General purpose, complex queries ACID, mature, feature-rich Resource intensive SQLite Small relays, embedded Simple, fast, portable Single writer limitation MongoDB Document storage, flexibility Schema flexibility, horizontal scaling No ACID transactions LevelDB High performance, key-value Very fast, low overhead Limited query capabilities Redis Caching, real-time subscriptions Extremely fast, pub/sub In-memory only (expensive)"},{"location":"modules/module-07-production-relays/#optimized-schema-design","title":"Optimized Schema Design","text":"<p>PostgreSQL example with efficient indexing:</p> <pre><code>-- Events table optimized for Nostr queries\nCREATE TABLE events (\n    id TEXT PRIMARY KEY,\n    pubkey TEXT NOT NULL,\n    created_at BIGINT NOT NULL,\n    kind INTEGER NOT NULL,\n    tags JSONB,\n    content TEXT,\n    sig TEXT NOT NULL,\n\n    -- Computed columns for common filters\n    e_tags TEXT[] GENERATED ALWAYS AS (\n        array(SELECT jsonb_array_elements_text(tags) \n              FROM jsonb_array_elements(tags) \n              WHERE jsonb_array_element(tags, 0) = '\"e\"')\n    ) STORED,\n\n    p_tags TEXT[] GENERATED ALWAYS AS (\n        array(SELECT jsonb_array_elements_text(tags) \n              FROM jsonb_array_elements(tags) \n              WHERE jsonb_array_element(tags, 0) = '\"p\"')\n    ) STORED,\n\n    t_tags TEXT[] GENERATED ALWAYS AS (\n        array(SELECT jsonb_array_elements_text(tags) \n              FROM jsonb_array_elements(tags) \n              WHERE jsonb_array_element(tags, 0) = '\"t\"')\n    ) STORED\n);\n\n-- Critical indexes for performance\nCREATE INDEX idx_events_pubkey ON events(pubkey);\nCREATE INDEX idx_events_kind ON events(kind);\nCREATE INDEX idx_events_created_at ON events(created_at DESC);\nCREATE INDEX idx_events_pubkey_kind ON events(pubkey, kind);\n\n-- Tag-specific indexes using generated columns\nCREATE INDEX idx_events_e_tags ON events USING GIN(e_tags);\nCREATE INDEX idx_events_p_tags ON events USING GIN(p_tags);\nCREATE INDEX idx_events_t_tags ON events USING GIN(t_tags);\n\n-- Composite indexes for common filter combinations\nCREATE INDEX idx_events_kind_created ON events(kind, created_at DESC);\nCREATE INDEX idx_events_pubkey_created ON events(pubkey, created_at DESC);\n\n-- Partial indexes for replaceable events\nCREATE INDEX idx_replaceable_events ON events(pubkey, kind) \n    WHERE kind &gt;= 10000 AND kind &lt; 20000;\n\n-- Index for parameterized replaceable events\nCREATE INDEX idx_param_replaceable ON events(pubkey, kind, (tags-&gt;&gt;'d'))\n    WHERE kind &gt;= 30000 AND kind &lt; 40000;\n</code></pre>"},{"location":"modules/module-07-production-relays/#storage-policies","title":"Storage Policies","text":"<pre><code>class StoragePolicy {\n  constructor(config) {\n    this.maxEventAge = config.maxEventAge || 365 * 24 * 60 * 60; // 1 year\n    this.maxEventsPerPubkey = config.maxEventsPerPubkey || 10000;\n    this.retentionByKind = config.retentionByKind || {};\n  }\n\n  shouldStore(event) {\n    // Ephemeral events (20000-29999) are never stored\n    if (event.kind &gt;= 20000 &amp;&amp; event.kind &lt; 30000) {\n      return false;\n    }\n\n    // Check event age\n    const age = Date.now() / 1000 - event.created_at;\n    if (age &gt; this.maxEventAge) {\n      return false;\n    }\n\n    // Check kind-specific retention\n    const kindRetention = this.retentionByKind[event.kind];\n    if (kindRetention &amp;&amp; age &gt; kindRetention) {\n      return false;\n    }\n\n    return true;\n  }\n\n  async enforceReplaceableEvents(event, storage) {\n    // Handle replaceable events (10000-19999)\n    if (event.kind &gt;= 10000 &amp;&amp; event.kind &lt; 20000) {\n      await storage.deleteOlderEvents({\n        pubkey: event.pubkey,\n        kind: event.kind,\n        created_at: { $lt: event.created_at }\n      });\n    }\n\n    // Handle parameterized replaceable events (30000-39999)\n    if (event.kind &gt;= 30000 &amp;&amp; event.kind &lt; 40000) {\n      const dTag = event.tags.find(t =&gt; t[0] === 'd')?.[1];\n      if (dTag) {\n        await storage.deleteOlderEvents({\n          pubkey: event.pubkey,\n          kind: event.kind,\n          'd_tag': dTag,\n          created_at: { $lt: event.created_at }\n        });\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"modules/module-07-production-relays/#73-event-validation-processing","title":"7.3 Event Validation &amp; Processing","text":""},{"location":"modules/module-07-production-relays/#comprehensive-event-validator","title":"Comprehensive Event Validator","text":"<pre><code>class ProductionEventValidator {\n  constructor(config = {}) {\n    this.maxContentLength = config.maxContentLength || 100000; // 100KB\n    this.maxTagsCount = config.maxTagsCount || 2000;\n    this.maxTagLength = config.maxTagLength || 1000;\n    this.allowedKinds = config.allowedKinds || null; // null = all kinds\n    this.blacklistedPubkeys = new Set(config.blacklistedPubkeys || []);\n  }\n\n  async validate(event) {\n    const errors = [];\n\n    // 1. Check required fields\n    if (!event.id || !event.pubkey || !event.created_at || \n        event.kind === undefined || !event.tags || !event.content || !event.sig) {\n      errors.push('Missing required fields');\n      return { valid: false, errors };\n    }\n\n    // 2. Validate field formats\n    if (!/^[0-9a-f]{64}$/.test(event.id)) {\n      errors.push('Invalid event ID format');\n    }\n\n    if (!/^[0-9a-f]{64}$/.test(event.pubkey)) {\n      errors.push('Invalid pubkey format');\n    }\n\n    if (!/^[0-9a-f]{128}$/.test(event.sig)) {\n      errors.push('Invalid signature format');\n    }\n\n    // 3. Check blacklist\n    if (this.blacklistedPubkeys.has(event.pubkey)) {\n      errors.push('Pubkey is blacklisted');\n      return { valid: false, errors };\n    }\n\n    // 4. Validate timestamp\n    const now = Math.floor(Date.now() / 1000);\n    if (event.created_at &gt; now + 900) { // 15 min future tolerance\n      errors.push('Timestamp too far in future');\n    }\n\n    if (event.created_at &lt; now - (365 * 24 * 60 * 60)) { // 1 year past\n      errors.push('Timestamp too far in past');\n    }\n\n    // 5. Validate kind\n    if (!Number.isInteger(event.kind) || event.kind &lt; 0) {\n      errors.push('Invalid kind');\n    }\n\n    if (this.allowedKinds &amp;&amp; !this.allowedKinds.includes(event.kind)) {\n      errors.push(`Kind ${event.kind} not allowed on this relay`);\n    }\n\n    // 6. Validate content length\n    if (event.content.length &gt; this.maxContentLength) {\n      errors.push(`Content exceeds maximum length of ${this.maxContentLength}`);\n    }\n\n    // 7. Validate tags\n    if (!Array.isArray(event.tags)) {\n      errors.push('Tags must be an array');\n    } else {\n      if (event.tags.length &gt; this.maxTagsCount) {\n        errors.push(`Too many tags (max ${this.maxTagsCount})`);\n      }\n\n      for (const tag of event.tags) {\n        if (!Array.isArray(tag)) {\n          errors.push('Each tag must be an array');\n          break;\n        }\n\n        if (tag.length === 0) {\n          errors.push('Tag cannot be empty');\n          break;\n        }\n\n        for (const item of tag) {\n          if (typeof item !== 'string') {\n            errors.push('Tag items must be strings');\n            break;\n          }\n\n          if (item.length &gt; this.maxTagLength) {\n            errors.push(`Tag item exceeds maximum length of ${this.maxTagLength}`);\n            break;\n          }\n        }\n      }\n    }\n\n    // 8. Verify event ID\n    const calculatedId = this.calculateEventId(event);\n    if (calculatedId !== event.id) {\n      errors.push('Event ID does not match content');\n    }\n\n    // 9. Verify signature\n    const signatureValid = await this.verifySignature(event);\n    if (!signatureValid) {\n      errors.push('Invalid signature');\n    }\n\n    return {\n      valid: errors.length === 0,\n      errors\n    };\n  }\n\n  calculateEventId(event) {\n    const { sha256 } = require('@noble/hashes/sha256');\n    const { bytesToHex } = require('@noble/hashes/utils');\n\n    const serialized = JSON.stringify([\n      0,\n      event.pubkey,\n      event.created_at,\n      event.kind,\n      event.tags,\n      event.content\n    ]);\n\n    const hash = sha256(new TextEncoder().encode(serialized));\n    return bytesToHex(hash);\n  }\n\n  async verifySignature(event) {\n    const { schnorr } = require('@noble/curves/secp256k1');\n\n    try {\n      return schnorr.verify(event.sig, event.id, event.pubkey);\n    } catch {\n      return false;\n    }\n  }\n}\n</code></pre>"},{"location":"modules/module-07-production-relays/#74-rate-limiting-spam-prevention","title":"7.4 Rate Limiting &amp; Spam Prevention","text":""},{"location":"modules/module-07-production-relays/#multi-layer-rate-limiting","title":"Multi-Layer Rate Limiting","text":"<pre><code>class AdvancedRateLimiter {\n  constructor(redis, config) {\n    this.redis = redis;\n    this.config = {\n      // Per-IP limits\n      ip: {\n        connections: { limit: 10, window: 60 }, // 10 connections per minute\n        events: { limit: 100, window: 60 },     // 100 events per minute\n        subscriptions: { limit: 20, window: 60 } // 20 subscriptions per minute\n      },\n      // Per-pubkey limits\n      pubkey: {\n        events: { limit: 1000, window: 3600 },    // 1000 events per hour\n        kindLimits: {\n          1: { limit: 100, window: 3600 },        // 100 notes per hour\n          4: { limit: 500, window: 3600 },        // 500 DMs per hour\n          7: { limit: 2000, window: 3600 }        // 2000 reactions per hour\n        }\n      },\n      // Global limits\n      global: {\n        events: { limit: 100000, window: 60 },    // 100k events per minute globally\n        bandwidth: { limit: 1000000000, window: 60 } // 1GB per minute\n      },\n      ...config\n    };\n  }\n\n  async checkLimit(type, identifier, subtype = null) {\n    const config = subtype \n      ? this.config[type][subtype]\n      : this.config[type];\n\n    if (!config) return { allowed: true };\n\n    const key = `ratelimit:${type}:${identifier}:${subtype || 'default'}`;\n    const window = config.window;\n    const limit = config.limit;\n\n    // Use Redis INCR with expiry for efficient rate limiting\n    const current = await this.redis.incr(key);\n\n    if (current === 1) {\n      await this.redis.expire(key, window);\n    }\n\n    if (current &gt; limit) {\n      const ttl = await this.redis.ttl(key);\n      return {\n        allowed: false,\n        limit,\n        current,\n        resetIn: ttl\n      };\n    }\n\n    return {\n      allowed: true,\n      limit,\n      remaining: limit - current\n    };\n  }\n\n  async checkIPLimit(ip, type) {\n    return this.checkLimit('ip', ip, type);\n  }\n\n  async checkPubkeyLimit(pubkey, kind = null) {\n    // Check general pubkey limit\n    const general = await this.checkLimit('pubkey', pubkey, 'events');\n    if (!general.allowed) return general;\n\n    // Check kind-specific limit if applicable\n    if (kind !== null &amp;&amp; this.config.pubkey.kindLimits[kind]) {\n      return this.checkLimit('pubkey', pubkey, `kind_${kind}`);\n    }\n\n    return general;\n  }\n\n  async checkGlobalLimit(type) {\n    return this.checkLimit('global', 'all', type);\n  }\n}\n</code></pre>"},{"location":"modules/module-07-production-relays/#spam-detection","title":"Spam Detection","text":"<pre><code>class SpamDetector {\n  constructor() {\n    this.suspiciousPatterns = [\n      /\\b(buy|sell|crypto|investment|profit)\\b.*\\b(telegram|whatsapp|dm)\\b/i,\n      /\\b(click here|limited time|act now|don't miss)\\b/i,\n      /(?:http[s]?:\\/\\/){3,}/i, // Multiple URLs\n    ];\n\n    this.contentHashCache = new Map(); // Detect duplicate content\n  }\n\n  async analyzeEvent(event) {\n    const flags = [];\n    const score = 0;\n\n    // 1. Check for suspicious patterns\n    for (const pattern of this.suspiciousPatterns) {\n      if (pattern.test(event.content)) {\n        flags.push('suspicious_content_pattern');\n        score += 10;\n        break;\n      }\n    }\n\n    // 2. Check for excessive URLs\n    const urlCount = (event.content.match(/https?:\\/\\//g) || []).length;\n    if (urlCount &gt; 5) {\n      flags.push('excessive_urls');\n      score += 5 * (urlCount - 5);\n    }\n\n    // 3. Check for content duplication\n    const contentHash = this.hashContent(event.content);\n    const recentSimilar = this.contentHashCache.get(event.pubkey) || [];\n\n    if (recentSimilar.includes(contentHash)) {\n      flags.push('duplicate_content');\n      score += 20;\n    }\n\n    // Update cache\n    recentSimilar.push(contentHash);\n    if (recentSimilar.length &gt; 100) recentSimilar.shift();\n    this.contentHashCache.set(event.pubkey, recentSimilar);\n\n    // 4. Check for mention spam\n    const mentions = event.tags.filter(t =&gt; t[0] === 'p').length;\n    if (mentions &gt; 20) {\n      flags.push('excessive_mentions');\n      score += mentions - 20;\n    }\n\n    // 5. Check for hashtag spam\n    const hashtags = event.tags.filter(t =&gt; t[0] === 't').length;\n    if (hashtags &gt; 10) {\n      flags.push('excessive_hashtags');\n      score += hashtags - 10;\n    }\n\n    // 6. Check content length vs mentions ratio\n    if (mentions &gt; 5 &amp;&amp; event.content.length &lt; 100) {\n      flags.push('low_content_high_mentions');\n      score += 15;\n    }\n\n    return {\n      isSpam: score &gt; 30,\n      score,\n      flags\n    };\n  }\n\n  hashContent(content) {\n    // Simple hash for duplicate detection\n    const normalized = content.toLowerCase().replace(/\\s+/g, ' ').trim();\n    return normalized.substring(0, 100); // Use first 100 chars\n  }\n}\n</code></pre>"},{"location":"modules/module-07-production-relays/#75-query-optimization","title":"7.5 Query Optimization","text":""},{"location":"modules/module-07-production-relays/#efficient-filter-processing","title":"Efficient Filter Processing","text":"<pre><code>class OptimizedQueryEngine {\n  constructor(storage) {\n    this.storage = storage;\n  }\n\n  async processFilter(filter) {\n    // Build optimized query based on filter complexity\n    const query = this.buildQuery(filter);\n\n    // Execute with appropriate strategy\n    if (this.isSimpleQuery(filter)) {\n      return this.executeSimpleQuery(query, filter);\n    } else {\n      return this.executeComplexQuery(query, filter);\n    }\n  }\n\n  buildQuery(filter) {\n    const conditions = [];\n    const params = [];\n\n    // IDs filter (most specific)\n    if (filter.ids &amp;&amp; filter.ids.length &gt; 0) {\n      conditions.push(`id = ANY($${params.length + 1})`);\n      params.push(filter.ids);\n    }\n\n    // Authors filter\n    if (filter.authors &amp;&amp; filter.authors.length &gt; 0) {\n      conditions.push(`pubkey = ANY($${params.length + 1})`);\n      params.push(filter.authors);\n    }\n\n    // Kinds filter\n    if (filter.kinds &amp;&amp; filter.kinds.length &gt; 0) {\n      conditions.push(`kind = ANY($${params.length + 1})`);\n      params.push(filter.kinds);\n    }\n\n    // Tag filters (#e, #p, #t, etc.)\n    Object.keys(filter).forEach(key =&gt; {\n      if (key.startsWith('#')) {\n        const tagName = key.substring(1);\n        const values = filter[key];\n\n        if (tagName === 'e') {\n          conditions.push(`e_tags &amp;&amp; $${params.length + 1}`);\n        } else if (tagName === 'p') {\n          conditions.push(`p_tags &amp;&amp; $${params.length + 1}`);\n        } else if (tagName === 't') {\n          conditions.push(`t_tags &amp;&amp; $${params.length + 1}`);\n        } else {\n          // Generic tag search (slower)\n          conditions.push(`\n            EXISTS (\n              SELECT 1 FROM jsonb_array_elements(tags) AS tag\n              WHERE tag-&gt;0 = $${params.length + 1}\n              AND tag-&gt;1 = ANY($${params.length + 2})\n            )\n          `);\n          params.push(JSON.stringify(tagName), values);\n          return;\n        }\n\n        params.push(values);\n      }\n    });\n\n    // Time range filters\n    if (filter.since) {\n      conditions.push(`created_at &gt;= $${params.length + 1}`);\n      params.push(filter.since);\n    }\n\n    if (filter.until) {\n      conditions.push(`created_at &lt;= $${params.length + 1}`);\n      params.push(filter.until);\n    }\n\n    // Build final query\n    const whereClause = conditions.length &gt; 0 \n      ? `WHERE ${conditions.join(' AND ')}`\n      : '';\n\n    const limit = filter.limit || 500;\n\n    const sql = `\n      SELECT * FROM events\n      ${whereClause}\n      ORDER BY created_at DESC\n      LIMIT ${limit}\n    `;\n\n    return { sql, params };\n  }\n\n  isSimpleQuery(filter) {\n    // Simple queries can use indexed lookups\n    const hasIds = filter.ids &amp;&amp; filter.ids.length &gt; 0;\n    const hasSpecificAuthors = filter.authors &amp;&amp; filter.authors.length &lt; 10;\n    const hasIndexedTags = filter['#e'] || filter['#p'] || filter['#t'];\n\n    return hasIds || (hasSpecificAuthors &amp;&amp; !hasIndexedTags);\n  }\n\n  async executeSimpleQuery(query, filter) {\n    const result = await this.storage.query(query.sql, query.params);\n    return result.rows;\n  }\n\n  async executeComplexQuery(query, filter) {\n    // For complex queries, use cursor-based pagination\n    const result = await this.storage.query(query.sql, query.params);\n    return result.rows;\n  }\n}\n</code></pre>"},{"location":"modules/module-07-production-relays/#76-websocket-connection-management","title":"7.6 WebSocket Connection Management","text":""},{"location":"modules/module-07-production-relays/#production-websocket-handler","title":"Production WebSocket Handler","text":"<pre><code>const WebSocket = require('ws');\n\nclass RelayWebSocketServer {\n  constructor(config) {\n    this.config = config;\n    this.connections = new Map();\n    this.subscriptions = new Map();\n\n    this.wss = new WebSocket.Server({\n      port: config.port,\n      perMessageDeflate: {\n        zlibDeflateOptions: {\n          chunkSize: 1024,\n          memLevel: 7,\n          level: 3\n        },\n        zlibInflateOptions: {\n          chunkSize: 10 * 1024\n        },\n        clientNoContextTakeover: true,\n        serverNoContextTakeover: true,\n        serverMaxWindowBits: 10,\n        concurrencyLimit: 10,\n        threshold: 1024\n      },\n      maxPayload: 1024 * 1024 // 1MB max message size\n    });\n\n    this.setupConnectionHandling();\n  }\n\n  setupConnectionHandling() {\n    this.wss.on('connection', (ws, req) =&gt; {\n      const clientId = this.generateClientId();\n      const clientIp = req.headers['x-forwarded-for'] || req.socket.remoteAddress;\n\n      const clientInfo = {\n        id: clientId,\n        ip: clientIp,\n        ws,\n        subscriptions: new Set(),\n        connectedAt: Date.now(),\n        lastActivity: Date.now(),\n        messageCount: 0,\n        eventCount: 0\n      };\n\n      this.connections.set(clientId, clientInfo);\n\n      console.log(`Client connected: ${clientId} from ${clientIp}`);\n\n      // Set up ping/pong for connection health\n      ws.isAlive = true;\n      ws.on('pong', () =&gt; {\n        ws.isAlive = true;\n      });\n\n      // Handle incoming messages\n      ws.on('message', async (data) =&gt; {\n        await this.handleMessage(clientId, data);\n      });\n\n      // Handle disconnection\n      ws.on('close', () =&gt; {\n        this.handleDisconnect(clientId);\n      });\n\n      // Handle errors\n      ws.on('error', (error) =&gt; {\n        console.error(`WebSocket error for ${clientId}:`, error);\n        this.handleDisconnect(clientId);\n      });\n    });\n\n    // Set up connection health monitoring\n    this.startHealthCheck();\n  }\n\n  async handleMessage(clientId, data) {\n    const clientInfo = this.connections.get(clientId);\n    if (!clientInfo) return;\n\n    clientInfo.lastActivity = Date.now();\n    clientInfo.messageCount++;\n\n    try {\n      const message = JSON.parse(data);\n      const [type, ...args] = message;\n\n      switch (type) {\n        case 'EVENT':\n          await this.handleEvent(clientInfo, args[0]);\n          break;\n\n        case 'REQ':\n          await this.handleSubscription(clientInfo, args[0], ...args.slice(1));\n          break;\n\n        case 'CLOSE':\n          await this.handleCloseSubscription(clientInfo, args[0]);\n          break;\n\n        case 'AUTH':\n          await this.handleAuth(clientInfo, args[0]);\n          break;\n\n        default:\n          this.sendNotice(clientInfo.ws, `Unknown message type: ${type}`);\n      }\n    } catch (error) {\n      console.error(`Error handling message from ${clientId}:`, error);\n      this.sendNotice(clientInfo.ws, 'Invalid message format');\n    }\n  }\n\n  async handleEvent(clientInfo, event) {\n    // Rate limit check\n    const rateLimit = await this.rateLimiter.checkIPLimit(clientInfo.ip, 'events');\n    if (!rateLimit.allowed) {\n      this.sendNotice(clientInfo.ws, `Rate limit exceeded. Try again in ${rateLimit.resetIn}s`);\n      return;\n    }\n\n    // Validate event\n    const validation = await this.validator.validate(event);\n    if (!validation.valid) {\n      this.sendResponse(clientInfo.ws, ['OK', event.id, false, `Invalid: ${validation.errors[0]}`]);\n      return;\n    }\n\n    // Check spam\n    const spamCheck = await this.spamDetector.analyzeEvent(event);\n    if (spamCheck.isSpam) {\n      this.sendResponse(clientInfo.ws, ['OK', event.id, false, 'Rejected: spam detected']);\n      return;\n    }\n\n    // Store event\n    try {\n      await this.storage.saveEvent(event);\n      this.sendResponse(clientInfo.ws, ['OK', event.id, true, '']);\n\n      // Broadcast to subscribers\n      await this.broadcastEvent(event);\n\n      clientInfo.eventCount++;\n    } catch (error) {\n      console.error('Error saving event:', error);\n      this.sendResponse(clientInfo.ws, ['OK', event.id, false, 'Error: ' + error.message]);\n    }\n  }\n\n  async handleSubscription(clientInfo, subscriptionId, ...filters) {\n    // Check subscription limit\n    if (clientInfo.subscriptions.size &gt;= 20) {\n      this.sendNotice(clientInfo.ws, 'Too many subscriptions');\n      return;\n    }\n\n    // Store subscription\n    const subscription = {\n      id: subscriptionId,\n      clientId: clientInfo.id,\n      filters,\n      createdAt: Date.now()\n    };\n\n    this.subscriptions.set(subscriptionId, subscription);\n    clientInfo.subscriptions.add(subscriptionId);\n\n    // Query and send existing events\n    for (const filter of filters) {\n      const events = await this.queryEngine.processFilter(filter);\n\n      for (const event of events) {\n        this.sendEvent(clientInfo.ws, subscriptionId, event);\n      }\n    }\n\n    // Send EOSE\n    this.sendResponse(clientInfo.ws, ['EOSE', subscriptionId]);\n  }\n\n  async handleCloseSubscription(clientInfo, subscriptionId) {\n    this.subscriptions.delete(subscriptionId);\n    clientInfo.subscriptions.delete(subscriptionId);\n  }\n\n  async broadcastEvent(event) {\n    // Find matching subscriptions\n    for (const [subId, subscription] of this.subscriptions) {\n      const matches = subscription.filters.some(filter =&gt; \n        this.eventMatchesFilter(event, filter)\n      );\n\n      if (matches) {\n        const clientInfo = this.connections.get(subscription.clientId);\n        if (clientInfo &amp;&amp; clientInfo.ws.readyState === WebSocket.OPEN) {\n          this.sendEvent(clientInfo.ws, subId, event);\n        }\n      }\n    }\n  }\n\n  eventMatchesFilter(event, filter) {\n    if (filter.ids &amp;&amp; !filter.ids.includes(event.id)) return false;\n    if (filter.authors &amp;&amp; !filter.authors.includes(event.pubkey)) return false;\n    if (filter.kinds &amp;&amp; !filter.kinds.includes(event.kind)) return false;\n    if (filter.since &amp;&amp; event.created_at &lt; filter.since) return false;\n    if (filter.until &amp;&amp; event.created_at &gt; filter.until) return false;\n\n    // Check tag filters\n    for (const key in filter) {\n      if (key.startsWith('#')) {\n        const tagName = key.substring(1);\n        const values = filter[key];\n        const hasMatch = event.tags.some(tag =&gt; \n          tag[0] === tagName &amp;&amp; values.includes(tag[1])\n        );\n        if (!hasMatch) return false;\n      }\n    }\n\n    return true;\n  }\n\n  handleDisconnect(clientId) {\n    const clientInfo = this.connections.get(clientId);\n    if (!clientInfo) return;\n\n    // Clean up subscriptions\n    for (const subId of clientInfo.subscriptions) {\n      this.subscriptions.delete(subId);\n    }\n\n    this.connections.delete(clientId);\n    console.log(`Client disconnected: ${clientId}`);\n  }\n\n  startHealthCheck() {\n    const interval = setInterval(() =&gt; {\n      this.wss.clients.forEach((ws) =&gt; {\n        if (ws.isAlive === false) {\n          return ws.terminate();\n        }\n\n        ws.isAlive = false;\n        ws.ping();\n      });\n    }, 30000); // Every 30 seconds\n\n    this.wss.on('close', () =&gt; {\n      clearInterval(interval);\n    });\n  }\n\n  sendEvent(ws, subscriptionId, event) {\n    this.sendResponse(ws, ['EVENT', subscriptionId, event]);\n  }\n\n  sendNotice(ws, message) {\n    this.sendResponse(ws, ['NOTICE', message]);\n  }\n\n  sendResponse(ws, message) {\n    if (ws.readyState === WebSocket.OPEN) {\n      ws.send(JSON.stringify(message));\n    }\n  }\n\n  generateClientId() {\n    return Math.random().toString(36).substring(2, 15);\n  }\n}\n</code></pre>"},{"location":"modules/module-07-production-relays/#77-monitoring-observability","title":"7.7 Monitoring &amp; Observability","text":""},{"location":"modules/module-07-production-relays/#metrics-collection","title":"Metrics Collection","text":"<pre><code>class RelayMetrics {\n  constructor(prometheus) {\n    this.prometheus = prometheus;\n\n    // Define metrics\n    this.metrics = {\n      // Connection metrics\n      activeConnections: new prometheus.Gauge({\n        name: 'nostr_relay_active_connections',\n        help: 'Number of active WebSocket connections'\n      }),\n\n      totalConnections: new prometheus.Counter({\n        name: 'nostr_relay_total_connections',\n        help: 'Total number of connections since start'\n      }),\n\n      // Event metrics\n      eventsReceived: new prometheus.Counter({\n        name: 'nostr_relay_events_received_total',\n        help: 'Total events received',\n        labelNames: ['kind']\n      }),\n\n      eventsStored: new prometheus.Counter({\n        name: 'nostr_relay_events_stored_total',\n        help: 'Total events stored',\n        labelNames: ['kind']\n      }),\n\n      eventsRejected: new prometheus.Counter({\n        name: 'nostr_relay_events_rejected_total',\n        help: 'Total events rejected',\n        labelNames: ['reason']\n      }),\n\n      // Query metrics\n      subscriptions: new prometheus.Gauge({\n        name: 'nostr_relay_active_subscriptions',\n        help: 'Number of active subscriptions'\n      }),\n\n      queryDuration: new prometheus.Histogram({\n        name: 'nostr_relay_query_duration_seconds',\n        help: 'Query execution time',\n        buckets: [0.001, 0.005, 0.01, 0.05, 0.1, 0.5, 1, 5]\n      }),\n\n      // Storage metrics\n      storageSize: new prometheus.Gauge({\n        name: 'nostr_relay_storage_bytes',\n        help: 'Total storage used in bytes'\n      }),\n\n      eventCount: new prometheus.Gauge({\n        name: 'nostr_relay_event_count',\n        help: 'Total number of events stored'\n      }),\n\n      // Performance metrics\n      cpuUsage: new prometheus.Gauge({\n        name: 'nostr_relay_cpu_usage_percent',\n        help: 'CPU usage percentage'\n      }),\n\n      memoryUsage: new prometheus.Gauge({\n        name: 'nostr_relay_memory_usage_bytes',\n        help: 'Memory usage in bytes'\n      }),\n\n      // Rate limit metrics\n      rateLimitHits: new prometheus.Counter({\n        name: 'nostr_relay_rate_limit_hits_total',\n        help: 'Number of rate limit violations',\n        labelNames: ['type']\n      })\n    };\n\n    // Start collection\n    this.startCollection();\n  }\n\n  startCollection() {\n    // Collect system metrics every 10 seconds\n    setInterval(() =&gt; {\n      const usage = process.cpuUsage();\n      const memUsage = process.memoryUsage();\n\n      this.metrics.cpuUsage.set(\n        (usage.user + usage.system) / 1000000 // Convert to seconds\n      );\n\n      this.metrics.memoryUsage.set(memUsage.heapUsed);\n    }, 10000);\n  }\n\n  recordEvent(kind, stored = true) {\n    this.metrics.eventsReceived.inc({ kind: kind.toString() });\n    if (stored) {\n      this.metrics.eventsStored.inc({ kind: kind.toString() });\n    }\n  }\n\n  recordRejection(reason) {\n    this.metrics.eventsRejected.inc({ reason });\n  }\n\n  recordQuery(duration) {\n    this.metrics.queryDuration.observe(duration);\n  }\n\n  recordRateLimitHit(type) {\n    this.metrics.rateLimitHits.inc({ type });\n  }\n}\n</code></pre>"},{"location":"modules/module-07-production-relays/#78-deployment-infrastructure","title":"7.8 Deployment &amp; Infrastructure","text":""},{"location":"modules/module-07-production-relays/#docker-deployment","title":"Docker Deployment","text":"<pre><code># Dockerfile for production relay\nFROM node:18-alpine AS builder\n\nWORKDIR /app\n\n# Copy package files\nCOPY package*.json ./\n\n# Install dependencies\nRUN npm ci --only=production\n\n# Copy source code\nCOPY . .\n\n# Build if needed\nRUN npm run build\n\n# Production stage\nFROM node:18-alpine\n\nWORKDIR /app\n\n# Install production dependencies only\nCOPY --from=builder /app/node_modules ./node_modules\nCOPY --from=builder /app/dist ./dist\nCOPY --from=builder /app/package.json ./\n\n# Create non-root user\nRUN addgroup -g 1001 -S nostr &amp;&amp; \\\n    adduser -S nostr -u 1001\n\n# Switch to non-root user\nUSER nostr\n\n# Expose port\nEXPOSE 8080\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD node healthcheck.js\n\n# Start relay\nCMD [\"node\", \"dist/index.js\"]\n</code></pre>"},{"location":"modules/module-07-production-relays/#docker-compose-stack","title":"Docker Compose Stack","text":"<pre><code># docker-compose.yml\nversion: '3.8'\n\nservices:\n  relay:\n    build: .\n    ports:\n      - \"8080:8080\"\n    environment:\n      - NODE_ENV=production\n      - DATABASE_URL=postgresql://nostr:password@postgres:5432/nostrdb\n      - REDIS_URL=redis://redis:6379\n      - MAX_CONNECTIONS=1000\n      - RATE_LIMIT_ENABLED=true\n    depends_on:\n      - postgres\n      - redis\n    restart: unless-stopped\n    networks:\n      - nostr-network\n    volumes:\n      - ./config:/app/config:ro\n    deploy:\n      resources:\n        limits:\n          cpus: '2'\n          memory: 2G\n        reservations:\n          cpus: '1'\n          memory: 1G\n\n  postgres:\n    image: postgres:15-alpine\n    environment:\n      - POSTGRES_DB=nostrdb\n      - POSTGRES_USER=nostr\n      - POSTGRES_PASSWORD=password\n    volumes:\n      - postgres-data:/var/lib/postgresql/data\n      - ./init.sql:/docker-entrypoint-initdb.d/init.sql\n    networks:\n      - nostr-network\n    restart: unless-stopped\n\n  redis:\n    image: redis:7-alpine\n    command: redis-server --appendonly yes\n    volumes:\n      - redis-data:/data\n    networks:\n      - nostr-network\n    restart: unless-stopped\n\n  prometheus:\n    image: prom/prometheus:latest\n    volumes:\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\n      - prometheus-data:/prometheus\n    ports:\n      - \"9090:9090\"\n    networks:\n      - nostr-network\n    restart: unless-stopped\n\n  grafana:\n    image: grafana/grafana:latest\n    ports:\n      - \"3000:3000\"\n    environment:\n      - GF_SECURITY_ADMIN_PASSWORD=admin\n    volumes:\n      - grafana-data:/var/lib/grafana\n      - ./grafana-dashboards:/etc/grafana/provisioning/dashboards\n    networks:\n      - nostr-network\n    restart: unless-stopped\n\n  nginx:\n    image: nginx:alpine\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./ssl:/etc/nginx/ssl:ro\n    depends_on:\n      - relay\n    networks:\n      - nostr-network\n    restart: unless-stopped\n\nnetworks:\n  nostr-network:\n    driver: bridge\n\nvolumes:\n  postgres-data:\n  redis-data:\n  prometheus-data:\n  grafana-data:\n</code></pre>"},{"location":"modules/module-07-production-relays/#nginx-configuration","title":"Nginx Configuration","text":"<pre><code># nginx.conf\nevents {\n    worker_connections 4096;\n}\n\nhttp {\n    upstream relay {\n        server relay:8080;\n    }\n\n    # Rate limiting\n    limit_req_zone $binary_remote_addr zone=relay_limit:10m rate=100r/s;\n    limit_conn_zone $binary_remote_addr zone=conn_limit:10m;\n\n    server {\n        listen 80;\n        server_name relay.example.com;\n\n        # Redirect to HTTPS\n        return 301 https://$server_name$request_uri;\n    }\n\n    server {\n        listen 443 ssl http2;\n        server_name relay.example.com;\n\n        # SSL configuration\n        ssl_certificate /etc/nginx/ssl/cert.pem;\n        ssl_certificate_key /etc/nginx/ssl/key.pem;\n        ssl_protocols TLSv1.2 TLSv1.3;\n        ssl_ciphers HIGH:!aNULL:!MD5;\n\n        # Security headers\n        add_header X-Content-Type-Options nosniff;\n        add_header X-Frame-Options DENY;\n        add_header X-XSS-Protection \"1; mode=block\";\n\n        # Rate limiting\n        limit_req zone=relay_limit burst=200 nodelay;\n        limit_conn conn_limit 20;\n\n        # WebSocket proxying\n        location / {\n            proxy_pass http://relay;\n            proxy_http_version 1.1;\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection \"Upgrade\";\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n\n            # Timeouts\n            proxy_connect_timeout 7d;\n            proxy_send_timeout 7d;\n            proxy_read_timeout 7d;\n        }\n\n        # Health check endpoint\n        location /health {\n            proxy_pass http://relay/health;\n            access_log off;\n        }\n\n        # Metrics endpoint (restricted)\n        location /metrics {\n            proxy_pass http://relay/metrics;\n            allow 10.0.0.0/8;  # Internal network only\n            deny all;\n        }\n    }\n}\n</code></pre>"},{"location":"modules/module-07-production-relays/#79-security-hardening","title":"7.9 Security Hardening","text":""},{"location":"modules/module-07-production-relays/#security-best-practices","title":"Security Best Practices","text":"<pre><code>class RelaySecurityManager {\n  constructor(config) {\n    this.config = config;\n    this.bannedIPs = new Set();\n    this.bannedPubkeys = new Set();\n    this.suspiciousActivity = new Map();\n  }\n\n  // IP-based threat detection\n  async checkIPThreat(ip) {\n    if (this.bannedIPs.has(ip)) {\n      return { threat: true, reason: 'IP banned' };\n    }\n\n    const activity = this.suspiciousActivity.get(ip) || {\n      violations: 0,\n      lastViolation: 0\n    };\n\n    // Auto-ban after 10 violations in 1 hour\n    if (activity.violations &gt;= 10) {\n      const hourAgo = Date.now() - 3600000;\n      if (activity.lastViolation &gt; hourAgo) {\n        this.bannedIPs.add(ip);\n        return { threat: true, reason: 'Too many violations' };\n      }\n    }\n\n    return { threat: false };\n  }\n\n  // Content filtering\n  filterContent(event) {\n    const filters = [\n      // Filter explicit content (basic example)\n      /\\b(explicit|harmful|pattern)\\b/i,\n\n      // Filter phishing attempts\n      /password|private.?key|nsec1/i,\n\n      // Filter excessive caps\n      /[A-Z\\s]{50,}/\n    ];\n\n    for (const filter of filters) {\n      if (filter.test(event.content)) {\n        return {\n          allowed: false,\n          reason: 'Content policy violation'\n        };\n      }\n    }\n\n    return { allowed: true };\n  }\n\n  // DDoS protection\n  detectDDoS(metrics) {\n    const threshold = {\n      connectionsPerSecond: 100,\n      eventsPerSecond: 1000,\n      failedAuthPerSecond: 50\n    };\n\n    if (metrics.connectionsPerSecond &gt; threshold.connectionsPerSecond ||\n        metrics.eventsPerSecond &gt; threshold.eventsPerSecond ||\n        metrics.failedAuthPerSecond &gt; threshold.failedAuthPerSecond) {\n\n      return {\n        attack: true,\n        type: 'DDoS',\n        action: 'enable_mitigation'\n      };\n    }\n\n    return { attack: false };\n  }\n}\n</code></pre>"},{"location":"modules/module-07-production-relays/#710-practical-exercises","title":"7.10 Practical Exercises","text":""},{"location":"modules/module-07-production-relays/#exercise-1-deploy-a-basic-relay","title":"Exercise 1: Deploy a Basic Relay","text":"<p>Set up and deploy a minimal relay: 1. Install dependencies (Node.js, PostgreSQL) 2. Configure database schema 3. Implement basic WebSocket handling 4. Test with nostr clients</p>"},{"location":"modules/module-07-production-relays/#exercise-2-add-rate-limiting","title":"Exercise 2: Add Rate Limiting","text":"<p>Implement rate limiting: 1. Set up Redis for rate limiting 2. Add per-IP limits 3. Add per-pubkey limits 4. Test with load testing tools</p>"},{"location":"modules/module-07-production-relays/#exercise-3-optimize-queries","title":"Exercise 3: Optimize Queries","text":"<p>Improve query performance: 1. Analyze slow queries 2. Add appropriate indexes 3. Implement query result caching 4. Measure performance improvements</p>"},{"location":"modules/module-07-production-relays/#exercise-4-set-up-monitoring","title":"Exercise 4: Set Up Monitoring","text":"<p>Implement observability: 1. Add Prometheus metrics 2. Create Grafana dashboards 3. Set up alerts for critical metrics 4. Monitor production traffic</p>"},{"location":"modules/module-07-production-relays/#exercise-5-implement-spam-detection","title":"Exercise 5: Implement Spam Detection","text":"<p>Build spam prevention: 1. Create content analysis rules 2. Implement duplicate detection 3. Add IP reputation checking 4. Test with spam samples</p>"},{"location":"modules/module-07-production-relays/#module-7-quiz","title":"\ud83d\udcdd Module 7 Quiz","text":"<ol> <li> <p>What are the three core responsibilities of a Nostr relay? Answer    Accept events from clients, store events according to policy, and serve events matching subscription filters.     </p> </li> <li> <p>Why are replaceable events handled differently in storage? Answer    Replaceable events (kinds 10000-19999) should only keep the latest event per pubkey+kind combination, so older events must be deleted when newer ones arrive to prevent storage bloat.     </p> </li> <li> <p>What's the purpose of rate limiting at multiple layers (IP, pubkey, global)? Answer    Multi-layer rate limiting prevents abuse at different levels: IP limits stop DDoS attacks, pubkey limits prevent spam from individual users, and global limits protect overall relay capacity.     </p> </li> <li> <p>Why use indexes on tag columns (e_tags, p_tags, t_tags)? Answer    Tag filters are extremely common in Nostr queries (#e, #p, #t). Array-based indexes using GIN or similar allow fast lookups without scanning the entire events table.     </p> </li> <li> <p>What's the difference between simple and complex query execution strategies? Answer    Simple queries use specific indexed lookups (by ID, author, or kind), while complex queries with multiple tag filters may require more sophisticated execution plans, possibly with cursor-based pagination to manage large result sets.     </p> </li> </ol>"},{"location":"modules/module-07-production-relays/#module-7-checkpoint","title":"\ud83c\udfaf Module 7 Checkpoint","text":"<p>Before moving to Module 8, ensure you have:</p> <ul> <li>[ ] Deployed a working relay with WebSocket support</li> <li>[ ] Implemented database storage with proper indexes</li> <li>[ ] Added rate limiting and spam detection</li> <li>[ ] Set up monitoring and metrics collection</li> <li>[ ] Configured proper security measures</li> <li>[ ] Tested relay under load</li> <li>[ ] Implemented backup and recovery procedures</li> <li>[ ] Documented relay operations</li> </ul>"},{"location":"modules/module-07-production-relays/#additional-resources","title":"\ud83d\udcda Additional Resources","text":"<ul> <li>Relay Implementation Guide (GitHub)</li> <li>NIP-01: Basic Protocol</li> <li>NIP-11: Relay Information Document</li> <li>NIP-42: Authentication</li> <li>strfry Relay - High-performance C++ relay</li> <li>nostream - TypeScript relay implementation</li> <li>PostgreSQL Performance Tuning</li> </ul>"},{"location":"modules/module-07-production-relays/#community-discussion","title":"\ud83d\udcac Community Discussion","text":"<p>Join our Discord to discuss Module 7: - Share your relay setup and configuration - Get help with deployment issues - Discuss scaling strategies - Collaborate on relay improvements</p> <p>Congratulations!</p> <p>You've learned how to build and operate production-grade Nostr relays! You understand architecture, optimization, security, and monitoring. Ready for Module 8: Scaling &amp; Performance!</p> <p>Continue to Module 8: Scaling &amp; Performance \u2192</p>"},{"location":"modules/module-08-scaling-performance/","title":"Module 8: Scaling &amp; Performance Optimization","text":"<p>Module Overview</p> <p>Duration: 8-10 hours Level: Advanced Prerequisites: Module 7 completed Goal: Scale Nostr relays to handle millions of users with optimal performance</p>"},{"location":"modules/module-08-scaling-performance/#learning-objectives","title":"\ud83d\udccb Learning Objectives","text":"<p>By the end of this module, you will:</p> <ul> <li>\u2705 Implement horizontal scaling strategies</li> <li>\u2705 Design and deploy caching layers</li> <li>\u2705 Optimize database queries and indexing</li> <li>\u2705 Implement load balancing and failover</li> <li>\u2705 Build CDN-style event distribution</li> <li>\u2705 Monitor and optimize performance bottlenecks</li> <li>\u2705 Implement connection pooling and resource management</li> <li>\u2705 Design for geographic distribution</li> </ul>"},{"location":"modules/module-08-scaling-performance/#protocol-level-performance-considerations","title":"\ud83d\udcda Protocol-Level Performance Considerations","text":""},{"location":"modules/module-08-scaling-performance/#nip-based-optimization-strategies","title":"NIP-Based Optimization Strategies","text":"<p>Understanding how different NIPs impact relay performance:</p> NIP Performance Impact Optimization Strategy Resource Cost NIP-01 High (Core) Optimize event validation CPU: Medium, I/O: High NIP-02 Low Cache contact lists Memory: Low NIP-09 Medium Async deletion processing I/O: Medium NIP-11 Negligible Static file serving Memory: Minimal NIP-13 High PoW verification CPU: High NIP-42 Medium Auth state management Memory: Medium NIP-45 Medium-High COUNT query optimization CPU: Medium, I/O: Medium NIP-50 Very High Full-text search indexes I/O: Very High, Memory: High NIP-51 Low-Medium List caching Memory: Low NIP-57 Low Forward to LNURL Network: Low NIP-65 Low Cache user relay lists Memory: Low"},{"location":"modules/module-08-scaling-performance/#event-processing-optimization-by-kind","title":"Event Processing Optimization by Kind","text":"<pre><code>// Optimize processing based on event characteristics\nclass PerformanceOptimizedEventHandler {\n  constructor() {\n    this.hotCache = new LRU(10000);  // Fast recent events\n    this.statsTracker = new EventStatsTracker();\n  }\n\n  async processEvent(event) {\n    const kind = event.kind;\n    const startTime = performance.now();\n\n    // Route to optimized handler based on kind range\n    let result;\n\n    if (kind &gt;= 20000 &amp;&amp; kind &lt; 30000) {\n      // Ephemeral: Skip storage, broadcast only\n      result = await this.handleEphemeral(event);\n\n    } else if (kind &gt;= 10000 &amp;&amp; kind &lt; 20000 || kind === 0 || kind === 3) {\n      // Replaceable: Delete old, store new\n      result = await this.handleReplaceable(event);\n\n    } else if (kind &gt;= 30000 &amp;&amp; kind &lt; 40000) {\n      // Parameterized replaceable: Check d-tag\n      result = await this.handleParameterizedReplaceable(event);\n\n    } else {\n      // Regular events: Standard storage\n      result = await this.handleRegular(event);\n    }\n\n    // Track performance metrics\n    const duration = performance.now() - startTime;\n    this.statsTracker.record(kind, duration);\n\n    return result;\n  }\n\n  async handleEphemeral(event) {\n    // No database hit - pure broadcast\n    // Performance: ~0.1ms per event\n    await this.broadcastToSubscribers(event);\n    return { stored: false, broadcasted: true, ttl: 0 };\n  }\n\n  async handleReplaceable(event) {\n    // Single delete + insert\n    // Performance: ~1-2ms per event\n    const key = `${event.pubkey}:${event.kind}`;\n\n    // Check cache first\n    const cached = this.hotCache.get(key);\n    if (cached &amp;&amp; cached.created_at &gt;= event.created_at) {\n      return { stored: false, reason: 'older_than_cached' };\n    }\n\n    // Use UPSERT for atomic replace\n    await this.db.query(`\n      INSERT INTO events (id, pubkey, kind, created_at, content, tags, sig)\n      VALUES ($1, $2, $3, $4, $5, $6, $7)\n      ON CONFLICT (pubkey, kind) \n      DO UPDATE SET \n        id = EXCLUDED.id,\n        created_at = EXCLUDED.created_at,\n        content = EXCLUDED.content,\n        tags = EXCLUDED.tags,\n        sig = EXCLUDED.sig\n      WHERE EXCLUDED.created_at &gt; events.created_at\n    `, [event.id, event.pubkey, event.kind, event.created_at, \n        event.content, JSON.stringify(event.tags), event.sig]);\n\n    this.hotCache.set(key, event);\n    await this.broadcastToSubscribers(event);\n\n    return { stored: true, broadcasted: true };\n  }\n\n  async handleParameterizedReplaceable(event) {\n    // Extract d-tag for parameterized replace\n    const dTag = event.tags.find(t =&gt; t[0] === 'd')?.[1] || '';\n    const key = `${event.pubkey}:${event.kind}:${dTag}`;\n\n    // Similar to replaceable but with d-tag\n    await this.db.query(`\n      INSERT INTO events (id, pubkey, kind, d_tag, created_at, content, tags, sig)\n      VALUES ($1, $2, $3, $4, $5, $6, $7, $8)\n      ON CONFLICT (pubkey, kind, d_tag) \n      DO UPDATE SET \n        id = EXCLUDED.id,\n        created_at = EXCLUDED.created_at,\n        content = EXCLUDED.content,\n        tags = EXCLUDED.tags,\n        sig = EXCLUDED.sig\n      WHERE EXCLUDED.created_at &gt; events.created_at\n    `, [event.id, event.pubkey, event.kind, dTag, event.created_at, \n        event.content, JSON.stringify(event.tags), event.sig]);\n\n    this.hotCache.set(key, event);\n    await this.broadcastToSubscribers(event);\n\n    return { stored: true, broadcasted: true };\n  }\n\n  async handleRegular(event) {\n    // Standard insert - most common case\n    // Performance: ~0.5-1ms per event with proper indexes\n\n    try {\n      await this.db.query(`\n        INSERT INTO events (id, pubkey, kind, created_at, content, tags, sig)\n        VALUES ($1, $2, $3, $4, $5, $6, $7)\n      `, [event.id, event.pubkey, event.kind, event.created_at,\n          event.content, JSON.stringify(event.tags), event.sig]);\n\n      // Cache hot events (kind 1, 7 typically)\n      if (event.kind === 1 || event.kind === 7) {\n        this.hotCache.set(event.id, event);\n      }\n\n      await this.broadcastToSubscribers(event);\n      return { stored: true, broadcasted: true };\n\n    } catch (err) {\n      if (err.code === '23505') { // duplicate key\n        return { stored: false, reason: 'duplicate' };\n      }\n      throw err;\n    }\n  }\n}\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#filter-optimization-strategies","title":"Filter Optimization Strategies","text":"<pre><code>// Optimize query plans based on filter characteristics\nclass SmartFilterExecutor {\n  constructor(db) {\n    this.db = db;\n    this.queryCache = new LRU(1000);\n  }\n\n  async executeFilter(filter, limit = 100) {\n    // Analyze filter to choose optimal execution strategy\n    const strategy = this.analyzeFilter(filter);\n\n    switch (strategy.type) {\n      case 'ids':\n        // Direct ID lookup - fastest (0.1ms per event)\n        return await this.executeIdQuery(filter.ids, limit);\n\n      case 'authors_recent':\n        // Author + time range - very fast with proper index (1-2ms)\n        return await this.executeAuthorRecentQuery(\n          filter.authors, \n          filter.since || 0,\n          filter.kinds,\n          limit\n        );\n\n      case 'kinds_only':\n        // Kind-only query - moderate speed (5-10ms)\n        return await this.executeKindQuery(filter.kinds, limit);\n\n      case 'complex_tag':\n        // Complex tag filtering - slower (10-50ms)\n        return await this.executeTagQuery(filter, limit);\n\n      case 'full_scan':\n        // Last resort - use COUNT limit (50-200ms)\n        return await this.executeFullScanQuery(filter, Math.min(limit, 100));\n\n      default:\n        return await this.executeGenericQuery(filter, limit);\n    }\n  }\n\n  analyzeFilter(filter) {\n    // Score different query strategies\n    const scores = {\n      hasIds: filter.ids &amp;&amp; filter.ids.length &gt; 0,\n      hasAuthors: filter.authors &amp;&amp; filter.authors.length &gt; 0,\n      hasKinds: filter.kinds &amp;&amp; filter.kinds.length &gt; 0,\n      hasTimeRange: filter.since || filter.until,\n      hasTags: Object.keys(filter).some(k =&gt; k.startsWith('#')),\n      authorCount: filter.authors?.length || 0,\n      kindCount: filter.kinds?.length || 0\n    };\n\n    // Optimize for common patterns\n    if (scores.hasIds) {\n      return { type: 'ids', complexity: 1 };\n    }\n\n    if (scores.hasAuthors &amp;&amp; scores.authorCount &lt;= 10 &amp;&amp; scores.hasTimeRange) {\n      return { type: 'authors_recent', complexity: 2 };\n    }\n\n    if (scores.hasKinds &amp;&amp; !scores.hasAuthors &amp;&amp; !scores.hasTags) {\n      return { type: 'kinds_only', complexity: 3 };\n    }\n\n    if (scores.hasTags) {\n      return { type: 'complex_tag', complexity: 4 };\n    }\n\n    return { type: 'full_scan', complexity: 5 };\n  }\n\n  async executeIdQuery(ids, limit) {\n    // Use ANY for batch ID lookup\n    return await this.db.query(`\n      SELECT * FROM events \n      WHERE id = ANY($1::text[])\n      LIMIT $2\n    `, [ids, limit]);\n  }\n\n  async executeAuthorRecentQuery(authors, since, kinds, limit) {\n    // Optimized for timeline queries (most common)\n    // Index: (pubkey, created_at DESC, kind)\n    let query = `\n      SELECT * FROM events \n      WHERE pubkey = ANY($1::text[])\n      AND created_at &gt;= $2\n    `;\n\n    const params = [authors, since];\n\n    if (kinds &amp;&amp; kinds.length &gt; 0) {\n      query += ` AND kind = ANY($3::integer[])`;\n      params.push(kinds);\n    }\n\n    query += ` ORDER BY created_at DESC LIMIT $${params.length + 1}`;\n    params.push(limit);\n\n    return await this.db.query(query, params);\n  }\n}\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#message-batching-for-efficiency","title":"Message Batching for Efficiency","text":"<pre><code>// Batch messages to reduce WebSocket overhead\nclass EfficientMessageBatcher {\n  constructor(ws, options = {}) {\n    this.ws = ws;\n    this.batchSize = options.batchSize || 10;\n    this.batchTimeout = options.batchTimeout || 10; // ms\n    this.pending = [];\n    this.timer = null;\n  }\n\n  sendEvent(subscriptionId, event) {\n    this.pending.push(['EVENT', subscriptionId, event]);\n\n    if (this.pending.length &gt;= this.batchSize) {\n      this.flush();\n    } else if (!this.timer) {\n      this.timer = setTimeout(() =&gt; this.flush(), this.batchTimeout);\n    }\n  }\n\n  flush() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = null;\n    }\n\n    if (this.pending.length === 0) return;\n\n    // Send all pending messages in one write\n    const messages = this.pending.map(msg =&gt; JSON.stringify(msg)).join('\\n');\n    this.ws.send(messages);\n\n    this.pending = [];\n  }\n\n  sendImmediate(message) {\n    this.flush();\n    this.ws.send(JSON.stringify(message));\n  }\n}\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#nip-45-count-query-optimization","title":"NIP-45 COUNT Query Optimization","text":"<pre><code>// Efficient COUNT implementation using HyperLogLog\nclass OptimizedCountHandler {\n  constructor(db) {\n    this.db = db;\n    this.countCache = new LRU(500);\n    this.hllCache = new Map(); // Store HyperLogLog sketches\n  }\n\n  async handleCount(filter) {\n    const cacheKey = this.getCacheKey(filter);\n    const cached = this.countCache.get(cacheKey);\n\n    if (cached &amp;&amp; Date.now() - cached.timestamp &lt; 60000) {\n      return { count: cached.count };\n    }\n\n    // Use approximate count for large result sets\n    const estimate = await this.estimateCount(filter);\n\n    if (estimate &gt; 10000) {\n      // Use HyperLogLog for very large counts\n      const hll = await this.getHyperLogLog(filter);\n      const count = hll.count();\n\n      this.countCache.set(cacheKey, { count, timestamp: Date.now() });\n      return { count, approximate: true };\n    }\n\n    // Use exact count for smaller result sets\n    const result = await this.db.query(\n      this.buildCountQuery(filter)\n    );\n\n    const count = parseInt(result.rows[0].count);\n    this.countCache.set(cacheKey, { count, timestamp: Date.now() });\n\n    return { count };\n  }\n\n  async estimateCount(filter) {\n    // Quick estimation using table statistics\n    const stats = await this.db.query(`\n      SELECT reltuples::bigint AS estimate\n      FROM pg_class\n      WHERE relname = 'events'\n    `);\n\n    return stats.rows[0].estimate;\n  }\n\n  buildCountQuery(filter) {\n    // Build optimized COUNT query\n    let sql = 'SELECT COUNT(*) FROM events WHERE 1=1';\n    const params = [];\n\n    if (filter.ids) {\n      params.push(filter.ids);\n      sql += ` AND id = ANY($${params.length}::text[])`;\n    }\n\n    if (filter.authors) {\n      params.push(filter.authors);\n      sql += ` AND pubkey = ANY($${params.length}::text[])`;\n    }\n\n    if (filter.kinds) {\n      params.push(filter.kinds);\n      sql += ` AND kind = ANY($${params.length}::integer[])`;\n    }\n\n    if (filter.since) {\n      params.push(filter.since);\n      sql += ` AND created_at &gt;= $${params.length}`;\n    }\n\n    if (filter.until) {\n      params.push(filter.until);\n      sql += ` AND created_at &lt;= $${params.length}`;\n    }\n\n    return { sql, params };\n  }\n}\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#protocol-aware-load-shedding","title":"Protocol-Aware Load Shedding","text":"<pre><code>// Intelligently reject load during high traffic\nclass ProtocolAwareLoadShedder {\n  constructor(options = {}) {\n    this.maxConcurrentReqs = options.maxConcurrentReqs || 1000;\n    this.maxSubscriptionsPerClient = options.maxSubsPerClient || 20;\n    this.activeRequests = 0;\n    this.clientSubscriptions = new Map();\n  }\n\n  async handleRequest(clientId, message, handler) {\n    const [type, ...args] = message;\n\n    // Different load shedding strategies per message type\n    switch (type) {\n      case 'EVENT':\n        return await this.handleEventWithBackpressure(clientId, args[0], handler);\n\n      case 'REQ':\n        return await this.handleReqWithLimit(clientId, args[0], args.slice(1), handler);\n\n      case 'COUNT':\n        return await this.handleCountWithThrottle(clientId, args[0], args[1], handler);\n\n      case 'CLOSE':\n        return await this.handleClose(clientId, args[0], handler);\n\n      default:\n        return await handler(message);\n    }\n  }\n\n  async handleEventWithBackpressure(clientId, event, handler) {\n    if (this.activeRequests &gt; this.maxConcurrentReqs) {\n      // Reject non-critical event kinds during overload\n      const criticalKinds = [0, 3, 10002]; // Metadata, contacts, relay list\n\n      if (!criticalKinds.includes(event.kind)) {\n        return ['OK', event.id, false, 'error: relay overloaded, try again later'];\n      }\n    }\n\n    this.activeRequests++;\n    try {\n      return await handler(event);\n    } finally {\n      this.activeRequests--;\n    }\n  }\n\n  async handleReqWithLimit(clientId, subId, filters, handler) {\n    // Track subscriptions per client\n    const subs = this.clientSubscriptions.get(clientId) || new Set();\n\n    if (subs.size &gt;= this.maxSubscriptionsPerClient &amp;&amp; !subs.has(subId)) {\n      return ['CLOSED', subId, 'error: too many subscriptions'];\n    }\n\n    // Reject overly broad queries during high load\n    if (this.activeRequests &gt; this.maxConcurrentReqs * 0.8) {\n      for (const filter of filters) {\n        if (this.isTooExpensive(filter)) {\n          return ['CLOSED', subId, 'error: query too expensive, add more filters'];\n        }\n      }\n    }\n\n    subs.add(subId);\n    this.clientSubscriptions.set(clientId, subs);\n\n    return await handler(subId, filters);\n  }\n\n  isTooExpensive(filter) {\n    // Detect expensive queries\n    const hasNoFilters = !filter.ids &amp;&amp; !filter.authors &amp;&amp; !filter.kinds;\n    const hasVeryBroadTimeRange = filter.since &amp;&amp; \n      (Date.now() / 1000 - filter.since) &gt; 86400 * 30; // 30 days\n    const hasNoLimit = !filter.limit || filter.limit &gt; 1000;\n\n    return hasNoFilters || (hasVeryBroadTimeRange &amp;&amp; hasNoLimit);\n  }\n}\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#81-horizontal-scaling-architecture","title":"8.1 Horizontal Scaling Architecture","text":""},{"location":"modules/module-08-scaling-performance/#multi-instance-relay-deployment","title":"Multi-Instance Relay Deployment","text":"<pre><code>graph TB\n    LB[Load Balancer&lt;br/&gt;HAProxy/Nginx]\n\n    R1[Relay Instance 1]\n    R2[Relay Instance 2]\n    R3[Relay Instance 3]\n    R4[Relay Instance N]\n\n    REDIS[Redis Cluster&lt;br/&gt;Pub/Sub + Cache]\n    PG_MASTER[PostgreSQL Master&lt;br/&gt;Write Operations]\n    PG_REPLICA1[PostgreSQL Replica 1&lt;br/&gt;Read Operations]\n    PG_REPLICA2[PostgreSQL Replica 2&lt;br/&gt;Read Operations]\n\n    LB --&gt; R1\n    LB --&gt; R2\n    LB --&gt; R3\n    LB --&gt; R4\n\n    R1 --&gt; REDIS\n    R2 --&gt; REDIS\n    R3 --&gt; REDIS\n    R4 --&gt; REDIS\n\n    R1 --&gt; PG_MASTER\n    R2 --&gt; PG_MASTER\n    R3 --&gt; PG_MASTER\n    R4 --&gt; PG_MASTER\n\n    R1 --&gt; PG_REPLICA1\n    R2 --&gt; PG_REPLICA1\n    R3 --&gt; PG_REPLICA2\n    R4 --&gt; PG_REPLICA2\n\n    PG_MASTER -.-&gt;|Replication| PG_REPLICA1\n    PG_MASTER -.-&gt;|Replication| PG_REPLICA2\n\n    style LB fill:#667eea,stroke:#fff,color:#fff\n    style REDIS fill:#f093fb,stroke:#fff,color:#fff\n    style PG_MASTER fill:#4facfe,stroke:#fff,color:#fff\n    style PG_REPLICA1 fill:#43e97b,stroke:#fff,color:#fff\n    style PG_REPLICA2 fill:#43e97b,stroke:#fff,color:#fff</code></pre>"},{"location":"modules/module-08-scaling-performance/#stateless-relay-design","title":"Stateless Relay Design","text":"<pre><code>class StatelessRelay {\n  constructor(config) {\n    this.config = config;\n\n    // Shared state via Redis\n    this.redis = new Redis.Cluster(config.redisNodes);\n\n    // Database connection pool\n    this.dbPool = this.createDatabasePool(config.database);\n\n    // Pub/Sub for event broadcasting across instances\n    this.pubsub = new RedisPubSub(config.redisNodes);\n  }\n\n  createDatabasePool(dbConfig) {\n    const { Pool } = require('pg');\n\n    return new Pool({\n      // Connection to master (for writes)\n      master: {\n        host: dbConfig.master.host,\n        port: dbConfig.master.port,\n        database: dbConfig.database,\n        user: dbConfig.user,\n        password: dbConfig.password,\n        max: 20,\n        idleTimeoutMillis: 30000,\n        connectionTimeoutMillis: 2000,\n      },\n\n      // Connections to replicas (for reads)\n      replicas: dbConfig.replicas.map(replica =&gt; ({\n        host: replica.host,\n        port: replica.port,\n        database: dbConfig.database,\n        user: dbConfig.user,\n        password: dbConfig.password,\n        max: 50,\n        idleTimeoutMillis: 30000,\n        connectionTimeoutMillis: 2000,\n      }))\n    });\n  }\n\n  async publishEvent(event) {\n    // Write to master database\n    await this.dbPool.master.query(\n      'INSERT INTO events (id, pubkey, created_at, kind, tags, content, sig) VALUES ($1, $2, $3, $4, $5, $6, $7)',\n      [event.id, event.pubkey, event.created_at, event.kind, JSON.stringify(event.tags), event.content, event.sig]\n    );\n\n    // Broadcast to all relay instances via Redis Pub/Sub\n    await this.pubsub.publish('new_event', JSON.stringify(event));\n\n    // Cache event for quick retrieval\n    await this.redis.setex(`event:${event.id}`, 3600, JSON.stringify(event));\n  }\n\n  async queryEvents(filter) {\n    // Use read replica for queries\n    const replica = this.dbPool.getRandomReplica();\n    const events = await replica.query(this.buildQuery(filter));\n\n    return events.rows;\n  }\n\n  subscribeToNewEvents(callback) {\n    // Subscribe to new events from all instances\n    this.pubsub.subscribe('new_event', (message) =&gt; {\n      const event = JSON.parse(message);\n      callback(event);\n    });\n  }\n}\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#session-affinity-vs-sticky-sessions","title":"Session Affinity vs Sticky Sessions","text":"<pre><code>// HAProxy configuration for WebSocket load balancing\nclass LoadBalancerConfig {\n  static generateHAProxyConfig(instances) {\n    return `\nglobal\n    maxconn 100000\n    log stdout format raw local0\n\ndefaults\n    log global\n    mode http\n    timeout connect 5s\n    timeout client 7d\n    timeout server 7d\n    option httplog\n\nfrontend nostr_relay\n    bind *:443 ssl crt /etc/ssl/cert.pem\n\n    # Rate limiting\n    stick-table type ip size 1m expire 10s store http_req_rate(10s)\n    http-request track-sc0 src\n    http-request deny if { sc_http_req_rate(0) gt 100 }\n\n    # WebSocket detection\n    acl is_websocket hdr(Upgrade) -i WebSocket\n    acl is_websocket hdr_beg(Host) -i ws\n\n    # Use consistent hashing for WebSocket connections\n    # This ensures the same client connects to the same backend\n    use_backend nostr_backends if is_websocket\n\nbackend nostr_backends\n    balance source  # IP-based sticky sessions\n    hash-type consistent\n\n    # Health checks\n    option httpchk GET /health\n\n    ${instances.map((instance, i) =&gt; \n      `server relay${i + 1} ${instance.host}:${instance.port} check inter 5s fall 3 rise 2`\n    ).join('\\n    ')}\n    `;\n  }\n}\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#82-caching-strategies","title":"8.2 Caching Strategies","text":""},{"location":"modules/module-08-scaling-performance/#multi-layer-cache-architecture","title":"Multi-Layer Cache Architecture","text":"<pre><code>class MultiLayerCache {\n  constructor(config) {\n    // L1: In-memory cache (fastest, smallest)\n    this.l1Cache = new LRUCache({\n      max: 10000,\n      ttl: 60000, // 1 minute\n      updateAgeOnGet: true\n    });\n\n    // L2: Redis cache (fast, shared across instances)\n    this.l2Cache = new Redis.Cluster(config.redisNodes);\n\n    // L3: Database (slower, persistent)\n    this.l3Storage = config.database;\n  }\n\n  async get(key, fetcher) {\n    // Try L1 cache\n    let value = this.l1Cache.get(key);\n    if (value !== undefined) {\n      return { value, source: 'L1' };\n    }\n\n    // Try L2 cache\n    value = await this.l2Cache.get(key);\n    if (value !== null) {\n      // Store in L1 for next time\n      this.l1Cache.set(key, value);\n      return { value: JSON.parse(value), source: 'L2' };\n    }\n\n    // Fetch from L3 (database)\n    value = await fetcher();\n    if (value !== null) {\n      // Store in both caches\n      this.l1Cache.set(key, value);\n      await this.l2Cache.setex(key, 3600, JSON.stringify(value));\n      return { value, source: 'L3' };\n    }\n\n    return { value: null, source: 'MISS' };\n  }\n\n  async set(key, value, ttl = 3600) {\n    // Write through all cache layers\n    this.l1Cache.set(key, value);\n    await this.l2Cache.setex(key, ttl, JSON.stringify(value));\n  }\n\n  async invalidate(key) {\n    // Invalidate all cache layers\n    this.l1Cache.delete(key);\n    await this.l2Cache.del(key);\n  }\n\n  async invalidatePattern(pattern) {\n    // Invalidate by pattern (e.g., \"user:123:*\")\n    const keys = await this.l2Cache.keys(pattern);\n    if (keys.length &gt; 0) {\n      await this.l2Cache.del(...keys);\n    }\n\n    // L1 cache doesn't support pattern matching, so clear it\n    this.l1Cache.clear();\n  }\n}\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#smart-event-caching","title":"Smart Event Caching","text":"<pre><code>class EventCacheManager {\n  constructor(cache) {\n    this.cache = cache;\n  }\n\n  async cacheEvent(event) {\n    // Cache individual event\n    await this.cache.set(`event:${event.id}`, event, 3600);\n\n    // Cache by kind for quick filtering\n    await this.cacheEventByKind(event);\n\n    // Cache by author\n    await this.cacheEventByAuthor(event);\n\n    // Cache referenced events\n    await this.cacheReferencedEvents(event);\n  }\n\n  async cacheEventByKind(event) {\n    const key = `events:kind:${event.kind}`;\n\n    // Add to sorted set (sorted by created_at)\n    await this.cache.l2Cache.zadd(\n      key,\n      event.created_at,\n      event.id\n    );\n\n    // Keep only recent events (last 1000)\n    await this.cache.l2Cache.zremrangebyrank(key, 0, -1001);\n    await this.cache.l2Cache.expire(key, 3600);\n  }\n\n  async cacheEventByAuthor(event) {\n    const key = `events:author:${event.pubkey}`;\n\n    await this.cache.l2Cache.zadd(\n      key,\n      event.created_at,\n      event.id\n    );\n\n    // Keep only recent 500 per author\n    await this.cache.l2Cache.zremrangebyrank(key, 0, -501);\n    await this.cache.l2Cache.expire(key, 7200);\n  }\n\n  async cacheReferencedEvents(event) {\n    // Cache thread relationships\n    const eTags = event.tags.filter(t =&gt; t[0] === 'e');\n\n    for (const [, eventId] of eTags) {\n      const key = `event:${eventId}:replies`;\n      await this.cache.l2Cache.sadd(key, event.id);\n      await this.cache.l2Cache.expire(key, 3600);\n    }\n  }\n\n  async getEventsByFilter(filter) {\n    const cacheKey = this.generateCacheKey(filter);\n\n    // Try to get cached result\n    const cached = await this.cache.get(\n      cacheKey,\n      () =&gt; null // Don't fetch if not cached\n    );\n\n    if (cached.value !== null) {\n      return cached;\n    }\n\n    // If specific filter patterns, try to use cached indexes\n    if (filter.kinds &amp;&amp; filter.kinds.length === 1) {\n      return await this.getEventsByKindFromCache(filter);\n    }\n\n    if (filter.authors &amp;&amp; filter.authors.length === 1) {\n      return await this.getEventsByAuthorFromCache(filter);\n    }\n\n    return { value: null, source: 'MISS' };\n  }\n\n  async getEventsByKindFromCache(filter) {\n    const kind = filter.kinds[0];\n    const key = `events:kind:${kind}`;\n\n    // Get event IDs from sorted set\n    const eventIds = await this.cache.l2Cache.zrevrange(\n      key,\n      0,\n      (filter.limit || 100) - 1\n    );\n\n    if (eventIds.length === 0) {\n      return { value: null, source: 'MISS' };\n    }\n\n    // Fetch events from cache\n    const events = await Promise.all(\n      eventIds.map(id =&gt; this.cache.get(`event:${id}`, () =&gt; null))\n    );\n\n    const validEvents = events\n      .filter(e =&gt; e.value !== null)\n      .map(e =&gt; e.value);\n\n    if (validEvents.length &gt; 0) {\n      return { value: validEvents, source: 'L2_INDEX' };\n    }\n\n    return { value: null, source: 'MISS' };\n  }\n\n  generateCacheKey(filter) {\n    return `filter:${JSON.stringify(filter)}`;\n  }\n}\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#profile-metadata-caching","title":"Profile &amp; Metadata Caching","text":"<pre><code>class ProfileCache {\n  constructor(cache) {\n    this.cache = cache;\n    this.profileTTL = 3600; // 1 hour\n  }\n\n  async getProfile(pubkey) {\n    return await this.cache.get(\n      `profile:${pubkey}`,\n      async () =&gt; {\n        // Fetch from database\n        const result = await db.query(\n          `SELECT * FROM events \n           WHERE pubkey = $1 AND kind = 0 \n           ORDER BY created_at DESC \n           LIMIT 1`,\n          [pubkey]\n        );\n\n        if (result.rows.length &gt; 0) {\n          return JSON.parse(result.rows[0].content);\n        }\n\n        return null;\n      }\n    );\n  }\n\n  async updateProfile(pubkey, profile) {\n    await this.cache.set(`profile:${pubkey}`, profile, this.profileTTL);\n  }\n\n  async batchGetProfiles(pubkeys) {\n    // Use Redis MGET for batch retrieval\n    const keys = pubkeys.map(pk =&gt; `profile:${pk}`);\n    const cached = await this.cache.l2Cache.mget(...keys);\n\n    const results = new Map();\n    const missing = [];\n\n    cached.forEach((value, index) =&gt; {\n      const pubkey = pubkeys[index];\n      if (value !== null) {\n        results.set(pubkey, JSON.parse(value));\n      } else {\n        missing.push(pubkey);\n      }\n    });\n\n    // Fetch missing profiles from database\n    if (missing.length &gt; 0) {\n      const dbResults = await db.query(\n        `SELECT DISTINCT ON (pubkey) pubkey, content\n         FROM events \n         WHERE pubkey = ANY($1) AND kind = 0 \n         ORDER BY pubkey, created_at DESC`,\n        [missing]\n      );\n\n      for (const row of dbResults.rows) {\n        const profile = JSON.parse(row.content);\n        results.set(row.pubkey, profile);\n\n        // Cache for next time\n        await this.cache.set(\n          `profile:${row.pubkey}`,\n          profile,\n          this.profileTTL\n        );\n      }\n    }\n\n    return results;\n  }\n}\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#83-database-optimization","title":"8.3 Database Optimization","text":""},{"location":"modules/module-08-scaling-performance/#query-performance-tuning","title":"Query Performance Tuning","text":"<pre><code>-- Analyze query performance\nEXPLAIN ANALYZE\nSELECT * FROM events\nWHERE kind = 1\n  AND created_at &gt; extract(epoch from now() - interval '24 hours')\nORDER BY created_at DESC\nLIMIT 100;\n\n-- Create covering index for common queries\nCREATE INDEX CONCURRENTLY idx_events_kind_created_covering\nON events (kind, created_at DESC)\nINCLUDE (id, pubkey, tags, content, sig);\n\n-- Partition large tables by time\nCREATE TABLE events_2024_01 PARTITION OF events\nFOR VALUES FROM ('2024-01-01') TO ('2024-02-01');\n\nCREATE TABLE events_2024_02 PARTITION OF events\nFOR VALUES FROM ('2024-02-01') TO ('2024-03-01');\n\n-- Auto-vacuum tuning for high-write tables\nALTER TABLE events SET (\n  autovacuum_vacuum_scale_factor = 0.01,\n  autovacuum_analyze_scale_factor = 0.01,\n  autovacuum_vacuum_cost_delay = 10\n);\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#connection-pooling","title":"Connection Pooling","text":"<pre><code>class OptimizedConnectionPool {\n  constructor(config) {\n    const { Pool } = require('pg');\n\n    // Master pool for writes\n    this.masterPool = new Pool({\n      host: config.master.host,\n      port: config.master.port,\n      database: config.database,\n      user: config.user,\n      password: config.password,\n\n      // Optimized pool settings\n      max: 20,                      // Max connections\n      min: 5,                       // Min idle connections\n      idleTimeoutMillis: 30000,     // Close idle after 30s\n      connectionTimeoutMillis: 2000, // Fail fast\n      maxUses: 7500,                // Recycle after 7500 uses\n\n      // Statement timeout\n      statement_timeout: 10000,     // 10s max query time\n\n      // Application name for monitoring\n      application_name: 'nostr_relay_master'\n    });\n\n    // Replica pools for reads (round-robin)\n    this.replicaPools = config.replicas.map((replica, i) =&gt; new Pool({\n      host: replica.host,\n      port: replica.port,\n      database: config.database,\n      user: config.user,\n      password: config.password,\n\n      max: 50,                      // More connections for reads\n      min: 10,\n      idleTimeoutMillis: 30000,\n      connectionTimeoutMillis: 2000,\n      maxUses: 7500,\n      statement_timeout: 10000,\n      application_name: `nostr_relay_replica_${i + 1}`\n    }));\n\n    this.replicaIndex = 0;\n  }\n\n  async write(query, params) {\n    const client = await this.masterPool.connect();\n    try {\n      return await client.query(query, params);\n    } finally {\n      client.release();\n    }\n  }\n\n  async read(query, params) {\n    // Round-robin load balancing across replicas\n    const pool = this.replicaPools[this.replicaIndex];\n    this.replicaIndex = (this.replicaIndex + 1) % this.replicaPools.length;\n\n    const client = await pool.connect();\n    try {\n      return await client.query(query, params);\n    } finally {\n      client.release();\n    }\n  }\n\n  async transaction(callback) {\n    const client = await this.masterPool.connect();\n    try {\n      await client.query('BEGIN');\n      const result = await callback(client);\n      await client.query('COMMIT');\n      return result;\n    } catch (error) {\n      await client.query('ROLLBACK');\n      throw error;\n    } finally {\n      client.release();\n    }\n  }\n\n  async close() {\n    await this.masterPool.end();\n    await Promise.all(this.replicaPools.map(pool =&gt; pool.end()));\n  }\n}\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#materialized-views-for-analytics","title":"Materialized Views for Analytics","text":"<pre><code>-- Materialized view for popular events (refreshed periodically)\nCREATE MATERIALIZED VIEW popular_events AS\nSELECT \n  e.id,\n  e.pubkey,\n  e.content,\n  e.created_at,\n  COUNT(r.id) as reaction_count\nFROM events e\nLEFT JOIN events r ON r.kind = 7 AND r.tags @&gt; jsonb_build_array(jsonb_build_array('e', e.id))\nWHERE e.kind = 1\n  AND e.created_at &gt; extract(epoch from now() - interval '7 days')\nGROUP BY e.id, e.pubkey, e.content, e.created_at\nHAVING COUNT(r.id) &gt; 10\nORDER BY reaction_count DESC\nLIMIT 1000;\n\nCREATE INDEX idx_popular_events_reactions ON popular_events(reaction_count DESC);\n\n-- Refresh strategy (can be done in background)\nREFRESH MATERIALIZED VIEW CONCURRENTLY popular_events;\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#84-cdn-style-event-distribution","title":"8.4 CDN-Style Event Distribution","text":""},{"location":"modules/module-08-scaling-performance/#geographic-distribution","title":"Geographic Distribution","text":"<pre><code>class GeographicRelayCluster {\n  constructor(config) {\n    this.regions = new Map();\n\n    // Define regional relay clusters\n    config.regions.forEach(region =&gt; {\n      this.regions.set(region.name, {\n        name: region.name,\n        location: region.location,\n        relays: region.relays,\n        latency: region.latency\n      });\n    });\n  }\n\n  async routeRequest(clientIP) {\n    // Use GeoIP to determine client location\n    const clientLocation = await this.getGeoLocation(clientIP);\n\n    // Find nearest region\n    const nearestRegion = this.findNearestRegion(clientLocation);\n\n    // Return relay URLs for that region\n    return this.regions.get(nearestRegion).relays;\n  }\n\n  findNearestRegion(clientLocation) {\n    let nearest = null;\n    let minDistance = Infinity;\n\n    for (const [name, region] of this.regions) {\n      const distance = this.calculateDistance(\n        clientLocation,\n        region.location\n      );\n\n      if (distance &lt; minDistance) {\n        minDistance = distance;\n        nearest = name;\n      }\n    }\n\n    return nearest;\n  }\n\n  calculateDistance(loc1, loc2) {\n    // Haversine formula for geographic distance\n    const R = 6371; // Earth's radius in km\n    const dLat = this.toRad(loc2.lat - loc1.lat);\n    const dLon = this.toRad(loc2.lon - loc1.lon);\n\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n              Math.cos(this.toRad(loc1.lat)) * Math.cos(this.toRad(loc2.lat)) *\n              Math.sin(dLon / 2) * Math.sin(dLon / 2);\n\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  toRad(degrees) {\n    return degrees * (Math.PI / 180);\n  }\n}\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#event-replication-strategy","title":"Event Replication Strategy","text":"<pre><code>class EventReplicationManager {\n  constructor(config) {\n    this.localRegion = config.localRegion;\n    this.remoteRegions = config.remoteRegions;\n    this.replicationQueue = new Queue('event_replication');\n  }\n\n  async replicateEvent(event) {\n    // Store locally first (fastest)\n    await this.storeLocally(event);\n\n    // Queue replication to other regions\n    await this.queueReplication(event);\n  }\n\n  async storeLocally(event) {\n    // Store in local database\n    await db.query(\n      'INSERT INTO events (...) VALUES (...)',\n      [event.id, event.pubkey, /* ... */]\n    );\n\n    // Cache locally\n    await cache.set(`event:${event.id}`, event);\n  }\n\n  async queueReplication(event) {\n    // Add to replication queue for each remote region\n    for (const region of this.remoteRegions) {\n      await this.replicationQueue.add({\n        event,\n        targetRegion: region,\n        priority: this.getReplicationPriority(event)\n      });\n    }\n  }\n\n  getReplicationPriority(event) {\n    // Higher priority for important event types\n    const priorityByKind = {\n      0: 10,   // Metadata - high priority\n      1: 5,    // Notes - medium priority\n      3: 10,   // Contacts - high priority\n      7: 2,    // Reactions - lower priority\n    };\n\n    return priorityByKind[event.kind] || 5;\n  }\n\n  async processReplicationQueue() {\n    this.replicationQueue.process(async (job) =&gt; {\n      const { event, targetRegion } = job.data;\n\n      try {\n        // Send event to target region\n        await this.sendToRegion(event, targetRegion);\n      } catch (error) {\n        // Retry with exponential backoff\n        if (job.attemptsMade &lt; 5) {\n          throw error; // Will retry\n        }\n\n        console.error(`Failed to replicate to ${targetRegion}:`, error);\n      }\n    });\n  }\n\n  async sendToRegion(event, region) {\n    const response = await fetch(`${region.apiEndpoint}/replicate`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-Replication-Token': region.token\n      },\n      body: JSON.stringify(event)\n    });\n\n    if (!response.ok) {\n      throw new Error(`Replication failed: ${response.statusText}`);\n    }\n  }\n}\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#85-performance-monitoring","title":"8.5 Performance Monitoring","text":""},{"location":"modules/module-08-scaling-performance/#real-time-metrics-dashboard","title":"Real-Time Metrics Dashboard","text":"<pre><code>class PerformanceMonitor {\n  constructor(prometheus) {\n    this.metrics = {\n      // Latency metrics\n      queryLatency: new prometheus.Histogram({\n        name: 'nostr_query_latency_seconds',\n        help: 'Query execution latency',\n        labelNames: ['operation', 'cache_hit'],\n        buckets: [0.001, 0.005, 0.01, 0.025, 0.05, 0.1, 0.25, 0.5, 1, 2.5]\n      }),\n\n      // Throughput metrics\n      eventsPerSecond: new prometheus.Gauge({\n        name: 'nostr_events_per_second',\n        help: 'Events processed per second'\n      }),\n\n      queriesPerSecond: new prometheus.Gauge({\n        name: 'nostr_queries_per_second',\n        help: 'Queries executed per second'\n      }),\n\n      // Cache metrics\n      cacheHitRate: new prometheus.Gauge({\n        name: 'nostr_cache_hit_rate',\n        help: 'Cache hit rate percentage',\n        labelNames: ['layer']\n      }),\n\n      // Database metrics\n      dbConnectionPool: new prometheus.Gauge({\n        name: 'nostr_db_connections',\n        help: 'Database connection pool status',\n        labelNames: ['pool', 'state']\n      }),\n\n      // Resource utilization\n      cpuUtilization: new prometheus.Gauge({\n        name: 'nostr_cpu_utilization_percent',\n        help: 'CPU utilization percentage'\n      }),\n\n      memoryUtilization: new prometheus.Gauge({\n        name: 'nostr_memory_utilization_bytes',\n        help: 'Memory utilization in bytes',\n        labelNames: ['type']\n      }),\n\n      // WebSocket metrics\n      activeWebSockets: new prometheus.Gauge({\n        name: 'nostr_active_websockets',\n        help: 'Number of active WebSocket connections'\n      }),\n\n      websocketMessageRate: new prometheus.Counter({\n        name: 'nostr_websocket_messages_total',\n        help: 'Total WebSocket messages',\n        labelNames: ['direction', 'type']\n      })\n    };\n\n    this.startCollection();\n  }\n\n  startCollection() {\n    // Collect metrics every second\n    setInterval(() =&gt; {\n      this.collectSystemMetrics();\n      this.collectCacheMetrics();\n      this.collectDatabaseMetrics();\n    }, 1000);\n  }\n\n  collectSystemMetrics() {\n    const usage = process.cpuUsage();\n    const mem = process.memoryUsage();\n\n    this.metrics.cpuUtilization.set(\n      (usage.user + usage.system) / 1000000\n    );\n\n    this.metrics.memoryUtilization.set(\n      { type: 'heap_used' },\n      mem.heapUsed\n    );\n\n    this.metrics.memoryUtilization.set(\n      { type: 'rss' },\n      mem.rss\n    );\n  }\n\n  async collectCacheMetrics() {\n    // L1 cache stats\n    const l1Stats = cache.l1Cache.size / cache.l1Cache.max;\n    this.metrics.cacheHitRate.set({ layer: 'L1' }, l1Stats * 100);\n\n    // L2 cache stats (Redis)\n    const info = await cache.l2Cache.info('stats');\n    const hitRate = this.parseRedisHitRate(info);\n    this.metrics.cacheHitRate.set({ layer: 'L2' }, hitRate);\n  }\n\n  collectDatabaseMetrics() {\n    // Connection pool stats\n    this.metrics.dbConnectionPool.set(\n      { pool: 'master', state: 'total' },\n      dbPool.masterPool.totalCount\n    );\n\n    this.metrics.dbConnectionPool.set(\n      { pool: 'master', state: 'idle' },\n      dbPool.masterPool.idleCount\n    );\n\n    this.metrics.dbConnectionPool.set(\n      { pool: 'master', state: 'waiting' },\n      dbPool.masterPool.waitingCount\n    );\n  }\n\n  recordQuery(operation, duration, cacheHit) {\n    this.metrics.queryLatency.observe(\n      { operation, cache_hit: cacheHit ? 'true' : 'false' },\n      duration\n    );\n  }\n\n  parseRedisHitRate(info) {\n    const match = info.match(/keyspace_hits:(\\d+).*keyspace_misses:(\\d+)/s);\n    if (match) {\n      const hits = parseInt(match[1]);\n      const misses = parseInt(match[2]);\n      return (hits / (hits + misses)) * 100;\n    }\n    return 0;\n  }\n}\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#alerting-rules","title":"Alerting Rules","text":"<pre><code># prometheus-alerts.yml\ngroups:\n  - name: nostr_relay_alerts\n    interval: 30s\n    rules:\n      # High query latency\n      - alert: HighQueryLatency\n        expr: histogram_quantile(0.95, nostr_query_latency_seconds) &gt; 1\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High query latency detected\"\n          description: \"95th percentile query latency is above 1s\"\n\n      # Low cache hit rate\n      - alert: LowCacheHitRate\n        expr: nostr_cache_hit_rate{layer=\"L2\"} &lt; 70\n        for: 10m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"Low cache hit rate\"\n          description: \"L2 cache hit rate is below 70%\"\n\n      # Database connection pool exhaustion\n      - alert: DatabasePoolExhaustion\n        expr: nostr_db_connections{pool=\"master\",state=\"waiting\"} &gt; 5\n        for: 2m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"Database connection pool exhausted\"\n          description: \"More than 5 connections waiting\"\n\n      # High CPU utilization\n      - alert: HighCPUUtilization\n        expr: nostr_cpu_utilization_percent &gt; 80\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High CPU utilization\"\n          description: \"CPU utilization is above 80%\"\n\n      # Memory pressure\n      - alert: HighMemoryUsage\n        expr: nostr_memory_utilization_bytes{type=\"rss\"} &gt; 8e9\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High memory usage\"\n          description: \"Memory usage is above 8GB\"\n\n      # Event processing rate drop\n      - alert: LowEventProcessingRate\n        expr: rate(nostr_events_received_total[5m]) &lt; 10\n        for: 10m\n        labels:\n          severity: info\n        annotations:\n          summary: \"Low event processing rate\"\n          description: \"Events per second dropped below 10\"\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#86-load-testing-benchmarking","title":"8.6 Load Testing &amp; Benchmarking","text":""},{"location":"modules/module-08-scaling-performance/#performance-testing-suite","title":"Performance Testing Suite","text":"<pre><code>const WebSocket = require('ws');\nconst { performance } = require('perf_hooks');\n\nclass RelayLoadTester {\n  constructor(config) {\n    this.relayUrl = config.relayUrl;\n    this.concurrentConnections = config.concurrentConnections || 1000;\n    this.testDuration = config.testDuration || 60000; // 1 minute\n    this.eventRate = config.eventRate || 100; // events per second\n  }\n\n  async runLoadTest() {\n    console.log(`Starting load test:`);\n    console.log(`- Relay: ${this.relayUrl}`);\n    console.log(`- Connections: ${this.concurrentConnections}`);\n    console.log(`- Duration: ${this.testDuration}ms`);\n    console.log(`- Event rate: ${this.eventRate}/s`);\n\n    const results = {\n      connections: {\n        attempted: 0,\n        successful: 0,\n        failed: 0\n      },\n      events: {\n        sent: 0,\n        accepted: 0,\n        rejected: 0\n      },\n      queries: {\n        sent: 0,\n        responses: 0,\n        avgLatency: 0\n      },\n      errors: []\n    };\n\n    // Create connections\n    const connections = await this.createConnections(results);\n\n    // Run test\n    await this.runTest(connections, results);\n\n    // Cleanup\n    connections.forEach(ws =&gt; ws.close());\n\n    return this.generateReport(results);\n  }\n\n  async createConnections(results) {\n    const connections = [];\n\n    for (let i = 0; i &lt; this.concurrentConnections; i++) {\n      try {\n        const ws = new WebSocket(this.relayUrl);\n\n        await new Promise((resolve, reject) =&gt; {\n          ws.on('open', () =&gt; {\n            results.connections.successful++;\n            resolve();\n          });\n\n          ws.on('error', (error) =&gt; {\n            results.connections.failed++;\n            results.errors.push(error.message);\n            reject(error);\n          });\n\n          setTimeout(() =&gt; reject(new Error('Connection timeout')), 5000);\n        });\n\n        connections.push(ws);\n        results.connections.attempted++;\n      } catch (error) {\n        // Continue with available connections\n      }\n    }\n\n    return connections;\n  }\n\n  async runTest(connections, results) {\n    const startTime = performance.now();\n    const endTime = startTime + this.testDuration;\n\n    // Event publishing workers\n    const publishInterval = 1000 / this.eventRate;\n    const publishTimer = setInterval(() =&gt; {\n      if (performance.now() &gt; endTime) {\n        clearInterval(publishTimer);\n        return;\n      }\n\n      const ws = connections[Math.floor(Math.random() * connections.length)];\n      this.publishTestEvent(ws, results);\n    }, publishInterval);\n\n    // Query workers\n    const queryInterval = setInterval(() =&gt; {\n      if (performance.now() &gt; endTime) {\n        clearInterval(queryInterval);\n        return;\n      }\n\n      const ws = connections[Math.floor(Math.random() * connections.length)];\n      this.sendTestQuery(ws, results);\n    }, 100);\n\n    // Wait for test duration\n    await new Promise(resolve =&gt; setTimeout(resolve, this.testDuration));\n\n    clearInterval(publishTimer);\n    clearInterval(queryInterval);\n  }\n\n  publishTestEvent(ws, results) {\n    const event = this.generateTestEvent();\n    const startTime = performance.now();\n\n    ws.send(JSON.stringify(['EVENT', event]));\n    results.events.sent++;\n\n    // Listen for OK response\n    const onMessage = (data) =&gt; {\n      const msg = JSON.parse(data);\n      if (msg[0] === 'OK' &amp;&amp; msg[1] === event.id) {\n        const latency = performance.now() - startTime;\n\n        if (msg[2] === true) {\n          results.events.accepted++;\n        } else {\n          results.events.rejected++;\n        }\n\n        ws.off('message', onMessage);\n      }\n    };\n\n    ws.on('message', onMessage);\n  }\n\n  sendTestQuery(ws, results) {\n    const subId = `test_${Date.now()}_${Math.random()}`;\n    const startTime = performance.now();\n    let eventCount = 0;\n\n    ws.send(JSON.stringify(['REQ', subId, { kinds: [1], limit: 10 }]));\n    results.queries.sent++;\n\n    const onMessage = (data) =&gt; {\n      const msg = JSON.parse(data);\n\n      if (msg[0] === 'EVENT' &amp;&amp; msg[1] === subId) {\n        eventCount++;\n      }\n\n      if (msg[0] === 'EOSE' &amp;&amp; msg[1] === subId) {\n        const latency = performance.now() - startTime;\n        results.queries.responses++;\n        results.queries.avgLatency = \n          (results.queries.avgLatency * (results.queries.responses - 1) + latency) /\n          results.queries.responses;\n\n        // Close subscription\n        ws.send(JSON.stringify(['CLOSE', subId]));\n        ws.off('message', onMessage);\n      }\n    };\n\n    ws.on('message', onMessage);\n  }\n\n  generateTestEvent() {\n    const { generatePrivateKey, getPublicKey, finishEvent } = require('nostr-tools');\n\n    const privateKey = generatePrivateKey();\n    const publicKey = getPublicKey(privateKey);\n\n    return finishEvent({\n      kind: 1,\n      created_at: Math.floor(Date.now() / 1000),\n      tags: [],\n      content: `Load test event ${Date.now()}`\n    }, privateKey);\n  }\n\n  generateReport(results) {\n    const connectionSuccessRate = \n      (results.connections.successful / results.connections.attempted) * 100;\n\n    const eventAcceptRate = \n      (results.events.accepted / results.events.sent) * 100;\n\n    return {\n      summary: {\n        connectionSuccessRate: connectionSuccessRate.toFixed(2) + '%',\n        totalEventsSent: results.events.sent,\n        eventAcceptRate: eventAcceptRate.toFixed(2) + '%',\n        averageQueryLatency: results.queries.avgLatency.toFixed(2) + 'ms',\n        queriesPerSecond: (results.queries.sent / (this.testDuration / 1000)).toFixed(2)\n      },\n      details: results,\n      recommendations: this.generateRecommendations(results)\n    };\n  }\n\n  generateRecommendations(results) {\n    const recommendations = [];\n\n    if (results.connections.successful / results.connections.attempted &lt; 0.95) {\n      recommendations.push('Consider increasing max connections or connection timeout');\n    }\n\n    if (results.events.accepted / results.events.sent &lt; 0.95) {\n      recommendations.push('High event rejection rate - check validation rules');\n    }\n\n    if (results.queries.avgLatency &gt; 100) {\n      recommendations.push('High query latency - optimize database indexes or add caching');\n    }\n\n    return recommendations;\n  }\n}\n\n// Usage\nconst tester = new RelayLoadTester({\n  relayUrl: 'ws://localhost:8080',\n  concurrentConnections: 1000,\n  testDuration: 60000,\n  eventRate: 100\n});\n\ntester.runLoadTest().then(report =&gt; {\n  console.log('\\nLoad Test Report:');\n  console.log(JSON.stringify(report, null, 2));\n});\n</code></pre>"},{"location":"modules/module-08-scaling-performance/#87-practical-exercises","title":"8.7 Practical Exercises","text":""},{"location":"modules/module-08-scaling-performance/#exercise-1-implement-horizontal-scaling","title":"Exercise 1: Implement Horizontal Scaling","text":"<p>Set up a multi-instance relay deployment: 1. Deploy 3 relay instances 2. Configure Redis Pub/Sub for event broadcasting 3. Set up HAProxy load balancer 4. Test failover scenarios</p>"},{"location":"modules/module-08-scaling-performance/#exercise-2-build-multi-layer-cache","title":"Exercise 2: Build Multi-Layer Cache","text":"<p>Implement comprehensive caching: 1. Set up LRU in-memory cache (L1) 2. Configure Redis cluster (L2) 3. Implement cache-aside pattern 4. Measure cache hit rates</p>"},{"location":"modules/module-08-scaling-performance/#exercise-3-optimize-database-performance","title":"Exercise 3: Optimize Database Performance","text":"<p>Improve database efficiency: 1. Analyze slow queries with EXPLAIN 2. Add covering indexes 3. Implement read replicas 4. Set up connection pooling</p>"},{"location":"modules/module-08-scaling-performance/#exercise-4-load-testing","title":"Exercise 4: Load Testing","text":"<p>Conduct performance testing: 1. Run load test with 1000 concurrent connections 2. Measure latency at different load levels 3. Identify bottlenecks 4. Optimize based on results</p>"},{"location":"modules/module-08-scaling-performance/#exercise-5-geographic-distribution","title":"Exercise 5: Geographic Distribution","text":"<p>Set up multi-region deployment: 1. Deploy relays in 3 geographic regions 2. Implement geo-routing 3. Configure event replication 4. Measure cross-region latency</p>"},{"location":"modules/module-08-scaling-performance/#module-8-quiz","title":"\ud83d\udcdd Module 8 Quiz","text":"<ol> <li> <p>What is the primary benefit of stateless relay design? Answer    Stateless design allows horizontal scaling by removing dependency on local state. Any instance can handle any request, enabling load balancing and easy addition/removal of instances without session migration.     </p> </li> <li> <p>Why use multiple cache layers (L1, L2, L3)? Answer    Each layer trades off speed vs capacity: L1 (in-memory) is fastest but smallest, L2 (Redis) is fast and shared across instances, L3 (database) is slower but persistent. Multi-layer caching maximizes hit rate while minimizing latency.     </p> </li> <li> <p>What's the advantage of read replicas over just scaling the master database? Answer    Read replicas offload read queries from the master, allowing the master to focus on writes. This provides better write performance, horizontal scaling for reads, and geographic distribution for low-latency reads.     </p> </li> <li> <p>How does event replication across regions improve performance? Answer    Regional replication reduces latency by serving events from geographically closer servers. It also provides redundancy and allows users to query their local region without waiting for cross-region data transfer.     </p> </li> <li> <p>What metrics are most important for identifying performance bottlenecks? Answer    Query latency (p95, p99), cache hit rates, database connection pool utilization, CPU/memory usage, and events/queries per second. These reveal whether bottlenecks are in database, cache, compute, or network.     </p> </li> </ol>"},{"location":"modules/module-08-scaling-performance/#module-8-checkpoint","title":"\ud83c\udfaf Module 8 Checkpoint","text":"<p>Before moving to Module 9, ensure you have:</p> <ul> <li>[ ] Deployed a horizontally scaled relay cluster</li> <li>[ ] Implemented multi-layer caching with measurable hit rates</li> <li>[ ] Set up database read replicas and connection pooling</li> <li>[ ] Configured load balancing with failover</li> <li>[ ] Implemented comprehensive performance monitoring</li> <li>[ ] Conducted load testing and optimized bottlenecks</li> <li>[ ] Documented scaling architecture and runbooks</li> <li>[ ] Achieved target performance metrics (p95 latency &lt; 100ms)</li> </ul>"},{"location":"modules/module-08-scaling-performance/#additional-resources","title":"\ud83d\udcda Additional Resources","text":"<ul> <li>PostgreSQL Replication</li> <li>Redis Cluster Tutorial</li> <li>HAProxy Configuration Guide</li> <li>Prometheus Best Practices</li> <li>Database Connection Pooling</li> <li>Load Testing Tools</li> <li>CDN Architecture Patterns</li> </ul>"},{"location":"modules/module-08-scaling-performance/#community-discussion","title":"\ud83d\udcac Community Discussion","text":"<p>Join our Discord to discuss Module 8: - Share your scaling strategies and results - Get help with performance optimization - Discuss load testing methodologies - Collaborate on benchmarking</p> <p>Congratulations!</p> <p>You've mastered scaling and performance optimization for Nostr relays! You can now handle millions of users with optimal performance. Ready for Module 9: Security Best Practices!</p> <p>Continue to Module 9: Security Best Practices \u2192</p>"},{"location":"tutorials/relay-communication/","title":"Relay Communication","text":"<p>What You'll Learn</p> <p>In this tutorial, you'll master:</p> <ul> <li>How Nostr relays work and their role in the network</li> <li>WebSocket communication patterns</li> <li>Subscription filters and real-time updates</li> <li>Publishing events to multiple relays</li> <li>Handling connection failures and retries</li> <li>Relay selection strategies</li> </ul> <p>Prerequisites</p> <ul> <li>Understanding of Nostr events</li> <li>Basic WebSocket knowledge</li> <li>JavaScript async/await patterns</li> </ul>"},{"location":"tutorials/relay-communication/#understanding-relays","title":"Understanding Relays","text":"<p>Relays are the backbone of the Nostr network. They're simple servers that:</p> <ul> <li>Store events submitted by clients</li> <li>Serve events to clients based on filters</li> <li>Relay events between clients in real-time</li> <li>Maintain no user accounts - just events</li> </ul> <p>Think of relays as smart databases that speak a common protocol.</p>"},{"location":"tutorials/relay-communication/#the-relay-protocol","title":"The Relay Protocol","text":"<p>Nostr uses WebSockets for real-time communication between clients and relays. All messages are JSON arrays with specific formats:</p>"},{"location":"tutorials/relay-communication/#client-to-relay-messages","title":"Client to Relay Messages","text":"Message Type Format Purpose <code>EVENT</code> <code>[\"EVENT\", &lt;event&gt;]</code> Publish an event <code>REQ</code> <code>[\"REQ\", &lt;sub_id&gt;, &lt;filters&gt;...]</code> Subscribe to events <code>CLOSE</code> <code>[\"CLOSE\", &lt;sub_id&gt;]</code> Close a subscription <code>AUTH</code> <code>[\"AUTH\", &lt;event&gt;]</code> Authenticate with relay <code>COUNT</code> <code>[\"COUNT\", &lt;sub_id&gt;, &lt;filters&gt;...]</code> Count matching events"},{"location":"tutorials/relay-communication/#relay-to-client-messages","title":"Relay to Client Messages","text":"Message Type Format Purpose <code>EVENT</code> <code>[\"EVENT\", &lt;sub_id&gt;, &lt;event&gt;]</code> Send event to client <code>EOSE</code> <code>[\"EOSE\", &lt;sub_id&gt;]</code> End of stored events <code>OK</code> <code>[\"OK\", &lt;event_id&gt;, &lt;true\\|false&gt;, &lt;message&gt;]</code> Event publish result <code>NOTICE</code> <code>[\"NOTICE\", &lt;message&gt;]</code> Human-readable message <code>CLOSED</code> <code>[\"CLOSED\", &lt;sub_id&gt;, &lt;message&gt;]</code> Subscription closed <code>AUTH</code> <code>[\"AUTH\", &lt;challenge&gt;]</code> Authentication challenge <code>COUNT</code> <code>[\"COUNT\", &lt;sub_id&gt;, &lt;count&gt;]</code> Event count response"},{"location":"tutorials/relay-communication/#connecting-to-relays","title":"Connecting to Relays","text":"<p>Let's start with a basic relay connection:</p> Basic Connection <pre><code>import { relayInit } from 'nostr-tools'\n\nasync function connectToRelay(url) {\n    const relay = relayInit(url)\n\n    relay.on('connect', () =&gt; {\n        console.log(`Connected to ${url}`)\n    })\n\n    relay.on('error', () =&gt; {\n        console.error(`Failed to connect to ${url}`)\n    })\n\n    relay.on('disconnect', () =&gt; {\n        console.log(`Disconnected from ${url}`)\n    })\n\n    try {\n        await relay.connect()\n        return relay\n    } catch (error) {\n        console.error('Connection failed:', error)\n        throw error\n    }\n}\n\n// Usage\nconst relay = await connectToRelay('wss://relay.damus.io')\n</code></pre>"},{"location":"tutorials/relay-communication/#best-practices","title":"Best Practices","text":"<p>Relay Communication Best Practices</p> <ol> <li>Use Multiple Relays: Never rely on a single relay</li> <li>Handle Failures Gracefully: Always have fallback mechanisms</li> <li>Monitor Health: Track relay performance and switch when needed</li> <li>Deduplicate Events: Handle the same event from multiple relays</li> <li>Limit Subscriptions: Don't overload relays with too many filters</li> <li>Close Unused Subscriptions: Clean up when done</li> <li>Respect Rate Limits: Check relay info for limitations</li> </ol> <p>Common Pitfalls</p> <ul> <li>Not handling disconnections: Relays can go offline</li> <li>Forgetting to unsubscribe: Can lead to memory leaks</li> <li>Too many concurrent subscriptions: Can overwhelm clients</li> <li>Ignoring relay limitations: Check max_subscriptions and other limits</li> <li>Not validating events: Always verify signatures and format</li> </ul>"},{"location":"tutorials/relay-communication/#next-steps","title":"Next Steps","text":"<p>Now you can explore:</p> <ul> <li>Understanding Events</li> </ul>      \u0019\u0010 Previous: Understanding Events"},{"location":"tutorials/simple-client/","title":"Building a Simple Nostr Client","text":"<p>What You'll Build</p> <p>In this tutorial, you'll create a basic Nostr client that can:</p> <ul> <li>Generate and manage cryptographic keys</li> <li>Connect to Nostr relays</li> <li>Publish text notes</li> <li>Subscribe to and display events</li> <li>Handle user interactions</li> </ul> <p>Prerequisites</p> <ul> <li>Basic JavaScript knowledge</li> <li>Understanding of Nostr fundamentals</li> <li>Node.js installed on your system</li> </ul>"},{"location":"tutorials/simple-client/#project-setup","title":"Project Setup","text":"<p>Let's start by creating a new project and installing the necessary dependencies.</p>"},{"location":"tutorials/simple-client/#1-initialize-the-project","title":"1. Initialize the Project","text":"<pre><code>mkdir my-nostr-client\ncd my-nostr-client\nnpm init -y\n</code></pre>"},{"location":"tutorials/simple-client/#2-install-dependencies","title":"2. Install Dependencies","text":"<pre><code>npm install nostr-tools\nnpm install --save-dev vite\n</code></pre>"},{"location":"tutorials/simple-client/#3-create-project-structure","title":"3. Create Project Structure","text":"<pre><code>my-nostr-client/\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 main.js\n\u251c\u2500\u2500 style.css\n\u2514\u2500\u2500 package.json\n</code></pre>"},{"location":"tutorials/simple-client/#building-the-html-interface","title":"Building the HTML Interface","text":"<p>Create a simple but functional interface:</p> index.htmlstyle.css <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;My Nostr Client&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=\"container\"&gt;\n        &lt;header&gt;\n            &lt;h1&gt;\ud83d\ude80 My Nostr Client&lt;/h1&gt;\n            &lt;div class=\"connection-status\" id=\"status\"&gt;Disconnected&lt;/div&gt;\n        &lt;/header&gt;\n\n        &lt;main&gt;\n            &lt;!-- Key Management Section --&gt;\n            &lt;section class=\"key-section\"&gt;\n                &lt;h2&gt;\ud83d\udd11 Your Identity&lt;/h2&gt;\n                &lt;div class=\"key-display\"&gt;\n                    &lt;label&gt;Public Key (npub):&lt;/label&gt;\n                    &lt;input type=\"text\" id=\"pubkey\" readonly&gt;\n                    &lt;button id=\"generate-keys\"&gt;Generate New Keys&lt;/button&gt;\n                &lt;/div&gt;\n            &lt;/section&gt;\n\n            &lt;!-- Compose Section --&gt;\n            &lt;section class=\"compose-section\"&gt;\n                &lt;h2&gt;\u270d\ufe0f Compose Note&lt;/h2&gt;\n                &lt;textarea id=\"note-content\" placeholder=\"What's on your mind?\"&gt;&lt;/textarea&gt;\n                &lt;button id=\"publish-note\"&gt;Publish Note&lt;/button&gt;\n            &lt;/section&gt;\n\n            &lt;!-- Feed Section --&gt;\n            &lt;section class=\"feed-section\"&gt;\n                &lt;h2&gt;\ud83d\udcf0 Global Feed&lt;/h2&gt;\n                &lt;div id=\"feed\"&gt;&lt;/div&gt;\n            &lt;/section&gt;\n        &lt;/main&gt;\n    &lt;/div&gt;\n\n    &lt;script type=\"module\" src=\"main.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nbody {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    min-height: 100vh;\n    color: #333;\n}\n\n.container {\n    max-width: 800px;\n    margin: 0 auto;\n    padding: 20px;\n}\n\nheader {\n    background: white;\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n    margin-bottom: 20px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\nh1 {\n    color: #667eea;\n    font-size: 2rem;\n}\n\n.connection-status {\n    padding: 8px 16px;\n    border-radius: 20px;\n    font-weight: 600;\n    font-size: 0.9rem;\n}\n\n.connection-status.connected {\n    background: #10b981;\n    color: white;\n}\n\n.connection-status.disconnected {\n    background: #ef4444;\n    color: white;\n}\n\nsection {\n    background: white;\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n    margin-bottom: 20px;\n}\n\nh2 {\n    margin-bottom: 15px;\n    color: #374151;\n}\n\n.key-display {\n    display: flex;\n    gap: 10px;\n    align-items: center;\n    flex-wrap: wrap;\n}\n\ninput, textarea {\n    padding: 12px;\n    border: 2px solid #e5e7eb;\n    border-radius: 8px;\n    font-size: 14px;\n    transition: border-color 0.3s;\n}\n\ninput:focus, textarea:focus {\n    outline: none;\n    border-color: #667eea;\n}\n\n#pubkey {\n    flex: 1;\n    min-width: 300px;\n    font-family: monospace;\n    font-size: 12px;\n}\n\n#note-content {\n    width: 100%;\n    min-height: 100px;\n    resize: vertical;\n    margin-bottom: 10px;\n}\n\nbutton {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    padding: 12px 24px;\n    border-radius: 8px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: transform 0.2s, box-shadow 0.2s;\n}\n\nbutton:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n}\n\nbutton:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n}\n\n.note {\n    background: #f9fafb;\n    border: 1px solid #e5e7eb;\n    border-radius: 8px;\n    padding: 15px;\n    margin-bottom: 10px;\n}\n\n.note-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 10px;\n    font-size: 0.9rem;\n    color: #6b7280;\n}\n\n.note-author {\n    font-family: monospace;\n    font-weight: 600;\n}\n\n.note-content {\n    line-height: 1.6;\n    white-space: pre-wrap;\n}\n\n.loading {\n    text-align: center;\n    color: #6b7280;\n    font-style: italic;\n}\n</code></pre>"},{"location":"tutorials/simple-client/#implementing-the-javascript-logic","title":"Implementing the JavaScript Logic","text":"<p>Now let's build the core functionality:</p> main.js <pre><code>import { \n    generatePrivateKey, \n    getPublicKey, \n    finishEvent, \n    relayInit,\n    nip19\n} from 'nostr-tools'\n\nclass NostrClient {\n    constructor() {\n        this.privateKey = null\n        this.publicKey = null\n        this.relays = []\n        this.connectedRelays = new Set()\n\n        this.initializeElements()\n        this.setupEventListeners()\n        this.loadOrGenerateKeys()\n        this.connectToRelays()\n    }\n\n    initializeElements() {\n        this.elements = {\n            status: document.getElementById('status'),\n            pubkey: document.getElementById('pubkey'),\n            generateKeys: document.getElementById('generate-keys'),\n            noteContent: document.getElementById('note-content'),\n            publishNote: document.getElementById('publish-note'),\n            feed: document.getElementById('feed')\n        }\n    }\n\n    setupEventListeners() {\n        this.elements.generateKeys.addEventListener('click', () =&gt; {\n            this.generateNewKeys()\n        })\n\n        this.elements.publishNote.addEventListener('click', () =&gt; {\n            this.publishNote()\n        })\n\n        // Enable publishing with Ctrl+Enter\n        this.elements.noteContent.addEventListener('keydown', (e) =&gt; {\n            if (e.ctrlKey &amp;&amp; e.key === 'Enter') {\n                this.publishNote()\n            }\n        })\n    }\n\n    loadOrGenerateKeys() {\n        // Try to load existing keys from localStorage\n        const savedPrivateKey = localStorage.getItem('nostr-private-key')\n\n        if (savedPrivateKey) {\n            this.privateKey = savedPrivateKey\n            this.publicKey = getPublicKey(savedPrivateKey)\n        } else {\n            this.generateNewKeys()\n        }\n\n        this.updateKeyDisplay()\n    }\n\n    generateNewKeys() {\n        this.privateKey = generatePrivateKey()\n        this.publicKey = getPublicKey(this.privateKey)\n\n        // Save to localStorage\n        localStorage.setItem('nostr-private-key', this.privateKey)\n\n        this.updateKeyDisplay()\n        this.showNotification('New keys generated! \ud83c\udf89')\n    }\n\n    updateKeyDisplay() {\n        if (this.publicKey) {\n            const npub = nip19.npubEncode(this.publicKey)\n            this.elements.pubkey.value = npub\n        }\n    }\n\n    async connectToRelays() {\n        const relayUrls = [\n            'wss://relay.damus.io',\n            'wss://nos.lol',\n            'wss://relay.snort.social'\n        ]\n\n        this.updateStatus('Connecting...')\n\n        for (const url of relayUrls) {\n            try {\n                const relay = relayInit(url)\n\n                relay.on('connect', () =&gt; {\n                    console.log(`Connected to ${url}`)\n                    this.connectedRelays.add(url)\n                    this.updateConnectionStatus()\n                    this.subscribeToFeed(relay)\n                })\n\n                relay.on('error', () =&gt; {\n                    console.log(`Failed to connect to ${url}`)\n                    this.connectedRelays.delete(url)\n                    this.updateConnectionStatus()\n                })\n\n                await relay.connect()\n                this.relays.push(relay)\n\n            } catch (error) {\n                console.error(`Error connecting to ${url}:`, error)\n            }\n        }\n    }\n\n    updateConnectionStatus() {\n        const connectedCount = this.connectedRelays.size\n        if (connectedCount &gt; 0) {\n            this.updateStatus(`Connected to ${connectedCount} relays`, 'connected')\n        } else {\n            this.updateStatus('Disconnected', 'disconnected')\n        }\n    }\n\n    updateStatus(message, className = '') {\n        this.elements.status.textContent = message\n        this.elements.status.className = `connection-status ${className}`\n    }\n\n    subscribeToFeed(relay) {\n        const sub = relay.sub([\n            {\n                kinds: [1], // Text notes\n                limit: 20\n            }\n        ])\n\n        sub.on('event', (event) =&gt; {\n            this.addEventToFeed(event)\n        })\n    }\n\n    addEventToFeed(event) {\n        const noteElement = this.createNoteElement(event)\n\n        // Add to top of feed\n        if (this.elements.feed.firstChild) {\n            this.elements.feed.insertBefore(noteElement, this.elements.feed.firstChild)\n        } else {\n            this.elements.feed.appendChild(noteElement)\n        }\n\n        // Limit feed to 50 notes\n        while (this.elements.feed.children.length &gt; 50) {\n            this.elements.feed.removeChild(this.elements.feed.lastChild)\n        }\n    }\n\n    createNoteElement(event) {\n        const noteDiv = document.createElement('div')\n        noteDiv.className = 'note'\n\n        const date = new Date(event.created_at * 1000)\n        const timeString = date.toLocaleString()\n\n        // Truncate public key for display\n        const shortPubkey = event.pubkey.slice(0, 8) + '...' + event.pubkey.slice(-8)\n\n        noteDiv.innerHTML = `\n            &lt;div class=\"note-header\"&gt;\n                &lt;span class=\"note-author\"&gt;${shortPubkey}&lt;/span&gt;\n                &lt;span class=\"note-time\"&gt;${timeString}&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;div class=\"note-content\"&gt;${this.escapeHtml(event.content)}&lt;/div&gt;\n        `\n\n        return noteDiv\n    }\n\n    escapeHtml(text) {\n        const div = document.createElement('div')\n        div.textContent = text\n        return div.innerHTML\n    }\n\n    async publishNote() {\n        const content = this.elements.noteContent.value.trim()\n\n        if (!content) {\n            this.showNotification('Please enter some content!', 'error')\n            return\n        }\n\n        if (this.connectedRelays.size === 0) {\n            this.showNotification('Not connected to any relays!', 'error')\n            return\n        }\n\n        try {\n            this.elements.publishNote.disabled = true\n            this.elements.publishNote.textContent = 'Publishing...'\n\n            const event = finishEvent({\n                kind: 1,\n                created_at: Math.floor(Date.now() / 1000),\n                tags: [],\n                content: content,\n            }, this.privateKey)\n\n            // Publish to all connected relays\n            const publishPromises = this.relays.map(relay =&gt; {\n                if (relay.status === 1) { // Connected\n                    return relay.publish(event)\n                }\n            })\n\n            await Promise.allSettled(publishPromises)\n\n            this.elements.noteContent.value = ''\n            this.showNotification('Note published! \ud83c\udf89')\n\n        } catch (error) {\n            console.error('Error publishing note:', error)\n            this.showNotification('Failed to publish note', 'error')\n        } finally {\n            this.elements.publishNote.disabled = false\n            this.elements.publishNote.textContent = 'Publish Note'\n        }\n    }\n\n    showNotification(message, type = 'success') {\n        // Create notification element\n        const notification = document.createElement('div')\n        notification.className = `notification ${type}`\n        notification.textContent = message\n\n        // Style the notification\n        Object.assign(notification.style, {\n            position: 'fixed',\n            top: '20px',\n            right: '20px',\n            padding: '12px 20px',\n            borderRadius: '8px',\n            color: 'white',\n            fontWeight: '600',\n            zIndex: '1000',\n            transform: 'translateX(100%)',\n            transition: 'transform 0.3s ease'\n        })\n\n        if (type === 'error') {\n            notification.style.background = '#ef4444'\n        } else {\n            notification.style.background = '#10b981'\n        }\n\n        document.body.appendChild(notification)\n\n        // Animate in\n        setTimeout(() =&gt; {\n            notification.style.transform = 'translateX(0)'\n        }, 100)\n\n        // Remove after 3 seconds\n        setTimeout(() =&gt; {\n            notification.style.transform = 'translateX(100%)'\n            setTimeout(() =&gt; {\n                document.body.removeChild(notification)\n            }, 300)\n        }, 3000)\n    }\n}\n\n// Initialize the client when the page loads\ndocument.addEventListener('DOMContentLoaded', () =&gt; {\n    new NostrClient()\n})\n</code></pre>"},{"location":"tutorials/simple-client/#adding-development-scripts","title":"Adding Development Scripts","text":"<p>Update your <code>package.json</code> to include development scripts:</p> <pre><code>{\n  \"name\": \"my-nostr-client\",\n  \"version\": \"1.0.0\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"vite build\",\n    \"preview\": \"vite preview\"\n  },\n  \"dependencies\": {\n    \"nostr-tools\": \"^1.17.0\"\n  },\n  \"devDependencies\": {\n    \"vite\": \"^4.4.0\"\n  }\n}\n</code></pre>"},{"location":"tutorials/simple-client/#running-your-client","title":"Running Your Client","text":"<p>Start the development server:</p> <pre><code>npm run dev\n</code></pre> <p>Open your browser to <code>http://localhost:5173</code> and you should see your Nostr client!</p>"},{"location":"tutorials/simple-client/#testing-your-client","title":"Testing Your Client","text":"<p>Try These Features</p> <ol> <li>Generate Keys: Click \"Generate New Keys\" to create a new identity</li> <li>Publish a Note: Write something in the text area and click \"Publish Note\"</li> <li>View Feed: Watch as notes from other users appear in the global feed</li> <li>Keyboard Shortcut: Use Ctrl+Enter to quickly publish notes</li> </ol>"},{"location":"tutorials/simple-client/#understanding-the-code","title":"Understanding the Code","text":""},{"location":"tutorials/simple-client/#key-management","title":"Key Management","text":"<pre><code>// Generate a new private key\nconst privateKey = generatePrivateKey()\n\n// Derive the public key\nconst publicKey = getPublicKey(privateKey)\n\n// Encode as npub for display\nconst npub = nip19.npubEncode(publicKey)\n</code></pre>"},{"location":"tutorials/simple-client/#event-creation","title":"Event Creation","text":"<pre><code>const event = finishEvent({\n    kind: 1,              // Text note\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [],             // No tags for simple notes\n    content: \"Hello Nostr!\",\n}, privateKey)\n</code></pre>"},{"location":"tutorials/simple-client/#relay-communication","title":"Relay Communication","text":"<pre><code>// Connect to relay\nconst relay = relayInit('wss://relay.damus.io')\nawait relay.connect()\n\n// Subscribe to events\nconst sub = relay.sub([{ kinds: [1], limit: 20 }])\nsub.on('event', handleEvent)\n\n// Publish event\nawait relay.publish(event)\n</code></pre>"},{"location":"tutorials/simple-client/#next-steps","title":"Next Steps","text":"<p>Congratulations! You've built a working Nostr client. Here are some ideas for enhancements:</p> <p>Enhancement Ideas</p> <ul> <li>User Profiles: Display user metadata and avatars</li> <li>Replies: Implement threaded conversations</li> <li>Reactions: Add like/dislike functionality</li> <li>Media: Support image and video uploads</li> <li>Search: Add content and user search</li> <li>Relay Management: Let users add/remove relays</li> </ul>"},{"location":"tutorials/simple-client/#troubleshooting","title":"Troubleshooting","text":"<p>Common Issues</p> <p>Connection Problems - Check if relays are online - Try different relay URLs - Check browser console for errors</p> <p>Publishing Fails - Ensure you have valid keys - Check relay connection status - Verify content isn't empty</p>"},{"location":"tutorials/simple-client/#related-tutorials","title":"Related Tutorials","text":"<ul> <li>Understanding Nostr Events - Deep dive into event structures</li> <li>Relay Communication - Advanced relay interaction patterns</li> <li>Nostr Fundamentals - Core protocol concepts </li> </ul>"},{"location":"tutorials/understanding-events/","title":"Understanding Nostr Events","text":"<p>What You'll Learn</p> <p>In this tutorial, you'll understand:</p> <ul> <li>What Nostr events are and how they work</li> <li>Event structure and required fields</li> <li>Different types of events (kinds)</li> <li>How to create, sign, and verify events</li> <li>Event tags and their purposes</li> </ul> <p>Prerequisites</p> <ul> <li>Basic understanding of Nostr fundamentals</li> <li>Basic JavaScript knowledge</li> <li>Understanding of cryptographic signatures</li> </ul>"},{"location":"tutorials/understanding-events/#what-is-a-nostr-event","title":"What is a Nostr Event?","text":"<p>A Nostr event is the fundamental unit of data in the Nostr protocol. Everything that happens on Nostr - from posting a note to following someone - is represented as an event. Think of events as immutable, cryptographically signed messages that can be shared across the network.</p>"},{"location":"tutorials/understanding-events/#event-structure","title":"Event Structure","text":"<p>Every Nostr event follows a standardized JSON structure with specific required fields:</p> <pre><code>{\n  \"id\": \"4376c65d2f232afbe9b882a35baa4f6fe8667c4e684749af565f981833ed6a65\",\n  \"pubkey\": \"6e468422dfb74a5738702a8823b9b28168abab8655faacb6853cd0ee15deee93\",\n  \"created_at\": 1673347337,\n  \"kind\": 1,\n  \"tags\": [\n    [\"e\", \"5c83da77af1dec6d7289834998ad7aafbd9e2191396d75ec3cc27f5a77226f36\"],\n    [\"p\", \"f7234bd4c1394dda46d09f35bd384dd30cc552ad5541990f98844fb06676e9ca\"]\n  ],\n  \"content\": \"Hello Nostr! This is my first note.\",\n  \"sig\": \"908a15e46fb4d8675bab026fc230a0e3542bfade63da02d542fb78b2a8513fcd0092619a2c8c1221e581946e0191f2af505250431fcc808d5210a7d8e858c3e\"\n}\n</code></pre>"},{"location":"tutorials/understanding-events/#required-fields","title":"Required Fields","text":"<p>Let's break down each field:</p> Field Type Description <code>id</code> string 32-byte hex-encoded SHA256 hash of the serialized event <code>pubkey</code> string 32-byte hex-encoded public key of the event creator <code>created_at</code> number Unix timestamp in seconds <code>kind</code> number Event type identifier (0-65535) <code>tags</code> array Array of tag arrays for metadata and references <code>content</code> string Arbitrary content string <code>sig</code> string 64-byte hex signature of the event hash"},{"location":"tutorials/understanding-events/#creating-your-first-event","title":"Creating Your First Event","text":"<p>Let's create a simple text note event step by step:</p> JavaScriptAlternative (using finishEvent) <pre><code>import { \n    generatePrivateKey, \n    getPublicKey, \n    finishEvent,\n    getEventHash,\n    signEvent \n} from 'nostr-tools'\n\n// Generate keys (in practice, you'd load existing keys)\nconst privateKey = generatePrivateKey()\nconst publicKey = getPublicKey(privateKey)\n\n// Create the unsigned event\nconst unsignedEvent = {\n    kind: 1,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [],\n    content: \"Hello Nostr! This is my first event.\",\n    pubkey: publicKey\n}\n\n// Calculate the event ID and sign it\nconst eventId = getEventHash(unsignedEvent)\nconst signature = signEvent(unsignedEvent, privateKey)\n\n// Complete event\nconst signedEvent = {\n    ...unsignedEvent,\n    id: eventId,\n    sig: signature\n}\n\nconsole.log('Created event:', signedEvent)\n</code></pre> <pre><code>import { generatePrivateKey, getPublicKey, finishEvent } from 'nostr-tools'\n\nconst privateKey = generatePrivateKey()\nconst publicKey = getPublicKey(privateKey)\n\n// finishEvent handles ID calculation and signing automatically\nconst event = finishEvent({\n    kind: 1,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [],\n    content: \"Hello Nostr! This is my first event.\"\n}, privateKey)\n\nconsole.log('Created event:', event)\n</code></pre>"},{"location":"tutorials/understanding-events/#event-serialization","title":"Event Serialization","text":"<p>The event ID is calculated by hashing a specific serialized representation of the event. This ensures that any modification to the event will result in a different ID.</p> <pre><code>// The serialization format is a JSON array:\nconst serializedEvent = JSON.stringify([\n    0,                    // Reserved (always 0)\n    publicKey,           // Public key as hex string\n    createdAt,           // Unix timestamp as number\n    kind,                // Event kind as number\n    tags,                // Tags as array of arrays\n    content              // Content as string\n])\n\n// The ID is the SHA256 hash of this serialized data\nconst eventId = sha256(serializedEvent)\n</code></pre> <p>Serialization Rules</p> <p>When serializing events for ID calculation:</p> <ul> <li>Use UTF-8 encoding</li> <li>No whitespace or formatting</li> <li>Escape these characters in content: <code>\\n</code>, <code>\\\"</code>, <code>\\\\</code>, <code>\\r</code>, <code>\\t</code>, <code>\\b</code>, <code>\\f</code></li> </ul>"},{"location":"tutorials/understanding-events/#event-kinds","title":"Event Kinds","text":"<p>Event kinds determine how clients should interpret and display events. Here are the most common ones:</p>"},{"location":"tutorials/understanding-events/#regular-events-stored-by-relays","title":"Regular Events (Stored by Relays)","text":"Kind Name Description NIP 0 User Metadata Profile information NIP-01 1 Short Text Note Twitter-like posts NIP-01 3 Follow List Who a user follows NIP-02 4 Encrypted Direct Message Private messages NIP-04 5 Event Deletion Request Request to delete events NIP-09 6 Repost Share another event NIP-18 7 Reaction Like/dislike events NIP-25"},{"location":"tutorials/understanding-events/#replaceable-events-latest-overwrites-previous","title":"Replaceable Events (Latest Overwrites Previous)","text":"Kind Name Description NIP 10000 Mute List Blocked users NIP-51 10001 Pin List Pinned events NIP-51 10002 Relay List User's relays NIP-65"},{"location":"tutorials/understanding-events/#addressable-events-replaceable-with-identifier","title":"Addressable Events (Replaceable with Identifier)","text":"Kind Name Description NIP 30000 Follow Sets Named follow lists NIP-51 30001 Generic Lists Categorized lists NIP-51 30023 Long-form Content Blog posts/articles NIP-23"},{"location":"tutorials/understanding-events/#working-with-tags","title":"Working with Tags","text":"<p>Tags provide metadata and create relationships between events. They're arrays where the first element is the tag name:</p>"},{"location":"tutorials/understanding-events/#common-tag-types","title":"Common Tag Types","text":"<pre><code>// Reference another event\n[\"e\", \"event_id\", \"relay_url\", \"marker\"]\n\n// Reference a user\n[\"p\", \"pubkey\", \"relay_url\", \"petname\"]\n\n// Hashtag\n[\"t\", \"bitcoin\"]\n\n// Content identifier\n[\"d\", \"my-article-slug\"]\n\n// Subject/title\n[\"subject\", \"My Article Title\"]\n</code></pre>"},{"location":"tutorials/understanding-events/#example-creating-a-reply","title":"Example: Creating a Reply","text":"<pre><code>const replyEvent = finishEvent({\n    kind: 1,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [\n        [\"e\", originalEventId, \"\", \"reply\"],     // Reply to this event\n        [\"p\", originalAuthorPubkey]              // Notify the author\n    ],\n    content: \"Thanks for sharing this!\"\n}, privateKey)\n</code></pre>"},{"location":"tutorials/understanding-events/#example-profile-metadata","title":"Example: Profile Metadata","text":"<pre><code>const profileEvent = finishEvent({\n    kind: 0,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [],\n    content: JSON.stringify({\n        name: \"Alice\",\n        about: \"Bitcoin developer and privacy advocate\",\n        picture: \"https://example.com/alice.jpg\",\n        nip05: \"alice@example.com\"\n    })\n}, privateKey)\n</code></pre>"},{"location":"tutorials/understanding-events/#event-validation","title":"Event Validation","text":"<p>When receiving events, always validate them:</p> Basic ValidationAdvanced Validation <pre><code>import { verifySignature, getEventHash } from 'nostr-tools'\n\nfunction validateEvent(event) {\n    // Check required fields\n    const requiredFields = ['id', 'pubkey', 'created_at', 'kind', 'tags', 'content', 'sig']\n    for (const field of requiredFields) {\n        if (!(field in event)) {\n            return false\n        }\n    }\n\n    // Verify the ID matches the content\n    const calculatedId = getEventHash(event)\n    if (calculatedId !== event.id) {\n        return false\n    }\n\n    // Verify the signature\n    if (!verifySignature(event)) {\n        return false\n    }\n\n    return true\n}\n\n// Usage\nif (validateEvent(receivedEvent)) {\n    console.log('Event is valid!')\n} else {\n    console.log('Invalid event received')\n}\n</code></pre> <pre><code>function validateEventAdvanced(event) {\n    // Basic validation\n    if (!validateEvent(event)) {\n        return { valid: false, error: 'Basic validation failed' }\n    }\n\n    // Check timestamp (not too far in future/past)\n    const now = Math.floor(Date.now() / 1000)\n    const oneDay = 24 * 60 * 60\n\n    if (event.created_at &gt; now + oneDay) {\n        return { valid: false, error: 'Event too far in the future' }\n    }\n\n    if (event.created_at &lt; now - (365 * oneDay)) {\n        return { valid: false, error: 'Event too old' }\n    }\n\n    // Check kind is valid\n    if (event.kind &lt; 0 || event.kind &gt; 65535) {\n        return { valid: false, error: 'Invalid kind' }\n    }\n\n    // Check pubkey format\n    if (!/^[0-9a-f]{64}$/.test(event.pubkey)) {\n        return { valid: false, error: 'Invalid pubkey format' }\n    }\n\n    return { valid: true }\n}\n</code></pre>"},{"location":"tutorials/understanding-events/#event-broadcasting","title":"Event Broadcasting","text":"<p>Once you have a valid event, you can broadcast it to relays:</p> <pre><code>import { relayInit } from 'nostr-tools'\n\nasync function broadcastEvent(event, relayUrls) {\n    const results = []\n\n    for (const url of relayUrls) {\n        try {\n            const relay = relayInit(url)\n            await relay.connect()\n\n            const pub = relay.publish(event)\n\n            pub.on('ok', () =&gt; {\n                console.log(`Published to ${url}`)\n                results.push({ url, success: true })\n            })\n\n            pub.on('failed', (reason) =&gt; {\n                console.log(`Failed to publish to ${url}: ${reason}`)\n                results.push({ url, success: false, reason })\n            })\n\n        } catch (error) {\n            console.error(`Error with ${url}:`, error)\n            results.push({ url, success: false, error: error.message })\n        }\n    }\n\n    return results\n}\n\n// Usage\nconst relays = [\n    'wss://relay.damus.io',\n    'wss://nos.lol',\n    'wss://relay.snort.social'\n]\n\nawait broadcastEvent(myEvent, relays)\n</code></pre>"},{"location":"tutorials/understanding-events/#practical-exercise","title":"Practical Exercise","text":"<p>Let's build a simple event creator and validator:</p> Event CreatorTest It Out <pre><code>class EventCreator {\n    constructor(privateKey) {\n        this.privateKey = privateKey\n        this.publicKey = getPublicKey(privateKey)\n    }\n\n    createTextNote(content, replyTo = null) {\n        const tags = []\n\n        if (replyTo) {\n            tags.push(['e', replyTo.id, '', 'reply'])\n            tags.push(['p', replyTo.pubkey])\n        }\n\n        return finishEvent({\n            kind: 1,\n            created_at: Math.floor(Date.now() / 1000),\n            tags,\n            content\n        }, this.privateKey)\n    }\n\n    createProfile(profile) {\n        return finishEvent({\n            kind: 0,\n            created_at: Math.floor(Date.now() / 1000),\n            tags: [],\n            content: JSON.stringify(profile)\n        }, this.privateKey)\n    }\n\n    createReaction(targetEvent, reaction = '+') {\n        return finishEvent({\n            kind: 7,\n            created_at: Math.floor(Date.now() / 1000),\n            tags: [\n                ['e', targetEvent.id],\n                ['p', targetEvent.pubkey]\n            ],\n            content: reaction\n        }, this.privateKey)\n    }\n}\n\n// Usage\nconst creator = new EventCreator(myPrivateKey)\n\nconst note = creator.createTextNote(\"Hello Nostr!\")\nconst profile = creator.createProfile({\n    name: \"Alice\",\n    about: \"Nostr developer\"\n})\nconst reaction = creator.createReaction(someEvent, '\ud83d\ude80')\n</code></pre> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Event Creator&lt;/title&gt;\n    &lt;script type=\"module\"&gt;\n        import { generatePrivateKey, getPublicKey, finishEvent } from 'https://unpkg.com/nostr-tools@1.17.0/lib/esm/index.js'\n\n        const privateKey = generatePrivateKey()\n        const publicKey = getPublicKey(privateKey)\n\n        document.getElementById('create-note').onclick = () =&gt; {\n            const content = document.getElementById('note-content').value\n\n            const event = finishEvent({\n                kind: 1,\n                created_at: Math.floor(Date.now() / 1000),\n                tags: [],\n                content\n            }, privateKey)\n\n            document.getElementById('output').textContent = JSON.stringify(event, null, 2)\n        }\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Event Creator&lt;/h1&gt;\n    &lt;textarea id=\"note-content\" placeholder=\"Enter your note...\"&gt;&lt;/textarea&gt;&lt;br&gt;\n    &lt;button id=\"create-note\"&gt;Create Event&lt;/button&gt;\n    &lt;pre id=\"output\"&gt;&lt;/pre&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"tutorials/understanding-events/#understanding-event-flow","title":"Understanding Event Flow","text":"<p>Here's how events flow through the Nostr network:</p> <pre><code>graph LR\n    A[Create Event] --&gt; B[Sign Event]\n    B --&gt; C[Validate Event]\n    C --&gt; D[Broadcast to Relays]\n    D --&gt; E[Relay Stores Event]\n    E --&gt; F[Other Clients Subscribe]\n    F --&gt; G[Clients Receive Event]\n    G --&gt; H[Validate &amp; Display]</code></pre>"},{"location":"tutorials/understanding-events/#best-practices","title":"Best Practices","text":"<p>Event Creation Best Practices</p> <ol> <li>Always validate events before broadcasting</li> <li>Use appropriate kinds for different content types</li> <li>Include relevant tags for discoverability</li> <li>Keep content reasonable - some relays have size limits</li> <li>Use proper timestamps - not too far in past/future</li> <li>Handle failures gracefully when broadcasting</li> </ol> <p>Security Considerations</p> <ul> <li>Never share your private key</li> <li>Always verify signatures on received events</li> <li>Be cautious with events from unknown sources</li> <li>Validate all event fields before processing</li> </ul>"},{"location":"tutorials/understanding-events/#next-steps","title":"Next Steps","text":"<p>Now that you understand events, you can:</p> <ul> <li>Learn about relay communication</li> </ul>      \u2190 Previous: Simple Client         Next: Relay Communication \u2192"},{"location":"es/","title":"\u00bfPor qu\u00e9 LearnNostr?","text":"<ul> <li> <p> Identidad Digital Verdadera</p> <p>Posee tu identidad con llaves criptogr\u00e1ficas. Ninguna autoridad central puede eliminar tu cuenta, censurar tu contenido o controlar tu presencia digital.</p> <p> Aprende sobre las Llaves</p> </li> <li> <p> Resistente a la Censura</p> <p>Construido sobre una red descentralizada de rel\u00e9s que ninguna entidad singular controla. Tu voz no puede ser silenciada por corporaciones o gobiernos.</p> <p> Comenzar</p> </li> <li> <p> Integraci\u00f3n Lightning</p> <p>Pagos Bitcoin sin fricciones a trav\u00e9s de la integraci\u00f3n con Lightning Network. Env\u00eda y recibe valor instant\u00e1neamente a trav\u00e9s del protocolo.</p> <p> Construir Aplicaciones</p> </li> </ul> <p> Comienza Aqu\u00ed: Fundamentos del Protocolo</p> <p>\u00bfNuevo en Nostr? Comienza con lo b\u00e1sico. Aprende qu\u00e9 hace a Nostr diferente de las plataformas sociales tradicionales y entiende los conceptos centrales que impulsan este protocolo descentralizado.</p> <p>Lo que aprender\u00e1s:</p> <p>\u2022 Arquitectura y principios de dise\u00f1o del protocolo \u2022 Descentralizaci\u00f3n vs. plataformas centralizadas \u2022 Terminolog\u00eda y conceptos b\u00e1sicos</p> <p> Comenzar a Aprender</p> <p> Domina: Identidad y Seguridad</p> <p>Habilidades Esenciales. Profundiza en las llaves criptogr\u00e1ficas, firmas digitales y gesti\u00f3n de identidad. Estos conceptos son fundamentales para todo lo que construir\u00e1s en Nostr.</p> <p>Lo que aprender\u00e1s:</p> <p>\u2022 Criptograf\u00eda de llaves p\u00fablicas/privadas \u2022 Identidad digital y firmas \u2022 Mejores pr\u00e1cticas de seguridad</p> <p> Dominar Llaves</p> <p> Construye: Tu Primera Aplicaci\u00f3n</p> <p>Desarrollo Pr\u00e1ctico. Lleva la teor\u00eda a la pr\u00e1ctica construyendo aplicaciones Nostr reales. Aprende a conectarte a rel\u00e9s, publicar eventos y crear experiencias interactivas.</p> <p>Lo que construir\u00e1s:</p> <p>\u2022 Cliente Nostr simple \u2022 Sistema de publicaci\u00f3n de eventos \u2022 Comunicaci\u00f3n con rel\u00e9s</p> <p> Comenzar a Construir</p> <p> Referencia: Definiciones Completas</p> <p>Recursos de Profundizaci\u00f3n. Accede a definiciones y explicaciones completas de todos los conceptos, protocolos y especificaciones t\u00e9cnicas de Nostr en una ubicaci\u00f3n organizada.</p> <p>Lo que encontrar\u00e1s:</p> <p>\u2022 Definiciones t\u00e9cnicas y explicaciones \u2022 Especificaciones del protocolo (NIPs) \u2022 Herramientas y librer\u00edas de desarrollo</p> <p> Explorar Definiciones</p>"},{"location":"es/#ruta-de-aprendizaje","title":"\ud83c\udfaf Ruta de Aprendizaje","text":"<p>Domina Nostr en 4 Pasos Progresivos \u2014 Desde entender los conceptos b\u00e1sicos hasta construir tus propias aplicaciones, esta ruta de aprendizaje guiada te llevar\u00e1 de principiante a desarrollador.</p>"},{"location":"es/#ejemplo-de-codigo","title":"Ejemplo de C\u00f3digo","text":"<p>Aqu\u00ed te mostramos c\u00f3mo publicar tu primer evento en la red Nostr:</p> JavaScriptPythonRust <pre><code>import { generatePrivateKey, getPublicKey, finishEvent, relayInit } from 'nostr-tools'\n\n// Genera tu identidad\nconst sk = generatePrivateKey()\nconst pk = getPublicKey(sk)\n\n// Crea un evento\nconst event = finishEvent({\n  kind: 1,\n  created_at: Math.floor(Date.now() / 1000),\n  tags: [],\n  content: '\u00a1Hola Nostr!',\n}, sk)\n\n// Publica en el rel\u00e9\nconst relay = relayInit('wss://relay.damus.io')\nawait relay.connect()\nawait relay.publish(event)\n</code></pre> <pre><code>from nostr.key import PrivateKey\nfrom nostr.event import Event\nfrom nostr.relay_manager import RelayManager\nimport time\n\n# Genera identidad\nprivate_key = PrivateKey()\npublic_key = private_key.public_key\n\n# Crea evento\nevent = Event(\n    kind=1,\n    content=\"\u00a1Hola Nostr!\",\n    created_at=int(time.time())\n)\nprivate_key.sign_event(event)\n\n# Publica evento\nrelay_manager = RelayManager()\nrelay_manager.add_relay(\"wss://relay.damus.io\")\nrelay_manager.publish_event(event)\n</code></pre> <pre><code>use nostr_sdk::prelude::*;\n\n#[tokio::main]\nasync fn main() -&gt; Result&lt;()&gt; {\n    // Genera llaves\n    let keys = Keys::generate();\n\n    // Conecta al rel\u00e9\n    let client = Client::new(&amp;keys);\n    client.add_relay(\"wss://relay.damus.io\", None).await?;\n    client.connect().await;\n\n    // Publica evento\n    let event = EventBuilder::new_text_note(\"\u00a1Hola Nostr!\", &amp;[])\n        .to_event(&amp;keys)?;\n\n    client.send_event(event).await?;\n    Ok(())\n}\n</code></pre>"},{"location":"es/definitions/","title":"Definiciones de Nostr: Gu\u00eda de Referencia Completa","text":"<p>Esta gu\u00eda comprensiva define todos los conceptos, protocolos y componentes esenciales de Nostr en un solo lugar.</p>"},{"location":"es/definitions/#tabla-de-contenidos","title":"Tabla de Contenidos","text":"<ul> <li>Fundamentos del Protocolo</li> <li>Llaves e Identidad</li> <li>Eventos y Mensajes</li> <li>Rel\u00e9s y Red</li> <li>Clientes y Aplicaciones</li> <li>NIPs (Posibilidades de Implementaci\u00f3n de Nostr)</li> <li>Zaps e Integraci\u00f3n Lightning</li> <li>Seguridad y Privacidad</li> <li>Desarrollo y Aspectos T\u00e9cnicos</li> </ul>"},{"location":"es/definitions/#fundamentos-del-protocolo","title":"Fundamentos del Protocolo","text":""},{"location":"es/definitions/#nostr","title":"Nostr","text":"<p>\"Notes and Other Stuff Transmitted by Relays\" (Notas y Otras Cosas Transmitidas por Rel\u00e9s) - Un protocolo simple y abierto para redes sociales descentralizadas y comunicaci\u00f3n.</p>"},{"location":"es/definitions/#principios-centrales","title":"Principios Centrales","text":"<ul> <li>Descentralizado: Sin autoridad central o punto \u00fanico de falla</li> <li>Resistente a la censura: El contenido no puede ser censurado universalmente</li> <li>Interoperable: Todos los clientes pueden comunicarse entre s\u00ed</li> <li>Propiedad del usuario: Los usuarios controlan su identidad y datos</li> <li>Simple: F\u00e1cil de implementar y entender</li> </ul>"},{"location":"es/definitions/#descripcion-general-del-protocolo","title":"Descripci\u00f3n General del Protocolo","text":"<pre><code>graph TB\n    A[Usuario con Llaves] --&gt; B[Cliente Nostr]\n    B --&gt; C[Firmar Eventos]\n    C --&gt; D[Enviar a Rel\u00e9s]\n    D --&gt; E[Clientes de Otros Usuarios]\n    E --&gt; F[Verificar Firmas]</code></pre>"},{"location":"es/definitions/#llaves-e-identidad","title":"Llaves e Identidad","text":""},{"location":"es/definitions/#llave-privada","title":"Llave Privada","text":"<p>Tu llave criptogr\u00e1fica secreta que: - Controla toda tu identidad Nostr - Firma todos tus eventos y mensajes - No puede recuperarse si se pierde - Debe mantenerse absolutamente segura</p> <p>Ejemplos de Formato: <pre><code>Hex: 5c0c523f52a5b6fad39ed2403092df8cebc36318b39383bca6c00808626fab3a\nnsec: nsec1ts8y20636km0450n6fqrxyktmrhtcd0cvwucnw6xvqygsp6wlv62q4ew66q\n</code></pre></p>"},{"location":"es/definitions/#llave-publica","title":"Llave P\u00fablica","text":"<p>Tu identidad p\u00fablica en Nostr: - Derivada matem\u00e1ticamente de tu llave privada - Sirve como tu identificador \u00fanico - Puede compartirse libremente - Usada por otros para verificar tus firmas</p> <p>Ejemplos de Formato: <pre><code>Hex: 48d54b934bb2767a2980a4e6b2ee5ff86e3a4102b1e3f71c95e66bb06a1e7ff6\nnpub: npub1frw5hw6tkfm85t2qpfnty0hllrhkx5gzk83lw8y4uehmq6s70lmqqrr9nv\n</code></pre></p>"},{"location":"es/definitions/#mejores-practicas-de-seguridad-de-llaves","title":"Mejores Pr\u00e1cticas de Seguridad de Llaves","text":"<ul> <li>Nunca compartas tu llave privada</li> <li>Usa billeteras hardware cuando sea posible</li> <li>Mant\u00e9n m\u00faltiples respaldos seguros</li> <li>Usa diferentes llaves para diferentes prop\u00f3sitos</li> <li>Considera estrategias de rotaci\u00f3n de llaves</li> </ul>"},{"location":"es/definitions/#eventos-y-mensajes","title":"Eventos y Mensajes","text":""},{"location":"es/definitions/#evento","title":"Evento","text":"<p>La unidad b\u00e1sica de datos en Nostr. Todos los contenidos (notas, perfiles, reacciones) son eventos.</p> <p>Estructura B\u00e1sica: <pre><code>{\n  \"id\": \"hash_del_evento\",\n  \"pubkey\": \"llave_publica_del_autor\",\n  \"created_at\": 1234567890,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"Contenido del mensaje\",\n  \"sig\": \"firma_digital\"\n}\n</code></pre></p>"},{"location":"es/definitions/#tipos-de-eventos-kinds","title":"Tipos de Eventos (Kinds)","text":""},{"location":"es/definitions/#eventos-basicos","title":"Eventos B\u00e1sicos","text":"<ul> <li>Kind 0: Metadatos del perfil (nombre, imagen, bio)</li> <li>Kind 1: Nota de texto (post normal)</li> <li>Kind 2: Servidor de rel\u00e9 recomendado</li> <li>Kind 3: Lista de contactos (seguimiento)</li> <li>Kind 4: Mensajes directos encriptados</li> <li>Kind 5: Eliminaci\u00f3n de eventos</li> <li>Kind 6: Repost/boost</li> <li>Kind 7: Reacci\u00f3n (like, emoji)</li> </ul>"},{"location":"es/definitions/#eventos-especializados","title":"Eventos Especializados","text":"<ul> <li>Kind 0-3: Eventos regulares de aplicaci\u00f3n</li> <li>Kind 10000-19999: Eventos reemplazables</li> <li>Kind 20000-29999: Eventos ef\u00edmeros</li> <li>Kind 30000-39999: Eventos reemplazables parametrizados</li> </ul>"},{"location":"es/definitions/#etiquetas-tags","title":"Etiquetas (Tags)","text":"<p>Arrays de strings que proporcionan metadatos adicionales para eventos:</p> <pre><code>\"tags\": [\n  [\"e\", \"id_evento_referenciado\", \"wss://relay.example.com\"],\n  [\"p\", \"llave_publica_mencionada\"],\n  [\"t\", \"hashtag\"],\n  [\"r\", \"https://ejemplo.com\"]\n]\n</code></pre> <p>Tipos Comunes de Etiquetas: - e: Referencia a otro evento - p: Referencia a una llave p\u00fablica (menci\u00f3n) - t: Hashtag/tema - r: URL o referencia web - d: Identificador para eventos reemplazables</p>"},{"location":"es/definitions/#reles-y-red","title":"Rel\u00e9s y Red","text":""},{"location":"es/definitions/#rele","title":"Rel\u00e9","text":"<p>Servidor que almacena y reenv\u00eda eventos Nostr. Caracter\u00edsticas: - Opera independientemente con sus propias pol\u00edticas - Implementa protocolo WebSocket simple - Puede filtrar o moderar contenido - No se requiere registro de usuario</p>"},{"location":"es/definitions/#tipos-de-reles","title":"Tipos de Rel\u00e9s","text":""},{"location":"es/definitions/#por-acceso","title":"Por Acceso","text":"<ul> <li>P\u00fablicos: Abiertos para todos</li> <li>Privados: Acceso restringido</li> <li>De pago: Requieren pago por uso</li> <li>Comunitarios: Para grupos espec\u00edficos</li> </ul>"},{"location":"es/definitions/#por-funcion","title":"Por Funci\u00f3n","text":"<ul> <li>Generales: Almacenan todo tipo de contenido</li> <li>Especializados: Optimizados para tipos espec\u00edficos de eventos</li> <li>Cach\u00e9: Para mejorar rendimiento</li> <li>Archivo: Para almacenamiento a largo plazo</li> </ul>"},{"location":"es/definitions/#protocolo-de-rele","title":"Protocolo de Rel\u00e9","text":"<p>Comunicaci\u00f3n basada en WebSocket con tres tipos de mensajes:</p> <pre><code>// Publicar evento\n[\"EVENT\", {...evento...}]\n\n// Solicitar eventos\n[\"REQ\", \"id_suscripcion\", {...filtros...}]\n\n// Cerrar suscripci\u00f3n\n[\"CLOSE\", \"id_suscripcion\"]\n</code></pre>"},{"location":"es/definitions/#filtros-de-rele","title":"Filtros de Rel\u00e9","text":"<p>Especifican qu\u00e9 eventos solicitar:</p> <pre><code>{\n  \"ids\": [\"id1\", \"id2\"],\n  \"authors\": [\"pubkey1\", \"pubkey2\"],\n  \"kinds\": [1, 6, 7],\n  \"since\": 1234567890,\n  \"until\": 1234567890,\n  \"limit\": 100,\n  \"#e\": [\"event_id\"],\n  \"#p\": [\"pubkey\"]\n}\n</code></pre>"},{"location":"es/definitions/#clientes-y-aplicaciones","title":"Clientes y Aplicaciones","text":""},{"location":"es/definitions/#cliente-nostr","title":"Cliente Nostr","text":"<p>Aplicaci\u00f3n que permite a los usuarios interactuar con la red Nostr: - Gestiona llaves criptogr\u00e1ficas - Se conecta a m\u00faltiples rel\u00e9s - Crea, firma y publica eventos - Muestra contenido de otros usuarios</p>"},{"location":"es/definitions/#tipos-de-clientes","title":"Tipos de Clientes","text":""},{"location":"es/definitions/#por-plataforma","title":"Por Plataforma","text":"<ul> <li>Web: Ejecutan en navegadores</li> <li>M\u00f3vil: Apps nativas iOS/Android</li> <li>Escritorio: Aplicaciones de computadora</li> <li>Terminal: Herramientas de l\u00ednea de comandos</li> </ul>"},{"location":"es/definitions/#por-proposito","title":"Por Prop\u00f3sito","text":"<ul> <li>Redes sociales: Similar a Twitter/Facebook</li> <li>Mensajer\u00eda: Enfocado en comunicaci\u00f3n privada</li> <li>Multimedia: Para compartir im\u00e1genes/videos</li> <li>Especializado: Para casos de uso espec\u00edficos</li> </ul>"},{"location":"es/definitions/#funcionalidades-tipicas","title":"Funcionalidades T\u00edpicas","text":"<ul> <li>Gesti\u00f3n de identidad y llaves</li> <li>Composici\u00f3n y publicaci\u00f3n de contenido</li> <li>Timeline y descubrimiento de contenido</li> <li>Interacciones sociales (likes, reposts, comentarios)</li> <li>Mensajer\u00eda directa</li> <li>Gesti\u00f3n de rel\u00e9s</li> <li>Configuraciones de privacidad</li> </ul>"},{"location":"es/definitions/#nips-posibilidades-de-implementacion-de-nostr","title":"NIPs (Posibilidades de Implementaci\u00f3n de Nostr)","text":""},{"location":"es/definitions/#que-son-los-nips","title":"\u00bfQu\u00e9 son los NIPs?","text":"<p>Documentos que especifican extensiones y caracter\u00edsticas opcionales del protocolo Nostr.</p>"},{"location":"es/definitions/#nips-fundamentales","title":"NIPs Fundamentales","text":""},{"location":"es/definitions/#nip-01-protocolo-basico","title":"NIP-01: Protocolo B\u00e1sico","text":"<ul> <li>Define la estructura b\u00e1sica de eventos</li> <li>Especifica comunicaci\u00f3n con rel\u00e9s</li> <li>Establece validaci\u00f3n de eventos</li> </ul>"},{"location":"es/definitions/#nip-02-lista-de-contactos","title":"NIP-02: Lista de Contactos","text":"<ul> <li>Gesti\u00f3n de usuarios seguidos</li> <li>Nombres de mascotas (petnames)</li> <li>Lista de rel\u00e9s recomendados</li> </ul>"},{"location":"es/definitions/#nip-04-mensajes-directos","title":"NIP-04: Mensajes Directos","text":"<ul> <li>Encriptaci\u00f3n de mensajes privados</li> <li>Intercambio seguro de mensajes</li> </ul>"},{"location":"es/definitions/#nip-05-verificacion-de-identidad","title":"NIP-05: Verificaci\u00f3n de Identidad","text":"<ul> <li>Verificaci\u00f3n basada en DNS</li> <li>Identificadores legibles para humanos</li> <li>Formato: nombre@dominio.com</li> </ul>"},{"location":"es/definitions/#nip-07-extension-de-navegador","title":"NIP-07: Extensi\u00f3n de Navegador","text":"<ul> <li>API est\u00e1ndar para extensiones de navegador</li> <li>Firma segura de eventos</li> <li>Gesti\u00f3n de permisos</li> </ul>"},{"location":"es/definitions/#nip-09-eliminacion-de-eventos","title":"NIP-09: Eliminaci\u00f3n de Eventos","text":"<ul> <li>Solicitud de eliminaci\u00f3n de contenido</li> <li>Indicaciones de contenido eliminado</li> </ul>"},{"location":"es/definitions/#nip-11-informacion-del-rele","title":"NIP-11: Informaci\u00f3n del Rel\u00e9","text":"<ul> <li>Metadatos sobre pol\u00edticas del rel\u00e9</li> <li>Informaci\u00f3n de contacto</li> <li>Capacidades y limitaciones</li> </ul>"},{"location":"es/definitions/#nip-19-entidades-codificadas-en-bech32","title":"NIP-19: Entidades Codificadas en bech32","text":"<ul> <li>Formato est\u00e1ndar para llaves y referencias</li> <li>C\u00f3digos QR amigables</li> <li>Prefijos: npub, nsec, note, nprofile, nevent</li> </ul>"},{"location":"es/definitions/#nips-de-lightningzaps","title":"NIPs de Lightning/Zaps","text":""},{"location":"es/definitions/#nip-57-zaps","title":"NIP-57: Zaps","text":"<ul> <li>Pagos Lightning integrados</li> <li>Micropagos por contenido</li> <li>Reacciones monetizadas</li> </ul>"},{"location":"es/definitions/#nip-47-cartera-nostr-connect","title":"NIP-47: Cartera Nostr Connect","text":"<ul> <li>Comunicaci\u00f3n segura con billeteras</li> <li>Autorizaci\u00f3n de pagos</li> <li>Integraci\u00f3n Lightning simplificada</li> </ul>"},{"location":"es/definitions/#zaps-e-integracion-lightning","title":"Zaps e Integraci\u00f3n Lightning","text":""},{"location":"es/definitions/#zap","title":"Zap","text":"<p>Pago Lightning vinculado a un evento Nostr espec\u00edfico: - Monetiza contenido directamente - Proporciona feedback inmediato de valor - Crea incentivos econ\u00f3micos para calidad</p>"},{"location":"es/definitions/#tipos-de-zaps","title":"Tipos de Zaps","text":""},{"location":"es/definitions/#zap-publico","title":"Zap P\u00fablico","text":"<ul> <li>Visible para todos</li> <li>Incluye mensaje opcional</li> <li>Fomenta interacci\u00f3n social</li> </ul>"},{"location":"es/definitions/#zap-privado","title":"Zap Privado","text":"<ul> <li>Solo visible para el receptor</li> <li>Mantiene privacidad del remitente</li> <li>\u00datil para donaciones an\u00f3nimas</li> </ul>"},{"location":"es/definitions/#zap-anonimo","title":"Zap An\u00f3nimo","text":"<ul> <li>Sin informaci\u00f3n del remitente</li> <li>M\u00e1xima privacidad</li> <li>Previene correlaci\u00f3n</li> </ul>"},{"location":"es/definitions/#flujo-de-zap","title":"Flujo de Zap","text":"<ol> <li>Usuario solicita enviar zap</li> <li>Cliente obtiene factura Lightning</li> <li>Usuario autoriza pago</li> <li>Pago se procesa v\u00eda Lightning</li> <li>Evento de zap se publica en Nostr</li> </ol>"},{"location":"es/definitions/#direcciones-lightning","title":"Direcciones Lightning","text":"<p>Identificadores legibles para pagos: <pre><code>usuario@dominio.com\n</code></pre> - Simplifican proceso de pago - Compatible con LNURL-pay - Facilitan integraci\u00f3n</p>"},{"location":"es/definitions/#seguridad-y-privacidad","title":"Seguridad y Privacidad","text":""},{"location":"es/definitions/#modelo-de-seguridad","title":"Modelo de Seguridad","text":"<ul> <li>Firmas digitales: Verifican autenticidad</li> <li>Sin contrase\u00f1as: Eliminan vectores de ataque comunes</li> <li>Descentralizaci\u00f3n: Reduce puntos \u00fanicos de falla</li> </ul>"},{"location":"es/definitions/#consideraciones-de-privacidad","title":"Consideraciones de Privacidad","text":""},{"location":"es/definitions/#metadatos-publicos","title":"Metadatos P\u00fablicos","text":"<ul> <li>Timestamps de eventos son visibles</li> <li>Patrones de actividad pueden rastrearse</li> <li>Conexiones de rel\u00e9s son observables</li> </ul>"},{"location":"es/definitions/#contenido-encriptado","title":"Contenido Encriptado","text":"<ul> <li>NIP-04 para mensajes directos</li> <li>Encriptaci\u00f3n extremo a extremo</li> <li>Llaves de sesi\u00f3n para forward secrecy</li> </ul>"},{"location":"es/definitions/#tecnicas-de-privacidad","title":"T\u00e9cnicas de Privacidad","text":"<ul> <li>Uso de m\u00faltiples identidades</li> <li>Rotaci\u00f3n de rel\u00e9s</li> <li>Timing aleatorio de publicaciones</li> <li>Redes proxy/Tor</li> </ul>"},{"location":"es/definitions/#amenazas-comunes","title":"Amenazas Comunes","text":""},{"location":"es/definitions/#ataques-de-llave","title":"Ataques de Llave","text":"<ul> <li>Reutilizaci\u00f3n de nonce</li> <li>Generadores d\u00e9biles de aleatoriedad</li> <li>Almacenamiento inseguro</li> </ul>"},{"location":"es/definitions/#ataques-de-red","title":"Ataques de Red","text":"<ul> <li>An\u00e1lisis de tr\u00e1fico</li> <li>Correlaci\u00f3n de metadatos</li> <li>Ataques de tiempo</li> </ul>"},{"location":"es/definitions/#ataques-sociales","title":"Ataques Sociales","text":"<ul> <li>Ingenier\u00eda social para obtener llaves</li> <li>Suplantaci\u00f3n de identidad</li> <li>Manipulaci\u00f3n de confianza</li> </ul>"},{"location":"es/definitions/#desarrollo-y-aspectos-tecnicos","title":"Desarrollo y Aspectos T\u00e9cnicos","text":""},{"location":"es/definitions/#librerias-de-desarrollo","title":"Librer\u00edas de Desarrollo","text":""},{"location":"es/definitions/#javascripttypescript","title":"JavaScript/TypeScript","text":"<ul> <li>nostr-tools: Librer\u00eda fundamental</li> <li>NDK: Framework de alto nivel</li> <li>nostr-relaypool: Gesti\u00f3n de rel\u00e9s</li> </ul>"},{"location":"es/definitions/#python","title":"Python","text":"<ul> <li>python-nostr: Implementaci\u00f3n completa</li> <li>nostr-sdk-python: Bindings de Rust</li> </ul>"},{"location":"es/definitions/#rust","title":"Rust","text":"<ul> <li>nostr-sdk: Implementaci\u00f3n nativa</li> <li>nostr-protocol: Tipos b\u00e1sicos del protocolo</li> </ul>"},{"location":"es/definitions/#go","title":"Go","text":"<ul> <li>go-nostr: Implementaci\u00f3n en Go</li> <li>relaykind: Herramientas de rel\u00e9</li> </ul>"},{"location":"es/definitions/#herramientas-de-desarrollo","title":"Herramientas de Desarrollo","text":""},{"location":"es/definitions/#linea-de-comandos","title":"L\u00ednea de Comandos","text":"<ul> <li>nostril: Creaci\u00f3n r\u00e1pida de eventos</li> <li>nak: An\u00e1lisis y debugging de red</li> <li>nostr-cli: Utilidades generales</li> </ul>"},{"location":"es/definitions/#testing-y-debugging","title":"Testing y Debugging","text":"<ul> <li>nostr-dev-kit: Herramientas de desarrollo</li> <li>relay-tester: Testing de compatibilidad</li> <li>event-inspector: An\u00e1lisis de eventos</li> </ul>"},{"location":"es/definitions/#conceptos-de-implementacion","title":"Conceptos de Implementaci\u00f3n","text":""},{"location":"es/definitions/#validacion-de-eventos","title":"Validaci\u00f3n de Eventos","text":"<pre><code>function validateEvent(event) {\n  // Verificar campos requeridos\n  if (!event.id || !event.pubkey || !event.sig) return false\n\n  // Verificar firma\n  return verifySignature(event.sig, event.id, event.pubkey)\n}\n</code></pre>"},{"location":"es/definitions/#gestion-de-conexiones","title":"Gesti\u00f3n de Conexiones","text":"<pre><code>class RelayManager {\n  constructor(relayUrls) {\n    this.relays = relayUrls.map(url =&gt; new Relay(url))\n  }\n\n  async publish(event) {\n    // Publicar a todos los rel\u00e9s conectados\n    return Promise.allSettled(\n      this.relays.map(relay =&gt; relay.publish(event))\n    )\n  }\n}\n</code></pre>"},{"location":"es/definitions/#filtrado-y-suscripciones","title":"Filtrado y Suscripciones","text":"<pre><code>const filter = {\n  authors: [myPubkey],\n  kinds: [1], // Solo notas de texto\n  limit: 50,\n  since: Math.floor(Date.now() / 1000) - 3600 // \u00daltima hora\n}\n\nrelay.subscribe([filter], (event) =&gt; {\n  console.log('Nuevo evento:', event)\n})\n</code></pre>"},{"location":"es/definitions/#glosario-de-terminos","title":"Glosario de T\u00e9rminos","text":""},{"location":"es/definitions/#terminos-basicos","title":"T\u00e9rminos B\u00e1sicos","text":"<p>Bech32 : Formato de codificaci\u00f3n para llaves y identificadores legibles por humanos</p> <p>Event ID : Hash SHA-256 del contenido serializado del evento</p> <p>Kind : N\u00famero que especifica el tipo de evento (0=perfil, 1=nota, etc.)</p> <p>Nonce : N\u00famero usado una vez en operaciones criptogr\u00e1ficas</p> <p>Npub/Nsec : Formatos bech32 para llaves p\u00fablicas/privadas</p> <p>Pubkey : Abreviaci\u00f3n de \"public key\" (llave p\u00fablica)</p> <p>Relay Pool : Conjunto de rel\u00e9s para redundancia y performance</p> <p>Signature : Prueba criptogr\u00e1fica de autenticidad usando Schnorr</p> <p>Tag : Metadatos estructurados asociados a eventos</p> <p>WebSocket : Protocolo de comunicaci\u00f3n usado por rel\u00e9s</p>"},{"location":"es/definitions/#terminos-avanzados","title":"T\u00e9rminos Avanzados","text":"<p>Delegated Event : Evento firmado en nombre de otro usuario</p> <p>Ephemeral Event : Evento no almacenado permanentemente</p> <p>Event Deletion : Solicitud de eliminaci\u00f3n de contenido (NIP-09)</p> <p>Parameterized Replaceable : Evento que puede actualizarse con par\u00e1metros espec\u00edficos</p> <p>Replaceable Event : Evento que puede actualizarse (\u00faltimo prevalece)</p>"},{"location":"es/definitions/#recursos-y-referencias","title":"Recursos y Referencias","text":""},{"location":"es/definitions/#documentacion-oficial","title":"Documentaci\u00f3n Oficial","text":"<ul> <li>NIPs Repository</li> <li>Nostr Protocol Specification</li> </ul>"},{"location":"es/definitions/#herramientas-online","title":"Herramientas Online","text":"<ul> <li>Nostr.band - Explorador de red</li> <li>Relay.exchange - Informaci\u00f3n de rel\u00e9s</li> <li>NostrGuru - Estad\u00edsticas y an\u00e1lisis</li> </ul>"},{"location":"es/definitions/#librerias-y-sdks","title":"Librer\u00edas y SDKs","text":"<ul> <li>nostr-tools - JavaScript</li> <li>python-nostr - Python</li> <li>nostr-sdk - Rust</li> </ul>"},{"location":"es/definitions/#clientes-populares","title":"Clientes Populares","text":"<ul> <li>Web: Iris, Coracle, Snort</li> <li>M\u00f3vil: Damus (iOS), Amethyst (Android)</li> <li>Escritorio: Gossip, Nostrgram</li> </ul> <p>Esta gu\u00eda se actualiza continuamente conforme evoluciona el protocolo Nostr. Para las especificaciones m\u00e1s recientes, consulta siempre la documentaci\u00f3n oficial de NIPs.</p> <p>\u00bfFalta algo en esta gu\u00eda? Contribuye en GitHub o env\u00edanos tus sugerencias.</p>"},{"location":"es/support/","title":"Apoyar LearnNostr","text":"<p>Ayuda a Mantener Este Recurso Gratuito</p> <p>LearnNostr es una plataforma educativa impulsada por la comunidad. Tu apoyo nos ayuda a mantener y expandir este recurso integral de aprendizaje de Nostr para todos.</p>"},{"location":"es/support/#dona-a-learnnostr-via-bitcoin-lightning","title":"\u26a1 Dona a LearnNostr v\u00eda Bitcoin Lightning:","text":"<pre><code>greenmiracle695447@getalby.com\n</code></pre>"},{"location":"es/concepts/clients/","title":"Entendiendo los Clientes Nostr","text":"<p>Objetivos de Aprendizaje</p> <p>Al final de esta lecci\u00f3n, entender\u00e1s:</p> <ul> <li>Qu\u00e9 son los clientes Nostr y su papel en el ecosistema</li> <li>Diferentes tipos de clientes y sus caracter\u00edsticas</li> <li>C\u00f3mo los clientes interact\u00faan con rel\u00e9s y gestionan llaves</li> <li>Opciones populares de clientes y c\u00f3mo elegir uno</li> </ul>"},{"location":"es/concepts/clients/#que-es-un-cliente-nostr","title":"\u00bfQu\u00e9 es un Cliente Nostr?","text":"<p>Un cliente Nostr es una aplicaci\u00f3n que permite a los usuarios interactuar con la red Nostr. Pi\u00e9nsalo como tu ventana hacia la web social descentralizada - es c\u00f3mo creas publicaciones, lees contenido, gestionas tu identidad y te conectas con otros.</p> <p>A diferencia de las redes sociales tradicionales donde est\u00e1s bloqueado en una app (como Twitter o Facebook), los clientes Nostr son interoperables. Puedes cambiar entre diferentes clientes mientras mantienes la misma identidad y datos.</p>"},{"location":"es/concepts/clients/#funciones-centrales-de-los-clientes","title":"Funciones Centrales de los Clientes","text":""},{"location":"es/concepts/clients/#1-gestion-de-llaves","title":"1. Gesti\u00f3n de Llaves","text":"<ul> <li>Generar nuevos pares de llaves criptogr\u00e1ficas</li> <li>Almacenar llaves privadas de forma segura (o integrarse con gestores de llaves externos)</li> <li>Firmar eventos con tu llave privada</li> <li>Verificar firmas de otros usuarios</li> </ul>"},{"location":"es/concepts/clients/#2-creacion-de-eventos","title":"2. Creaci\u00f3n de Eventos","text":"<ul> <li>Componer diferentes tipos de contenido (notas de texto, reacciones, reposts)</li> <li>Formatear contenido con metadatos y etiquetas apropiadas</li> <li>Firmar eventos criptogr\u00e1ficamente</li> <li>Publicar a rel\u00e9s seleccionados</li> </ul>"},{"location":"es/concepts/clients/#3-comunicacion-con-reles","title":"3. Comunicaci\u00f3n con Rel\u00e9s","text":"<ul> <li>Conectar a m\u00faltiples rel\u00e9s simult\u00e1neamente</li> <li>Suscribirse a feeds de eventos y filtros</li> <li>Obtener eventos hist\u00f3ricos y perfiles de usuario</li> <li>Gestionar listas de rel\u00e9s y preferencias</li> </ul>"},{"location":"es/concepts/clients/#4-visualizacion-de-contenido","title":"4. Visualizaci\u00f3n de Contenido","text":"<ul> <li>Analizar y mostrar eventos en formatos amigables para el usuario</li> <li>Manejar diferentes tipos de eventos (notas, reacciones, perfiles)</li> <li>Organizar contenido (cronolog\u00edas, hilos, notificaciones)</li> <li>Filtrar contenido basado en preferencias del usuario</li> </ul>"},{"location":"es/concepts/clients/#tipos-de-clientes-nostr","title":"Tipos de Clientes Nostr","text":""},{"location":"es/concepts/clients/#clientes-web","title":"Clientes Web","text":"<p>Aplicaciones basadas en navegador que se ejecutan en tu navegador web.</p> <p>Ejemplos: - Iris - Cliente web rico en caracter\u00edsticas con funciones sociales - Snort - Interfaz web r\u00e1pida y moderna - Nostrgram - Compartir fotos estilo Instagram - Coracle - Cliente minimalista enfocado en privacidad</p> <p>Ventajas: - \u2705 No requiere instalaci\u00f3n - \u2705 Compatibilidad multiplataforma - \u2705 F\u00e1cil probar diferentes clientes</p> <p>Desventajas: - \u274c Opciones limitadas de almacenamiento de llaves - \u274c Dependiente de la seguridad del navegador - \u274c Puede tener limitaciones de rendimiento</p>"},{"location":"es/concepts/clients/#aplicaciones-moviles","title":"Aplicaciones M\u00f3viles","text":"<p>Aplicaciones nativas para smartphones y tablets.</p> <p>Ejemplos: - Damus (iOS) - Cliente iOS popular y f\u00e1cil de usar - Amethyst (Android) - Cliente Android rico en caracter\u00edsticas - Nostros (Android) - Cliente Android de c\u00f3digo abierto - Plebstr (iOS/Android) - Simple, amigable para principiantes</p> <p>Ventajas: - \u2705 Rendimiento y UX nativo - \u2705 Notificaciones push - \u2705 Mejores opciones de almacenamiento de llaves - \u2705 Capacidades offline</p> <p>Desventajas: - \u274c Espec\u00edfico de plataforma - \u274c Restricciones de tiendas de apps - \u274c Requiere instalaci\u00f3n</p>"},{"location":"es/concepts/clients/#aplicaciones-de-escritorio","title":"Aplicaciones de Escritorio","text":"<p>Aplicaciones nativas para computadoras.</p> <p>Ejemplos: - Gossip - Cliente de escritorio basado en Rust - More TBD - El ecosistema de clientes de escritorio est\u00e1 creciendo</p> <p>Ventajas: - \u2705 Experiencia completa de caracter\u00edsticas - \u2705 Mejor gesti\u00f3n de llaves - \u2705 Caracter\u00edsticas avanzadas para power users - \u2705 Sin limitaciones del navegador</p> <p>Desventajas: - \u274c Builds espec\u00edficos de plataforma - \u274c Descarga/instalaci\u00f3n m\u00e1s grande - \u274c Menos portable</p>"},{"location":"es/concepts/clients/#clientes-especializados","title":"Clientes Especializados","text":"<p>Construidos espec\u00edficamente para casos de uso particulares.</p> <p>Ejemplos: - Habla - Publicaci\u00f3n de contenido de formato largo - Zap.stream - Transmisi\u00f3n en vivo - Nostrudel - Caracter\u00edsticas avanzadas para power users - Satellite - Minimalista, solo texto</p>"},{"location":"es/concepts/clients/#como-funcionan-los-clientes","title":"C\u00f3mo Funcionan los Clientes","text":"<pre><code>graph TB\n    U[Usuario] --&gt;|interact\u00faa con| C[Cliente]\n    C --&gt;|gestiona| K[Llaves Privadas]\n    C --&gt;|crea y firma| E[Eventos]\n    C --&gt;|se conecta a| R1[Rel\u00e9 1]\n    C --&gt;|se conecta a| R2[Rel\u00e9 2]\n    C --&gt;|se conecta a| R3[Rel\u00e9 3]\n\n    R1 --&gt;|entrega eventos| C\n    R2 --&gt;|entrega eventos| C\n    R3 --&gt;|entrega eventos| C\n\n    C --&gt;|muestra| F[Feed/Cronolog\u00eda]\n    F --&gt;|mostrado a| U</code></pre>"},{"location":"es/concepts/clients/#el-flujo-de-trabajo-del-cliente","title":"El Flujo de Trabajo del Cliente","text":"<ol> <li>Acci\u00f3n del Usuario: Quieres publicar una nota o leer tu cronolog\u00eda</li> <li>Creaci\u00f3n de Evento: El cliente crea un evento correctamente formateado</li> <li>Firma: El cliente firma el evento con tu llave privada</li> <li>Publicaci\u00f3n: El cliente env\u00eda el evento a tus rel\u00e9s seleccionados</li> <li>Obtenci\u00f3n: El cliente solicita eventos de rel\u00e9s para tu cronolog\u00eda</li> <li>Visualizaci\u00f3n: El cliente formatea y te muestra el contenido</li> </ol>"},{"location":"es/concepts/clients/#caracteristicas-clave-a-buscar","title":"Caracter\u00edsticas Clave a Buscar","text":""},{"location":"es/concepts/clients/#caracteristicas-esenciales","title":"Caracter\u00edsticas Esenciales","text":"<ul> <li>Gesti\u00f3n de Llaves: Almacenamiento y manejo seguro de llaves privadas</li> <li>Soporte Multi-rel\u00e9: Conectar a m\u00faltiples rel\u00e9s simult\u00e1neamente</li> <li>Tipos de Eventos B\u00e1sicos: Soporte para notas de texto, reacciones, reposts</li> <li>Perfiles de Usuario: Ver y editar informaci\u00f3n de perfil</li> <li>Cronolog\u00eda/Feed: Visualizaci\u00f3n cronol\u00f3gica de eventos</li> </ul>"},{"location":"es/concepts/clients/#caracteristicas-avanzadas","title":"Caracter\u00edsticas Avanzadas","text":"<ul> <li>Soporte de Hilos: Visualizaci\u00f3n apropiada de hilos de conversaci\u00f3n</li> <li>Soporte de Multimedia: Im\u00e1genes, videos y archivos adjuntos</li> <li>Integraci\u00f3n Lightning: Zaps (pagos Bitcoin Lightning)</li> <li>Filtrado Avanzado: Herramientas de filtrado y moderaci\u00f3n de contenido</li> <li>Respaldo/Exportaci\u00f3n: Exportar tus datos y configuraciones</li> </ul>"},{"location":"es/concepts/clients/#caracteristicas-para-power-users","title":"Caracter\u00edsticas para Power Users","text":"<ul> <li>Gesti\u00f3n Personalizada de Rel\u00e9s: Configuraci\u00f3n avanzada de rel\u00e9s</li> <li>Depuraci\u00f3n de Eventos: Inspecci\u00f3n y depuraci\u00f3n de eventos en crudo</li> <li>Tipos de Eventos Personalizados: Soporte para NIPs experimentales</li> <li>Acceso a API: Integraci\u00f3n con herramientas externas</li> <li>Sistema de Plugins: Extensibilidad a trav\u00e9s de plugins</li> </ul>"},{"location":"es/concepts/clients/#eligiendo-el-cliente-correcto","title":"Eligiendo el Cliente Correcto","text":""},{"location":"es/concepts/clients/#para-principiantes","title":"Para Principiantes","text":"<p>Recomendado: Damus (iOS), Amethyst (Android), Iris (Web)</p> <ul> <li>Interfaz simple e intuitiva</li> <li>Buena experiencia de onboarding</li> <li>Generaci\u00f3n de llaves integrada</li> <li>Configuraciones por defecto razonables</li> </ul>"},{"location":"es/concepts/clients/#para-usuarios-conscientes-de-la-privacidad","title":"Para Usuarios Conscientes de la Privacidad","text":"<p>Recomendado: Gossip (Escritorio), Coracle (Web)</p> <ul> <li>Caracter\u00edsticas mejoradas de privacidad</li> <li>Almacenamiento local de llaves</li> <li>Recolecci\u00f3n m\u00ednima de datos</li> <li>Soporte Tor (algunos clientes)</li> </ul>"},{"location":"es/concepts/clients/#para-power-users","title":"Para Power Users","text":"<p>Recomendado: Nostrudel (Web), Gossip (Escritorio)</p> <ul> <li>Opciones de configuraci\u00f3n avanzadas</li> <li>Inspecci\u00f3n de eventos en crudo</li> <li>Gesti\u00f3n personalizada de rel\u00e9s</li> <li>Soporte de caracter\u00edsticas experimentales</li> </ul>"},{"location":"es/concepts/clients/#para-creadores-de-contenido","title":"Para Creadores de Contenido","text":"<p>Recomendado: Habla (Formato largo), Nostrgram (Fotos)</p> <ul> <li>Herramientas especializadas de creaci\u00f3n de contenido</li> <li>Soporte de multimedia rica</li> <li>Flujos de trabajo de publicaci\u00f3n</li> <li>Caracter\u00edsticas de engagement de audiencia</li> </ul>"},{"location":"es/concepts/clients/#interoperabilidad-de-clientes","title":"Interoperabilidad de Clientes","text":"<p>Una de las ventajas clave de Nostr es la interoperabilidad de clientes:</p> <p>Ejemplo del Mundo Real</p> <p>Ma\u00f1ana: Usa Damus en tu tel\u00e9fono para revisar notificaciones</p> <p>Tarde: Cambia a Iris en tu computadora de trabajo para publicar actualizaciones</p> <p>Noche: Usa Habla para escribir un art\u00edculo de formato largo</p> <p>Resultado: Todo tu contenido aparece sin problemas en todos los clientes porque todos usan el mismo protocolo subyacente y rel\u00e9s.</p>"},{"location":"es/concepts/clients/#consideraciones-de-seguridad","title":"Consideraciones de Seguridad","text":""},{"location":"es/concepts/clients/#almacenamiento-de-llaves","title":"Almacenamiento de Llaves","text":"<ul> <li>Almacenamiento del Navegador: Conveniente pero menos seguro</li> <li>Keychain M\u00f3vil: Mejor seguridad en dispositivos m\u00f3viles</li> <li>Billeteras Hardware: M\u00e1xima seguridad para cuentas valiosas</li> <li>Firmadores Externos: Apps dedicadas de gesti\u00f3n de llaves</li> </ul>"},{"location":"es/concepts/clients/#mejores-practicas","title":"Mejores Pr\u00e1cticas","text":"<ul> <li>\u2705 Usa clientes respetables y de c\u00f3digo abierto</li> <li>\u2705 Verifica la autenticidad del cliente antes de descargar</li> <li>\u2705 Mant\u00e9n tu llave privada respaldada de forma segura</li> <li>\u2705 Usa diferentes clientes para evitar vendor lock-in</li> <li>\u274c Nunca compartas tu llave privada</li> <li>\u274c No uses clientes no confiables o de c\u00f3digo cerrado</li> </ul>"},{"location":"es/concepts/clients/#comparacion-de-clientes-populares","title":"Comparaci\u00f3n de Clientes Populares","text":""},{"location":"es/concepts/clients/#clientes-moviles","title":"Clientes M\u00f3viles","text":"Cliente Plataforma Caracter\u00edsticas Principales Nivel Damus iOS Interfaz elegante, f\u00e1cil de usar, buena experiencia UX Principiante Amethyst Android Rico en caracter\u00edsticas, personalizable, actualizaciones frecuentes Intermedio Plebstr iOS/Android Simple, enfocado en principiantes, onboarding guiado Principiante Nostros Android C\u00f3digo abierto, ligero, caracter\u00edsticas b\u00e1sicas Principiante"},{"location":"es/concepts/clients/#clientes-web_1","title":"Clientes Web","text":"Cliente Caracter\u00edsticas Principales Mejor Para Iris Interfaz familiar tipo Twitter, caracter\u00edsticas sociales Principiantes, uso general Snort R\u00e1pido, moderno, caracter\u00edsticas avanzadas Usuarios intermedios Coracle Enfocado en privacidad, minimalista Usuarios conscientes de la privacidad Nostrudel Herramientas avanzadas, depuraci\u00f3n de eventos Power users, desarrolladores"},{"location":"es/concepts/clients/#clientes-especializados_1","title":"Clientes Especializados","text":"Cliente Prop\u00f3sito Caracter\u00edsticas \u00danicas Habla Contenido de formato largo Editor markdown, art\u00edculos, blogs Nostrgram Compartir fotos Interfaz tipo Instagram, enfoque visual Zap.stream Streaming en vivo Transmisiones, chat en vivo, zaps Satellite Minimalista Solo texto, sin im\u00e1genes, ultra ligero"},{"location":"es/concepts/clients/#configuracion-de-cliente","title":"Configuraci\u00f3n de Cliente","text":""},{"location":"es/concepts/clients/#primera-configuracion","title":"Primera Configuraci\u00f3n","text":"<pre><code>// Ejemplo de configuraci\u00f3n t\u00edpica de cliente\nconst configuracionCliente = {\n  // Gesti\u00f3n de llaves\n  gestorLlaves: {\n    tipo: 'local', // 'local', 'hardware', 'externo'\n    respaldo: true,\n    encriptacion: 'AES-256'\n  },\n\n  // Configuraci\u00f3n de rel\u00e9s\n  reles: [\n    'wss://relay.damus.io',\n    'wss://nos.lol',\n    'wss://relay.snort.social'\n  ],\n\n  // Preferencias de contenido\n  filtros: {\n    idiomas: ['es', 'en'],\n    tiposEventos: [0, 1, 3, 7], // perfiles, notas, contactos, reacciones\n    limitePorFeed: 50\n  },\n\n  // Configuraciones de privacidad\n  privacidad: {\n    mostrarLecturas: false,\n    compartirUbicacion: false,\n    modoPrivado: false\n  }\n}\n</code></pre>"},{"location":"es/concepts/clients/#migracion-entre-clientes","title":"Migraci\u00f3n Entre Clientes","text":"<pre><code>// Exportar datos de cliente actual\nfunction exportarDatos() {\n  return {\n    llavePrivada: obtenerLlavePrivada(), // \u00a1MANTENER SEGURO!\n    configuracionReles: obtenerReles(),\n    configuraciones: obtenerConfiguraciones(),\n    contactos: obtenerContactos(),\n    eventos: obtenerEventosLocales()\n  }\n}\n\n// Importar a nuevo cliente\nfunction importarDatos(datosExportados) {\n  configurarLlavePrivada(datosExportados.llavePrivada)\n  configurarReles(datosExportados.configuracionReles)\n  aplicarConfiguraciones(datosExportados.configuraciones)\n  sincronizarContactos(datosExportados.contactos)\n}\n</code></pre>"},{"location":"es/concepts/clients/#desarrollo-de-clientes","title":"Desarrollo de Clientes","text":""},{"location":"es/concepts/clients/#arquitectura-basica-de-cliente","title":"Arquitectura B\u00e1sica de Cliente","text":"<pre><code>class ClienteNostr {\n  constructor(configuracion) {\n    this.llaves = new GestorLlaves(configuracion.llaves)\n    this.reles = new GestorReles(configuracion.reles)\n    this.eventos = new GestorEventos()\n    this.ui = new InterfazUsuario()\n  }\n\n  async inicializar() {\n    await this.llaves.cargar()\n    await this.reles.conectar()\n    this.configurarSuscripciones()\n  }\n\n  async publicarNota(contenido) {\n    const evento = this.eventos.crear({\n      kind: 1,\n      content: contenido,\n      created_at: Math.floor(Date.now() / 1000)\n    })\n\n    const eventoFirmado = await this.llaves.firmar(evento)\n    return this.reles.publicar(eventoFirmado)\n  }\n\n  configurarSuscripciones() {\n    // Suscribirse a feed personal\n    this.reles.suscribirse([\n      { kinds: [1], authors: this.obtenerSeguidos() }\n    ], this.manejarEvento.bind(this))\n\n    // Suscribirse a menciones\n    this.reles.suscribirse([\n      { kinds: [1], '#p': [this.llaves.pubkey] }\n    ], this.manejarMencion.bind(this))\n  }\n\n  manejarEvento(evento) {\n    this.eventos.almacenar(evento)\n    this.ui.actualizarFeed(evento)\n  }\n\n  manejarMencion(evento) {\n    this.ui.mostrarNotificacion(evento)\n  }\n}\n</code></pre>"},{"location":"es/concepts/clients/#el-futuro-de-los-clientes","title":"El Futuro de los Clientes","text":"<p>El ecosistema de clientes Nostr est\u00e1 evolucionando r\u00e1pidamente:</p>"},{"location":"es/concepts/clients/#tendencias-emergentes","title":"Tendencias Emergentes","text":"<ul> <li>Clientes Especializados: Construidos espec\u00edficamente para casos de uso particulares</li> <li>Integraci\u00f3n de IA: Curaci\u00f3n inteligente de contenido y asistencia</li> <li>Privacidad Mejorada: Mejores caracter\u00edsticas de anonimato y privacidad</li> <li>Multiplataforma: Experiencia sin interrupciones en todos los dispositivos</li> <li>Ecosistemas de Plugins: Clientes extensibles y personalizables</li> </ul>"},{"location":"es/concepts/clients/#innovaciones-tecnicas","title":"Innovaciones T\u00e9cnicas","text":"<ul> <li>Sincronizaci\u00f3n de Estado: Sincronizar estado entre m\u00faltiples clientes</li> <li>Protocolos de Respaldo: Respaldo autom\u00e1tico y recuperaci\u00f3n de datos</li> <li>Optimizaciones de Rendimiento: Clientes m\u00e1s r\u00e1pidos y eficientes</li> <li>Accesibilidad: Mejor soporte para usuarios con discapacidades</li> </ul>"},{"location":"es/concepts/clients/#nuevos-paradigmas","title":"Nuevos Paradigmas","text":"<ul> <li>Clientes como Servicios: Clientes que se ejecutan en la nube</li> <li>Interfaces Conversacionales: Clientes operados por voz/chat</li> <li>Realidad Aumentada: Experiencias Nostr en AR/VR</li> <li>IoT Integration: Clientes en dispositivos del Internet de las Cosas</li> </ul>"},{"location":"es/concepts/clients/#guia-de-troubleshooting","title":"Gu\u00eda de Troubleshooting","text":""},{"location":"es/concepts/clients/#problemas-comunes","title":"Problemas Comunes","text":""},{"location":"es/concepts/clients/#no-se-conecta-a-reles","title":"No se Conecta a Rel\u00e9s","text":"<pre><code>// Diagn\u00f3stico de conectividad\nasync function diagnosticarConexion(urlRele) {\n  try {\n    const ws = new WebSocket(urlRele)\n    ws.onopen = () =&gt; console.log(`\u2705 Conectado a ${urlRele}`)\n    ws.onerror = (error) =&gt; console.error(`\u274c Error: ${error}`)\n    ws.onclose = (event) =&gt; console.log(`\ud83d\udd0c Cerrado: ${event.code}`)\n  } catch (error) {\n    console.error(`\u274c No se puede conectar a ${urlRele}:`, error)\n  }\n}\n</code></pre>"},{"location":"es/concepts/clients/#eventos-no-aparecen","title":"Eventos No Aparecen","text":"<pre><code>// Verificar filtros de suscripci\u00f3n\nfunction verificarFiltros(filtros) {\n  console.log('Filtros activos:', filtros)\n\n  // Verificar si los filtros son demasiado restrictivos\n  if (filtros.authors &amp;&amp; filtros.authors.length === 0) {\n    console.warn('\u26a0\ufe0f No hay autores en filtro')\n  }\n\n  if (filtros.since &amp;&amp; filtros.since &gt; Date.now() / 1000) {\n    console.warn('\u26a0\ufe0f Filtro \"since\" est\u00e1 en el futuro')\n  }\n}\n</code></pre>"},{"location":"es/concepts/clients/#problemas-de-llaves","title":"Problemas de Llaves","text":"<pre><code>// Validar llave privada\nfunction validarLlavePrivada(llavePrivada) {\n  if (!llavePrivada || llavePrivada.length !== 64) {\n    throw new Error('Llave privada inv\u00e1lida: debe ser hex de 64 caracteres')\n  }\n\n  if (!/^[0-9a-f]{64}$/i.test(llavePrivada)) {\n    throw new Error('Llave privada inv\u00e1lida: debe ser hexadecimal')\n  }\n\n  return true\n}\n</code></pre>"},{"location":"es/concepts/clients/#proximos-pasos","title":"Pr\u00f3ximos Pasos","text":"<p>Ahora que entiendes los clientes, explora c\u00f3mo interact\u00faan con rel\u00e9s y el ecosistema m\u00e1s amplio de Nostr.</p>      Entendiendo Rel\u00e9s \u2192"},{"location":"es/concepts/clients/#quiz-rapido","title":"Quiz R\u00e1pido","text":"<p>Prueba Tu Comprensi\u00f3n</p> <ol> <li>\u00bfCu\u00e1les son las funciones centrales de un cliente Nostr?</li> <li>\u00bfPor qu\u00e9 puedes cambiar entre diferentes clientes Nostr libremente?</li> <li>\u00bfCu\u00e1l es la diferencia entre clientes web y apps m\u00f3viles?</li> <li>\u00bfQu\u00e9 deber\u00edas considerar al elegir un cliente para privacidad?</li> </ol> Respuestas <ol> <li>Gesti\u00f3n de llaves, creaci\u00f3n de eventos, comunicaci\u00f3n con rel\u00e9s, y visualizaci\u00f3n de contenido</li> <li>Porque todos los clientes usan el mismo protocolo abierto y pueden acceder a los mismos rel\u00e9s</li> <li>Los clientes web se ejecutan en navegadores (multiplataforma, sin instalaci\u00f3n) mientras las apps m\u00f3viles son nativas (mejor rendimiento, espec\u00edficas de plataforma)</li> <li>Almacenamiento local de llaves, recolecci\u00f3n m\u00ednima de datos, c\u00f3digo abierto, y caracter\u00edsticas enfocadas en privacidad</li> </ol>"},{"location":"es/concepts/events-and-messages/","title":"Eventos y Mensajes en Nostr","text":"<p>Objetivos de Aprendizaje</p> <p>Despu\u00e9s de esta lecci\u00f3n, entender\u00e1s:</p> <ul> <li>C\u00f3mo todo en Nostr est\u00e1 estructurado como eventos</li> <li>Diferentes tipos de eventos y sus prop\u00f3sitos</li> <li>Estructura de eventos y campos requeridos</li> <li>C\u00f3mo se firman y verifican los eventos</li> <li>Tipos de eventos comunes y sus casos de uso</li> </ul>"},{"location":"es/concepts/events-and-messages/#entendiendo-los-eventos","title":"Entendiendo los Eventos","text":"<p>En Nostr, todo es un evento. Ya sea que publiques una nota de texto, actualices tu perfil, reacciones a una publicaci\u00f3n, o env\u00edes un mensaje directo - todo est\u00e1 estructurado como eventos.</p> <p>Este enfoque unificado proporciona varios beneficios:</p> <ul> <li>Consistencia: Todos los datos siguen la misma estructura</li> <li>Extensibilidad: Nuevas caracter\u00edsticas pueden agregarse como nuevos tipos de eventos</li> <li>Simplicidad: Un formato para gobernarlos a todos</li> <li>Interoperabilidad: Todos los clientes entienden la misma estructura b\u00e1sica</li> </ul>"},{"location":"es/concepts/events-and-messages/#estructura-de-eventos","title":"Estructura de Eventos","text":"<p>Cada evento Nostr es un objeto JSON con campos requeridos espec\u00edficos:</p> <pre><code>{\n  \"id\": \"hash-id-evento\",\n  \"pubkey\": \"llave-publica-autor\", \n  \"created_at\": 1234567890,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"\u00a1Hola Nostr!\",\n  \"sig\": \"firma-criptografica\"\n}\n</code></pre> <p>Desglosemos cada campo:</p>"},{"location":"es/concepts/events-and-messages/#campos-requeridos","title":"Campos Requeridos","text":""},{"location":"es/concepts/events-and-messages/#id-id-del-evento","title":"<code>id</code> (ID del Evento)","text":"<ul> <li>Hash SHA-256 de 32 bytes de los datos serializados del evento</li> <li>Sirve como el identificador \u00fanico para el evento</li> <li>Calculado desde otros campos (no arbitrario)</li> </ul> <pre><code>// El ID es el SHA-256 de estos datos serializados:\n[\n  0,                    // Reservado\n  pubkey,              // Llave p\u00fablica del autor\n  created_at,          // Timestamp\n  kind,                // Tipo de evento\n  tags,                // Array de etiquetas\n  content              // Contenido del evento\n]\n</code></pre>"},{"location":"es/concepts/events-and-messages/#pubkey-autor","title":"<code>pubkey</code> (Autor)","text":"<ul> <li>Llave p\u00fablica de 32 bytes del creador del evento</li> <li>Identifica qui\u00e9n cre\u00f3 el evento</li> <li>Usada para verificar la firma</li> </ul>"},{"location":"es/concepts/events-and-messages/#created_at-timestamp","title":"<code>created_at</code> (Timestamp)","text":"<ul> <li>Timestamp Unix en segundos</li> <li>Cu\u00e1ndo fue creado el evento</li> <li>Usado para ordenamiento cronol\u00f3gico</li> </ul>"},{"location":"es/concepts/events-and-messages/#kind-tipo-de-evento","title":"<code>kind</code> (Tipo de Evento)","text":"<ul> <li>Entero que define el tipo de evento</li> <li>Determina c\u00f3mo los clientes deben interpretar el evento</li> <li>Estandarizado en varios NIPs</li> </ul>"},{"location":"es/concepts/events-and-messages/#tags-metadatos","title":"<code>tags</code> (Metadatos)","text":"<ul> <li>Array de arrays conteniendo metadatos</li> <li>Usado para referencias, menciones, hashtags, etc.</li> <li>Cada etiqueta es un array de strings</li> </ul>"},{"location":"es/concepts/events-and-messages/#content-contenido-del-mensaje","title":"<code>content</code> (Contenido del Mensaje)","text":"<ul> <li>El contenido principal del evento</li> <li>Puede ser texto, JSON, o vac\u00edo dependiendo del kind</li> <li>A menudo contiene el mensaje visible para el usuario</li> </ul>"},{"location":"es/concepts/events-and-messages/#sig-firma","title":"<code>sig</code> (Firma)","text":"<ul> <li>Firma Schnorr de 64 bytes</li> <li>Prueba que el evento fue creado por el propietario de la pubkey</li> <li>Previene manipulaci\u00f3n</li> </ul>"},{"location":"es/concepts/events-and-messages/#tipos-de-eventos-kinds","title":"Tipos de Eventos (Kinds)","text":"<p>Los tipos de eventos determinan c\u00f3mo debe interpretarse el evento:</p>"},{"location":"es/concepts/events-and-messages/#eventos-de-texto","title":"Eventos de Texto","text":""},{"location":"es/concepts/events-and-messages/#kind-1-nota-de-texto","title":"Kind 1: Nota de Texto","text":"<p>El tipo de evento m\u00e1s com\u00fan - como un tweet:</p> <pre><code>{\n  \"kind\": 1,\n  \"content\": \"\u00a1Acabo de aprender sobre Nostr! Esta red social descentralizada es incre\u00edble \ud83d\ude80\",\n  \"tags\": [\n    [\"t\", \"nostr\"],\n    [\"t\", \"descentralizado\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#kind-0-metadatos-de-usuario","title":"Kind 0: Metadatos de Usuario","text":"<p>Informaci\u00f3n de perfil:</p> <pre><code>{\n  \"kind\": 0,\n  \"content\": \"{\\\"name\\\":\\\"Alicia\\\",\\\"about\\\":\\\"Entusiasta de Nostr\\\",\\\"picture\\\":\\\"https://example.com/avatar.jpg\\\"}\"\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#eventos-sociales","title":"Eventos Sociales","text":""},{"location":"es/concepts/events-and-messages/#kind-7-reaccion","title":"Kind 7: Reacci\u00f3n","text":"<p>Likes, corazones y otras reacciones:</p> <pre><code>{\n  \"kind\": 7,\n  \"content\": \"\ud83e\udd19\",\n  \"tags\": [\n    [\"e\", \"id-nota-reaccionada\"],\n    [\"p\", \"autor-nota-original\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#kind-6-repost","title":"Kind 6: Repost","text":"<p>Compartir la nota de otra persona:</p> <pre><code>{\n  \"kind\": 6,\n  \"content\": \"\",\n  \"tags\": [\n    [\"e\", \"id-evento-reposteado\"],\n    [\"p\", \"pubkey-autor-original\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#eventos-de-comunicacion","title":"Eventos de Comunicaci\u00f3n","text":""},{"location":"es/concepts/events-and-messages/#kind-4-mensaje-directo-encriptado","title":"Kind 4: Mensaje Directo Encriptado","text":"<p>Mensajes privados entre usuarios:</p> <pre><code>{\n  \"kind\": 4,\n  \"content\": \"contenido-mensaje-encriptado\",\n  \"tags\": [\n    [\"p\", \"pubkey-destinatario\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#kind-42-mensaje-de-canal","title":"Kind 42: Mensaje de Canal","text":"<p>Mensajes de salas de chat p\u00fablicas:</p> <pre><code>{\n  \"kind\": 42,\n  \"content\": \"\u00a1Hola a todos en este canal!\",\n  \"tags\": [\n    [\"e\", \"id-evento-creacion-canal\", \"\", \"root\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#eventos-de-gestion","title":"Eventos de Gesti\u00f3n","text":""},{"location":"es/concepts/events-and-messages/#kind-3-lista-de-contactos","title":"Kind 3: Lista de Contactos","text":"<p>A qui\u00e9n sigues:</p> <pre><code>{\n  \"kind\": 3,\n  \"content\": \"\",\n  \"tags\": [\n    [\"p\", \"pubkey1\", \"url-rele\", \"apodo\"],\n    [\"p\", \"pubkey2\", \"url-rele\", \"alicia\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#kind-5-eliminacion-de-evento","title":"Kind 5: Eliminaci\u00f3n de Evento","text":"<p>Solicitud para eliminar tus propios eventos:</p> <pre><code>{\n  \"kind\": 5,\n  \"content\": \"Eliminando esta publicaci\u00f3n\",\n  \"tags\": [\n    [\"e\", \"id-evento-a-eliminar\"],\n    [\"k\", \"1\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#eventos-avanzados","title":"Eventos Avanzados","text":""},{"location":"es/concepts/events-and-messages/#kind-30023-contenido-de-formato-largo","title":"Kind 30023: Contenido de Formato Largo","text":"<p>Art\u00edculos y posts de blog:</p> <pre><code>{\n  \"kind\": 30023,\n  \"content\": \"# Mi Art\u00edculo\\n\\nEste es un art\u00edculo de formato largo...\",\n  \"tags\": [\n    [\"d\", \"slug-mi-articulo\"],\n    [\"title\", \"Mi Art\u00edculo Incre\u00edble\"],\n    [\"summary\", \"Un resumen breve\"],\n    [\"published_at\", \"1234567890\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#kind-9735-zap","title":"Kind 9735: Zap","text":"<p>Pagos Lightning:</p> <pre><code>{\n  \"kind\": 9735,\n  \"content\": \"\",\n  \"tags\": [\n    [\"bolt11\", \"factura-lightning\"],\n    [\"description\", \"evento-solicitud-zap\"],\n    [\"p\", \"pubkey-destinatario\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#sistema-de-etiquetas","title":"Sistema de Etiquetas","text":"<p>Las etiquetas proporcionan metadatos estructurados para eventos:</p>"},{"location":"es/concepts/events-and-messages/#tipos-de-etiquetas-comunes","title":"Tipos de Etiquetas Comunes","text":""},{"location":"es/concepts/events-and-messages/#etiquetas-e-referencias-de-eventos","title":"Etiquetas \"e\" - Referencias de Eventos","text":"<p>Referencian otros eventos:</p> <pre><code>[\"e\", \"id-evento\", \"url-rele\", \"marcador\", \"pubkey\"]\n</code></pre> <ul> <li><code>id-evento</code>: El evento siendo referenciado</li> <li><code>url-rele</code>: D\u00f3nde encontrar el evento (opcional)</li> <li><code>marcador</code>: \"root\", \"reply\", o \"mention\" (opcional)</li> <li><code>pubkey</code>: Autor del evento referenciado (opcional)</li> </ul>"},{"location":"es/concepts/events-and-messages/#etiquetas-p-referencias-de-pubkey","title":"Etiquetas \"p\" - Referencias de Pubkey","text":"<p>Referencian usuarios:</p> <pre><code>[\"p\", \"pubkey\", \"url-rele\", \"apodo\"]\n</code></pre>"},{"location":"es/concepts/events-and-messages/#etiquetas-t-temashashtags","title":"Etiquetas \"t\" - Temas/Hashtags","text":"<p>Categorizan contenido:</p> <pre><code>[\"t\", \"nostr\"]\n[\"t\", \"bitcoin\"]\n</code></pre>"},{"location":"es/concepts/events-and-messages/#etiquetas-d-identificadores","title":"Etiquetas \"d\" - Identificadores","text":"<p>Para eventos reemplazables:</p> <pre><code>[\"d\", \"identificador-unico\"]\n</code></pre>"},{"location":"es/concepts/events-and-messages/#etiquetas-avanzadas","title":"Etiquetas Avanzadas","text":"<pre><code>// Advertencia de contenido\n[\"content-warning\", \"raz\u00f3n\"]\n\n// Expiraci\u00f3n\n[\"expiration\", \"timestamp-unix\"]\n\n// L\u00ednea de asunto\n[\"subject\", \"Asunto tipo email\"]\n\n// Ubicaci\u00f3n geogr\u00e1fica\n[\"g\", \"geohash\"]\n</code></pre>"},{"location":"es/concepts/events-and-messages/#proceso-de-creacion-de-eventos","title":"Proceso de Creaci\u00f3n de Eventos","text":""},{"location":"es/concepts/events-and-messages/#1-construir-objeto-de-evento","title":"1. Construir Objeto de Evento","text":"<pre><code>const event = {\n  kind: 1,\n  created_at: Math.floor(Date.now() / 1000),\n  tags: [\n    [\"t\", \"nostr\"],\n    [\"p\", \"alguna-pubkey\"]\n  ],\n  content: \"\u00a1Hola Nostr!\"\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#2-agregar-pubkey","title":"2. Agregar Pubkey","text":"<pre><code>event.pubkey = getPublicKey(privateKey)\n</code></pre>"},{"location":"es/concepts/events-and-messages/#3-calcular-id","title":"3. Calcular ID","text":"<pre><code>import { getEventHash } from 'nostr-tools'\n\nevent.id = getEventHash(event)\n</code></pre>"},{"location":"es/concepts/events-and-messages/#4-firmar-evento","title":"4. Firmar Evento","text":"<pre><code>import { signEvent } from 'nostr-tools'\n\nevent.sig = signEvent(event, privateKey)\n</code></pre>"},{"location":"es/concepts/events-and-messages/#5-publicar-a-reles","title":"5. Publicar a Rel\u00e9s","text":"<pre><code>relays.forEach(relay =&gt; {\n  relay.publish(event)\n})\n</code></pre>"},{"location":"es/concepts/events-and-messages/#verificacion-de-eventos","title":"Verificaci\u00f3n de Eventos","text":"<p>Al recibir eventos, los clientes deben verificarlos:</p>"},{"location":"es/concepts/events-and-messages/#1-verificar-id","title":"1. Verificar ID","text":"<pre><code>import { getEventHash } from 'nostr-tools'\n\nconst calculatedId = getEventHash(event)\nif (calculatedId !== event.id) {\n  throw new Error('ID de evento inv\u00e1lido')\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#2-verificar-firma","title":"2. Verificar Firma","text":"<pre><code>import { verifySignature } from 'nostr-tools'\n\nconst isValid = verifySignature(event)\nif (!isValid) {\n  throw new Error('Firma inv\u00e1lida')\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#3-verificar-timestamp","title":"3. Verificar Timestamp","text":"<pre><code>const now = Math.floor(Date.now() / 1000)\nconst age = now - event.created_at\n\n// Rechazar eventos muy futuros\nif (event.created_at &gt; now + 60) {\n  throw new Error('Evento del futuro')\n}\n\n// Opcionalmente rechazar eventos muy antiguos\nif (age &gt; 86400 * 30) { // 30 d\u00edas\n  console.warn('Evento muy antiguo')\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#serializacion-de-eventos","title":"Serializaci\u00f3n de Eventos","text":"<p>Los eventos deben serializarse consistentemente para el c\u00e1lculo del ID:</p> <pre><code>// Serializaci\u00f3n para c\u00e1lculo de ID\nconst serialized = JSON.stringify([\n  0,\n  event.pubkey,\n  event.created_at,\n  event.kind,\n  event.tags,\n  event.content\n])\n\n// Sin espacios en blanco, escape espec\u00edfico de caracteres\nconst id = sha256(utf8Encode(serialized))\n</code></pre>"},{"location":"es/concepts/events-and-messages/#reglas-de-escape-de-caracteres","title":"Reglas de Escape de Caracteres","text":"<p>Caracteres espec\u00edficos deben escaparse en el contenido:</p> <ul> <li>Salto de l\u00ednea (<code>0x0A</code>) \u2192 <code>\\n</code></li> <li>Comilla doble (<code>0x22</code>) \u2192 <code>\\\"</code></li> <li>Barra invertida (<code>0x5C</code>) \u2192 <code>\\\\</code></li> <li>Retorno de carro (<code>0x0D</code>) \u2192 <code>\\r</code></li> <li>Tab (<code>0x09</code>) \u2192 <code>\\t</code></li> <li>Backspace (<code>0x08</code>) \u2192 <code>\\b</code></li> <li>Form feed (<code>0x0C</code>) \u2192 <code>\\f</code></li> </ul>"},{"location":"es/concepts/events-and-messages/#relaciones-de-eventos","title":"Relaciones de Eventos","text":"<p>Los eventos pueden referenciarse entre s\u00ed para crear estructuras complejas:</p>"},{"location":"es/concepts/events-and-messages/#hilos-respuestas","title":"Hilos (Respuestas)","text":"<pre><code>{\n  \"kind\": 1,\n  \"content\": \"Esta es una respuesta\",\n  \"tags\": [\n    [\"e\", \"id-evento-raiz\", \"\", \"root\"],\n    [\"e\", \"id-evento-padre\", \"\", \"reply\"],\n    [\"p\", \"pubkey-autor-original\"],\n    [\"p\", \"pubkey-autor-padre\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#menciones","title":"Menciones","text":"<pre><code>{\n  \"kind\": 1,\n  \"content\": \"Oye #[0], \u00a1mira esto!\",\n  \"tags\": [\n    [\"p\", \"pubkey-usuario-mencionado\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#citas","title":"Citas","text":"<pre><code>{\n  \"kind\": 1,\n  \"content\": \"Esto es interesante: nostr:note1abc...\",\n  \"tags\": [\n    [\"q\", \"id-evento-citado\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#eventos-reemplazables","title":"Eventos Reemplazables","text":"<p>Algunos eventos pueden ser reemplazados por versiones m\u00e1s nuevas:</p>"},{"location":"es/concepts/events-and-messages/#reemplazable-regular-10000-19999","title":"Reemplazable Regular (10000-19999)","text":"<p>Solo se mantiene el evento m\u00e1s reciente para cada <code>kind</code> + <code>pubkey</code>:</p> <pre><code>{\n  \"kind\": 10000,\n  \"content\": \"Mi lista de silenciados\",\n  \"tags\": [\n    [\"p\", \"pubkey-silenciado-1\"],\n    [\"p\", \"pubkey-silenciado-2\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#reemplazable-parametrizado-30000-39999","title":"Reemplazable Parametrizado (30000-39999)","text":"<p>\u00daltimo evento para cada <code>kind</code> + <code>pubkey</code> + etiqueta <code>d</code>:</p> <pre><code>{\n  \"kind\": 30023,\n  \"tags\": [\n    [\"d\", \"slug-mi-articulo\"],\n    [\"title\", \"Mi Art\u00edculo\"]\n  ],\n  \"content\": \"Contenido del art\u00edculo...\"\n}\n</code></pre>"},{"location":"es/concepts/events-and-messages/#reglas-de-validacion-de-eventos","title":"Reglas de Validaci\u00f3n de Eventos","text":""},{"location":"es/concepts/events-and-messages/#validaciones-requeridas","title":"Validaciones Requeridas","text":"<ul> <li><code>id</code> coincide con SHA-256 del evento serializado</li> <li><code>sig</code> es una firma Schnorr v\u00e1lida</li> <li><code>pubkey</code> es hex v\u00e1lido de 32 bytes</li> <li><code>created_at</code> es un timestamp razonable</li> <li><code>kind</code> es un entero v\u00e1lido</li> <li><code>tags</code> es array de arrays de strings</li> </ul>"},{"location":"es/concepts/events-and-messages/#validaciones-opcionales","title":"Validaciones Opcionales","text":"<ul> <li>L\u00edmites de longitud de contenido</li> <li>L\u00edmites de conteo de etiquetas</li> <li>Frescura de timestamp</li> <li>Requisitos de prueba de trabajo</li> <li>Filtrado de contenido</li> </ul>"},{"location":"es/concepts/events-and-messages/#trabajando-con-eventos-en-codigo","title":"Trabajando con Eventos en C\u00f3digo","text":""},{"location":"es/concepts/events-and-messages/#creando-una-nota-de-texto","title":"Creando una Nota de Texto","text":"<pre><code>import { finishEvent } from 'nostr-tools'\n\nconst event = finishEvent({\n  kind: 1,\n  created_at: Math.floor(Date.now() / 1000),\n  tags: [\n    [\"t\", \"hola\"],\n    [\"t\", \"nostr\"]\n  ],\n  content: \"\u00a1Hola mundo Nostr! \ud83d\udc4b\"\n}, privateKey)\n\nconsole.log('Evento creado:', event)\n</code></pre>"},{"location":"es/concepts/events-and-messages/#creando-una-respuesta","title":"Creando una Respuesta","text":"<pre><code>const replyEvent = finishEvent({\n  kind: 1,\n  created_at: Math.floor(Date.now() / 1000),\n  tags: [\n    [\"e\", originalEvent.id, \"\", \"root\"],\n    [\"p\", originalEvent.pubkey]\n  ],\n  content: \"\u00a1Gran publicaci\u00f3n! Gracias por compartir.\"\n}, privateKey)\n</code></pre>"},{"location":"es/concepts/events-and-messages/#creando-una-reaccion","title":"Creando una Reacci\u00f3n","text":"<pre><code>const reaction = finishEvent({\n  kind: 7,\n  created_at: Math.floor(Date.now() / 1000),\n  tags: [\n    [\"e\", noteEvent.id],\n    [\"p\", noteEvent.pubkey],\n    [\"k\", \"1\"] // kind del evento al que se reacciona\n  ],\n  content: \"\ud83e\udd19\"\n}, privateKey)\n</code></pre>"},{"location":"es/concepts/events-and-messages/#mejores-practicas","title":"Mejores Pr\u00e1cticas","text":""},{"location":"es/concepts/events-and-messages/#para-creacion-de-eventos","title":"Para Creaci\u00f3n de Eventos","text":"<p>Haz Esto</p> <ul> <li>Siempre establece timestamps <code>created_at</code> razonables</li> <li>Incluye etiquetas <code>p</code> relevantes para notificaciones</li> <li>Usa formatos de etiquetas est\u00e1ndar</li> <li>Mant\u00e9n el tama\u00f1o del contenido razonable</li> <li>Incluye referencias de eventos apropiadas en respuestas</li> </ul> <p>Evita Esto</p> <ul> <li>Crear eventos con timestamps futuros</li> <li>Omitir etiquetas <code>p</code> requeridas en respuestas</li> <li>Usar formatos de etiquetas no est\u00e1ndar</li> <li>Crear ruido excesivo de etiquetas</li> <li>Olvidar manejar caracteres especiales</li> </ul>"},{"location":"es/concepts/events-and-messages/#para-procesamiento-de-eventos","title":"Para Procesamiento de Eventos","text":"<ul> <li>Siempre verifica firmas antes de confiar en eventos</li> <li>Implementa verificaciones razonables de timestamp</li> <li>Maneja campos faltantes o malformados graciosamente</li> <li>Cachea resultados de verificaci\u00f3n para rendimiento</li> <li>Limita la velocidad de procesamiento de eventos para prevenir spam</li> </ul>"},{"location":"es/concepts/events-and-messages/#patrones-comunes","title":"Patrones Comunes","text":""},{"location":"es/concepts/events-and-messages/#creacion-de-hilos","title":"Creaci\u00f3n de Hilos","text":"<pre><code>// Publicaci\u00f3n ra\u00edz\nconst rootPost = finishEvent({\n  kind: 1,\n  content: \"Iniciando un nuevo hilo sobre eventos Nostr...\",\n  // ...\n}, privateKey)\n\n// Respuesta a la ra\u00edz\nconst reply = finishEvent({\n  kind: 1,\n  content: \"Primer punto: los eventos son la estructura de datos central\",\n  tags: [\n    [\"e\", rootPost.id, \"\", \"root\"],\n    [\"p\", rootPost.pubkey]\n  ]\n  // ...\n}, privateKey)\n</code></pre>"},{"location":"es/concepts/events-and-messages/#descubrimiento-de-contenido","title":"Descubrimiento de Contenido","text":"<pre><code>// Suscribirse a hashtag\nconst sub = relay.sub([{\n  kinds: [1],\n  \"#t\": [\"nostr\"]\n}])\n\n// Suscribirse a menciones\nconst mentionSub = relay.sub([{\n  kinds: [1],\n  \"#p\": [myPubkey]\n}])\n</code></pre>"},{"location":"es/concepts/events-and-messages/#actualizaciones-de-eventos","title":"Actualizaciones de Eventos","text":"<pre><code>// Evento reemplazable (perfil)\nconst profile = finishEvent({\n  kind: 0,\n  content: JSON.stringify({\n    name: \"Alicia\",\n    about: \"Desarrolladora Nostr\",\n    picture: \"https://example.com/avatar.jpg\"\n  })\n  // ...\n}, privateKey)\n</code></pre>"},{"location":"es/concepts/events-and-messages/#proximos-pasos","title":"Pr\u00f3ximos Pasos","text":"<p>Entender los eventos es crucial para construir aplicaciones Nostr. A continuaci\u00f3n, explora:</p> <ul> <li>Rel\u00e9s y Comunicaci\u00f3n - C\u00f3mo los eventos viajan a trav\u00e9s de la red</li> <li>NIPs - Especificaciones para diferentes tipos de eventos</li> <li>Construyendo Aplicaciones - Juntando todo</li> </ul> <p>Ejercicio de Pr\u00e1ctica</p> <p>Trata de crear diferentes tipos de eventos usando los ejemplos anteriores. Comienza con notas de texto simples y gradualmente explora tipos de eventos m\u00e1s complejos como respuestas y reacciones.</p>"},{"location":"es/concepts/keys/","title":"Llaves e Identidad en Nostr","text":"<p>Objetivos de Aprendizaje</p> <p>Despu\u00e9s de esta lecci\u00f3n, entender\u00e1s:</p> <ul> <li>C\u00f3mo funciona la identidad digital en el protocolo Nostr</li> <li>La diferencia entre llaves privadas y p\u00fablicas</li> <li>Diferentes formatos de llaves y sus prop\u00f3sitos</li> <li>Mejores pr\u00e1cticas para seguridad y gesti\u00f3n de llaves</li> <li>Por qu\u00e9 Nostr usa identidad criptogr\u00e1fica en lugar de nombres de usuario</li> </ul>"},{"location":"es/concepts/keys/#identidad-criptografica","title":"Identidad Criptogr\u00e1fica","text":"<p>Nostr usa un enfoque fundamentalmente diferente para la identidad comparado con las plataformas de redes sociales tradicionales. En lugar de nombres de usuario y contrase\u00f1as gestionadas por una autoridad central, Nostr emplea pares de llaves criptogr\u00e1ficas para establecer y verificar identidad.</p> <p>Este enfoque proporciona a los usuarios propiedad completa y control sobre su identidad digital, eliminando la dependencia de cualquier plataforma central o proveedor de servicios.</p>"},{"location":"es/concepts/keys/#entendiendo-los-pares-de-llaves","title":"Entendiendo los Pares de Llaves","text":""},{"location":"es/concepts/keys/#fundamentos-criptograficos","title":"Fundamentos Criptogr\u00e1ficos","text":"<p>Las llaves criptogr\u00e1ficas funcionan como pares matem\u00e1ticamente relacionados que habilitan comunicaci\u00f3n digital segura:</p> <ul> <li>Relaci\u00f3n matem\u00e1tica unidireccional: Las llaves p\u00fablicas se derivan de las llaves privadas, pero el reverso es computacionalmente inviable</li> <li>Firmas digitales: Las llaves privadas crean firmas que las llaves p\u00fablicas pueden verificar</li> <li>Verificaci\u00f3n de identidad: Las firmas prueban propiedad sin revelar la llave privada</li> </ul> <pre><code>graph LR\n    A[Llave Privada&lt;br/&gt;Componente Secreto] --&gt;|genera| B[Llave P\u00fablica&lt;br/&gt;Componente de Identidad]\n    A --&gt;|firma| C[Mensajes/Eventos]\n    B --&gt;|verifica| C\n    B --&gt;|se convierte en| D[Identidad Nostr]</code></pre>"},{"location":"es/concepts/keys/#gestion-de-llave-privada","title":"Gesti\u00f3n de Llave Privada","text":""},{"location":"es/concepts/keys/#definicion-y-proposito","title":"Definici\u00f3n y Prop\u00f3sito","text":"<p>La llave privada sirve como el secreto maestro que controla toda tu identidad Nostr. Es un n\u00famero aleatorio criptogr\u00e1ficamente seguro que:</p> <ul> <li>Genera tu identidad p\u00fablica: Deriva matem\u00e1ticamente tu llave p\u00fablica</li> <li>Crea firmas digitales: Prueba autor\u00eda de tus eventos</li> <li>Controla todas las interacciones: Requerida para publicar, seguir y otras acciones</li> <li>No puede recuperarse: La p\u00e9rdida resulta en p\u00e9rdida permanente de identidad</li> </ul>"},{"location":"es/concepts/keys/#requisitos-de-seguridad","title":"Requisitos de Seguridad","text":"<p>La seguridad de la llave privada es cr\u00edtica para mantener control de tu identidad Nostr:</p> <p>Pr\u00e1cticas de Seguridad Cr\u00edticas</p> <p>Nunca Compartas Tu Llave Privada - No transmitas v\u00eda email, mensajer\u00eda, o cualquier comunicaci\u00f3n digital - Evita almacenar en archivos de texto plano o formatos no encriptados - Nunca ingreses en aplicaciones o sitios web no confiables</p> <p>M\u00e9todos de Almacenamiento Seguro - Usa billeteras hardware para m\u00e1xima seguridad - Emplea gestores de contrase\u00f1as encriptados - Crea respaldos fuera de l\u00ednea, encriptados - Almacena en m\u00faltiples ubicaciones seguras</p>"},{"location":"es/concepts/keys/#ejemplos-de-formato-de-llaves","title":"Ejemplos de Formato de Llaves","text":"Formato HexFormato nsec (Bech32) <pre><code>d63b64d9c2c4f8c7b8e9f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2\n</code></pre> <pre><code>nsec1mclkfkwu2n7v0wuwn6d2kwx56mn0029ceuxr6ul6xjm2k6l7qxsqrxqhp8\n</code></pre>"},{"location":"es/concepts/keys/#distribucion-de-llave-publica","title":"Distribuci\u00f3n de Llave P\u00fablica","text":""},{"location":"es/concepts/keys/#proposito-y-funcion","title":"Prop\u00f3sito y Funci\u00f3n","text":"<p>Tu llave p\u00fablica sirve como tu direcci\u00f3n permanente e identidad Nostr. Habilita:</p> <ul> <li>Identificaci\u00f3n global: Direcci\u00f3n \u00fanica en la red Nostr</li> <li>Verificaci\u00f3n de firma: Otros pueden verificar la autenticidad de tus mensajes</li> <li>Conexiones sociales: Los seguidores usan esto para encontrarte y seguirte</li> <li>Compatibilidad entre clientes: Funciona en todas las aplicaciones Nostr</li> </ul>"},{"location":"es/concepts/keys/#pautas-para-compartir","title":"Pautas para Compartir","text":"<p>A diferencia de las llaves privadas, las llaves p\u00fablicas est\u00e1n dise\u00f1adas para distribuci\u00f3n abierta:</p> <p>\u2705 Seguro compartir p\u00fablicamente \u2705 Incluir en perfiles de redes sociales \u2705 Mostrar en sitios web y tarjetas de presentaci\u00f3n \u2705 Enviar v\u00eda cualquier m\u00e9todo de comunicaci\u00f3n \u2705 Incrustar en c\u00f3digos QR</p>"},{"location":"es/concepts/keys/#formatos-de-llave-publica","title":"Formatos de Llave P\u00fablica","text":"Formato HexFormato npub (Bech32) <pre><code>a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2\n</code></pre> <pre><code>npub15xdv832ue0s3h2wr6hetw6x2m5xl3wnsdqwr6ul3c73j4wmnqxsqrc47xx\n</code></pre>"},{"location":"es/concepts/keys/#gestion-de-identidad","title":"Gesti\u00f3n de Identidad","text":""},{"location":"es/concepts/keys/#migracion-de-identidad","title":"Migraci\u00f3n de Identidad","text":"<p>Una vez que tienes un par de llaves Nostr, tu identidad es portable entre todas las aplicaciones:</p> <p>Ventajas de Portabilidad: - Cambiar entre clientes sin perder seguidores - Mantener historial de mensajes - Conservar reputaci\u00f3n social - Evitar dependencia de vendedor</p> <p>Proceso de Migraci\u00f3n: 1. Exportar llave privada de la aplicaci\u00f3n actual 2. Importar llave privada en nueva aplicaci\u00f3n 3. Configurar lista de rel\u00e9s preferidos 4. Verificar que el perfil se muestre correctamente</p>"},{"location":"es/concepts/keys/#recuperacion-de-cuenta","title":"Recuperaci\u00f3n de Cuenta","text":"<p>A diferencia de las cuentas tradicionales, la recuperaci\u00f3n de Nostr depende \u00fanicamente de tu llave privada:</p> <p>Sin Recuperaci\u00f3n Centralizada</p> <p>No existe \"recuperaci\u00f3n de contrase\u00f1a\" - Ning\u00fan servicio puede restablecer tu acceso - Las preguntas de seguridad no existen - La verificaci\u00f3n por email no es posible - Solo tu llave privada puede restaurar el acceso</p> <p>Estrategias de Recuperaci\u00f3n: - M\u00faltiples respaldos en ubicaciones seguras - Sistemas de recuperaci\u00f3n con m\u00faltiples firmas - Esquemas de respaldo familiar/amigos de confianza - Servicios de custodia para usuarios no t\u00e9cnicos</p>"},{"location":"es/concepts/keys/#mejores-practicas-de-seguridad","title":"Mejores Pr\u00e1cticas de Seguridad","text":""},{"location":"es/concepts/keys/#generacion-de-llaves","title":"Generaci\u00f3n de Llaves","text":"<p>Generar llaves seguras requiere aleatoriedad criptogr\u00e1ficamente fuerte:</p> <p>Fuentes Recomendadas: - Aplicaciones Nostr establecidas con buena reputaci\u00f3n - Librer\u00edas criptogr\u00e1ficas est\u00e1ndar de la industria - Generadores de hardware dedicados - Software de c\u00f3digo abierto auditado</p> <p>Fuentes a Evitar: - Sitios web de confianza dudosa - Software no auditado - Aplicaciones m\u00f3viles sospechosas - Generadores caseros</p>"},{"location":"es/concepts/keys/#almacenamiento-operacional","title":"Almacenamiento Operacional","text":"<p>Para uso diario, equilibra seguridad con usabilidad:</p> <p>Dispositivos Primarios: - Usa gestores de contrase\u00f1as para almacenamiento encriptado - Habilita bloqueo autom\u00e1tico de aplicaciones - Mant\u00e9n software actualizado - Usa autenticaci\u00f3n de dos factores cuando est\u00e9 disponible</p> <p>Almacenamiento en Fr\u00edo: - Respaldos offline para almacenamiento a largo plazo - M\u00faltiples ubicaciones f\u00edsicas - Encriptaci\u00f3n adicional de archivos de respaldo - Testing regular de procedimientos de recuperaci\u00f3n</p>"},{"location":"es/concepts/keys/#compartimentacion","title":"Compartimentaci\u00f3n","text":"<p>Considera m\u00faltiples identidades para diferentes prop\u00f3sitos:</p> <p>Identidad Personal: - Para conexiones sociales y comunicaci\u00f3n personal - Configuraciones de privacidad m\u00e1s altas - Interacci\u00f3n limitada con servicios desconocidos</p> <p>Identidad P\u00fablica/Profesional: - Para marca personal y comunicaci\u00f3n de negocios - Mayor visibilidad y descubribilidad - Integraci\u00f3n con otros perfiles p\u00fablicos</p> <p>Identidades de Desarrollo/Testing: - Para experimentaci\u00f3n y desarrollo - Sin valor real o conexiones importantes - F\u00e1cil de descartar si se compromete</p>"},{"location":"es/concepts/keys/#implementacion-tecnica","title":"Implementaci\u00f3n T\u00e9cnica","text":""},{"location":"es/concepts/keys/#ejemplos-de-codigo","title":"Ejemplos de C\u00f3digo","text":"<p>Generar y gestionar llaves usando librer\u00edas populares:</p> JavaScriptPythonRust <pre><code>import { generatePrivateKey, getPublicKey } from 'nostr-tools'\n\n// Generar nuevo par de llaves\nconst privateKey = generatePrivateKey()\nconst publicKey = getPublicKey(privateKey)\n\nconsole.log('Llave privada:', privateKey)\nconsole.log('Llave p\u00fablica:', publicKey)\n\n// Almacenar de forma segura (solo para desarrollo)\n// En producci\u00f3n, usar almacenamiento seguro\nlocalStorage.setItem('nostr-private-key', privateKey)\n</code></pre> <pre><code>from nostr.key import PrivateKey\n\n# Generar llaves\nprivate_key = PrivateKey()\npublic_key = private_key.public_key\n\nprint(f\"Llave privada: {private_key.hex()}\")\nprint(f\"Llave p\u00fablica: {public_key.hex()}\")\n\n# Formato bech32\nprint(f\"nsec: {private_key.bech32()}\")\nprint(f\"npub: {public_key.bech32()}\")\n</code></pre> <pre><code>use nostr_sdk::prelude::*;\n\n// Generar llaves\nlet keys = Keys::generate();\n\nprintln!(\"Llave privada: {}\", keys.secret_key().to_secret_hex());\nprintln!(\"Llave p\u00fablica: {}\", keys.public_key().to_hex());\n\n// Formato bech32\nprintln!(\"nsec: {}\", keys.secret_key().to_bech32().unwrap());\nprintln!(\"npub: {}\", keys.public_key().to_bech32().unwrap());\n</code></pre>"},{"location":"es/concepts/keys/#validacion-de-llaves","title":"Validaci\u00f3n de Llaves","text":"<p>Siempre valida llaves antes de usarlas:</p> <pre><code>import { validateEvent, verifySignature } from 'nostr-tools'\n\nfunction isValidPrivateKey(key) {\n  try {\n    // Verificar que es hex v\u00e1lido de 64 caracteres\n    return /^[0-9a-f]{64}$/.test(key)\n  } catch {\n    return false\n  }\n}\n\nfunction isValidPublicKey(key) {\n  try {\n    // Verificar formato y longitud\n    return /^[0-9a-f]{64}$/.test(key)\n  } catch {\n    return false\n  }\n}\n</code></pre>"},{"location":"es/concepts/keys/#escenarios-de-uso-avanzado","title":"Escenarios de Uso Avanzado","text":""},{"location":"es/concepts/keys/#derivacion-deterministica","title":"Derivaci\u00f3n Determin\u00edstica","text":"<p>Para usuarios avanzados, considera derivaci\u00f3n de llaves determin\u00edstica:</p> <pre><code>import { HDKey } from '@scure/bip32'\nimport { mnemonicToSeed } from '@scure/bip39'\n\n// Generar desde mnem\u00f3nico\nconst mnemonic = \"palabra1 palabra2 ... palabra12\"\nconst seed = await mnemonicToSeed(mnemonic)\nconst hdkey = HDKey.fromMasterSeed(seed)\n\n// Derivar llave Nostr\nconst nostrKey = hdkey.derive(\"m/44'/1237'/0'/0/0\")\nconst privateKey = nostrKey.privateKey.toString('hex')\n</code></pre>"},{"location":"es/concepts/keys/#delegacion-de-llaves","title":"Delegaci\u00f3n de Llaves","text":"<p>Para aplicaciones que requieren acceso limitado:</p> <pre><code>// Crear evento de delegaci\u00f3n\nconst delegationEvent = {\n  kind: 26,\n  content: \"\",\n  tags: [\n    [\"delegation\", delegatedPubkey, conditions, token]\n  ]\n}\n\n// Firmar con llave principal\nconst signedDelegation = finishEvent(delegationEvent, mainPrivateKey)\n</code></pre>"},{"location":"es/concepts/keys/#ejercicio-practico","title":"Ejercicio Pr\u00e1ctico","text":"<p>Laboratorio de Gesti\u00f3n de Llaves</p> <p>Objetivo: Practicar generaci\u00f3n, almacenamiento y uso seguro de llaves</p> <p>Parte 1: Generaci\u00f3n 1. Generar un nuevo par de llaves usando tu librer\u00eda preferida 2. Convertir entre formatos hex y bech32 3. Crear un c\u00f3digo QR para la llave p\u00fablica 4. Verificar que la llave p\u00fablica se derive correctamente de la privada</p> <p>Parte 2: Almacenamiento 1. Crear un respaldo encriptado de la llave privada 2. Almacenar el respaldo en una ubicaci\u00f3n segura 3. Documentar el procedimiento de recuperaci\u00f3n 4. Probar la recuperaci\u00f3n usando el respaldo</p> <p>Parte 3: Uso 1. Usar las llaves para firmar un evento de prueba 2. Verificar la firma usando la llave p\u00fablica 3. Publicar el evento a un rel\u00e9 de prueba 4. Verificar que el evento aparezca correctamente</p>"},{"location":"es/concepts/keys/#comparacion-con-sistemas-tradicionales","title":"Comparaci\u00f3n con Sistemas Tradicionales","text":""},{"location":"es/concepts/keys/#ventajas-de-llaves-criptograficas","title":"Ventajas de Llaves Criptogr\u00e1ficas","text":"Aspecto Sistemas Tradicionales Nostr Control de Identidad Plataforma controla Usuario controla Portabilidad Dependiente de plataforma Universal Verificaci\u00f3n Confianza en servidor Verificaci\u00f3n criptogr\u00e1fica Censura F\u00e1cil de censurar Resistente a censura Recuperaci\u00f3n Proceso centralizado Solo usuario puede recuperar"},{"location":"es/concepts/keys/#desafios-y-soluciones","title":"Desaf\u00edos y Soluciones","text":"<p>Desaf\u00edo: Complejidad para Usuarios - Soluci\u00f3n: Interfaces simplificadas que abstraen detalles t\u00e9cnicos - Ejemplo: Aplicaciones que manejan llaves autom\u00e1ticamente</p> <p>Desaf\u00edo: P\u00e9rdida de Llaves - Soluci\u00f3n: M\u00faltiples opciones de respaldo y recuperaci\u00f3n - Ejemplo: Servicios de custodia para usuarios no t\u00e9cnicos</p> <p>Desaf\u00edo: Gesti\u00f3n de M\u00faltiples Identidades - Soluci\u00f3n: Herramientas de gesti\u00f3n de identidad integradas - Ejemplo: Gestores de llaves especializados para Nostr</p>"},{"location":"es/concepts/keys/#futuro-de-la-gestion-de-identidad","title":"Futuro de la Gesti\u00f3n de Identidad","text":""},{"location":"es/concepts/keys/#tendencias-emergentes","title":"Tendencias Emergentes","text":"<p>Hardware Dedicado: - Dispositivos especializados para gesti\u00f3n de llaves Nostr - Integraci\u00f3n con billeteras de hardware existentes - Autenticaci\u00f3n biom\u00e9trica para seguridad adicional</p> <p>Integraci\u00f3n con Web3: - Compatibilidad con ENS y otros sistemas de nombres descentralizados - Puentes con identidades blockchain existentes - Est\u00e1ndares interoperables entre protocolos</p> <p>Mejoras de Usabilidad: - Recuperaci\u00f3n social de llaves - Interfaces m\u00e1s intuitivas para usuarios no t\u00e9cnicos - Automatizaci\u00f3n de mejores pr\u00e1cticas de seguridad</p>"},{"location":"es/concepts/keys/#siguientes-pasos","title":"Siguientes Pasos","text":"<p>Dominar la gesti\u00f3n de llaves es fundamental para usar Nostr de forma segura y efectiva. Con una comprensi\u00f3n s\u00f3lida de estos conceptos, estar\u00e1s preparado para explorar aplicaciones m\u00e1s avanzadas del protocolo.</p>      Eventos y Estructura de Mensajes \u2192"},{"location":"es/concepts/keys/#verificacion-de-conocimiento","title":"Verificaci\u00f3n de Conocimiento","text":"<p>Evaluaci\u00f3n de Competencia en Llaves</p> <ol> <li>\u00bfQu\u00e9 hace que las llaves criptogr\u00e1ficas sean m\u00e1s seguras que las contrase\u00f1as tradicionales?</li> <li>\u00bfPor qu\u00e9 es imposible recuperar una llave privada perdida en Nostr?</li> <li>\u00bfCu\u00e1les son las mejores pr\u00e1cticas para almacenar llaves privadas de forma segura?</li> <li>\u00bfC\u00f3mo permite la portabilidad de llaves la libertad del usuario en Nostr?</li> </ol> An\u00e1lisis de Seguridad <ol> <li>Las llaves criptogr\u00e1ficas proporcionan verificaci\u00f3n matem\u00e1tica sin revelar secretos, eliminando vectores de ataque como phishing y brechas de bases de datos</li> <li>Sin autoridad central significa que no hay \"administrador\" que pueda restablecer acceso - la llave privada es la \u00fanica prueba de propiedad</li> <li>Almacenamiento seguro requiere encriptaci\u00f3n, m\u00faltiples respaldos, ubicaciones offline, y procedimientos de recuperaci\u00f3n probados</li> <li>Portabilidad de llaves permite a los usuarios cambiar entre clientes, rel\u00e9s y servicios sin perder identidad, eliminando vendor lock-in</li> </ol>"},{"location":"es/concepts/nips/","title":"Entendiendo NIPs (Posibilidades de Implementaci\u00f3n de Nostr)","text":"<p>Objetivos de Aprendizaje</p> <p>Despu\u00e9s de esta lecci\u00f3n, entender\u00e1s:</p> <ul> <li>Qu\u00e9 son los NIPs y por qu\u00e9 son esenciales</li> <li>C\u00f3mo los NIPs permiten interoperabilidad e innovaci\u00f3n</li> <li>NIPs centrales que toda implementaci\u00f3n deber\u00eda soportar</li> <li>El proceso de desarrollo y adopci\u00f3n de NIPs</li> <li>C\u00f3mo leer e implementar NIPs</li> </ul> <p>Los NIPs son la columna vertebral de la extensibilidad y estandarizaci\u00f3n de Nostr. Definen c\u00f3mo funcionan las diferentes partes del protocolo y permiten interoperabilidad entre clientes y rel\u00e9s.</p>"},{"location":"es/concepts/nips/#que-son-los-nips","title":"\u00bfQu\u00e9 son los NIPs?","text":"<p>NIP significa Posibilidad de Implementaci\u00f3n de Nostr (Nostr Implementation Possibility). Los NIPs son especificaciones t\u00e9cnicas que describen:</p> <ul> <li>Caracter\u00edsticas y extensiones del protocolo</li> <li>Formatos y estructuras de eventos</li> <li>Comportamientos de clientes y rel\u00e9s</li> <li>Est\u00e1ndares criptogr\u00e1ficos</li> <li>Patrones de comunicaci\u00f3n</li> </ul> <p>Piensa en los NIPs como las \"reglas del juego\" que todas las aplicaciones Nostr siguen para asegurar que puedan trabajar juntas sin problemas.</p>"},{"location":"es/concepts/nips/#por-que-importan-los-nips","title":"Por Qu\u00e9 Importan los NIPs","text":""},{"location":"es/concepts/nips/#interoperabilidad","title":"\ud83d\udd17 Interoperabilidad","text":"<p>Los NIPs aseguran que una nota publicada desde Damus pueda leerse en Amethyst, Iris, o cualquier otro cliente Nostr.</p>"},{"location":"es/concepts/nips/#innovacion","title":"\ud83d\ude80 Innovaci\u00f3n","text":"<p>Nuevas caracter\u00edsticas pueden proponerse, probarse y estandarizarse a trav\u00e9s del proceso NIP.</p>"},{"location":"es/concepts/nips/#estandarizacion","title":"\ud83d\udccb Estandarizaci\u00f3n","text":"<p>Patrones comunes y mejores pr\u00e1cticas se documentan para desarrolladores.</p>"},{"location":"es/concepts/nips/#evolucion","title":"\ud83d\udd04 Evoluci\u00f3n","text":"<p>El protocolo puede evolucionar mientras mantiene compatibilidad hacia atr\u00e1s.</p>"},{"location":"es/concepts/nips/#nips-centrales-esenciales","title":"NIPs Centrales (Esenciales)","text":"<p>Estos NIPs forman la fundaci\u00f3n de Nostr y deber\u00edan implementarse por todos los clientes:</p>"},{"location":"es/concepts/nips/#nip-01-descripcion-del-flujo-basico-del-protocolo","title":"NIP-01: Descripci\u00f3n del Flujo B\u00e1sico del Protocolo","text":"<p>La fundaci\u00f3n de Nostr - define eventos, firmas y comunicaci\u00f3n b\u00e1sica.</p> <p>Conceptos clave: - Estructura y serializaci\u00f3n de eventos - Firmas digitales usando Schnorr - Patrones b\u00e1sicos de comunicaci\u00f3n con rel\u00e9s - Tipos de eventos y sus significados</p> <pre><code>{\n  \"id\": \"id-evento\",\n  \"pubkey\": \"pubkey-autor\",\n  \"created_at\": 1234567890,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"\u00a1Hola Nostr!\",\n  \"sig\": \"firma\"\n}\n</code></pre>"},{"location":"es/concepts/nips/#nip-02-lista-de-seguidos","title":"NIP-02: Lista de Seguidos","text":"<p>Define c\u00f3mo los usuarios se siguen entre s\u00ed y gestionan listas de contactos.</p> <pre><code>{\n  \"kind\": 3,\n  \"tags\": [\n    [\"p\", \"pubkey1\", \"url-rel\u00e9\", \"alicia\"],\n    [\"p\", \"pubkey2\", \"url-rel\u00e9\", \"bob\"]\n  ],\n  \"content\": \"\"\n}\n</code></pre> <p>Casos de uso: - Construir gr\u00e1ficos sociales - Gesti\u00f3n de contactos - Recomendaciones de rel\u00e9s - Sistemas de apodos (petname)</p>"},{"location":"es/concepts/nips/#nip-19-entidades-codificadas-en-bech32","title":"NIP-19: entidades codificadas en bech32","text":"<p>Identificadores legibles para humanos para entidades Nostr.</p> <pre><code>npub1... (llaves p\u00fablicas)\nnsec1... (llaves privadas)  \nnote1... (IDs de notas)\nnprofile1... (perfiles con pistas de rel\u00e9)\nnevent1... (eventos con pistas de rel\u00e9)\nnaddr1... (direcciones para eventos reemplazables)\nnrelay1... (URLs de rel\u00e9s)\n</code></pre>"},{"location":"es/concepts/nips/#nips-de-comunicacion","title":"NIPs de Comunicaci\u00f3n","text":""},{"location":"es/concepts/nips/#nip-04-mensaje-directo-encriptado-deprecado","title":"NIP-04: Mensaje Directo Encriptado (Deprecado)","text":"<p>\u26a0\ufe0f Nota: Deprecado en favor de NIP-17</p> <p>Permite mensajer\u00eda privada entre usuarios usando secretos compartidos.</p> <pre><code>{\n  \"kind\": 4,\n  \"tags\": [[\"p\", \"pubkey-destinatario\"]],\n  \"content\": \"contenido-mensaje-encriptado?iv=vector-inicializacion\"\n}\n</code></pre>"},{"location":"es/concepts/nips/#nip-17-mensajes-directos-privados-estandar-actual","title":"NIP-17: Mensajes Directos Privados (Est\u00e1ndar Actual)","text":"<p>Mensajer\u00eda encriptada moderna con seguridad mejorada.</p> <p>Mejoras clave: - Patr\u00f3n gift wrap para protecci\u00f3n de metadatos - Mejor secreto hacia adelante - Reducida filtraci\u00f3n de metadatos</p>"},{"location":"es/concepts/nips/#nip-10-notas-de-texto-e-hilos","title":"NIP-10: Notas de Texto e Hilos","text":"<p>Estandariza c\u00f3mo referenciar otras notas y crear hilos.</p> <pre><code>{\n  \"kind\": 1,\n  \"tags\": [\n    [\"e\", \"id-evento-ra\u00edz\", \"\", \"root\"],\n    [\"e\", \"id-respuesta-a\", \"\", \"reply\"],\n    [\"p\", \"pubkey-mencionado\"]\n  ],\n  \"content\": \"Esta es una respuesta\"\n}\n</code></pre> <p>Marcadores de etiquetas: - <code>root</code>: Apunta a la ra\u00edz del hilo - <code>reply</code>: Apunta al padre directo - <code>mention</code>: Referencias sin sem\u00e1ntica de respuesta</p>"},{"location":"es/concepts/nips/#identidad-y-verificacion","title":"Identidad y Verificaci\u00f3n","text":""},{"location":"es/concepts/nips/#nip-05-mapeo-de-llaves-nostr-a-identificadores-de-internet-basados-en-dns","title":"NIP-05: Mapeo de llaves Nostr a identificadores de internet basados en DNS","text":"<p>Vincula identidades Nostr a nombres de dominio para verificaci\u00f3n.</p> <p>Proceso: 1. Usuario establece campo <code>nip05</code> en perfil: <code>\"alicia@example.com\"</code> 2. Cliente obtiene <code>https://example.com/.well-known/nostr.json?name=alicia</code> 3. Verifica que pubkey coincida</p> <pre><code>{\n  \"names\": {\n    \"alicia\": \"npub1...\"\n  },\n  \"relays\": {\n    \"npub1...\": [\"wss://relay.example.com\"]\n  }\n}\n</code></pre>"},{"location":"es/concepts/nips/#nip-39-identidades-externas-en-perfiles","title":"NIP-39: Identidades Externas en Perfiles","text":"<p>Vincular plataformas externas a perfiles Nostr.</p> <pre><code>{\n  \"kind\": 0,\n  \"content\": \"{\\\"name\\\":\\\"Alicia\\\"}\",\n  \"tags\": [\n    [\"i\", \"github:alicia\", \"https://github.com/alicia\"],\n    [\"i\", \"twitter:alicia_crypto\", \"https://twitter.com/alicia_crypto\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/nips/#tipos-de-contenido","title":"Tipos de Contenido","text":""},{"location":"es/concepts/nips/#nip-23-contenido-de-formato-largo","title":"NIP-23: Contenido de Formato Largo","text":"<p>Permite publicar art\u00edculos y contenido de formato largo.</p> <pre><code>{\n  \"kind\": 30023,\n  \"tags\": [\n    [\"d\", \"slug-articulo\"],\n    [\"title\", \"T\u00edtulo de Mi Art\u00edculo\"],\n    [\"summary\", \"Resumen del art\u00edculo\"],\n    [\"published_at\", \"1234567890\"]\n  ],\n  \"content\": \"# Contenido del Art\u00edculo\\n\\nEste es un art\u00edculo largo...\"\n}\n</code></pre>"},{"location":"es/concepts/nips/#nip-25-reacciones","title":"NIP-25: Reacciones","text":"<p>Estandariza reacciones (likes, corazones, etc.) a eventos.</p> <pre><code>{\n  \"kind\": 7,\n  \"tags\": [\n    [\"e\", \"id-evento-reaccionado\"],\n    [\"p\", \"autor-evento-reaccionado\"],\n    [\"k\", \"1\"]\n  ],\n  \"content\": \"\ud83e\udd19\"\n}\n</code></pre>"},{"location":"es/concepts/nips/#nip-18-reposts","title":"NIP-18: Reposts","text":"<p>Dos tipos de reposts:</p> <p>Repost Gen\u00e9rico (Kind 6): <pre><code>{\n  \"kind\": 6,\n  \"tags\": [[\"e\", \"id-evento-reposteado\"]],\n  \"content\": \"\"\n}\n</code></pre></p> <p>Quote Repost (Kind 1): <pre><code>{\n  \"kind\": 1,\n  \"tags\": [[\"q\", \"id-evento-citado\"]],\n  \"content\": \"Esto es interesante: nostr:note1...\"\n}\n</code></pre></p>"},{"location":"es/concepts/nips/#integracion-lightning","title":"Integraci\u00f3n Lightning","text":""},{"location":"es/concepts/nips/#nip-57-lightning-zaps","title":"NIP-57: Lightning Zaps","text":"<p>Permite pagos Bitcoin Lightning (zaps) en Nostr.</p> <p>Solicitud de Zap (Kind 9734): <pre><code>{\n  \"kind\": 9734,\n  \"tags\": [\n    [\"p\", \"pubkey-destinatario\"],\n    [\"amount\", \"21000\"],\n    [\"relays\", \"wss://relay1.com\", \"wss://relay2.com\"]\n  ],\n  \"content\": \"\u00a1Gran post! \u26a1\"\n}\n</code></pre></p> <p>Recibo de Zap (Kind 9735): <pre><code>{\n  \"kind\": 9735,\n  \"tags\": [\n    [\"bolt11\", \"factura-lightning\"],\n    [\"description\", \"evento-solicitud-zap\"],\n    [\"p\", \"pubkey-destinatario\"]\n  ]\n}\n</code></pre></p>"},{"location":"es/concepts/nips/#nip-47-wallet-connect","title":"NIP-47: Wallet Connect","text":"<p>Permite control remoto de billetera para pagos Lightning.</p> <p>Comandos soportados: - <code>pay_invoice</code> - <code>pay_keysend</code> - <code>make_invoice</code> - <code>lookup_invoice</code> - <code>get_balance</code> - <code>get_info</code></p>"},{"location":"es/concepts/nips/#operaciones-de-reles","title":"Operaciones de Rel\u00e9s","text":""},{"location":"es/concepts/nips/#nip-11-documento-de-informacion-de-rele","title":"NIP-11: Documento de Informaci\u00f3n de Rel\u00e9","text":"<p>Los rel\u00e9s proporcionan metadatos sobre sus capacidades.</p> <pre><code>{\n  \"name\": \"Mi Rel\u00e9\",\n  \"description\": \"Un rel\u00e9 Nostr\",\n  \"pubkey\": \"pubkey-rel\u00e9\",\n  \"contact\": \"admin@relay.com\",\n  \"supported_nips\": [1, 2, 9, 11, 15, 16, 20, 22],\n  \"software\": \"strfry\",\n  \"version\": \"0.9.6\",\n  \"limitation\": {\n    \"max_message_length\": 16384,\n    \"max_subscriptions\": 300,\n    \"max_limit\": 5000,\n    \"auth_required\": false,\n    \"payment_required\": false\n  }\n}\n</code></pre>"},{"location":"es/concepts/nips/#nip-42-autenticacion-de-clientes-a-reles","title":"NIP-42: Autenticaci\u00f3n de clientes a rel\u00e9s","text":"<p>Permite conexiones autenticadas a rel\u00e9s.</p> <p>Flujo de autenticaci\u00f3n: 1. Rel\u00e9 env\u00eda desaf\u00edo AUTH 2. Cliente firma desaf\u00edo con llave privada 3. Rel\u00e9 verifica firma 4. Sesi\u00f3n autenticada establecida</p>"},{"location":"es/concepts/nips/#nip-50-capacidad-de-busqueda","title":"NIP-50: Capacidad de B\u00fasqueda","text":"<p>Estandariza funcionalidad de b\u00fasqueda entre rel\u00e9s.</p> <pre><code>{\n  \"kinds\": [1],\n  \"search\": \"protocolo nostr\",\n  \"limit\": 20\n}\n</code></pre>"},{"location":"es/concepts/nips/#caracteristicas-avanzadas","title":"Caracter\u00edsticas Avanzadas","text":""},{"location":"es/concepts/nips/#nip-26-firma-de-eventos-delegada-no-recomendado","title":"NIP-26: Firma de Eventos Delegada (No Recomendado)","text":"<p>\u26a0\ufe0f Nota: Agrega complejidad por poco beneficio</p> <p>Permite delegaci\u00f3n de autoridad de firma a otras llaves.</p>"},{"location":"es/concepts/nips/#nip-44-cargas-utiles-encriptadas-versionadas","title":"NIP-44: Cargas \u00datiles Encriptadas (Versionadas)","text":"<p>Est\u00e1ndar de encriptaci\u00f3n mejorado para datos sensibles.</p> <p>Caracter\u00edsticas Versi\u00f3n 2: - Encriptaci\u00f3n ChaCha20-Poly1305 - Autenticaci\u00f3n HMAC - Formato versionado para actualizaciones</p>"},{"location":"es/concepts/nips/#nip-59-gift-wrap","title":"NIP-59: Gift Wrap","text":"<p>Patr\u00f3n de encriptaci\u00f3n avanzado para m\u00e1xima privacidad.</p> <p>Capas: 1. Rumor: El contenido real del evento 2. Sello: Rumor encriptado con metadatos 3. Gift Wrap: Evento p\u00fablico conteniendo el sello</p>"},{"location":"es/concepts/nips/#nip-65-metadatos-de-lista-de-reles","title":"NIP-65: Metadatos de Lista de Rel\u00e9s","text":"<p>Los usuarios publican sus rel\u00e9s preferidos.</p> <pre><code>{\n  \"kind\": 10002,\n  \"tags\": [\n    [\"r\", \"wss://relay1.com\"],\n    [\"r\", \"wss://relay2.com\", \"write\"],\n    [\"r\", \"wss://relay3.com\", \"read\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/nips/#aplicaciones-especializadas","title":"Aplicaciones Especializadas","text":""},{"location":"es/concepts/nips/#nip-15-mercado-nostr","title":"NIP-15: Mercado Nostr","text":"<p>Comercio electr\u00f3nico en Nostr.</p> <p>Listado de producto (Kind 30017): <pre><code>{\n  \"kind\": 30017,\n  \"tags\": [\n    [\"d\", \"id-producto\"],\n    [\"title\", \"Nombre del Producto\"],\n    [\"price\", \"100\", \"USD\"],\n    [\"location\", \"Ciudad de M\u00e9xico, MX\"]\n  ],\n  \"content\": \"{\\\"name\\\":\\\"Producto\\\",\\\"description\\\":\\\"...\\\"}\"\n}\n</code></pre></p>"},{"location":"es/concepts/nips/#nip-52-eventos-de-calendario","title":"NIP-52: Eventos de Calendario","text":"<p>Planificaci\u00f3n de eventos y programaci\u00f3n.</p> <p>Evento basado en tiempo (Kind 31923): <pre><code>{\n  \"kind\": 31923,\n  \"tags\": [\n    [\"d\", \"id-evento\"],\n    [\"title\", \"Meetup Nostr\"],\n    [\"start\", \"1234567890\"],\n    [\"end\", \"1234571490\"],\n    [\"location\", \"Ciudad de M\u00e9xico\"]\n  ]\n}\n</code></pre></p>"},{"location":"es/concepts/nips/#nip-53-actividades-en-vivo","title":"NIP-53: Actividades en Vivo","text":"<p>Streaming en tiempo real y eventos en vivo.</p> <p>Evento en vivo (Kind 30311): <pre><code>{\n  \"kind\": 30311,\n  \"tags\": [\n    [\"d\", \"id-stream\"],\n    [\"title\", \"Sesi\u00f3n de Codificaci\u00f3n en Vivo\"],\n    [\"streaming\", \"https://stream.example.com\"],\n    [\"status\", \"live\"]\n  ]\n}\n</code></pre></p>"},{"location":"es/concepts/nips/#desarrollo-y-gestion","title":"Desarrollo y Gesti\u00f3n","text":""},{"location":"es/concepts/nips/#nip-34-cosas-de-git","title":"NIP-34: cosas de git","text":"<p>Gesti\u00f3n de repositorios Git en Nostr.</p> <p>Anuncio de repositorio (Kind 30617): <pre><code>{\n  \"kind\": 30617,\n  \"tags\": [\n    [\"d\", \"id-repo\"],\n    [\"name\", \"mi-proyecto\"],\n    [\"clone\", \"https://github.com/usuario/repo\"],\n    [\"web\", \"https://github.com/usuario/repo\"]\n  ]\n}\n</code></pre></p>"},{"location":"es/concepts/nips/#nip-90-maquinas-expendedoras-de-datos","title":"NIP-90: M\u00e1quinas Expendedoras de Datos","text":"<p>Servicios de computaci\u00f3n descentralizados.</p> <p>Solicitud de trabajo (Kind 5000-5999): <pre><code>{\n  \"kind\": 5000,\n  \"tags\": [\n    [\"i\", \"datos-entrada\"],\n    [\"output\", \"text/plain\"],\n    [\"relays\", \"wss://relay.com\"]\n  ],\n  \"content\": \"Por favor analiza estos datos\"\n}\n</code></pre></p>"},{"location":"es/concepts/nips/#referencia-completa-de-nips","title":"Referencia Completa de NIPs","text":"<p>Basado en el documento del protocolo, aqu\u00ed est\u00e1n todos los NIPs actuales:</p>"},{"location":"es/concepts/nips/#protocolo-central","title":"Protocolo Central","text":"<ul> <li>NIP-01: Descripci\u00f3n del flujo b\u00e1sico del protocolo</li> <li>NIP-02: Lista de seguidos</li> <li>NIP-03: Atestaciones OpenTimestamps para eventos</li> <li>NIP-04: Mensaje directo encriptado (deprecado)</li> <li>NIP-05: Mapeo de llaves Nostr a identificadores basados en DNS</li> <li>NIP-06: Derivaci\u00f3n b\u00e1sica de llaves desde frase semilla mnem\u00f3nica</li> <li>NIP-07: Capacidad window.nostr para navegadores web</li> <li>NIP-08: Manejo de menciones (deprecado)</li> <li>NIP-09: Solicitud de eliminaci\u00f3n de evento</li> <li>NIP-10: Notas de texto e hilos</li> <li>NIP-11: Documento de informaci\u00f3n de rel\u00e9</li> <li>NIP-13: Prueba de trabajo</li> <li>NIP-14: Etiqueta de asunto en eventos de texto</li> <li>NIP-15: Mercado Nostr</li> </ul>"},{"location":"es/concepts/nips/#comunicacion-y-social","title":"Comunicaci\u00f3n y Social","text":"<ul> <li>NIP-17: Mensajes directos privados</li> <li>NIP-18: Reposts</li> <li>NIP-19: Entidades codificadas en bech32</li> <li>NIP-21: Esquema URI nostr:</li> <li>NIP-22: Comentario</li> <li>NIP-23: Contenido de formato largo</li> <li>NIP-24: Campos de metadatos extra y etiquetas</li> <li>NIP-25: Reacciones</li> <li>NIP-26: Firma de eventos delegada (no recomendado)</li> <li>NIP-27: Referencias de notas de texto</li> <li>NIP-28: Chat p\u00fablico</li> </ul>"},{"location":"es/concepts/nips/#caracteristicas-avanzadas_1","title":"Caracter\u00edsticas Avanzadas","text":"<ul> <li>NIP-29: Grupos basados en rel\u00e9s</li> <li>NIP-30: Emoji personalizado</li> <li>NIP-31: Manejo de eventos desconocidos</li> <li>NIP-32: Etiquetado</li> <li>NIP-34: Cosas de git</li> <li>NIP-35: Torrents</li> <li>NIP-36: Contenido sensible</li> <li>NIP-37: Eventos borrador</li> <li>NIP-38: Estados de usuario</li> <li>NIP-39: Identidades externas en perfiles</li> <li>NIP-40: Timestamp de expiraci\u00f3n</li> </ul>"},{"location":"es/concepts/nips/#autenticacion-y-seguridad","title":"Autenticaci\u00f3n y Seguridad","text":"<ul> <li>NIP-42: Autenticaci\u00f3n de clientes a rel\u00e9s</li> <li>NIP-44: Cargas \u00fatiles encriptadas (versionadas)</li> <li>NIP-45: Conteo de resultados</li> <li>NIP-46: Firma remota Nostr</li> <li>NIP-47: Nostr Wallet Connect</li> <li>NIP-48: Etiquetas proxy</li> <li>NIP-49: Encriptaci\u00f3n de llave privada</li> </ul>"},{"location":"es/concepts/nips/#descubrimiento-y-busqueda","title":"Descubrimiento y B\u00fasqueda","text":"<ul> <li>NIP-50: Capacidad de b\u00fasqueda</li> <li>NIP-51: Listas</li> <li>NIP-52: Eventos de calendario</li> <li>NIP-53: Actividades en vivo</li> <li>NIP-54: Wiki</li> <li>NIP-55: Aplicaci\u00f3n firmadora Android</li> <li>NIP-56: Reportes</li> <li>NIP-57: Lightning Zaps</li> <li>NIP-58: Insignias</li> <li>NIP-59: Gift Wrap</li> </ul>"},{"location":"es/concepts/nips/#aplicaciones-especializadas_1","title":"Aplicaciones Especializadas","text":"<ul> <li>NIP-60: Billetera Cashu</li> <li>NIP-61: Nutzaps</li> <li>NIP-62: Solicitud de desvanecimiento</li> <li>NIP-64: Ajedrez (PGN)</li> <li>NIP-65: Metadatos de lista de rel\u00e9s</li> <li>NIP-66: Descubrimiento de rel\u00e9s y monitoreo de vitalidad</li> <li>NIP-68: Feeds de im\u00e1genes primero</li> <li>NIP-69: Eventos de orden peer-to-peer</li> <li>NIP-70: Eventos protegidos</li> <li>NIP-71: Eventos de video</li> <li>NIP-72: Comunidades moderadas</li> <li>NIP-73: IDs de contenido externo</li> <li>NIP-75: Objetivos de zap</li> <li>NIP-77: Sincronizaci\u00f3n Negentropy</li> <li>NIP-78: Datos espec\u00edficos de aplicaci\u00f3n</li> <li>NIP-7D: Hilos</li> <li>NIP-84: Destacados</li> </ul>"},{"location":"es/concepts/nips/#infraestructura-y-herramientas","title":"Infraestructura y Herramientas","text":"<ul> <li>NIP-86: API de gesti\u00f3n de rel\u00e9s</li> <li>NIP-88: Encuestas</li> <li>NIP-89: Manejadores de aplicaci\u00f3n recomendados</li> <li>NIP-90: M\u00e1quinas expendedoras de datos</li> <li>NIP-92: Archivos adjuntos multimedia</li> <li>NIP-94: Metadatos de archivos</li> <li>NIP-96: Integraci\u00f3n de almacenamiento de archivos HTTP</li> <li>NIP-98: Autenticaci\u00f3n HTTP</li> <li>NIP-99: Listados clasificados</li> </ul>"},{"location":"es/concepts/nips/#estado-y-desarrollo-de-nips","title":"Estado y Desarrollo de NIPs","text":""},{"location":"es/concepts/nips/#niveles-de-estado","title":"Niveles de Estado","text":"<ul> <li>Borrador: En desarrollo activo, sujeto a cambios</li> <li>Propuesto: Especificaci\u00f3n estable, lista para implementaci\u00f3n</li> <li>Final: Ampliamente implementado y estable</li> <li>Deprecado: Ya no recomendado</li> </ul>"},{"location":"es/concepts/nips/#proceso-de-desarrollo","title":"Proceso de Desarrollo","text":"<ol> <li>Propuesta: Identificar necesidad y escribir especificaci\u00f3n inicial</li> <li>Discusi\u00f3n: Revisi\u00f3n y retroalimentaci\u00f3n de la comunidad</li> <li>Implementaci\u00f3n: Prototipo y prueba</li> <li>Adopci\u00f3n: M\u00faltiples implementaciones y uso</li> <li>Finalizaci\u00f3n: La especificaci\u00f3n se estabiliza</li> </ol>"},{"location":"es/concepts/nips/#contribuyendo-a-nips","title":"Contribuyendo a NIPs","text":"<p>C\u00f3mo contribuir: - \u00danete a discusiones en GitHub y Telegram - Prop\u00f3n mejoras a NIPs existentes - Env\u00eda nuevos NIPs para funcionalidad faltante - Implementa y prueba especificaciones propuestas - Proporciona retroalimentaci\u00f3n sobre NIPs borrador</p> <p>Gu\u00edas para escribir NIPs: - S\u00e9 espec\u00edfico y sin ambig\u00fcedades - Incluye ejemplos y casos de prueba - Considera implicaciones de seguridad - Asegura compatibilidad hacia atr\u00e1s cuando sea posible - Sigue convenciones de formato existentes</p>"},{"location":"es/concepts/nips/#estrategia-de-implementacion","title":"Estrategia de Implementaci\u00f3n","text":""},{"location":"es/concepts/nips/#para-desarrolladores-de-clientes","title":"Para Desarrolladores de Clientes","text":"<p>Cliente m\u00ednimo viable: - NIP-01 (Protocolo b\u00e1sico) - NIP-02 (Listas de contactos) - NIP-19 (Codificaci\u00f3n Bech32) - NIP-25 (Reacciones)</p> <p>Cliente mejorado: - NIP-10 (Referencias de notas de texto) - NIP-17 (Mensajes privados) - NIP-23 (Contenido de formato largo) - NIP-57 (Lightning zaps)</p> <p>Cliente avanzado: - NIP-42 (Autenticaci\u00f3n de rel\u00e9) - NIP-50 (B\u00fasqueda) - NIP-65 (Listas de rel\u00e9s) - NIPs espec\u00edficos de aplicaci\u00f3n</p>"},{"location":"es/concepts/nips/#para-operadores-de-reles","title":"Para Operadores de Rel\u00e9s","text":"<p>Rel\u00e9 b\u00e1sico: - NIP-01 (Protocolo b\u00e1sico) - NIP-11 (Informaci\u00f3n de rel\u00e9) - NIP-20 (Resultados de comandos)</p> <p>Rel\u00e9 mejorado: - NIP-42 (Autenticaci\u00f3n) - NIP-50 (B\u00fasqueda) - NIP-65 (Metadatos de rel\u00e9)</p>"},{"location":"es/concepts/nips/#probando-compatibilidad-de-nips","title":"Probando Compatibilidad de NIPs","text":""},{"location":"es/concepts/nips/#pruebas-de-cliente","title":"Pruebas de Cliente","text":"<pre><code>// Verificar qu\u00e9 NIPs soporta un cliente\nconst nipsSuportados = cliente.getNIPsSuportados()\nconsole.log('NIPs soportados:', nipsSuportados)\n\n// Probar funcionalidad espec\u00edfica\nif (nipsSuportados.includes(57)) {\n  // Cliente soporta zaps\n  habilitarCaracteristicasZap()\n}\n</code></pre>"},{"location":"es/concepts/nips/#pruebas-de-rele","title":"Pruebas de Rel\u00e9","text":"<pre><code># Consultar informaci\u00f3n de rel\u00e9\ncurl -H \"Accept: application/nostr+json\" https://relay.example.com\n\n# Verificar NIPs soportados\n{\n  \"supported_nips\": [1, 2, 9, 11, 15, 16, 20, 22, 33, 40]\n}\n</code></pre>"},{"location":"es/concepts/nips/#ejemplos-practicos-de-implementacion","title":"Ejemplos Pr\u00e1cticos de Implementaci\u00f3n","text":""},{"location":"es/concepts/nips/#implementando-nip-25-reacciones","title":"Implementando NIP-25 (Reacciones)","text":"<pre><code>class ManejadorReacciones {\n  constructor(cliente) {\n    this.cliente = cliente\n  }\n\n  async reaccionar(evento, emoji = '+') {\n    const reaccion = finishEvent({\n      kind: 7,\n      created_at: Math.floor(Date.now() / 1000),\n      tags: [\n        ['e', evento.id],\n        ['p', evento.pubkey],\n        ['k', evento.kind.toString()]\n      ],\n      content: emoji\n    }, this.cliente.privateKey)\n\n    return this.cliente.publicar(reaccion)\n  }\n\n  async obtenerReacciones(eventoId) {\n    const filtro = {\n      kinds: [7],\n      '#e': [eventoId]\n    }\n\n    const reacciones = await this.cliente.obtenerEventos(filtro)\n    return this.procesarReacciones(reacciones)\n  }\n\n  procesarReacciones(reacciones) {\n    const conteos = {}\n\n    for (const reaccion of reacciones) {\n      const emoji = reaccion.content || '+'\n      conteos[emoji] = (conteos[emoji] || 0) + 1\n    }\n\n    return conteos\n  }\n}\n\n// Uso\nconst manejador = new ManejadorReacciones(miCliente)\nawait manejador.reaccionar(evento, '\ud83d\ude80')\nconst reacciones = await manejador.obtenerReacciones(evento.id)\nconsole.log('Reacciones:', reacciones) // { '\ud83d\ude80': 5, '+': 12 }\n</code></pre>"},{"location":"es/concepts/nips/#implementando-nip-50-busqueda","title":"Implementando NIP-50 (B\u00fasqueda)","text":"<pre><code>class BuscadorEventos {\n  constructor(rel\u00e9s) {\n    this.rel\u00e9s = rel\u00e9s\n  }\n\n  async buscar(consulta, opciones = {}) {\n    const filtro = {\n      search: consulta,\n      kinds: opciones.kinds || [1],\n      limit: opciones.limit || 20,\n      since: opciones.since,\n      until: opciones.until\n    }\n\n    const resultados = []\n\n    for (const rel\u00e9 of this.rel\u00e9s) {\n      try {\n        const eventos = await rel\u00e9.obtenerEventos([filtro])\n        resultados.push(...eventos)\n      } catch (error) {\n        console.warn(`B\u00fasqueda fall\u00f3 en ${rel\u00e9.url}:`, error)\n      }\n    }\n\n    // Deduplicar por ID\n    const eventosUnicos = new Map()\n    for (const evento of resultados) {\n      eventosUnicos.set(evento.id, evento)\n    }\n\n    return Array.from(eventosUnicos.values())\n      .sort((a, b) =&gt; b.created_at - a.created_at)\n  }\n}\n\n// Uso\nconst buscador = new BuscadorEventos(misRel\u00e9s)\nconst resultados = await buscador.buscar('bitcoin', {\n  kinds: [1, 30023], // notas y art\u00edculos\n  limit: 50\n})\n</code></pre>"},{"location":"es/concepts/nips/#implementando-nip-65-lista-de-reles","title":"Implementando NIP-65 (Lista de Rel\u00e9s)","text":"<pre><code>class GestorListaRel\u00e9s {\n  constructor(cliente) {\n    this.cliente = cliente\n  }\n\n  async publicarListaRel\u00e9s(rel\u00e9s) {\n    const tags = rel\u00e9s.map(rel\u00e9 =&gt; {\n      const tag = ['r', rel\u00e9.url]\n      if (rel\u00e9.tipo &amp;&amp; rel\u00e9.tipo !== 'read-write') {\n        tag.push(rel\u00e9.tipo) // 'read' o 'write'\n      }\n      return tag\n    })\n\n    const evento = finishEvent({\n      kind: 10002,\n      created_at: Math.floor(Date.now() / 1000),\n      tags: tags,\n      content: ''\n    }, this.cliente.privateKey)\n\n    return this.cliente.publicar(evento)\n  }\n\n  async obtenerListaRel\u00e9s(pubkey) {\n    const filtro = {\n      kinds: [10002],\n      authors: [pubkey],\n      limit: 1\n    }\n\n    const eventos = await this.cliente.obtenerEventos(filtro)\n    if (eventos.length === 0) return []\n\n    const evento = eventos[0]\n    return evento.tags\n      .filter(tag =&gt; tag[0] === 'r')\n      .map(tag =&gt; ({\n        url: tag[1],\n        tipo: tag[2] || 'read-write'\n      }))\n  }\n}\n\n// Uso\nconst gestor = new GestorListaRel\u00e9s(miCliente)\n\n// Publicar mi lista de rel\u00e9s\nawait gestor.publicarListaRel\u00e9s([\n  { url: 'wss://relay.damus.io', tipo: 'read-write' },\n  { url: 'wss://nos.lol', tipo: 'read' },\n  { url: 'wss://relay.snort.social', tipo: 'write' }\n])\n\n// Obtener lista de rel\u00e9s de alguien m\u00e1s\nconst rel\u00e9sDeOtro = await gestor.obtenerListaRel\u00e9s(otroPubkey)\n</code></pre>"},{"location":"es/concepts/nips/#recursos","title":"Recursos","text":"<ul> <li>Repositorio NIPs: github.com/nostr-protocol/nips</li> <li>Discusi\u00f3n NIPs: Telegram</li> <li>Ejemplos de Implementaci\u00f3n: github.com/nostr-protocol/nostr</li> <li>Rastreador de Estado NIPs: nips.nostr.com</li> </ul> <p>Mantente Actualizado</p> <p>Los NIPs est\u00e1n evolucionando constantemente. Sigue el repositorio GitHub y \u00fanete a discusiones comunitarias para mantenerte informado sobre nuevos desarrollos y propuestas.</p> <p>Estrategia de Implementaci\u00f3n</p> <p>Comienza con NIPs centrales (1, 2, 19) y gradualmente agrega caracter\u00edsticas m\u00e1s avanzadas. Enf\u00f3cate en interoperabilidad y experiencia de usuario sobre completitud de caracter\u00edsticas.</p>"},{"location":"es/concepts/nips/#proximos-pasos","title":"Pr\u00f3ximos Pasos","text":"<p>Ahora que entiendes los NIPs, explora:</p> <ul> <li>Rel\u00e9s y Comunicaci\u00f3n - C\u00f3mo funcionan los NIPs en la pr\u00e1ctica</li> <li>Construyendo Aplicaciones - Implementando NIPs en c\u00f3digo</li> <li>Caracter\u00edsticas Avanzadas - NIPs especializados para tu caso de uso</li> </ul>      Entendiendo Rel\u00e9s \u2192"},{"location":"es/concepts/nips/#quiz-de-comprension","title":"Quiz de Comprensi\u00f3n","text":"<p>Prueba Tu Entendimiento</p> <ol> <li>\u00bfQu\u00e9 significa NIP y por qu\u00e9 son importantes para Nostr?</li> <li>\u00bfCu\u00e1les son los tres NIPs m\u00e1s esenciales que todo cliente deber\u00eda implementar?</li> <li>\u00bfCu\u00e1l es la diferencia entre NIP-04 y NIP-17?</li> <li>\u00bfC\u00f3mo permite NIP-57 los pagos en Nostr?</li> </ol> Respuestas <ol> <li>NIP significa \"Posibilidad de Implementaci\u00f3n de Nostr\" - son especificaciones t\u00e9cnicas que aseguran interoperabilidad e innovaci\u00f3n en el protocolo</li> <li>NIP-01 (protocolo b\u00e1sico), NIP-02 (listas de contactos), y NIP-19 (codificaci\u00f3n bech32)</li> <li>NIP-04 est\u00e1 deprecado y ten\u00eda problemas de seguridad; NIP-17 es el est\u00e1ndar actual con mejor encriptaci\u00f3n y protecci\u00f3n de metadatos</li> <li>NIP-57 integra Lightning Network permitiendo micropagos (zaps) a trav\u00e9s de facturas Lightning vinculadas a eventos Nostr</li> </ol>"},{"location":"es/concepts/nostr-fundamentals/","title":"Fundamentos de Nostr: \u00bfQu\u00e9 Significa Nostr?","text":"<p>Nostr significa \"Notes and Other Stuff Transmitted by Relays\" (Notas y Otras Cosas Transmitidas por Rel\u00e9s) - un protocolo simple pero poderoso para redes sociales descentralizadas y comunicaci\u00f3n.</p>"},{"location":"es/concepts/nostr-fundamentals/#desglosando-el-acronimo","title":"Desglosando el Acr\u00f3nimo","text":""},{"location":"es/concepts/nostr-fundamentals/#n-notes-notas","title":"N - Notes (Notas)","text":"<p>El tipo de contenido principal en Nostr. Las notas son mensajes cortos, similares a tweets, que los usuarios publican para compartir pensamientos, actualizaciones e informaci\u00f3n.</p>"},{"location":"es/concepts/nostr-fundamentals/#o-other-stuff-otras-cosas","title":"O - Other Stuff (Otras Cosas)","text":"<p>Nostr no se limita solo a notas de texto. \"Otras cosas\" incluye: - Im\u00e1genes y multimedia - Art\u00edculos de formato largo - Mensajes directos - Reacciones y likes - Pagos Lightning (zaps) - Eventos en vivo y streams - Listados de mercado - Y mucho m\u00e1s...</p>"},{"location":"es/concepts/nostr-fundamentals/#t-transmitted-transmitidas","title":"T - Transmitted (Transmitidas)","text":"<p>Los datos fluyen a trav\u00e9s de la red mediante un protocolo simple y estandarizado usando WebSockets y JSON.</p>"},{"location":"es/concepts/nostr-fundamentals/#b-by-por","title":"B - By (Por)","text":"<p>La preposici\u00f3n que conecta el m\u00e9todo de transmisi\u00f3n con la infraestructura.</p>"},{"location":"es/concepts/nostr-fundamentals/#r-relays-reles","title":"R - Relays (Rel\u00e9s)","text":"<p>Los servidores que almacenan y reenv\u00edan mensajes. A diferencia de las redes sociales tradicionales, ninguna entidad \u00fanica controla todos los rel\u00e9s.</p>"},{"location":"es/concepts/nostr-fundamentals/#filosofia-central","title":"Filosof\u00eda Central","text":""},{"location":"es/concepts/nostr-fundamentals/#resistencia-a-la-censura","title":"\ud83d\udd13 Resistencia a la Censura","text":"<p>No hay un punto \u00fanico de control, lo que significa que no hay un punto \u00fanico de falla o censura.</p>"},{"location":"es/concepts/nostr-fundamentals/#propiedad-del-usuario","title":"\ud83d\udd11 Propiedad del Usuario","text":"<p>Tu identidad y datos te pertenecen a ti, no a una plataforma.</p>"},{"location":"es/concepts/nostr-fundamentals/#interoperabilidad","title":"\ud83c\udf10 Interoperabilidad","text":"<p>Todos los clientes pueden comunicarse entre s\u00ed a trav\u00e9s del mismo protocolo.</p>"},{"location":"es/concepts/nostr-fundamentals/#simplicidad","title":"\u26a1 Simplicidad","text":"<p>El protocolo es intencionalmente simple, haci\u00e9ndolo f\u00e1cil de implementar y entender.</p>"},{"location":"es/concepts/nostr-fundamentals/#como-funciona-nostr-el-panorama-general","title":"C\u00f3mo Funciona Nostr: El Panorama General","text":"<pre><code>graph TB\n    A[Usuario con Llaves] --&gt; B[Cliente Nostr]\n    B --&gt; C[Firmar Eventos]\n    C --&gt; D[Enviar a Rel\u00e9s]\n    D --&gt; E[Rel\u00e9 1]\n    D --&gt; F[Rel\u00e9 2]\n    D --&gt; G[Rel\u00e9 3]\n    E --&gt; H[Otros Usuarios]\n    F --&gt; H\n    G --&gt; H\n    H --&gt; I[Leer Eventos]\n    I --&gt; J[Mostrar en Cliente]</code></pre>"},{"location":"es/concepts/nostr-fundamentals/#1-capa-de-identidad","title":"1. Capa de Identidad","text":"<ul> <li>Los usuarios generan pares de llaves criptogr\u00e1ficas</li> <li>Llave p\u00fablica = tu identidad</li> <li>Llave privada = tu autoridad de firma</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#2-capa-de-contenido","title":"2. Capa de Contenido","text":"<ul> <li>Todo es un \"evento\" (nota, reacci\u00f3n, actualizaci\u00f3n de perfil, etc.)</li> <li>Los eventos son firmados con tu llave privada</li> <li>Los eventos tienen formatos estandarizados (definidos por NIPs)</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#3-capa-de-red","title":"3. Capa de Red","text":"<ul> <li>Los eventos se env\u00edan a m\u00faltiples rel\u00e9s</li> <li>Los rel\u00e9s almacenan y reenv\u00edan eventos</li> <li>Los clientes se conectan a rel\u00e9s para leer/escribir eventos</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#4-capa-de-aplicacion","title":"4. Capa de Aplicaci\u00f3n","text":"<ul> <li>Los clientes proporcionan interfaces de usuario</li> <li>Diferentes clientes pueden tener diferentes caracter\u00edsticas</li> <li>Todos los clientes pueden interoperar a trav\u00e9s del protocolo</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#conceptos-clave","title":"Conceptos Clave","text":""},{"location":"es/concepts/nostr-fundamentals/#eventos","title":"Eventos","text":"<p>Todo en Nostr es un \"evento\" - un objeto JSON con campos espec\u00edficos:</p> <pre><code>{\n  \"id\": \"identificador-unico-evento\",\n  \"pubkey\": \"llave-publica-autor\", \n  \"created_at\": 1234567890,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"\u00a1Hola Nostr!\",\n  \"sig\": \"firma-criptografica\"\n}\n</code></pre>"},{"location":"es/concepts/nostr-fundamentals/#tipos-de-eventos-kinds","title":"Tipos de Eventos (Kinds)","text":"<p>Diferentes tipos de contenido tienen diferentes n\u00fameros de \"kind\":</p> <ul> <li>Kind 0: Metadatos de usuario (informaci\u00f3n de perfil)</li> <li>Kind 1: Notas de texto (como tweets)</li> <li>Kind 3: Listas de contactos (a qui\u00e9n sigues)</li> <li>Kind 4: Mensajes directos encriptados</li> <li>Kind 7: Reacciones (likes, etc.)</li> <li>Y muchos m\u00e1s...</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#identidad-criptografica","title":"Identidad Criptogr\u00e1fica","text":"<p>Tu identidad es tu llave p\u00fablica:</p> <pre><code>npub1xyz... (formato legible para humanos)\n</code></pre> <p>Tu llave privada es tu contrase\u00f1a: <pre><code>nsec1abc... (\u00a1mant\u00e9n esto secreto!)\n</code></pre></p>"},{"location":"es/concepts/nostr-fundamentals/#reles","title":"Rel\u00e9s","text":"<p>Servidores que: - Almacenan eventos temporal o permanentemente - Reenv\u00edan eventos a clientes conectados - Pueden tener sus propias pol\u00edticas y reglas - Son operados por diferentes entidades</p>"},{"location":"es/concepts/nostr-fundamentals/#que-hace-a-nostr-diferente","title":"\u00bfQu\u00e9 Hace a Nostr Diferente?","text":""},{"location":"es/concepts/nostr-fundamentals/#redes-sociales-tradicionales","title":"Redes Sociales Tradicionales","text":"<p><pre><code>Usuario \u2192 Plataforma \u2192 Otros Usuarios\n</code></pre> - La plataforma controla todo - Punto \u00fanico de falla - La plataforma posee tus datos - La plataforma puede censurar o banear</p>"},{"location":"es/concepts/nostr-fundamentals/#nostr","title":"Nostr","text":"<p><pre><code>Usuario \u2192 M\u00faltiples Rel\u00e9s \u2192 Otros Usuarios\n</code></pre> - Sin control central - M\u00faltiples rutas para los datos - T\u00fa posees tu identidad y datos - La censura requiere un esfuerzo coordinado</p>"},{"location":"es/concepts/nostr-fundamentals/#nostr-vs-otros-protocolos","title":"Nostr vs Otros Protocolos","text":""},{"location":"es/concepts/nostr-fundamentals/#vs-mastodonactivitypub","title":"vs Mastodon/ActivityPub","text":"<ul> <li>Nostr: Simple, identidad criptogr\u00e1fica, basado en rel\u00e9s</li> <li>Mastodon: Complejo, identidad basada en servidor, federaci\u00f3n</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#vs-bitcoin","title":"vs Bitcoin","text":"<ul> <li>Nostr: Protocolo de comunicaci\u00f3n, usa criptograf\u00eda similar</li> <li>Bitcoin: Protocolo de dinero, consenso de prueba de trabajo</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#vs-email","title":"vs Email","text":"<ul> <li>Nostr: Tiempo real, p\u00fablico por defecto, identidad criptogr\u00e1fica</li> <li>Email: Almacenar y reenviar, privado por defecto, identidad basada en dominio</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#el-ecosistema-nostr","title":"El Ecosistema Nostr","text":""},{"location":"es/concepts/nostr-fundamentals/#clientes-interfaces-de-usuario","title":"Clientes (Interfaces de Usuario)","text":"<ul> <li>Damus (iOS) - Experiencia m\u00f3vil nativa</li> <li>Amethyst (Android) - Cliente Android rico en caracter\u00edsticas</li> <li>Iris (Web) - Cliente basado en navegador</li> <li>Nostrudel (Web) - Cliente web avanzado</li> <li>Primal (Multiplataforma) - Cach\u00e9 y descubrimiento</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#reles-infraestructura","title":"Rel\u00e9s (Infraestructura)","text":"<ul> <li>Rel\u00e9s p\u00fablicos - Abiertos para todos</li> <li>Rel\u00e9s privados - Acceso restringido</li> <li>Rel\u00e9s pagos - Caracter\u00edsticas premium</li> <li>Rel\u00e9s especializados - Tipos de contenido espec\u00edficos</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#herramientas-y-servicios","title":"Herramientas y Servicios","text":"<ul> <li>Integraci\u00f3n Lightning - Pagos Bitcoin</li> <li>Hosting de multimedia - Almacenamiento de im\u00e1genes y videos</li> <li>Motores de b\u00fasqueda - Descubrimiento de contenido</li> <li>Anal\u00edticas - Insights de la red</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#beneficios-de-nostr","title":"Beneficios de Nostr","text":""},{"location":"es/concepts/nostr-fundamentals/#para-usuarios","title":"Para Usuarios","text":"<ul> <li>Posee tu identidad - Ninguna plataforma puede quit\u00e1rtela</li> <li>Elige tu experiencia - Selecciona clientes que te convengan</li> <li>Evita la censura - M\u00faltiples rel\u00e9s proporcionan redundancia</li> <li>Gr\u00e1fico social portable - Lleva tus seguidores a cualquier lugar</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#para-desarrolladores","title":"Para Desarrolladores","text":"<ul> <li>Protocolo simple - F\u00e1cil de implementar</li> <li>Sin llaves API - Acceso directo a rel\u00e9s</li> <li>Libertad de innovaci\u00f3n - Construye cualquier caracter\u00edstica que quieras</li> <li>Interoperabilidad - Funciona con todos los otros clientes</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#para-la-sociedad","title":"Para la Sociedad","text":"<ul> <li>Descentralizaci\u00f3n - Reduce el poder de las grandes tecnol\u00f3gicas</li> <li>Libertad de expresi\u00f3n - M\u00e1s dif\u00edcil de censurar globalmente</li> <li>Innovaci\u00f3n - Desarrollo sin permisos</li> <li>Resistencia - Sin punto \u00fanico de falla</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#conceptos-erroneos-comunes","title":"Conceptos Err\u00f3neos Comunes","text":""},{"location":"es/concepts/nostr-fundamentals/#nostr-es-solo-otro-clon-de-twitter","title":"\u274c \"Nostr es solo otro clon de Twitter\"","text":"<p>\u2705 Nostr es un protocolo que puede soportar muchos tipos de aplicaciones, no solo redes sociales.</p>"},{"location":"es/concepts/nostr-fundamentals/#nostr-es-completamente-anonimo","title":"\u274c \"Nostr es completamente an\u00f3nimo\"","text":"<p>\u2705 Nostr proporciona pseudonimato a trav\u00e9s de llaves p\u00fablicas, pero pueden necesitarse medidas adicionales de privacidad.</p>"},{"location":"es/concepts/nostr-fundamentals/#nostr-es-solo-para-gente-de-bitcoin","title":"\u274c \"Nostr es solo para gente de Bitcoin\"","text":"<p>\u2705 Aunque la integraci\u00f3n con Bitcoin es popular, Nostr es \u00fatil para cualquiera que quiera comunicaci\u00f3n descentralizada.</p>"},{"location":"es/concepts/nostr-fundamentals/#nostr-es-demasiado-tecnico-para-usuarios-normales","title":"\u274c \"Nostr es demasiado t\u00e9cnico para usuarios normales\"","text":"<p>\u2705 Aunque el protocolo subyacente es t\u00e9cnico, los clientes amigables lo hacen accesible para todos.</p>"},{"location":"es/concepts/nostr-fundamentals/#comenzando-con-nostr","title":"Comenzando con Nostr","text":""},{"location":"es/concepts/nostr-fundamentals/#1-elige-un-cliente","title":"1. Elige un Cliente","text":"<p>Selecciona un cliente amigable como Damus (iOS), Amethyst (Android), o Iris (web).</p>"},{"location":"es/concepts/nostr-fundamentals/#2-genera-llaves","title":"2. Genera Llaves","text":"<p>La mayor\u00eda de clientes generar\u00e1n llaves autom\u00e1ticamente.</p>"},{"location":"es/concepts/nostr-fundamentals/#3-configura-tu-perfil","title":"3. Configura tu Perfil","text":"<p>Agrega tu nombre, biograf\u00eda e imagen de perfil.</p>"},{"location":"es/concepts/nostr-fundamentals/#4-encuentra-gente","title":"4. Encuentra Gente","text":"<p>Sigue cuentas interesantes y \u00fanete a conversaciones.</p>"},{"location":"es/concepts/nostr-fundamentals/#5-comienza-a-publicar","title":"5. Comienza a Publicar","text":"<p>Comparte tus pensamientos y participa en la comunidad.</p>"},{"location":"es/concepts/nostr-fundamentals/#el-futuro-de-nostr","title":"El Futuro de Nostr","text":""},{"location":"es/concepts/nostr-fundamentals/#corto-plazo","title":"Corto Plazo","text":"<ul> <li>Mejor experiencia de usuario</li> <li>M\u00e1s caracter\u00edsticas en clientes</li> <li>Infraestructura de rel\u00e9s mejorada</li> <li>Opciones de privacidad mejoradas</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#largo-plazo","title":"Largo Plazo","text":"<ul> <li>Integraci\u00f3n con otros protocolos</li> <li>Nuevos tipos de aplicaciones m\u00e1s all\u00e1 de redes sociales</li> <li>Adopci\u00f3n global como est\u00e1ndar de comunicaci\u00f3n</li> <li>Capas econ\u00f3micas y monetizaci\u00f3n</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#inmersion-tecnica-profunda","title":"Inmersi\u00f3n T\u00e9cnica Profunda","text":""},{"location":"es/concepts/nostr-fundamentals/#simplicidad-del-protocolo","title":"Simplicidad del Protocolo","text":"<p>El poder de Nostr viene de su simplicidad:</p> <pre><code>// Todo el protocolo en pseudoc\u00f3digo\nfunction publishEvent(event, relays) {\n  const signedEvent = sign(event, privateKey)\n  relays.forEach(relay =&gt; relay.send(signedEvent))\n}\n\nfunction subscribeToEvents(filter, relays) {\n  relays.forEach(relay =&gt; {\n    relay.subscribe(filter, (event) =&gt; {\n      if (verify(event.signature, event.pubkey)) {\n        displayEvent(event)\n      }\n    })\n  })\n}\n</code></pre>"},{"location":"es/concepts/nostr-fundamentals/#fundamento-criptografico","title":"Fundamento Criptogr\u00e1fico","text":"<ul> <li>Firmas Schnorr (igual que Bitcoin)</li> <li>Curva el\u00edptica secp256k1</li> <li>Hashing SHA-256</li> <li>Codificaci\u00f3n NIP-19 para llaves legibles por humanos</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#recursos-para-aprender-mas","title":"Recursos para Aprender M\u00e1s","text":""},{"location":"es/concepts/nostr-fundamentals/#documentacion-oficial","title":"Documentaci\u00f3n Oficial","text":"<ul> <li>Protocolo Nostr</li> <li>Repositorio NIPs</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#comunidad","title":"Comunidad","text":"<ul> <li>Telegram Nostr</li> <li>Reddit r/nostr</li> <li>Nostr en Nostr</li> </ul>"},{"location":"es/concepts/nostr-fundamentals/#desarrollo","title":"Desarrollo","text":"<ul> <li>Awesome Nostr</li> <li>Herramientas Nostr</li> <li>Chat de Desarrolladores</li> </ul> <p>Visi\u00f3n de Nostr</p> <p>\"El protocolo abierto m\u00e1s simple que es capaz de crear una red 'social' global resistente a la censura de una vez por todas.\" - fiatjaf (creador de Nostr)</p> <p>Recuerda</p> <p>Nostr no es solo una red social - es un protocolo de comunicaci\u00f3n que puede alimentar muchos tipos diferentes de aplicaciones. \u00a1El caso de uso de redes sociales es solo el comienzo!</p>"},{"location":"es/concepts/relays/","title":"Rel\u00e9s: La Infraestructura de Nostr","text":"<p>Objetivos de Aprendizaje</p> <p>Despu\u00e9s de esta lecci\u00f3n, entender\u00e1s:</p> <ul> <li>Qu\u00e9 son los rel\u00e9s y c\u00f3mo funcionan</li> <li>El protocolo de comunicaci\u00f3n rel\u00e9-cliente</li> <li>Diferentes tipos de rel\u00e9s y sus prop\u00f3sitos</li> <li>C\u00f3mo elegir y gestionar rel\u00e9s</li> <li>Pol\u00edticas y limitaciones de rel\u00e9s</li> </ul>"},{"location":"es/concepts/relays/#que-son-los-reles","title":"\u00bfQu\u00e9 son los Rel\u00e9s?","text":"<p>Los rel\u00e9s son los servidores que forman la columna vertebral de la red Nostr. Almacenan, reenv\u00edan y sirven eventos a los clientes. A diferencia de las redes sociales tradicionales donde una empresa controla todos los servidores, el sistema de rel\u00e9s de Nostr es descentralizado - cualquiera puede ejecutar un rel\u00e9.</p>"},{"location":"es/concepts/relays/#caracteristicas-clave","title":"Caracter\u00edsticas Clave","text":"<ul> <li>Servidores simples: Almacenan y reenv\u00edan eventos JSON</li> <li>Basados en WebSocket: Comunicaci\u00f3n bidireccional en tiempo real</li> <li>Sin l\u00f3gica compleja: Se enfocan en almacenamiento y entrega de datos</li> <li>Intercambiables: Los clientes pueden usar cualquier rel\u00e9</li> <li>Operados independientemente: Diferentes personas ejecutan diferentes rel\u00e9s</li> </ul>"},{"location":"es/concepts/relays/#como-funcionan-los-reles","title":"C\u00f3mo Funcionan los Rel\u00e9s","text":""},{"location":"es/concepts/relays/#funciones-basicas","title":"Funciones B\u00e1sicas","text":"<ol> <li>Aceptar eventos de clientes</li> <li>Almacenar eventos (temporal o permanentemente)</li> <li>Reenviar eventos a clientes suscritos</li> <li>Filtrar solicitudes bas\u00e1ndose en consultas de clientes</li> <li>Aplicar pol\u00edticas (limitaci\u00f3n de velocidad, reglas de contenido, etc.)</li> </ol>"},{"location":"es/concepts/relays/#comunicacion-rele-cliente","title":"Comunicaci\u00f3n Rel\u00e9-Cliente","text":"<p>La comunicaci\u00f3n ocurre sobre conexiones WebSocket usando mensajes JSON simples:</p> <pre><code>graph TB\n    A[Cliente] &lt;--&gt;|WebSocket| B[Rel\u00e9]\n    B --&gt; C[Almacenamiento de Eventos]\n    B --&gt; D[Otros Clientes]\n    A --&gt; E[Publicar Eventos]\n    A --&gt; F[Suscribirse a Eventos]\n    A --&gt; G[Consultar Eventos]</code></pre>"},{"location":"es/concepts/relays/#tipos-de-mensajes","title":"Tipos de Mensajes","text":""},{"location":"es/concepts/relays/#mensajes-de-cliente-a-rele","title":"Mensajes de Cliente a Rel\u00e9","text":""},{"location":"es/concepts/relays/#event-publicando-eventos","title":"EVENT - Publicando Eventos","text":"<pre><code>[\"EVENT\", {\n  \"id\": \"id-evento\",\n  \"pubkey\": \"pubkey-autor\",\n  \"created_at\": 1234567890,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"\u00a1Hola Nostr!\",\n  \"sig\": \"firma\"\n}]\n</code></pre>"},{"location":"es/concepts/relays/#req-suscribiendose-a-eventos","title":"REQ - Suscribi\u00e9ndose a Eventos","text":"<pre><code>[\"REQ\", \"id-suscripcion\", {\n  \"kinds\": [1],\n  \"authors\": [\"pubkey1\", \"pubkey2\"],\n  \"since\": 1234567890,\n  \"limit\": 100\n}]\n</code></pre>"},{"location":"es/concepts/relays/#close-cerrando-suscripciones","title":"CLOSE - Cerrando Suscripciones","text":"<pre><code>[\"CLOSE\", \"id-suscripcion\"]\n</code></pre>"},{"location":"es/concepts/relays/#auth-autenticacion","title":"AUTH - Autenticaci\u00f3n","text":"<pre><code>[\"AUTH\", {\n  \"id\": \"id-evento-desafio\",\n  \"pubkey\": \"pubkey-cliente\",\n  \"created_at\": 1234567890,\n  \"kind\": 22242,\n  \"tags\": [[\"challenge\", \"string-desafio\"]],\n  \"content\": \"\",\n  \"sig\": \"firma\"\n}]\n</code></pre>"},{"location":"es/concepts/relays/#count-solicitando-conteos-de-eventos","title":"COUNT - Solicitando Conteos de Eventos","text":"<pre><code>[\"COUNT\", \"id-suscripcion\", {\n  \"kinds\": [1],\n  \"authors\": [\"pubkey\"]\n}]\n</code></pre>"},{"location":"es/concepts/relays/#mensajes-de-rele-a-cliente","title":"Mensajes de Rel\u00e9 a Cliente","text":""},{"location":"es/concepts/relays/#event-enviando-eventos","title":"EVENT - Enviando Eventos","text":"<pre><code>[\"EVENT\", \"id-suscripcion\", {\n  \"id\": \"id-evento\",\n  \"pubkey\": \"pubkey-autor\",\n  \"created_at\": 1234567890,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"\u00a1Hola Nostr!\",\n  \"sig\": \"firma\"\n}]\n</code></pre>"},{"location":"es/concepts/relays/#eose-fin-de-eventos-almacenados","title":"EOSE - Fin de Eventos Almacenados","text":"<pre><code>[\"EOSE\", \"id-suscripcion\"]\n</code></pre>"},{"location":"es/concepts/relays/#ok-respuesta-de-aceptacion-de-evento","title":"OK - Respuesta de Aceptaci\u00f3n de Evento","text":"<pre><code>[\"OK\", \"id-evento\", true, \"\"]\n[\"OK\", \"id-evento\", false, \"bloqueado: violaci\u00f3n de pol\u00edtica de contenido\"]\n</code></pre>"},{"location":"es/concepts/relays/#closed-suscripcion-cerrada","title":"CLOSED - Suscripci\u00f3n Cerrada","text":"<pre><code>[\"CLOSED\", \"id-suscripcion\", \"l\u00edmite de velocidad: demasiadas suscripciones\"]\n</code></pre>"},{"location":"es/concepts/relays/#notice-mensajes-legibles-para-humanos","title":"NOTICE - Mensajes Legibles para Humanos","text":"<pre><code>[\"NOTICE\", \"Este rel\u00e9 requiere autenticaci\u00f3n\"]\n</code></pre>"},{"location":"es/concepts/relays/#auth-desafio-de-autenticacion","title":"AUTH - Desaf\u00edo de Autenticaci\u00f3n","text":"<pre><code>[\"AUTH\", \"string-desafio\"]\n</code></pre>"},{"location":"es/concepts/relays/#count-respuesta-de-conteo-de-eventos","title":"COUNT - Respuesta de Conteo de Eventos","text":"<pre><code>[\"COUNT\", \"id-suscripcion\", {\"count\": 42}]\n</code></pre>"},{"location":"es/concepts/relays/#documento-de-informacion-del-rele-nip-11","title":"Documento de Informaci\u00f3n del Rel\u00e9 (NIP-11)","text":"<p>Los rel\u00e9s pueden proporcionar metadatos sobre sus capacidades:</p> <pre><code>curl -H \"Accept: application/nostr+json\" https://relay.example.com\n</code></pre> <pre><code>{\n  \"name\": \"Mi Rel\u00e9 Nostr\",\n  \"description\": \"Un rel\u00e9 para la comunidad Nostr\",\n  \"pubkey\": \"pubkey-admin-rel\u00e9\",\n  \"contact\": \"admin@relay.example.com\",\n  \"supported_nips\": [1, 2, 9, 11, 12, 15, 16, 20, 22],\n  \"software\": \"strfry\",\n  \"version\": \"0.9.6\",\n  \"limitation\": {\n    \"max_message_length\": 16384,\n    \"max_subscriptions\": 300,\n    \"max_limit\": 5000,\n    \"max_subid_length\": 100,\n    \"max_event_tags\": 100,\n    \"max_content_length\": 8196,\n    \"min_pow_difficulty\": 0,\n    \"auth_required\": false,\n    \"payment_required\": false,\n    \"restricted_writes\": false\n  },\n  \"relay_countries\": [\"MX\", \"US\"],\n  \"language_tags\": [\"es\", \"en\"],\n  \"tags\": [\"sfw-only\", \"bitcoin-only\"],\n  \"posting_policy\": \"https://relay.example.com/policy\"\n}\n</code></pre>"},{"location":"es/concepts/relays/#campos-de-informacion-clave","title":"Campos de Informaci\u00f3n Clave","text":""},{"location":"es/concepts/relays/#informacion-basica","title":"Informaci\u00f3n B\u00e1sica","text":"<ul> <li><code>name</code>: Nombre legible del rel\u00e9</li> <li><code>description</code>: Informaci\u00f3n detallada sobre el rel\u00e9</li> <li><code>pubkey</code>: Llave p\u00fablica del administrador para contacto</li> <li><code>contact</code>: M\u00e9todo de contacto alternativo</li> <li><code>software</code>: Nombre de la implementaci\u00f3n del rel\u00e9</li> <li><code>version</code>: Versi\u00f3n del software</li> </ul>"},{"location":"es/concepts/relays/#capacidades","title":"Capacidades","text":"<ul> <li><code>supported_nips</code>: Qu\u00e9 NIPs est\u00e1n implementados</li> <li><code>limitation</code>: L\u00edmites t\u00e9cnicos y requisitos</li> <li><code>relay_countries</code>: Jurisdicciones legales</li> <li><code>language_tags</code>: Idiomas principales</li> <li><code>tags</code>: Pol\u00edticas de contenido y \u00e1reas de enfoque</li> </ul>"},{"location":"es/concepts/relays/#tipos-de-reles","title":"Tipos de Rel\u00e9s","text":""},{"location":"es/concepts/relays/#por-modelo-de-acceso","title":"Por Modelo de Acceso","text":""},{"location":"es/concepts/relays/#reles-publicos","title":"Rel\u00e9s P\u00fablicos","text":"<ul> <li>Abiertos para todos</li> <li>No requieren registro</li> <li>Pueden tener l\u00edmites de velocidad</li> <li>Ejemplos: <code>relay.damus.io</code>, <code>nos.lol</code></li> </ul>"},{"location":"es/concepts/relays/#reles-privados","title":"Rel\u00e9s Privados","text":"<ul> <li>Acceso restringido</li> <li>Solo por invitaci\u00f3n o lista blanca</li> <li>A menudo para comunidades espec\u00edficas</li> <li>Ejemplos: Rel\u00e9s familiares, corporativos</li> </ul>"},{"location":"es/concepts/relays/#reles-de-pago","title":"Rel\u00e9s de Pago","text":"<ul> <li>Requieren pago para acceso</li> <li>Mejor protecci\u00f3n contra spam</li> <li>A menudo mayor confiabilidad</li> <li>Pueden ofrecer caracter\u00edsticas premium</li> </ul>"},{"location":"es/concepts/relays/#por-proposito","title":"Por Prop\u00f3sito","text":""},{"location":"es/concepts/relays/#proposito-general","title":"Prop\u00f3sito General","text":"<ul> <li>Aceptan todos los tipos de eventos</li> <li>Sirven a comunidades amplias</li> <li>Tipo m\u00e1s com\u00fan</li> </ul>"},{"location":"es/concepts/relays/#reles-especializados","title":"Rel\u00e9s Especializados","text":"<ul> <li>Se enfocan en tipos espec\u00edficos de eventos</li> <li>Ejemplos:</li> <li>Rel\u00e9s de multimedia (im\u00e1genes, videos)</li> <li>Rel\u00e9s de contenido de formato largo</li> <li>Rel\u00e9s de zaps Lightning</li> <li>Rel\u00e9s de mercado</li> </ul>"},{"location":"es/concepts/relays/#reles-personales","title":"Rel\u00e9s Personales","text":"<ul> <li>Ejecutados por individuos</li> <li>Almacenan respaldo personal</li> <li>Comparten con amigos/familia</li> <li>Control completo de datos</li> </ul>"},{"location":"es/concepts/relays/#por-politica-de-retencion","title":"Por Pol\u00edtica de Retenci\u00f3n","text":""},{"location":"es/concepts/relays/#reles-de-archivo","title":"Rel\u00e9s de Archivo","text":"<ul> <li>Almacenan eventos permanentemente</li> <li>Preservaci\u00f3n de datos hist\u00f3ricos</li> <li>Pueden cobrar por almacenamiento a largo plazo</li> </ul>"},{"location":"es/concepts/relays/#reles-efimeros","title":"Rel\u00e9s Ef\u00edmeros","text":"<ul> <li>Almacenamiento a corto plazo</li> <li>Se enfocan en comunicaci\u00f3n en tiempo real</li> <li>Menores costos de almacenamiento</li> </ul>"},{"location":"es/concepts/relays/#reles-filtrados","title":"Rel\u00e9s Filtrados","text":"<ul> <li>Almacenamiento selectivo</li> <li>Moderaci\u00f3n de contenido</li> <li>Enfoque espec\u00edfico en temas</li> </ul>"},{"location":"es/concepts/relays/#ejecutar-tu-propio-rele","title":"Ejecutar Tu Propio Rel\u00e9","text":""},{"location":"es/concepts/relays/#por-que-ejecutar-un-rele","title":"\u00bfPor Qu\u00e9 Ejecutar un Rel\u00e9?","text":""},{"location":"es/concepts/relays/#beneficios-personales","title":"Beneficios Personales","text":"<ul> <li>Control completo de datos</li> <li>Pol\u00edticas personalizadas</li> <li>Respaldo y preservaci\u00f3n de datos</li> <li>Privacidad y seguridad</li> <li>Sin dependencia de terceros</li> </ul>"},{"location":"es/concepts/relays/#beneficios-comunitarios","title":"Beneficios Comunitarios","text":"<ul> <li>Apoyar la descentralizaci\u00f3n de la red</li> <li>Proporcionar servicio a la comunidad</li> <li>Habilitar libertad de expresi\u00f3n</li> <li>Reducir riesgos de censura</li> </ul>"},{"location":"es/concepts/relays/#software-popular-de-reles","title":"Software Popular de Rel\u00e9s","text":""},{"location":"es/concepts/relays/#strfry","title":"strfry","text":"<ul> <li>Implementaci\u00f3n de alto rendimiento en C++</li> <li>Almacenamiento e indexaci\u00f3n eficiente</li> <li>Listo para producci\u00f3n</li> <li>Desarrollo activo</li> </ul> <pre><code># Instalar strfry\ngit clone https://github.com/hoytech/strfry.git\ncd strfry\nmake setup-golpe\nmake -j4\n</code></pre>"},{"location":"es/concepts/relays/#nostream","title":"nostream","text":"<ul> <li>Implementaci\u00f3n TypeScript/Node.js</li> <li>F\u00e1cil de modificar y extender</li> <li>Bueno para desarrollo</li> <li>Backend PostgreSQL</li> </ul> <pre><code># Instalar nostream\ngit clone https://github.com/Cameri/nostream.git\ncd nostream\nnpm install\nnpm run build\n</code></pre>"},{"location":"es/concepts/relays/#khatru","title":"khatru","text":"<ul> <li>Implementaci\u00f3n en Go</li> <li>Simple y ligero</li> <li>F\u00e1cil de desplegar</li> <li>Buen rendimiento</li> </ul> <pre><code># Instalar khatru\ngo install github.com/fiatjaf/khatru@latest\n</code></pre>"},{"location":"es/concepts/relays/#configuracion-de-rele","title":"Configuraci\u00f3n de Rel\u00e9","text":""},{"location":"es/concepts/relays/#configuracion-basica","title":"Configuraci\u00f3n B\u00e1sica","text":"<pre><code># strfry.conf\ndb = \"./strfry-db/\"\nbind = \"0.0.0.0:7777\"\nnofiles = 1000000\n\nrelay:\n  name: \"Mi Rel\u00e9 Personal\"\n  description: \"Un rel\u00e9 para mis amigos y familia\"\n  pubkey: \"tu-pubkey-aqu\u00ed\"\n  contact: \"admin@mirel\u00e9.com\"\n\nrejectFilters:\n  - kinds: []\n    authors: []\n    tags:\n      \"#t\": [\"spam\", \"inapropiado\"]\n</code></pre>"},{"location":"es/concepts/relays/#control-de-acceso","title":"Control de Acceso","text":"<pre><code># Autenticaci\u00f3n requerida\nauth:\n  required: true\n  whitelist:\n    - \"pubkey1\"\n    - \"pubkey2\"\n\n# Pago requerido\npayment:\n  required: true\n  amount: 1000  # sats por mes\n  bolt11: \"direcci\u00f3n-pago\"\n</code></pre>"},{"location":"es/concepts/relays/#opciones-de-hosting","title":"Opciones de Hosting","text":""},{"location":"es/concepts/relays/#auto-hospedado","title":"Auto-hospedado","text":"<ul> <li>Control completo</li> <li>Hardware personalizado</li> <li>Requisitos de red</li> <li>Responsabilidad de mantenimiento</li> </ul>"},{"location":"es/concepts/relays/#vpsnube","title":"VPS/Nube","text":"<ul> <li>Hosting profesional</li> <li>Infraestructura gestionada</li> <li>Recursos escalables</li> <li>Distribuci\u00f3n geogr\u00e1fica</li> </ul>"},{"location":"es/concepts/relays/#despliegue-docker","title":"Despliegue Docker","text":"<pre><code>FROM ubuntu:22.04\n\n# Instalar dependencias\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    build-essential \\\n    git \\\n    pkg-config\n\n# Clonar y compilar strfry\nRUN git clone https://github.com/hoytech/strfry.git\nWORKDIR /strfry\nRUN make setup-golpe &amp;&amp; make -j4\n\n# Configurar y ejecutar\nCOPY strfry.conf .\nEXPOSE 7777\nCMD [\"./strfry\", \"relay\"]\n</code></pre>"},{"location":"es/concepts/relays/#seleccion-y-gestion-de-reles","title":"Selecci\u00f3n y Gesti\u00f3n de Rel\u00e9s","text":""},{"location":"es/concepts/relays/#criterios-de-seleccion","title":"Criterios de Selecci\u00f3n","text":""},{"location":"es/concepts/relays/#confiabilidad","title":"Confiabilidad","text":"<ul> <li>Tiempo de actividad hist\u00f3rico</li> <li>Velocidad de respuesta</li> <li>Estabilidad de conexi\u00f3n</li> <li>Respaldo de infraestructura</li> </ul>"},{"location":"es/concepts/relays/#politicas","title":"Pol\u00edticas","text":"<ul> <li>Moderaci\u00f3n de contenido</li> <li>T\u00e9rminos de servicio</li> <li>Pol\u00edtica de privacidad</li> <li>Retenci\u00f3n de datos</li> </ul>"},{"location":"es/concepts/relays/#rendimiento","title":"Rendimiento","text":"<ul> <li>Latencia de red</li> <li>Ancho de banda</li> <li>L\u00edmites de velocidad</li> <li>Capacidades de filtrado</li> </ul>"},{"location":"es/concepts/relays/#diversidad","title":"Diversidad","text":"<ul> <li>Ubicaci\u00f3n geogr\u00e1fica</li> <li>Operadores diferentes</li> <li>Jurisdicciones legales</li> <li>Pol\u00edticas variadas</li> </ul>"},{"location":"es/concepts/relays/#estrategias-de-gestion","title":"Estrategias de Gesti\u00f3n","text":""},{"location":"es/concepts/relays/#configuracion-multiple","title":"Configuraci\u00f3n M\u00faltiple","text":"<pre><code>const configuraci\u00f3nRel\u00e9s = {\n  lectura: [\n    'wss://relay.damus.io',\n    'wss://nos.lol',\n    'wss://relay.snort.social'\n  ],\n  escritura: [\n    'wss://relay.damus.io',\n    'wss://nostr.wine',\n    'wss://relay.current.fyi'\n  ],\n  b\u00fasqueda: [\n    'wss://relay.nostr.band',\n    'wss://search.nos.today'\n  ]\n}\n</code></pre>"},{"location":"es/concepts/relays/#monitoreo-de-salud","title":"Monitoreo de Salud","text":"<pre><code>class MonitorRel\u00e9s {\n  constructor(rel\u00e9s) {\n    this.rel\u00e9s = rel\u00e9s\n    this.estad\u00edsticas = new Map()\n  }\n\n  async verificarSalud(url) {\n    const inicio = Date.now()\n    try {\n      const ws = new WebSocket(url)\n      await new Promise((resolve, reject) =&gt; {\n        ws.onopen = resolve\n        ws.onerror = reject\n        setTimeout(reject, 5000) // timeout 5s\n      })\n\n      const latencia = Date.now() - inicio\n      this.actualizarEstad\u00edsticas(url, { latencia, estado: 'conectado' })\n      ws.close()\n\n    } catch (error) {\n      this.actualizarEstad\u00edsticas(url, { error: error.message, estado: 'desconectado' })\n    }\n  }\n\n  actualizarEstad\u00edsticas(url, datos) {\n    const stats = this.estad\u00edsticas.get(url) || { \n      \u00e9xitos: 0, \n      fallos: 0, \n      \u00faltimaVerificaci\u00f3n: null \n    }\n\n    if (datos.estado === 'conectado') {\n      stats.\u00e9xitos++\n    } else {\n      stats.fallos++\n    }\n\n    stats.\u00faltimaVerificaci\u00f3n = Date.now()\n    stats.latenciaPromedio = datos.latencia || stats.latenciaPromedio\n\n    this.estad\u00edsticas.set(url, stats)\n  }\n\n  obtenerMejoresRel\u00e9s(cantidad = 3) {\n    return Array.from(this.estad\u00edsticas.entries())\n      .filter(([url, stats]) =&gt; stats.\u00e9xitos &gt; stats.fallos)\n      .sort(([,a], [,b]) =&gt; (a.latenciaPromedio || 999) - (b.latenciaPromedio || 999))\n      .slice(0, cantidad)\n      .map(([url]) =&gt; url)\n  }\n}\n\n// Uso\nconst monitor = new MonitorRel\u00e9s(urlsRel\u00e9s)\nsetInterval(() =&gt; {\n  urlsRel\u00e9s.forEach(url =&gt; monitor.verificarSalud(url))\n}, 60000) // verificar cada minuto\n</code></pre>"},{"location":"es/concepts/relays/#balanceamiento-de-carga","title":"Balanceamiento de Carga","text":"<pre><code>class BalanceadorRel\u00e9s {\n  constructor(rel\u00e9s) {\n    this.rel\u00e9s = rel\u00e9s\n    this.\u00edndiceActual = 0\n  }\n\n  obtenerRel\u00e9ParaLectura() {\n    // Round robin simple\n    const rel\u00e9 = this.rel\u00e9s.lectura[this.\u00edndiceActual]\n    this.\u00edndiceActual = (this.\u00edndiceActual + 1) % this.rel\u00e9s.lectura.length\n    return rel\u00e9\n  }\n\n  async publicarATodos(evento) {\n    const promesas = this.rel\u00e9s.escritura.map(async (url) =&gt; {\n      try {\n        const resultado = await this.publicarARel\u00e9(url, evento)\n        return { url, \u00e9xito: true, resultado }\n      } catch (error) {\n        return { url, \u00e9xito: false, error: error.message }\n      }\n    })\n\n    const resultados = await Promise.allSettled(promesas)\n    return resultados.map(r =&gt; r.value)\n  }\n\n  async publicarARel\u00e9(url, evento) {\n    const ws = new WebSocket(url)\n\n    return new Promise((resolve, reject) =&gt; {\n      ws.onopen = () =&gt; {\n        ws.send(JSON.stringify(['EVENT', evento]))\n      }\n\n      ws.onmessage = (msg) =&gt; {\n        const [tipo, eventoId, aceptado, mensaje] = JSON.parse(msg.data)\n        if (tipo === 'OK') {\n          if (aceptado) {\n            resolve({ eventoId, mensaje })\n          } else {\n            reject(new Error(mensaje))\n          }\n        }\n      }\n\n      ws.onerror = reject\n      setTimeout(() =&gt; reject(new Error('Timeout')), 10000)\n    })\n  }\n}\n</code></pre>"},{"location":"es/concepts/relays/#consideraciones-de-privacidad-y-seguridad","title":"Consideraciones de Privacidad y Seguridad","text":""},{"location":"es/concepts/relays/#filtracion-de-metadatos","title":"Filtraci\u00f3n de Metadatos","text":"<p>Los rel\u00e9s pueden ver: - Direcciones IP de clientes - Patrones de conexi\u00f3n y actividad - Consultas y filtros utilizados - Timing de publicaciones</p>"},{"location":"es/concepts/relays/#mitigaciones","title":"Mitigaciones","text":""},{"location":"es/concepts/relays/#uso-de-tor","title":"Uso de Tor","text":"<pre><code>// Conectar a trav\u00e9s de proxy Tor\nconst relay = new WebSocket('wss://relay.example.com', {\n  agent: new SocksProxyAgent('socks5://127.0.0.1:9050')\n})\n</code></pre>"},{"location":"es/concepts/relays/#rotacion-de-reles","title":"Rotaci\u00f3n de Rel\u00e9s","text":"<pre><code>class RotadorRel\u00e9s {\n  constructor(rel\u00e9s) {\n    this.rel\u00e9s = rel\u00e9s\n    this.\u00edndice = 0\n  }\n\n  obtenerSiguienteRel\u00e9() {\n    const rel\u00e9 = this.rel\u00e9s[this.\u00edndice]\n    this.\u00edndice = (this.\u00edndice + 1) % this.rel\u00e9s.length\n    return rel\u00e9\n  }\n\n  async consultar(filtro) {\n    const rel\u00e9Actual = this.obtenerSiguienteRel\u00e9()\n    // Usar rel\u00e9 diferente para cada consulta\n    return this.consultarRel\u00e9(rel\u00e9Actual, filtro)\n  }\n}\n</code></pre>"},{"location":"es/concepts/relays/#consultas-distribuidas","title":"Consultas Distribuidas","text":"<pre><code>async function consultarDistribuido(filtro, rel\u00e9s) {\n  // Dividir consulta entre m\u00faltiples rel\u00e9s\n  const resultados = await Promise.all(\n    rel\u00e9s.map(rel\u00e9 =&gt; consultarRel\u00e9(rel\u00e9, filtro))\n  )\n\n  // Combinar y deduplicar resultados\n  const todosEventos = resultados.flat()\n  const eventos\u00danicos = new Map()\n\n  todosEventos.forEach(evento =&gt; {\n    eventos\u00danicos.set(evento.id, evento)\n  })\n\n  return Array.from(eventos\u00danicos.values())\n}\n</code></pre>"},{"location":"es/concepts/relays/#economia-de-reles","title":"Econom\u00eda de Rel\u00e9s","text":""},{"location":"es/concepts/relays/#modelos-de-monetizacion","title":"Modelos de Monetizaci\u00f3n","text":""},{"location":"es/concepts/relays/#suscripciones-de-pago","title":"Suscripciones de Pago","text":"<ul> <li>Tarifa mensual/anual</li> <li>Acceso premium</li> <li>Caracter\u00edsticas adicionales</li> <li>Mejor soporte</li> </ul>"},{"location":"es/concepts/relays/#pagos-por-uso","title":"Pagos por Uso","text":"<ul> <li>Pago por evento publicado</li> <li>Pago por consulta</li> <li>Pago por almacenamiento</li> <li>Micro-transacciones Lightning</li> </ul>"},{"location":"es/concepts/relays/#patrocinio","title":"Patrocinio","text":"<ul> <li>Financiamiento comunitario</li> <li>Donaciones</li> <li>Patrocinio corporativo</li> <li>Grants y subvenciones</li> </ul>"},{"location":"es/concepts/relays/#costos-operacionales","title":"Costos Operacionales","text":""},{"location":"es/concepts/relays/#infraestructura","title":"Infraestructura","text":"<ul> <li>Servidor/hosting</li> <li>Ancho de banda</li> <li>Almacenamiento</li> <li>Respaldo y redundancia</li> </ul>"},{"location":"es/concepts/relays/#operacion","title":"Operaci\u00f3n","text":"<ul> <li>Mantenimiento t\u00e9cnico</li> <li>Moderaci\u00f3n de contenido</li> <li>Soporte al usuario</li> <li>Actualizaciones de seguridad</li> </ul>"},{"location":"es/concepts/relays/#legal","title":"Legal","text":"<ul> <li>Cumplimiento regulatorio</li> <li>Costos legales</li> <li>Seguros</li> <li>Licencias</li> </ul>"},{"location":"es/concepts/relays/#futuro-de-los-reles","title":"Futuro de los Rel\u00e9s","text":""},{"location":"es/concepts/relays/#tendencias-emergentes","title":"Tendencias Emergentes","text":""},{"location":"es/concepts/relays/#reles-especializados_1","title":"Rel\u00e9s Especializados","text":"<ul> <li>Enfoque en nichos espec\u00edficos</li> <li>Optimizaci\u00f3n para casos de uso</li> <li>Caracter\u00edsticas \u00fanicas</li> <li>Comunidades dedicadas</li> </ul>"},{"location":"es/concepts/relays/#mejoras-de-rendimiento","title":"Mejoras de Rendimiento","text":"<ul> <li>Algoritmos de cach\u00e9 avanzados</li> <li>Optimizaci\u00f3n de base de datos</li> <li>Redes de distribuci\u00f3n de contenido</li> <li>Compresi\u00f3n de datos</li> </ul>"},{"location":"es/concepts/relays/#integracion-de-ia","title":"Integraci\u00f3n de IA","text":"<ul> <li>Moderaci\u00f3n autom\u00e1tica</li> <li>Recomendaciones de contenido</li> <li>Detecci\u00f3n de spam</li> <li>An\u00e1lisis de sentimiento</li> </ul>"},{"location":"es/concepts/relays/#protocolos-avanzados","title":"Protocolos Avanzados","text":"<ul> <li>Sincronizaci\u00f3n eficiente</li> <li>Protocolos de consenso</li> <li>Replicaci\u00f3n autom\u00e1tica</li> <li>Recuperaci\u00f3n de fallos</li> </ul>"},{"location":"es/concepts/relays/#proximos-pasos","title":"Pr\u00f3ximos Pasos","text":"<p>Ahora que entiendes los rel\u00e9s, explora:</p> <ul> <li>Eventos y Mensajes - Qu\u00e9 almacenan y reenv\u00edan los rel\u00e9s</li> <li>Construyendo Aplicaciones - C\u00f3mo trabajar con rel\u00e9s en c\u00f3digo</li> <li>Temas Avanzados - Caracter\u00edsticas especializadas de rel\u00e9s</li> </ul> <p>Comenzando</p> <p>Comienza entendiendo c\u00f3mo usar rel\u00e9s como cliente, luego experimenta ejecutando tu propio rel\u00e9 para aprender. Considera los factores comunitarios y econ\u00f3micos al decidir si ejecutar un rel\u00e9 p\u00fablico.</p>      Eventos y Mensajes \u2192"},{"location":"es/concepts/relays/#quiz-de-comprension","title":"Quiz de Comprensi\u00f3n","text":"<p>Prueba Tu Entendimiento</p> <ol> <li>\u00bfCu\u00e1les son las funciones principales de un rel\u00e9 Nostr?</li> <li>\u00bfQu\u00e9 informaci\u00f3n puede revelar el documento NIP-11 de un rel\u00e9?</li> <li>\u00bfCu\u00e1l es la diferencia entre rel\u00e9s p\u00fablicos, privados y de pago?</li> <li>\u00bfPor qu\u00e9 es importante usar m\u00faltiples rel\u00e9s en lugar de uno solo?</li> </ol> Respuestas <ol> <li>Aceptar, almacenar, reenviar y filtrar eventos; aplicar pol\u00edticas de uso</li> <li>Capacidades t\u00e9cnicas, limitaciones, NIPs soportados, pol\u00edticas de contenido, informaci\u00f3n de contacto</li> <li>P\u00fablicos (abiertos a todos), privados (acceso restringido), de pago (requieren suscripci\u00f3n)</li> <li>Para redundancia, resistencia a censura, mejor rendimiento y evitar dependencia de un solo operador</li> </ol>"},{"location":"es/concepts/zaps/","title":"Entendiendo Zaps","text":"<p>Objetivos de Aprendizaje</p> <p>Al final de esta lecci\u00f3n, entender\u00e1s:</p> <ul> <li>Qu\u00e9 son los zaps y por qu\u00e9 son revolucionarios</li> <li>C\u00f3mo funcionan los zaps t\u00e9cnicamente (NIP-57)</li> <li>Diferentes tipos de zaps y sus casos de uso</li> <li>La econom\u00eda e incentivos que crean los zaps</li> <li>Consideraciones de privacidad con zaps</li> </ul>"},{"location":"es/concepts/zaps/#que-son-los-zaps","title":"\u00bfQu\u00e9 Son los Zaps?","text":"<p>Los Zaps son pagos instant\u00e1neos de Bitcoin enviados a trav\u00e9s de Lightning Network que est\u00e1n criptogr\u00e1ficamente vinculados a eventos Nostr. Representan un cambio fundamental de los \"likes\" tradicionales de redes sociales hacia interacciones de valor-por-valor.</p> <p>Valor-por-Valor</p> <p>En lugar de regalar tu atenci\u00f3n gratis a anunciantes, los zaps te permiten apoyar directamente a creadores y se\u00f1alar contenido de calidad con valor econ\u00f3mico real.</p>"},{"location":"es/concepts/zaps/#caracteristicas-clave","title":"Caracter\u00edsticas Clave","text":"<ul> <li>\u26a1 Instant\u00e1neos: Los pagos se liquidan en milisegundos</li> <li>\ud83d\udd12 Criptogr\u00e1ficamente Verificados: Vinculados a eventos Nostr espec\u00edficos</li> <li>\ud83d\udcb0 Micropagos: Pueden ser tan peque\u00f1os como 1 satoshi (0.00000001 BTC)</li> <li>\ud83c\udf0d Globales: Funcionan en cualquier parte del mundo</li> <li>\ud83d\udd13 Sin Permisos: Sin intermediarios o porteros</li> </ul>"},{"location":"es/concepts/zaps/#como-funcionan-los-zaps-nip-57","title":"C\u00f3mo Funcionan los Zaps (NIP-57)","text":"<p>Los zaps est\u00e1n definidos por NIP-57 (Posibilidad de Implementaci\u00f3n Nostr 57) e involucran una danza sofisticada entre tu cliente Nostr, billetera Lightning, y el servicio Lightning del destinatario.</p>"},{"location":"es/concepts/zaps/#el-flujo-del-zap","title":"El Flujo del Zap","text":"<pre><code>sequenceDiagram\n    participant User as T\u00fa\n    participant Client as Cliente Nostr\n    participant Wallet as Billetera Lightning\n    participant LNURL as LNURL Destinatario\n    participant Relay as Rel\u00e9 Nostr\n\n    User-&gt;&gt;Client: Hacer clic en Zap en post\n    Client-&gt;&gt;LNURL: Solicitar endpoint de zap\n    LNURL--&gt;&gt;Client: Devolver plantilla de solicitud de pago\n    Client-&gt;&gt;Wallet: Generar factura por cantidad\n    Wallet--&gt;&gt;Client: Factura Lightning\n    Client-&gt;&gt;LNURL: Enviar factura + evento Nostr\n    LNURL-&gt;&gt;LNURL: Procesar pago\n    LNURL-&gt;&gt;Relay: Publicar recibo de zap (kind 9735)\n    Relay--&gt;&gt;Client: Aparece recibo de zap\n    Client-&gt;&gt;User: Mostrar confirmaci\u00f3n de zap</code></pre>"},{"location":"es/concepts/zaps/#componentes-tecnicos","title":"Componentes T\u00e9cnicos","text":"<p>1. Lightning Address - Identificador legible para humanos (como email) - Ejemplo: <code>alice@getalby.com</code> - Se resuelve a endpoint LNURL-pay</p> <p>2. LNURL-pay - Protocolo para solicitar pagos Lightning - Maneja la generaci\u00f3n de solicitudes de pago - Devuelve confirmaci\u00f3n de pago</p> <p>3. Solicitud de Zap (Kind 9734) - Evento Nostr que describe el zap intencionado - Contiene destinatario, cantidad y mensaje opcional - Firmado por la llave privada del remitente</p> <p>4. Recibo de Zap (Kind 9735) - Prueba de que el pago fue realizado - Publicado por el servicio Lightning del destinatario - Contiene preimage de pago como prueba</p>"},{"location":"es/concepts/zaps/#tipos-de-zaps","title":"Tipos de Zaps","text":""},{"location":"es/concepts/zaps/#zaps-regulares","title":"Zaps Regulares","text":"<p>Zaps est\u00e1ndar que aparecen p\u00fablicamente en posts:</p> <pre><code>{\n  \"kind\": 9735,\n  \"content\": \"\u00a1Gran post! \u26a1\",\n  \"tags\": [\n    [\"bolt11\", \"lnbc...\"],\n    [\"description\", \"...\"],\n    [\"p\", \"pubkey_destinatario\"],\n    [\"e\", \"id_evento\"]\n  ]\n}\n</code></pre>"},{"location":"es/concepts/zaps/#zaps-anonimos","title":"Zaps An\u00f3nimos","text":"<p>Zaps sin revelar la identidad del remitente: - El pago se realiza pero la informaci\u00f3n del remitente est\u00e1 oculta - \u00datil para usuarios conscientes de la privacidad - A\u00fan criptogr\u00e1ficamente verificable</p>"},{"location":"es/concepts/zaps/#zaps-privados","title":"Zaps Privados","text":"<p>Zaps que no aparecen p\u00fablicamente: - Solo el remitente y destinatario saben sobre ellos - No se publica recibo p\u00fablico de zap - M\u00e1xima privacidad</p>"},{"location":"es/concepts/zaps/#objetivos-de-zap","title":"Objetivos de Zap","text":"<p>Mecanismo de crowdfunding usando zaps: - Establecer una cantidad objetivo para un proyecto - La comunidad puede zapear hacia la meta - Seguimiento transparente del progreso</p>"},{"location":"es/concepts/zaps/#la-economia-de-los-zaps","title":"La Econom\u00eda de los Zaps","text":""},{"location":"es/concepts/zaps/#micro-economia","title":"Micro-Econom\u00eda","text":"<p>Los zaps permiten micro-transacciones que no eran posibles antes:</p> <ul> <li>1 sat = ~$0.0003 (var\u00eda con el precio de Bitcoin)</li> <li>21 sats = N\u00famero popular de \"Bitcoin\"</li> <li>100 sats = Apreciaci\u00f3n significativa</li> <li>1,000 sats = Apoyo fuerte</li> <li>10,000+ sats = Contribuci\u00f3n significativa</li> </ul>"},{"location":"es/concepts/zaps/#incentivos-para-creadores","title":"Incentivos para Creadores","text":"<p>El Contenido de Calidad Sube - El buen contenido recibe m\u00e1s zaps - Los creadores ganan directamente de su audiencia - No necesidad de publicidad o patrocinios</p> <p>Retroalimentaci\u00f3n Inmediata - Se\u00f1al econ\u00f3mica instant\u00e1nea del valor del contenido - M\u00e1s significativo que likes o corazones - Fomenta publicaciones reflexivas</p> <p>Monetizaci\u00f3n Global - Cualquiera, en cualquier lugar puede ganar Bitcoin - Sin restricciones geogr\u00e1ficas - Sin umbrales m\u00ednimos de pago</p>"},{"location":"es/concepts/zaps/#efectos-de-red","title":"Efectos de Red","text":"<p>El Valor Fluye hacia el Valor - Bitcoin fluye naturalmente hacia contenido valioso - Crea bucles de retroalimentaci\u00f3n positiva - Recompensa contribuci\u00f3n genuina sobre farming de engagement</p> <p>Reducci\u00f3n de Spam - Peque\u00f1o costo para interactuar reduce spam - Incentivo econ\u00f3mico para calidad - Est\u00e1ndares comunitarios autorregulados</p>"},{"location":"es/concepts/zaps/#etiqueta-y-cultura-de-zaps","title":"Etiqueta y Cultura de Zaps","text":""},{"location":"es/concepts/zaps/#cantidades-comunes-de-zap","title":"Cantidades Comunes de Zap","text":"Cantidad Significado Caso de Uso 1 sat Reconocimiento \"Vi esto\" 21 sats Apreciaci\u00f3n Bitcoin Like est\u00e1ndar 100 sats Buen contenido Post de calidad 500 sats Gran contenido Post excelente 1,000+ sats Excepcional Trabajo sobresaliente 10,000+ sats Apoyo Contribuci\u00f3n mayor"},{"location":"es/concepts/zaps/#cuando-zapear","title":"Cu\u00e1ndo Zapear","text":"<p>\u2705 Buenos Momentos para Zapear: - Contenido que te ense\u00f1\u00f3 algo - Posts que te hicieron re\u00edr - Respuestas \u00fatiles a preguntas - Investigaci\u00f3n original o insights - Apoyar creadores que aprecias</p> <p>\u274c Evita Zapear: - Contenido con el que no est\u00e1s de acuerdo (a menos que sea constructivo) - Spam o posts de poco esfuerzo - Solo para obtener atenci\u00f3n - Tus propios posts (generalmente mal visto)</p>"},{"location":"es/concepts/zaps/#mensajes-de-zap","title":"Mensajes de Zap","text":"<p>Muchos zaps incluyen mensajes cortos: - Mant\u00e9nlos positivos y constructivos - Los emoji son populares (\u26a1\ud83d\ude80\ud83d\udd25\ud83d\udc9c) - Explicaciones breves de por qu\u00e9 zapeaste - Aliento para creadores</p>"},{"location":"es/concepts/zaps/#consideraciones-de-privacidad","title":"Consideraciones de Privacidad","text":""},{"location":"es/concepts/zaps/#que-es-publico","title":"Qu\u00e9 es P\u00fablico","text":"<ul> <li>Cantidad del zap (usualmente)</li> <li>Destinatario (siempre)</li> <li>Post asociado (si aplica)</li> <li>Mensaje del zap (si se incluye)</li> </ul>"},{"location":"es/concepts/zaps/#que-puede-ser-privado","title":"Qu\u00e9 Puede Ser Privado","text":"<ul> <li>Identidad del remitente (con zaps an\u00f3nimos)</li> <li>Detalles de pago (privacidad Lightning)</li> <li>Timing exacto (algo de ofuscaci\u00f3n posible)</li> </ul>"},{"location":"es/concepts/zaps/#consejos-de-privacidad","title":"Consejos de Privacidad","text":"<ul> <li>Usa diferentes direcciones Lightning para diferentes prop\u00f3sitos</li> <li>Considera zaps an\u00f3nimos para temas sensibles</li> <li>Ten en cuenta que los patrones de pago pueden analizarse</li> <li>Los pagos Lightning son m\u00e1s privados que Bitcoin on-chain</li> </ul>"},{"location":"es/concepts/zaps/#configurar-zaps","title":"Configurar Zaps","text":""},{"location":"es/concepts/zaps/#requisitos","title":"Requisitos","text":"<ol> <li>Billetera Lightning (Alby, Wallet of Satoshi, etc.)</li> <li>Direcci\u00f3n Lightning (tunombre@getalby.com)</li> <li>Cliente Nostr que soporte zaps</li> <li>Algo de Bitcoin para enviar zaps</li> </ol>"},{"location":"es/concepts/zaps/#pasos-de-configuracion","title":"Pasos de Configuraci\u00f3n","text":"<ol> <li>Configurar billetera Lightning (ver Gu\u00eda de Configuraci\u00f3n de Billetera)</li> <li>Agregar direcci\u00f3n Lightning al perfil Nostr</li> <li>Probar con zaps peque\u00f1os a ti mismo o amigos</li> <li>Empezar a zapear contenido que aprecias</li> </ol>"},{"location":"es/concepts/zaps/#caracteristicas-avanzadas-de-zaps","title":"Caracter\u00edsticas Avanzadas de Zaps","text":""},{"location":"es/concepts/zaps/#divisiones-de-zap","title":"Divisiones de Zap","text":"<p>Algunos clientes soportan dividir zaps: - Enviar a m\u00faltiples destinatarios - \u00datil para colaboraciones - Distribuci\u00f3n autom\u00e1tica de ingresos</p>"},{"location":"es/concepts/zaps/#zaps-recurrentes","title":"Zaps Recurrentes","text":"<p>Zaps tipo suscripci\u00f3n: - Pagos regulares a creadores - Apoyo automatizado - Funcionalidad tipo Patreon</p>"},{"location":"es/concepts/zaps/#zaps-condicionales","title":"Zaps Condicionales","text":"<p>Caracter\u00edsticas tipo contrato inteligente: - Zaps que se desbloquean bajo ciertas condiciones - Liberaciones basadas en objetivos - Pagos con tiempo bloqueado</p>"},{"location":"es/concepts/zaps/#solucion-de-problemas-de-zaps","title":"Soluci\u00f3n de Problemas de Zaps","text":""},{"location":"es/concepts/zaps/#problemas-comunes","title":"Problemas Comunes","text":"<p>\"Fall\u00f3 el env\u00edo del zap\" - Verificar saldo de billetera - Verificar que la direcci\u00f3n Lightning sea correcta - Intentar con cantidad menor - Verificar conexi\u00f3n a internet</p> <p>\"No se ve bot\u00f3n de zap\" - El destinatario puede no tener direcci\u00f3n Lightning configurada - El cliente puede no soportar zaps - Verificar si los zaps est\u00e1n habilitados en configuraciones</p> <p>\"Zap no aparece\" - Puede tomar unos segundos procesarse - Verificar si se usan rel\u00e9s compatibles - Refrescar el cliente</p>"},{"location":"es/concepts/zaps/#mejores-practicas","title":"Mejores Pr\u00e1cticas","text":"<ul> <li>Empezar con cantidades peque\u00f1as mientras aprendes</li> <li>Mantener algo de Bitcoin en tu billetera Lightning</li> <li>Probar zaps con amigos primero</li> <li>Monitorear tu gasto</li> </ul>"},{"location":"es/concepts/zaps/#el-futuro-de-los-zaps","title":"El Futuro de los Zaps","text":""},{"location":"es/concepts/zaps/#tendencias-emergentes","title":"Tendencias Emergentes","text":"<ul> <li>Juegos y aplicaciones zap-to-earn</li> <li>Zapping algor\u00edtmico basado en preferencias</li> <li>Zaps multiplataforma m\u00e1s all\u00e1 de Nostr</li> <li>Integraci\u00f3n con pagos tradicionales</li> </ul>"},{"location":"es/concepts/zaps/#desarrollos-potenciales","title":"Desarrollos Potenciales","text":"<ul> <li>Zaps de moneda estable para estabilidad de precio</li> <li>Zaps programables con contratos inteligentes</li> <li>Anal\u00edticas de zap para creadores</li> <li>Soluciones empresariales de zap</li> </ul>"},{"location":"es/concepts/zaps/#impacto-en-redes-sociales","title":"Impacto en Redes Sociales","text":"<p>Los zaps representan un cambio fundamental en c\u00f3mo pensamos sobre las redes sociales:</p>"},{"location":"es/concepts/zaps/#de-economia-de-atencion-a-economia-de-valor","title":"De Econom\u00eda de Atenci\u00f3n a Econom\u00eda de Valor","text":"<ul> <li>Tradicional: Tu atenci\u00f3n es el producto vendido a anunciantes</li> <li>Zaps: Tu atenci\u00f3n tiene valor econ\u00f3mico directo que controlas</li> </ul>"},{"location":"es/concepts/zaps/#de-farming-de-engagement-a-contenido-de-calidad","title":"De Farming de Engagement a Contenido de Calidad","text":"<ul> <li>Tradicional: Optimizar para clics, vistas, tiempo gastado</li> <li>Zaps: Optimizar para valor genuino y apreciaci\u00f3n</li> </ul>"},{"location":"es/concepts/zaps/#de-lock-in-de-plataforma-a-libertad-de-creador","title":"De Lock-in de Plataforma a Libertad de Creador","text":"<ul> <li>Tradicional: La plataforma controla monetizaci\u00f3n y puede banearte</li> <li>Zaps: Pagos directos peer-to-peer, sin intermediarios</li> </ul>"},{"location":"es/concepts/zaps/#implementacion-tecnica-de-zaps","title":"Implementaci\u00f3n T\u00e9cnica de Zaps","text":""},{"location":"es/concepts/zaps/#configurando-lightning-address","title":"Configurando Lightning Address","text":"<pre><code>// Ejemplo de configuraci\u00f3n de perfil con Lightning Address\nconst perfilConZaps = {\n  kind: 0,\n  content: JSON.stringify({\n    name: \"Alicia\",\n    about: \"Creadora de contenido Bitcoin\",\n    picture: \"https://example.com/alice.jpg\",\n    lud16: \"alice@getalby.com\", // Lightning Address\n    lud06: \"https://getalby.com/.well-known/lnurlp/alice\" // LNURL-pay\n  }),\n  created_at: Math.floor(Date.now() / 1000),\n  tags: []\n}\n</code></pre>"},{"location":"es/concepts/zaps/#procesando-zaps-en-cliente","title":"Procesando Zaps en Cliente","text":"<pre><code>class ManejadorZaps {\n  constructor(cliente) {\n    this.cliente = cliente\n    this.billetera = new BilleteraLightning()\n  }\n\n  async enviarZap(eventoDestino, cantidad, mensaje = '') {\n    try {\n      // 1. Obtener Lightning Address del destinatario\n      const perfil = await this.obtenerPerfil(eventoDestino.pubkey)\n      const lightningAddress = perfil.lud16 || perfil.lud06\n\n      if (!lightningAddress) {\n        throw new Error('Destinatario no tiene Lightning Address configurada')\n      }\n\n      // 2. Crear solicitud de zap\n      const solicitudZap = {\n        kind: 9734,\n        content: mensaje,\n        created_at: Math.floor(Date.now() / 1000),\n        tags: [\n          ['p', eventoDestino.pubkey],\n          ['e', eventoDestino.id],\n          ['amount', (cantidad * 1000).toString()], // msat\n          ['relays', ...this.cliente.rel\u00e9s]\n        ]\n      }\n\n      const solicitudFirmada = await this.cliente.firmarEvento(solicitudZap)\n\n      // 3. Solicitar factura Lightning\n      const factura = await this.solicitarFactura(\n        lightningAddress, \n        cantidad, \n        solicitudFirmada\n      )\n\n      // 4. Pagar factura\n      const resultadoPago = await this.billetera.pagarFactura(factura.bolt11)\n\n      if (resultadoPago.success) {\n        console.log('\ud83d\udc9c Zap enviado exitosamente!')\n        return {\n          \u00e9xito: true,\n          factura: factura.bolt11,\n          preimage: resultadoPago.preimage\n        }\n      }\n\n    } catch (error) {\n      console.error('Error enviando zap:', error)\n      throw error\n    }\n  }\n\n  async solicitarFactura(lightningAddress, cantidad, solicitudZap) {\n    // Resolver Lightning Address a LNURL\n    const [usuario, dominio] = lightningAddress.split('@')\n    const lnurlEndpoint = `https://${dominio}/.well-known/lnurlp/${usuario}`\n\n    // Obtener informaci\u00f3n del endpoint\n    const respuesta = await fetch(lnurlEndpoint)\n    const info = await respuesta.json()\n\n    // Verificar l\u00edmites\n    if (cantidad * 1000 &lt; info.minSendable || cantidad * 1000 &gt; info.maxSendable) {\n      throw new Error(`Cantidad fuera del rango permitido`)\n    }\n\n    // Solicitar factura\n    const facturaResponse = await fetch(info.callback, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        amount: cantidad * 1000, // msat\n        nostr: JSON.stringify(solicitudZap),\n        comment: solicitudZap.content\n      })\n    })\n\n    return facturaResponse.json()\n  }\n\n  async obtenerPerfil(pubkey) {\n    const eventos = await this.cliente.obtenerEventos([{\n      kinds: [0],\n      authors: [pubkey],\n      limit: 1\n    }])\n\n    if (eventos.length === 0) {\n      throw new Error('Perfil no encontrado')\n    }\n\n    return JSON.parse(eventos[0].content)\n  }\n\n  // Escuchar recibos de zap\n  suscribirseAZaps(callback) {\n    return this.cliente.suscribirse([{\n      kinds: [9735], // Recibos de zap\n      '#p': [this.cliente.publicKey] // Zaps para m\u00ed\n    }], (evento) =&gt; {\n      const zapInfo = this.procesarReciboZap(evento)\n      callback(zapInfo)\n    })\n  }\n\n  procesarReciboZap(evento) {\n    const bolt11Tag = evento.tags.find(tag =&gt; tag[0] === 'bolt11')\n    const descripcionTag = evento.tags.find(tag =&gt; tag[0] === 'description')\n    const pTag = evento.tags.find(tag =&gt; tag[0] === 'p')\n    const eTag = evento.tags.find(tag =&gt; tag[0] === 'e')\n\n    if (!bolt11Tag || !descripcionTag) {\n      throw new Error('Recibo de zap inv\u00e1lido')\n    }\n\n    // Decodificar factura Lightning para obtener cantidad\n    const factura = this.decodificarFactura(bolt11Tag[1])\n\n    // Parsear solicitud original de zap\n    const solicitudOriginal = JSON.parse(descripcionTag[1])\n\n    return {\n      cantidad: factura.amount_msat / 1000, // convertir a sats\n      remitente: solicitudOriginal.pubkey,\n      destinatario: pTag ? pTag[1] : null,\n      eventoReferenciado: eTag ? eTag[1] : null,\n      mensaje: solicitudOriginal.content,\n      timestamp: evento.created_at,\n      factura: bolt11Tag[1]\n    }\n  }\n\n  decodificarFactura(bolt11) {\n    // Implementaci\u00f3n simplificada - usar librer\u00eda real en producci\u00f3n\n    // Como bolt11-decoder o similar\n    return {\n      amount_msat: 21000, // ejemplo\n      description: \"Zap payment\"\n    }\n  }\n}\n\n// Uso\nconst manejadorZaps = new ManejadorZaps(miCliente)\n\n// Enviar zap\nawait manejadorZaps.enviarZap(evento, 100, \"\u00a1Gran post! \ud83d\ude80\")\n\n// Escuchar zaps recibidos\nmanejadorZaps.suscribirseAZaps((zapInfo) =&gt; {\n  console.log(`\ud83d\udc9c Recibido ${zapInfo.cantidad} sats de ${zapInfo.remitente}`)\n  if (zapInfo.mensaje) {\n    console.log(`Mensaje: ${zapInfo.mensaje}`)\n  }\n})\n</code></pre>"},{"location":"es/concepts/zaps/#widget-de-zap-para-web","title":"Widget de Zap para Web","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Widget de Zap&lt;/title&gt;\n    &lt;style&gt;\n        .zap-widget {\n            border: 1px solid #e1e5e9;\n            border-radius: 8px;\n            padding: 16px;\n            max-width: 300px;\n            font-family: Arial, sans-serif;\n        }\n\n        .zap-amounts {\n            display: flex;\n            gap: 8px;\n            margin: 12px 0;\n        }\n\n        .zap-amount {\n            padding: 8px 12px;\n            border: 1px solid #f7931a;\n            border-radius: 4px;\n            background: white;\n            color: #f7931a;\n            cursor: pointer;\n            transition: all 0.2s;\n        }\n\n        .zap-amount:hover,\n        .zap-amount.selected {\n            background: #f7931a;\n            color: white;\n        }\n\n        .zap-button {\n            width: 100%;\n            padding: 12px;\n            background: linear-gradient(45deg, #f7931a, #ffb347);\n            border: none;\n            border-radius: 6px;\n            color: white;\n            font-weight: bold;\n            cursor: pointer;\n            font-size: 16px;\n        }\n\n        .zap-button:hover {\n            transform: translateY(-1px);\n            box-shadow: 0 4px 8px rgba(247, 147, 26, 0.3);\n        }\n\n        .zap-message {\n            width: 100%;\n            padding: 8px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            margin: 8px 0;\n            resize: vertical;\n        }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=\"zap-widget\"&gt;\n        &lt;h3&gt;\u26a1 Enviar Zap&lt;/h3&gt;\n\n        &lt;div class=\"zap-amounts\"&gt;\n            &lt;div class=\"zap-amount\" data-amount=\"21\"&gt;21&lt;/div&gt;\n            &lt;div class=\"zap-amount\" data-amount=\"100\"&gt;100&lt;/div&gt;\n            &lt;div class=\"zap-amount selected\" data-amount=\"500\"&gt;500&lt;/div&gt;\n            &lt;div class=\"zap-amount\" data-amount=\"1000\"&gt;1K&lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;input type=\"number\" id=\"custom-amount\" placeholder=\"Cantidad personalizada\" min=\"1\"&gt;\n\n        &lt;textarea class=\"zap-message\" placeholder=\"Mensaje opcional...\" rows=\"2\"&gt;&lt;/textarea&gt;\n\n        &lt;button class=\"zap-button\" onclick=\"enviarZap()\"&gt;\n            \u26a1 Zapear 500 sats\n        &lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;script&gt;\n        let cantidadSeleccionada = 500\n\n        // Manejar selecci\u00f3n de cantidad\n        document.querySelectorAll('.zap-amount').forEach(btn =&gt; {\n            btn.addEventListener('click', () =&gt; {\n                document.querySelectorAll('.zap-amount').forEach(b =&gt; b.classList.remove('selected'))\n                btn.classList.add('selected')\n                cantidadSeleccionada = parseInt(btn.dataset.amount)\n                document.querySelector('.zap-button').textContent = `\u26a1 Zapear ${cantidadSeleccionada} sats`\n                document.getElementById('custom-amount').value = ''\n            })\n        })\n\n        // Manejar cantidad personalizada\n        document.getElementById('custom-amount').addEventListener('input', (e) =&gt; {\n            if (e.target.value) {\n                document.querySelectorAll('.zap-amount').forEach(b =&gt; b.classList.remove('selected'))\n                cantidadSeleccionada = parseInt(e.target.value) || 1\n                document.querySelector('.zap-button').textContent = `\u26a1 Zapear ${cantidadSeleccionada} sats`\n            }\n        })\n\n        async function enviarZap() {\n            const mensaje = document.querySelector('.zap-message').value\n            const bot\u00f3n = document.querySelector('.zap-button')\n\n            bot\u00f3n.textContent = 'Enviando...'\n            bot\u00f3n.disabled = true\n\n            try {\n                // Aqu\u00ed ir\u00eda la l\u00f3gica real de zap\n                await simularEnvioZap(cantidadSeleccionada, mensaje)\n\n                bot\u00f3n.textContent = '\u2705 Zap Enviado!'\n                setTimeout(() =&gt; {\n                    bot\u00f3n.textContent = `\u26a1 Zapear ${cantidadSeleccionada} sats`\n                    bot\u00f3n.disabled = false\n                    document.querySelector('.zap-message').value = ''\n                }, 2000)\n\n            } catch (error) {\n                console.error('Error enviando zap:', error)\n                bot\u00f3n.textContent = '\u274c Error'\n                setTimeout(() =&gt; {\n                    bot\u00f3n.textContent = `\u26a1 Zapear ${cantidadSeleccionada} sats`\n                    bot\u00f3n.disabled = false\n                }, 2000)\n            }\n        }\n\n        async function simularEnvioZap(cantidad, mensaje) {\n            // Simulaci\u00f3n - reemplazar con l\u00f3gica real\n            return new Promise(resolve =&gt; {\n                setTimeout(() =&gt; {\n                    console.log(`Zap simulado: ${cantidad} sats, mensaje: \"${mensaje}\"`)\n                    resolve()\n                }, 1500)\n            })\n        }\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"es/concepts/zaps/#analiticas-de-zaps","title":"Anal\u00edticas de Zaps","text":""},{"location":"es/concepts/zaps/#metricas-para-creadores","title":"M\u00e9tricas para Creadores","text":"<pre><code>class Anal\u00edticasZaps {\n  constructor(pubkey, cliente) {\n    this.pubkey = pubkey\n    this.cliente = cliente\n  }\n\n  async obtenerEstad\u00edsticasZaps(d\u00edas = 30) {\n    const desde = Math.floor(Date.now() / 1000) - (d\u00edas * 24 * 60 * 60)\n\n    // Obtener todos los recibos de zap para mis eventos\n    const recibosZap = await this.cliente.obtenerEventos([{\n      kinds: [9735],\n      '#p': [this.pubkey],\n      since: desde\n    }])\n\n    return this.procesarEstad\u00edsticas(recibosZap)\n  }\n\n  procesarEstad\u00edsticas(recibos) {\n    const stats = {\n      totalZaps: recibos.length,\n      totalSats: 0,\n      promedioSats: 0,\n      zapsPorD\u00eda: {},\n      topRemitentes: {},\n      eventosM\u00e1sZapeados: {},\n      mensajesPopulares: []\n    }\n\n    recibos.forEach(recibo =&gt; {\n      // Extraer informaci\u00f3n del zap\n      const zapInfo = this.procesarReciboZap(recibo)\n\n      // Acumular totales\n      stats.totalSats += zapInfo.cantidad\n\n      // Zaps por d\u00eda\n      const fecha = new Date(recibo.created_at * 1000).toDateString()\n      stats.zapsPorD\u00eda[fecha] = (stats.zapsPorD\u00eda[fecha] || 0) + zapInfo.cantidad\n\n      // Top remitentes\n      if (zapInfo.remitente) {\n        stats.topRemitentes[zapInfo.remitente] = \n          (stats.topRemitentes[zapInfo.remitente] || 0) + zapInfo.cantidad\n      }\n\n      // Eventos m\u00e1s zapeados\n      if (zapInfo.eventoReferenciado) {\n        stats.eventosM\u00e1sZapeados[zapInfo.eventoReferenciado] = \n          (stats.eventosM\u00e1sZapeados[zapInfo.eventoReferenciado] || 0) + zapInfo.cantidad\n      }\n\n      // Mensajes populares\n      if (zapInfo.mensaje &amp;&amp; zapInfo.mensaje.trim()) {\n        stats.mensajesPopulares.push({\n          mensaje: zapInfo.mensaje,\n          cantidad: zapInfo.cantidad,\n          fecha: recibo.created_at\n        })\n      }\n    })\n\n    // Calcular promedio\n    stats.promedioSats = stats.totalZaps &gt; 0 ? \n      Math.round(stats.totalSats / stats.totalZaps) : 0\n\n    // Ordenar tops\n    stats.topRemitentes = Object.entries(stats.topRemitentes)\n      .sort(([,a], [,b]) =&gt; b - a)\n      .slice(0, 10)\n\n    stats.eventosM\u00e1sZapeados = Object.entries(stats.eventosM\u00e1sZapeados)\n      .sort(([,a], [,b]) =&gt; b - a)\n      .slice(0, 10)\n\n    stats.mensajesPopulares = stats.mensajesPopulares\n      .sort((a, b) =&gt; b.cantidad - a.cantidad)\n      .slice(0, 20)\n\n    return stats\n  }\n\n  generarReporte(stats) {\n    console.log('\ud83d\udcca REPORTE DE ZAPS')\n    console.log('==================')\n    console.log(`\ud83d\udcb0 Total recibido: ${stats.totalSats.toLocaleString()} sats`)\n    console.log(`\u26a1 Total zaps: ${stats.totalZaps}`)\n    console.log(`\ud83d\udcc8 Promedio por zap: ${stats.promedioSats} sats`)\n    console.log()\n\n    console.log('\ud83c\udfc6 TOP SUPPORTERS:')\n    stats.topRemitentes.slice(0, 5).forEach(([pubkey, sats], i) =&gt; {\n      console.log(`${i + 1}. ${pubkey.slice(0, 8)}... - ${sats} sats`)\n    })\n\n    console.log()\n    console.log('\ud83d\udd25 EVENTOS M\u00c1S ZAPEADOS:')\n    stats.eventosM\u00e1sZapeados.slice(0, 3).forEach(([eventId, sats], i) =&gt; {\n      console.log(`${i + 1}. ${eventId.slice(0, 8)}... - ${sats} sats`)\n    })\n  }\n}\n\n// Uso\nconst analytics = new Anal\u00edticasZaps(miPubkey, miCliente)\nconst stats = await analytics.obtenerEstad\u00edsticasZaps(30)\nanalytics.generarReporte(stats)\n</code></pre>"},{"location":"es/concepts/zaps/#quiz-rapido","title":"Quiz R\u00e1pido","text":"<p>Prueba Tu Comprensi\u00f3n</p> <ol> <li>\u00bfQu\u00e9 hace que los zaps sean diferentes de los \"likes\" tradicionales de redes sociales?</li> <li>\u00bfQu\u00e9 es NIP-57 y por qu\u00e9 es importante?</li> <li>\u00bfCu\u00e1les son los tres tipos de zaps en t\u00e9rminos de privacidad?</li> <li>\u00bfC\u00f3mo cambian los zaps los incentivos para creadores de contenido?</li> </ol> Respuestas <ol> <li>Los zaps involucran pagos reales de Bitcoin que proporcionan valor econ\u00f3mico, mientras los likes son gratis y no proporcionan valor directo a creadores</li> <li>NIP-57 es la Posibilidad de Implementaci\u00f3n Nostr que define c\u00f3mo funcionan los zaps t\u00e9cnicamente, asegurando interoperabilidad entre clientes y billeteras</li> <li>Zaps regulares (p\u00fablicos), zaps an\u00f3nimos (pago visible pero remitente oculto), y zaps privados (completamente privados)</li> <li>Los zaps crean incentivos econ\u00f3micos directos para contenido de calidad, permitiendo a creadores ganar inmediatamente de su audiencia sin depender de publicidad o monetizaci\u00f3n de plataforma</li> </ol>      Empezar a Construir \u2192"},{"location":"es/getting-started/nostr-tools/","title":"Herramientas de Desarrollo e Infraestructura","text":"<p>Objetivos de Aprendizaje</p> <p>Al final de esta lecci\u00f3n, entender\u00e1s:</p> <ul> <li>Herramientas de desarrollo esenciales para implementaci\u00f3n del protocolo Nostr</li> <li>Utilidades de l\u00ednea de comandos para an\u00e1lisis de red y depuraci\u00f3n</li> <li>Librer\u00edas y frameworks de programaci\u00f3n para diferentes lenguajes</li> <li>Herramientas de monitoreo de infraestructura y gesti\u00f3n de rel\u00e9s</li> </ul>"},{"location":"es/getting-started/nostr-tools/#descripcion-general-del-ecosistema-de-desarrollo","title":"Descripci\u00f3n General del Ecosistema de Desarrollo","text":"<p>El ecosistema de desarrollo de Nostr consiste en m\u00faltiples categor\u00edas de herramientas dise\u00f1adas para diferentes aspectos de la implementaci\u00f3n del protocolo, desde desarrollo de clientes hasta gesti\u00f3n de infraestructura de red. Entender estas herramientas habilita flujos de trabajo de desarrollo eficientes e implementaci\u00f3n robusta de sistemas.</p>"},{"location":"es/getting-started/nostr-tools/#librerias-de-implementacion-del-protocolo","title":"Librer\u00edas de Implementaci\u00f3n del Protocolo","text":""},{"location":"es/getting-started/nostr-tools/#ecosistema-javascripttypescript","title":"Ecosistema JavaScript/TypeScript","text":""},{"location":"es/getting-started/nostr-tools/#nostr-tools","title":"nostr-tools","text":"<p>Caracter\u00edsticas Principales: - Implementaci\u00f3n central del protocolo con creaci\u00f3n, validaci\u00f3n y firma de eventos - Gesti\u00f3n de comunicaci\u00f3n WebSocket con rel\u00e9s - Utilidades de generaci\u00f3n y gesti\u00f3n de llaves criptogr\u00e1ficas - Soporte de implementaci\u00f3n NIP para extensiones del protocolo</p> <p>Instalaci\u00f3n y Uso B\u00e1sico: <pre><code>npm install nostr-tools\n</code></pre></p> <pre><code>import { generatePrivateKey, getPublicKey, finishEvent, relayInit } from 'nostr-tools'\n\n// Generaci\u00f3n y gesti\u00f3n de llaves\nconst privateKey = generatePrivateKey()\nconst publicKey = getPublicKey(privateKey)\n\n// Creaci\u00f3n y firma de eventos\nconst event = finishEvent({\n  kind: 1,\n  created_at: Math.floor(Date.now() / 1000),\n  tags: [[\"t\", \"nostr\"], [\"t\", \"desarrollo\"]],\n  content: 'Ejemplo de implementaci\u00f3n del protocolo'\n}, privateKey)\n\n// Comunicaci\u00f3n con rel\u00e9s\nconst relay = relayInit('wss://relay.damus.io')\nawait relay.connect()\nrelay.publish(event)\n</code></pre>"},{"location":"es/getting-started/nostr-tools/#ndk-nostr-development-kit","title":"NDK (Nostr Development Kit)","text":"<p>Caracter\u00edsticas Avanzadas: - Framework de alto nivel para aplicaciones Nostr - Gesti\u00f3n autom\u00e1tica de cach\u00e9 y almacenamiento - Descubrimiento y balanceado de carga de rel\u00e9s - Soporte integrado para m\u00faltiples NIPs</p> <p>Ejemplo de Implementaci\u00f3n: <pre><code>import NDK from '@nostr-dev-kit/ndk'\n\nconst ndk = new NDK({\n  explicitRelayUrls: ['wss://relay.damus.io', 'wss://nos.lol']\n})\n\nawait ndk.connect()\nconst user = ndk.getUser({ npub: 'npub1...' })\nconst events = await user.fetchEvents()\n</code></pre></p>"},{"location":"es/getting-started/nostr-tools/#ecosistema-python","title":"Ecosistema Python","text":""},{"location":"es/getting-started/nostr-tools/#python-nostr","title":"python-nostr","text":"<p>Capacidades Centrales: - Implementaci\u00f3n completa del protocolo en Python - Integraci\u00f3n con librer\u00edas criptogr\u00e1ficas est\u00e1ndar - Soporte para aplicaciones tanto s\u00edncronas como as\u00edncronas - Herramientas de an\u00e1lisis y procesamiento de eventos</p> <p>Instalaci\u00f3n y Configuraci\u00f3n: <pre><code>pip install nostr\n</code></pre></p> <pre><code>from nostr.key import PrivateKey\nfrom nostr.event import Event\nfrom nostr.relay_manager import RelayManager\nimport time\n\n# Gesti\u00f3n de identidad\nprivate_key = PrivateKey()\npublic_key = private_key.public_key\n\n# Creaci\u00f3n de eventos\nevent = Event(\n    kind=1,\n    content=\"Implementaci\u00f3n en Python\",\n    created_at=int(time.time()),\n    tags=[[\"t\", \"python\"], [\"t\", \"nostr\"]]\n)\nprivate_key.sign_event(event)\n\n# Publicaci\u00f3n de eventos\nrelay_manager = RelayManager()\nrelay_manager.add_relay(\"wss://relay.damus.io\")\nrelay_manager.publish_event(event)\n</code></pre>"},{"location":"es/getting-started/nostr-tools/#ecosistema-rust","title":"Ecosistema Rust","text":""},{"location":"es/getting-started/nostr-tools/#nostr-sdk","title":"nostr-sdk","text":"<p>Caracter\u00edsticas de Rendimiento: - Implementaci\u00f3n de alto rendimiento en Rust - Bindings para m\u00faltiples lenguajes (Python, JavaScript, Kotlin) - Gesti\u00f3n avanzada de memoria y concurrencia - Soporte completo para todas las especificaciones NIP</p> <p>Ejemplo de Uso: <pre><code>use nostr_sdk::prelude::*;\n\n#[tokio::main]\nasync fn main() -&gt; Result&lt;()&gt; {\n    let keys = Keys::generate();\n    let client = Client::new(&amp;keys);\n\n    client.add_relay(\"wss://relay.damus.io\", None).await?;\n    client.connect().await;\n\n    let event = EventBuilder::new_text_note(\"\u00a1Hola desde Rust!\", &amp;[])\n        .to_event(&amp;keys)?;\n\n    client.send_event(event).await?;\n    Ok(())\n}\n</code></pre></p>"},{"location":"es/getting-started/nostr-tools/#herramientas-de-linea-de-comandos","title":"Herramientas de L\u00ednea de Comandos","text":""},{"location":"es/getting-started/nostr-tools/#nostril","title":"nostril","text":"<p>Funcionalidad de CLI: - Creaci\u00f3n r\u00e1pida de eventos desde terminal - Integraci\u00f3n con scripts de shell para automatizaci\u00f3n - Soporte para m\u00faltiples tipos de eventos - Utilidades de firma y verificaci\u00f3n</p> <p>Comandos Esenciales: <pre><code># Instalar nostril\ncargo install nostril\n\n# Crear evento de texto simple\nnostril --content \"Mensaje desde CLI\" --tag t nostr\n\n# Generar par de llaves\nnostril --generate-keys\n\n# Publicar evento a rel\u00e9 espec\u00edfico\nnostril --relay wss://relay.damus.io --content \"Publicaci\u00f3n automatizada\"\n</code></pre></p>"},{"location":"es/getting-started/nostr-tools/#nak","title":"nak","text":"<p>Capacidades de Red: - Herramienta completa de an\u00e1lisis de red Nostr - Consulta y filtrado de eventos avanzado - Monitoreo de rel\u00e9s y an\u00e1lisis de rendimiento - Utilidades de depuraci\u00f3n del protocolo</p> <p>Operaciones Comunes: <pre><code># Instalar nak\ngo install github.com/fiatjaf/nak@latest\n\n# Consultar eventos recientes\nnak req -k 1 --limit 10 wss://relay.damus.io\n\n# Monitorear actividad de rel\u00e9 en tiempo real\nnak stream wss://relay.damus.io\n\n# Verificar informaci\u00f3n del rel\u00e9\nnak relay-info wss://relay.damus.io\n</code></pre></p>"},{"location":"es/getting-started/nostr-tools/#infraestructura-de-desarrollo","title":"Infraestructura de Desarrollo","text":""},{"location":"es/getting-started/nostr-tools/#reles-de-desarrollo-local","title":"Rel\u00e9s de Desarrollo Local","text":""},{"location":"es/getting-started/nostr-tools/#strfry","title":"strfry","text":"<p>Caracter\u00edsticas del Rel\u00e9: - Implementaci\u00f3n de rel\u00e9 de alto rendimiento en C++ - Base de datos LMDB para almacenamiento eficiente - Configuraci\u00f3n flexible de pol\u00edticas - Herramientas de monitoreo integradas</p> <p>Configuraci\u00f3n de Desarrollo: <pre><code># Instalar strfry\ngit clone https://github.com/hoytech/strfry\ncd strfry &amp;&amp; make\n\n# Configuraci\u00f3n b\u00e1sica\necho 'relay { port = 7777 }' &gt; strfry.conf\n\n# Ejecutar rel\u00e9 local\n./strfry relay\n</code></pre></p>"},{"location":"es/getting-started/nostr-tools/#relay-web","title":"relay-web","text":"<p>Rel\u00e9 Basado en Web: - Implementaci\u00f3n ligera en Node.js - Interfaz web para administraci\u00f3n - Configuraci\u00f3n simplificada para desarrollo - Soporte para m\u00faltiples bases de datos</p> <p>Configuraci\u00f3n R\u00e1pida: <pre><code>npm install -g nostr-relay-web\nnostr-relay-web --port 8080 --db ./nostr.db\n</code></pre></p>"},{"location":"es/getting-started/nostr-tools/#herramientas-de-monitoreo","title":"Herramientas de Monitoreo","text":""},{"location":"es/getting-started/nostr-tools/#relay-monitor","title":"Relay Monitor","text":"<p>Capacidades de Monitoreo: - M\u00e9tricas de salud de rel\u00e9s en tiempo real - An\u00e1lisis de latencia y disponibilidad - Alertas autom\u00e1ticas para problemas - Dashboards de rendimiento hist\u00f3rico</p>"},{"location":"es/getting-started/nostr-tools/#network-explorer","title":"Network Explorer","text":"<p>An\u00e1lisis de Red: - Visualizaci\u00f3n de topolog\u00eda de red - An\u00e1lisis de flujo de eventos - M\u00e9tricas de conectividad entre rel\u00e9s - Herramientas de detecci\u00f3n de anomal\u00edas</p>"},{"location":"es/getting-started/nostr-tools/#entornos-de-desarrollo-integrados","title":"Entornos de Desarrollo Integrados","text":""},{"location":"es/getting-started/nostr-tools/#extensiones-de-vs-code","title":"Extensiones de VS Code","text":""},{"location":"es/getting-started/nostr-tools/#nostr-development-suite","title":"Nostr Development Suite","text":"<p>Caracter\u00edsticas de IDE: - Resaltado de sintaxis para eventos JSON - Plantillas de c\u00f3digo para tipos de eventos comunes - Integraci\u00f3n con herramientas de l\u00ednea de comandos - Depurador para aplicaciones Nostr</p> <p>Instalaci\u00f3n: <pre><code>code --install-extension nostr-dev.nostr-development-suite\n</code></pre></p>"},{"location":"es/getting-started/nostr-tools/#herramientas-de-testing","title":"Herramientas de Testing","text":""},{"location":"es/getting-started/nostr-tools/#nostr-test-framework","title":"nostr-test-framework","text":"<p>Capacidades de Testing: - Framework de testing automatizado para implementaciones - Casos de prueba para compatibilidad con NIPs - Testing de rendimiento y carga - Validaci\u00f3n de conformidad del protocolo</p> <p>Ejemplo de Test: <pre><code>import { NostrTestSuite } from 'nostr-test-framework'\n\nconst suite = new NostrTestSuite()\n\nsuite.test('event-creation', async () =&gt; {\n  const event = await createTestEvent()\n  suite.assertValidEvent(event)\n  suite.assertCorrectSignature(event)\n})\n\nawait suite.run()\n</code></pre></p>"},{"location":"es/getting-started/nostr-tools/#herramientas-de-despliegue-y-devops","title":"Herramientas de Despliegue y DevOps","text":""},{"location":"es/getting-started/nostr-tools/#docker-containers","title":"Docker Containers","text":""},{"location":"es/getting-started/nostr-tools/#configuracion-containerizada","title":"Configuraci\u00f3n Containerizada","text":"<pre><code># Dockerfile para rel\u00e9 Nostr\nFROM node:18-alpine\n\nWORKDIR /app\nCOPY package*.json ./\nRUN npm install\n\nCOPY . .\nEXPOSE 8080\n\nCMD [\"npm\", \"start\"]\n</code></pre>"},{"location":"es/getting-started/nostr-tools/#docker-compose-para-stack-completo","title":"Docker Compose para Stack Completo","text":"<pre><code>version: '3.8'\nservices:\n  relay:\n    build: .\n    ports:\n      - \"8080:8080\"\n    environment:\n      - DB_PATH=/data/nostr.db\n    volumes:\n      - ./data:/data\n\n  monitor:\n    image: nostr-monitor:latest\n    ports:\n      - \"3000:3000\"\n    depends_on:\n      - relay\n</code></pre>"},{"location":"es/getting-started/nostr-tools/#herramientas-de-cicd","title":"Herramientas de CI/CD","text":""},{"location":"es/getting-started/nostr-tools/#github-actions-para-nostr","title":"GitHub Actions para Nostr","text":"<pre><code>name: Nostr CI/CD\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n\n      - run: npm install\n      - run: npm test\n      - run: npm run nostr-compliance-test\n\n  deploy:\n    needs: test\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'\n    steps:\n      - name: Deploy to production\n        run: |\n          docker build -t nostr-app .\n          docker push registry/nostr-app\n</code></pre>"},{"location":"es/getting-started/nostr-tools/#mejores-practicas-de-desarrollo","title":"Mejores Pr\u00e1cticas de Desarrollo","text":""},{"location":"es/getting-started/nostr-tools/#configuracion-del-entorno","title":"Configuraci\u00f3n del Entorno","text":"<ul> <li>Usar variables de entorno para configuraci\u00f3n de rel\u00e9s</li> <li>Implementar logging estructurado para depuraci\u00f3n</li> <li>Configurar herramientas de monitoreo desde el inicio</li> <li>Mantener separaci\u00f3n entre entornos de desarrollo/producci\u00f3n</li> </ul>"},{"location":"es/getting-started/nostr-tools/#patrones-de-codigo","title":"Patrones de C\u00f3digo","text":"<ul> <li>Implementar manejo robusto de errores para comunicaci\u00f3n con rel\u00e9s</li> <li>Usar pools de conexi\u00f3n para mejor rendimiento</li> <li>Implementar reintentos exponenciales para fallos de red</li> <li>Validar eventos tanto en cliente como en servidor</li> </ul>"},{"location":"es/getting-started/nostr-tools/#seguridad","title":"Seguridad","text":"<ul> <li>Nunca hard-codear llaves privadas en el c\u00f3digo</li> <li>Usar almacenamiento seguro para material criptogr\u00e1fico</li> <li>Implementar rate limiting para prevenir spam</li> <li>Validar entrada del usuario antes de crear eventos</li> </ul>"},{"location":"es/getting-started/nostr-tools/#siguientes-pasos","title":"Siguientes Pasos","text":"<p>Dominar estas herramientas de desarrollo te prepara para construir aplicaciones Nostr robustas y escalables. La combinaci\u00f3n de librer\u00edas apropiadas, herramientas de CLI y infraestructura de monitoreo crea una base s\u00f3lida para el desarrollo del protocolo.</p>      Configuraci\u00f3n y Gesti\u00f3n de Rel\u00e9s \u2192"},{"location":"es/getting-started/nostr-tools/#verificacion-de-herramientas","title":"Verificaci\u00f3n de Herramientas","text":"<p>Evaluaci\u00f3n de Competencia en Herramientas</p> <ol> <li>\u00bfCu\u00e1les son las ventajas de usar NDK sobre nostr-tools para desarrollo de aplicaciones?</li> <li>\u00bfC\u00f3mo proporcionan las herramientas CLI como nak y nostril valor para desarrolladores?</li> <li>\u00bfQu\u00e9 consideraciones son importantes al configurar un rel\u00e9 de desarrollo local?</li> <li>\u00bfC\u00f3mo contribuyen las herramientas de monitoreo a la confiabilidad de aplicaciones Nostr?</li> </ol> An\u00e1lisis de Herramientas <ol> <li>NDK proporciona abstracci\u00f3n de alto nivel, gesti\u00f3n autom\u00e1tica de cach\u00e9, y balanceado de carga de rel\u00e9s, mientras que nostr-tools ofrece control de bajo nivel y implementaci\u00f3n directa del protocolo</li> <li>Las herramientas CLI habilitan automatizaci\u00f3n, scripts de testing, an\u00e1lisis de red, y flujos de trabajo de depuraci\u00f3n que ser\u00edan tediosos de implementar manualmente</li> <li>Configuraci\u00f3n local requiere consideraci\u00f3n de pol\u00edticas de almacenamiento, configuraci\u00f3n de red, requisitos de rendimiento, y herramientas de monitoreo</li> <li>Herramientas de monitoreo proporcionan visibilidad en tiempo real del rendimiento del sistema, detecci\u00f3n temprana de problemas, y m\u00e9tricas para optimizaci\u00f3n</li> </ol>"},{"location":"es/getting-started/relay-setup/","title":"Despliegue de Infraestructura de Rel\u00e9s","text":"<p>Objetivos de Aprendizaje</p> <p>Al final de esta lecci\u00f3n, entender\u00e1s:</p> <ul> <li>Arquitectura de rel\u00e9s y requisitos operacionales</li> <li>Procedimientos de instalaci\u00f3n y configuraci\u00f3n para despliegue en producci\u00f3n</li> <li>T\u00e9cnicas de endurecimiento de seguridad y optimizaci\u00f3n de rendimiento</li> <li>Estrategias de monitoreo, mantenimiento y escalado</li> </ul>"},{"location":"es/getting-started/relay-setup/#resumen-de-infraestructura-de-reles","title":"Resumen de Infraestructura de Rel\u00e9s","text":"<p>Los rel\u00e9s de Nostr sirven como la infraestructura fundamental para el protocolo descentralizado, proporcionando servicios de almacenamiento, recuperaci\u00f3n y distribuci\u00f3n de eventos. Operar un rel\u00e9 contribuye a la resistencia de la red mientras ofrece control sobre la persistencia de datos y pol\u00edticas de acceso.</p> <p>Entender el despliegue de rel\u00e9s permite la participaci\u00f3n en la infraestructura del protocolo y soporta casos de uso avanzados incluyendo redes privadas, curaci\u00f3n de contenido y servicios especializados.</p>"},{"location":"es/getting-started/relay-setup/#consideraciones-de-arquitectura-de-despliegue","title":"Consideraciones de Arquitectura de Despliegue","text":""},{"location":"es/getting-started/relay-setup/#requisitos-del-sistema","title":"Requisitos del Sistema","text":""},{"location":"es/getting-started/relay-setup/#especificaciones-minimas-de-produccion","title":"Especificaciones M\u00ednimas de Producci\u00f3n","text":"<ul> <li>CPU: 2+ n\u00facleos con soporte de conjunto de instrucciones moderno</li> <li>Memoria: 4GB RAM m\u00ednimo, 8GB+ recomendado para mayor rendimiento</li> <li>Almacenamiento: 50GB+ SSD con capacidad de expansi\u00f3n para crecimiento de base de datos de eventos</li> <li>Red: Conexi\u00f3n a internet confiable con asignaci\u00f3n adecuada de ancho de banda</li> <li>Sistema Operativo: Distribuci\u00f3n Linux con actualizaciones de seguridad actuales</li> </ul>"},{"location":"es/getting-started/relay-setup/#consideraciones-de-escalado","title":"Consideraciones de Escalado","text":"<ul> <li>El almacenamiento de base de datos crece aproximadamente 1-10GB por mes dependiendo de las pol\u00edticas del rel\u00e9</li> <li>Los requisitos de ancho de banda de red escalan con el conteo de usuarios y patrones de actividad</li> <li>La utilizaci\u00f3n de CPU se correlaciona con la validaci\u00f3n de eventos y operaciones criptogr\u00e1ficas</li> <li>El uso de memoria depende de la concurrencia de conexiones y estrategias de cach\u00e9</li> </ul>"},{"location":"es/getting-started/relay-setup/#opciones-de-arquitectura-de-software","title":"Opciones de Arquitectura de Software","text":""},{"location":"es/getting-started/relay-setup/#strfry-implementacion-en-c","title":"Strfry (Implementaci\u00f3n en C++)","text":"<p>Caracter\u00edsticas T\u00e9cnicas: - Implementaci\u00f3n de alto rendimiento optimizada para throughput y latencia - Backend de base de datos LMDB proporcionando cumplimiento ACID y resistencia a fallos - Huella de recursos m\u00ednima con gesti\u00f3n eficiente de memoria - Arquitectura de plugins para filtrado personalizado de eventos y aplicaci\u00f3n de pol\u00edticas</p> <p>Beneficios Operacionales: - Estabilidad probada bajo condiciones de alta carga - Herramientas administrativas integrales para gesti\u00f3n de base de datos - Desarrollo activo con actualizaciones regulares de seguridad y rendimiento - Documentaci\u00f3n extensa de despliegue y soporte comunitario</p>"},{"location":"es/getting-started/relay-setup/#nostream-typescriptnodejs","title":"Nostream (TypeScript/Node.js)","text":"<p>Caracter\u00edsticas T\u00e9cnicas: - Integraci\u00f3n del ecosistema JavaScript con amplio soporte de librer\u00edas - Opciones de base de datos PostgreSQL o SQLite para diferentes escalas de despliegue - Procesamiento de pagos integrado e integraci\u00f3n con Lightning Network - Arquitectura modular que soporta plugins personalizados y extensiones</p> <p>Beneficios Operacionales: - Entorno de desarrollo familiar para desarrolladores web - Endpoints API integrales para monitoreo y administraci\u00f3n - Caracter\u00edsticas avanzadas incluyendo anal\u00edticas y gesti\u00f3n de usuarios - Soporte de contenedorizaci\u00f3n Docker para despliegue simplificado</p>"},{"location":"es/getting-started/relay-setup/#despliegue-de-produccion-implementacion-strfry","title":"Despliegue de Producci\u00f3n: Implementaci\u00f3n Strfry","text":""},{"location":"es/getting-started/relay-setup/#preparacion-del-sistema","title":"Preparaci\u00f3n del Sistema","text":"<p>Aprovisionamiento del Servidor: <pre><code># Actualizaciones del sistema y endurecimiento de seguridad\napt update &amp;&amp; apt upgrade -y\napt install -y ufw fail2ban unattended-upgrades\n\n# Configuraci\u00f3n del firewall\nufw default deny incoming\nufw default allow outgoing\nufw allow ssh\nufw allow 80/tcp\nufw allow 443/tcp\nufw enable\n\n# Crear usuario dedicado del sistema\nuseradd -r -s /bin/false -d /opt/strfry strfry\nmkdir -p /opt/strfry\nchown strfry:strfry /opt/strfry\n</code></pre></p> <p>Instalaci\u00f3n de Dependencias: <pre><code># Dependencias de compilaci\u00f3n\napt install -y git build-essential libtool autotools-dev automake \\\npkg-config libssl-dev libevent-dev bsdmainutils python3 \\\nnginx certbot python3-certbot-nginx\n\n# Librer\u00edas de optimizaci\u00f3n de rendimiento\napt install -y libjemalloc2 libjemalloc-dev\n</code></pre></p>"},{"location":"es/getting-started/relay-setup/#compilacion-e-instalacion-de-strfry","title":"Compilaci\u00f3n e Instalaci\u00f3n de Strfry","text":"<p>Preparaci\u00f3n del C\u00f3digo Fuente: <pre><code>cd /opt/strfry\nsudo -u strfry git clone https://github.com/hoytech/strfry.git .\nsudo -u strfry git submodule update --init\n</code></pre></p> <p>Configuraci\u00f3n de Compilaci\u00f3n: <pre><code># Configurar entorno de compilaci\u00f3n\nsudo -u strfry make setup-golpe\n\n# Compilar con optimizaciones\nsudo -u strfry make -j$(nproc) CXXFLAGS=\"-O3 -march=native\"\n\n# Verificar integridad de compilaci\u00f3n\nsudo -u strfry ./strfry --version\n</code></pre></p>"},{"location":"es/getting-started/relay-setup/#gestion-de-configuracion","title":"Gesti\u00f3n de Configuraci\u00f3n","text":"<p>Archivo de Configuraci\u00f3n Principal (<code>/opt/strfry/strfry.conf</code>): <pre><code># Configuraci\u00f3n de base de datos\ndb = \"/opt/strfry/data/strfry-db/\"\n\ndbParams {\n    maxreaders = 512\n    mapsize = 1TB\n}\n\n# Configuraci\u00f3n de red\nrelay {\n    bind = \"127.0.0.1\"\n    port = 7777\n    nofiles = 65536\n\n    # Ajuste de rendimiento\n    maxWebsocketPayloadSize = 131072\n    autoPingSeconds = 30\n    enableTcpKeepalive = true\n    queryTimesliceBudgetMicroseconds = 5000\n\n    # Limitaci\u00f3n de velocidad\n    maxFilterLimit = 1000\n    maxSubsPerConnection = 50\n\n    # Metadatos del rel\u00e9 (NIP-11)\n    info {\n        name = \"Rel\u00e9 Nostr de Producci\u00f3n\"\n        description = \"Infraestructura de rel\u00e9 Nostr de alto rendimiento\"\n        pubkey = \"&lt;relay_operator_pubkey&gt;\"\n        contact = \"admin@relay.example.com\"\n        supported_nips = [1, 2, 9, 11, 12, 15, 16, 20, 22]\n        software = \"strfry\"\n        version = \"0.9.6\"\n    }\n}\n\n# Filtrado y validaci\u00f3n de eventos\nevents {\n    maxEventSize = 65536\n    rejectEventsNewerThanSeconds = 900\n    rejectEventsOlderThanSeconds = 31536000\n    rejectEphemeralEventsOlderThanSeconds = 60\n    maxNumTags = 1000\n    maxTagValSize = 1024\n}\n\n# Configuraci\u00f3n de pol\u00edtica de escritura\nwritePolicy {\n    plugin = \"/opt/strfry/write-policy.sh\"\n}\n</code></pre></p> <p>Implementaci\u00f3n de Pol\u00edtica de Escritura (<code>/opt/strfry/write-policy.sh</code>): <pre><code>#!/bin/bash\n\n# Leer evento desde stdin\nevent=$(cat)\n\n# Extraer propiedades del evento para an\u00e1lisis\nkind=$(echo \"$event\" | jq -r '.kind')\npubkey=$(echo \"$event\" | jq -r '.pubkey')\ncontent=$(echo \"$event\" | jq -r '.content')\n\n# Filtrado b\u00e1sico de contenido\nif echo \"$content\" | grep -qi \"spam\\|scam\\|malware\"; then\n    echo '{\"action\": \"reject\", \"msg\": \"Violaci\u00f3n de pol\u00edtica de contenido\"}'\n    exit 0\nfi\n\n# Limitaci\u00f3n de velocidad por pubkey (implementar con almacenamiento externo)\n# rate_limit_check \"$pubkey\" || {\n#     echo '{\"action\": \"reject\", \"msg\": \"L\u00edmite de velocidad excedido\"}'\n#     exit 0\n# }\n\n# Aceptar eventos que cumplen\necho '{\"action\": \"accept\"}'\n</code></pre></p>"},{"location":"es/getting-started/relay-setup/#configuracion-de-proxy-inverso","title":"Configuraci\u00f3n de Proxy Inverso","text":"<p>Configuraci\u00f3n de Nginx (<code>/etc/nginx/sites-available/nostr-relay</code>): <pre><code>upstream strfry_backend {\n    server 127.0.0.1:7777;\n    keepalive 32;\n}\n\nserver {\n    listen 80;\n    server_name relay.example.com;\n\n    # Redirigir a HTTPS\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name relay.example.com;\n\n    # Configuraci\u00f3n SSL\n    ssl_certificate /etc/letsencrypt/live/relay.example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/relay.example.com/privkey.pem;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n\n    # Optimizaci\u00f3n de rendimiento\n    keepalive_timeout 65;\n    keepalive_requests 1000;\n\n    # Configuraci\u00f3n de proxy WebSocket\n    location / {\n        proxy_pass http://strfry_backend;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n\n        # Configuraci\u00f3n de timeout\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 60s;\n\n        # Configuraci\u00f3n de buffer\n        proxy_buffering off;\n        proxy_request_buffering off;\n    }\n\n    # Informaci\u00f3n del rel\u00e9 NIP-11\n    location = / {\n        add_header Content-Type application/nostr+json;\n        add_header Access-Control-Allow-Origin *;\n        add_header Access-Control-Allow-Methods \"GET, POST, OPTIONS\";\n        add_header Access-Control-Allow-Headers \"Content-Type\";\n\n        if ($http_accept ~* \"application/nostr\\+json\") {\n            proxy_pass http://strfry_backend;\n        }\n\n        # Respuesta por defecto para navegadores web\n        return 200 '{\"name\":\"Rel\u00e9 Nostr de Producci\u00f3n\",\"description\":\"Infraestructura de rel\u00e9 de alto rendimiento\",\"supported_nips\":[1,2,9,11,12,15,16,20,22],\"software\":\"strfry\",\"version\":\"0.9.6\"}';\n    }\n}\n</code></pre></p>"},{"location":"es/getting-started/relay-setup/#gestion-de-certificados-ssl","title":"Gesti\u00f3n de Certificados SSL","text":"<p>Configuraci\u00f3n de Let's Encrypt: <pre><code># Generaci\u00f3n inicial de certificados\ncertbot --nginx -d relay.example.com --email admin@example.com --agree-tos\n\n# Configuraci\u00f3n de renovaci\u00f3n autom\u00e1tica\ncat &gt; /etc/cron.d/certbot &lt;&lt; EOF\n0 12 * * * root certbot renew --quiet --post-hook \"systemctl reload nginx\"\nEOF\n</code></pre></p>"},{"location":"es/getting-started/relay-setup/#configuracion-de-servicio-del-sistema","title":"Configuraci\u00f3n de Servicio del Sistema","text":"<p>Unidad de Servicio Systemd (<code>/etc/systemd/system/strfry.service</code>): <pre><code>[Unit]\nDescription=Rel\u00e9 Nostr Strfry\nAfter=network.target\nWants=network.target\n\n[Service]\nType=simple\nUser=strfry\nGroup=strfry\nWorkingDirectory=/opt/strfry\nExecStart=/opt/strfry/strfry relay\nRestart=always\nRestartSec=5\nStandardOutput=journal\nStandardError=journal\n\n# Endurecimiento de seguridad\nNoNewPrivileges=true\nPrivateTmp=true\nProtectSystem=strict\nProtectHome=true\nReadWritePaths=/opt/strfry/data\n\n# L\u00edmites de recursos\nLimitNOFILE=65536\nLimitNPROC=4096\n\n[Install]\nWantedBy=multi-user.target\n</code></pre></p> <p>Gesti\u00f3n de Servicios: <pre><code># Habilitar e iniciar servicio\nsystemctl daemon-reload\nsystemctl enable strfry\nsystemctl start strfry\n\n# Verificar operaci\u00f3n\nsystemctl status strfry\njournalctl -u strfry -f\n</code></pre></p>"},{"location":"es/getting-started/relay-setup/#monitoreo-y-mantenimiento","title":"Monitoreo y Mantenimiento","text":""},{"location":"es/getting-started/relay-setup/#monitoreo-de-rendimiento","title":"Monitoreo de Rendimiento","text":"<p>Recolecci\u00f3n de M\u00e9tricas del Sistema: <pre><code># Instalar herramientas de monitoreo\napt install -y htop iotop nethogs\n\n# Monitoreo de tama\u00f1o de base de datos\ndu -sh /opt/strfry/data/strfry-db/\n\n# Monitoreo de conexiones\nss -tuln | grep :7777\nnetstat -an | grep :443 | wc -l\n</code></pre></p> <p>M\u00e9tricas de Aplicaci\u00f3n: <pre><code># Estad\u00edsticas del rel\u00e9\n/opt/strfry/strfry export --count\n\n# An\u00e1lisis de eventos\n/opt/strfry/strfry export --since=1hour | jq '.kind' | sort | uniq -c\n\n# Pruebas de rendimiento\necho '[\"REQ\",\"test\",{\"kinds\":[1],\"limit\":10}]' | websocat wss://relay.example.com\n</code></pre></p>"},{"location":"es/getting-started/relay-setup/#mantenimiento-de-base-de-datos","title":"Mantenimiento de Base de Datos","text":"<p>Operaciones de Mantenimiento Rutinario: <pre><code># Compactaci\u00f3n de base de datos\nsystemctl stop strfry\nsudo -u strfry /opt/strfry/strfry compact\nsystemctl start strfry\n\n# Procedimientos de respaldo\nsudo -u strfry /opt/strfry/strfry export &gt; backup-$(date +%Y%m%d).jsonl\ntar -czf backup-$(date +%Y%m%d).tar.gz /opt/strfry/data/\n\n# Verificaci\u00f3n de base de datos\nsudo -u strfry /opt/strfry/strfry verify\n</code></pre></p>"},{"location":"es/getting-started/relay-setup/#endurecimiento-de-seguridad","title":"Endurecimiento de Seguridad","text":"<p>Implementaci\u00f3n de Control de Acceso: <pre><code># Configuraci\u00f3n de Fail2ban para abuso de WebSocket\ncat &gt; /etc/fail2ban/jail.d/strfry.conf &lt;&lt; EOF\n[strfry]\nenabled = true\nport = 443\nfilter = strfry\nlogpath = /var/log/nginx/access.log\nmaxretry = 10\nbantime = 3600\nfindtime = 600\nEOF\n\n# Limitaci\u00f3n de velocidad a nivel nginx\n# Agregar a configuraci\u00f3n nginx:\n# limit_req_zone $binary_remote_addr zone=websocket:10m rate=10r/s;\n# limit_req zone=websocket burst=20 nodelay;\n</code></pre></p> <p>Seguridad de Red: <pre><code># Configuraci\u00f3n de protecci\u00f3n DDoS\necho 'net.core.rmem_default = 262144' &gt;&gt; /etc/sysctl.conf\necho 'net.core.rmem_max = 16777216' &gt;&gt; /etc/sysctl.conf\necho 'net.core.wmem_default = 262144' &gt;&gt; /etc/sysctl.conf\necho 'net.core.wmem_max = 16777216' &gt;&gt; /etc/sysctl.conf\nsysctl -p\n</code></pre></p>"},{"location":"es/getting-started/relay-setup/#ejercicio-practico-laboratorio-de-despliegue-de-rele","title":"Ejercicio Pr\u00e1ctico: Laboratorio de Despliegue de Rel\u00e9","text":"<p>Implementaci\u00f3n de Rel\u00e9 de Producci\u00f3n</p> <p>Objetivo: Desplegar y configurar un rel\u00e9 Nostr listo para producci\u00f3n</p> <p>Fase 1: Configuraci\u00f3n de Infraestructura 1. Aprovisionar VPS con especificaciones apropiadas 2. Completar endurecimiento de seguridad y preparaci\u00f3n del sistema 3. Instalar y configurar todas las dependencias requeridas 4. Implementar infraestructura de monitoreo y logging</p> <p>Fase 2: Configuraci\u00f3n del Rel\u00e9 1. Compilar e instalar Strfry con optimizaciones 2. Configurar pol\u00edticas del rel\u00e9 y par\u00e1metros operacionales 3. Implementar proxy inverso con terminaci\u00f3n SSL 4. Crear servicio systemd para gesti\u00f3n de procesos</p> <p>Fase 3: Pruebas y Validaci\u00f3n 1. Verificar conectividad WebSocket y cumplimiento del protocolo 2. Probar funcionalidad de publicaci\u00f3n y recuperaci\u00f3n de eventos 3. Validar configuraci\u00f3n y renovaci\u00f3n de certificados SSL 4. Realizar pruebas de carga y optimizaci\u00f3n de rendimiento</p> <p>Fase 4: Procedimientos Operacionales 1. Implementar procedimientos de respaldo y recuperaci\u00f3n 2. Configurar sistemas de monitoreo y alertas 3. Documentar procedimientos de mantenimiento y soluci\u00f3n de problemas 4. Establecer procesos de actualizaci\u00f3n de seguridad y gesti\u00f3n de parches</p>"},{"location":"es/getting-started/relay-setup/#escalado-y-optimizacion","title":"Escalado y Optimizaci\u00f3n","text":""},{"location":"es/getting-started/relay-setup/#optimizacion-de-rendimiento","title":"Optimizaci\u00f3n de Rendimiento","text":"<p>Ajuste de Base de Datos: <pre><code># Configuraci\u00f3n avanzada de LMDB\ndbParams {\n    maxreaders = 1024\n    mapsize = 5TB\n\n    # Optimizaci\u00f3n de mapeo de memoria\n    mdb_env_set_mapsize = 5497558138880  # 5TB en bytes\n    mdb_env_set_maxdbs = 16\n}\n</code></pre></p> <p>Optimizaci\u00f3n de Conexiones: <pre><code>relay {\n    # Incrementar l\u00edmites de conexi\u00f3n\n    nofiles = 131072\n    maxSubsPerConnection = 100\n\n    # Optimizar rendimiento de consultas\n    queryTimesliceBudgetMicroseconds = 10000\n    maxFilterLimit = 2000\n\n    # Ajuste de red\n    autoPingSeconds = 25\n    enableTcpKeepalive = true\n}\n</code></pre></p>"},{"location":"es/getting-started/relay-setup/#estrategias-de-escalado-horizontal","title":"Estrategias de Escalado Horizontal","text":"<p>Configuraci\u00f3n de Balanceamiento de Carga: <pre><code>upstream strfry_cluster {\n    least_conn;\n    server 10.0.1.10:7777 weight=3;\n    server 10.0.1.11:7777 weight=3;\n    server 10.0.1.12:7777 weight=2;\n\n    keepalive 64;\n}\n</code></pre></p> <p>Replicaci\u00f3n de Base de Datos: <pre><code># Configuraci\u00f3n de replicaci\u00f3n maestro-esclavo\n/opt/strfry/strfry sync --source wss://master-relay.example.com \\\n                        --target /opt/strfry/data/strfry-db/\n</code></pre></p>"},{"location":"es/getting-started/relay-setup/#solucion-de-problemas-y-diagnosticos","title":"Soluci\u00f3n de Problemas y Diagn\u00f3sticos","text":""},{"location":"es/getting-started/relay-setup/#problemas-comunes-y-resolucion","title":"Problemas Comunes y Resoluci\u00f3n","text":"<p>Problemas de Conexi\u00f3n: <pre><code># Pruebas de conectividad WebSocket\nwscat -c wss://relay.example.com\n\n# Validaci\u00f3n de certificado SSL\nopenssl s_client -connect relay.example.com:443 -servername relay.example.com\n\n# An\u00e1lisis de conectividad de red\ntcptraceroute relay.example.com 443\n</code></pre></p> <p>Problemas de Rendimiento: <pre><code># An\u00e1lisis de utilizaci\u00f3n de recursos\nhtop\niotop -a\niostat -x 1\n\n# Monitoreo de rendimiento de base de datos\n/opt/strfry/strfry stats\nlmdb_stat /opt/strfry/data/strfry-db/\n</code></pre></p> <p>Problemas de Procesamiento de Eventos: <pre><code># Pruebas de validaci\u00f3n de eventos\necho '{\"id\":\"test\",\"pubkey\":\"test\",\"created_at\":1234567890,\"kind\":1,\"tags\":[],\"content\":\"test\",\"sig\":\"test\"}' | /opt/strfry/strfry import\n\n# Depuraci\u00f3n de pol\u00edtica de escritura\necho '{\"kind\":1,\"content\":\"contenido de prueba\"}' | /opt/strfry/write-policy.sh\n</code></pre></p>"},{"location":"es/getting-started/relay-setup/#configuracion-avanzada","title":"Configuraci\u00f3n Avanzada","text":""},{"location":"es/getting-started/relay-setup/#filtrado-personalizado-de-eventos","title":"Filtrado Personalizado de Eventos","text":"<p>Pol\u00edtica de Escritura Avanzada: <pre><code>#!/bin/bash\n\nevent=$(cat)\n\n# Extraer metadatos del evento\nkind=$(echo \"$event\" | jq -r '.kind')\npubkey=$(echo \"$event\" | jq -r '.pubkey')\ncreated_at=$(echo \"$event\" | jq -r '.created_at')\ncontent=$(echo \"$event\" | jq -r '.content')\n\n# Validaci\u00f3n de timestamp\ncurrent_time=$(date +%s)\ntime_diff=$((current_time - created_at))\n\nif [ $time_diff -gt 300 ] || [ $time_diff -lt -60 ]; then\n    echo '{\"action\": \"reject\", \"msg\": \"Timestamp inv\u00e1lido\"}'\n    exit 0\nfi\n\n# Validaci\u00f3n de longitud de contenido\ncontent_length=${#content}\nif [ $content_length -gt 10000 ]; then\n    echo '{\"action\": \"reject\", \"msg\": \"Contenido demasiado largo\"}'\n    exit 0\nfi\n\n# Implementaci\u00f3n de lista blanca/negra\nif grep -q \"$pubkey\" /opt/strfry/blacklist.txt; then\n    echo '{\"action\": \"reject\", \"msg\": \"Usuario bloqueado\"}'\n    exit 0\nfi\n\necho '{\"action\": \"accept\"}'\n</code></pre></p>"},{"location":"es/getting-started/relay-setup/#analiticas-y-reportes","title":"Anal\u00edticas y Reportes","text":"<p>Implementaci\u00f3n de Anal\u00edticas de Eventos: <pre><code># Estad\u00edsticas diarias de eventos\n/opt/strfry/strfry export --since=1day | \\\njq -r '[.kind, .pubkey[0:8]] | @csv' | \\\nsort | uniq -c | sort -nr &gt; daily-stats.txt\n\n# An\u00e1lisis de actividad de usuarios\n/opt/strfry/strfry export --since=1week | \\\njq -r '.pubkey' | sort | uniq -c | sort -nr | head -20\n</code></pre></p>"},{"location":"es/getting-started/relay-setup/#proximos-pasos","title":"Pr\u00f3ximos Pasos","text":"<p>El despliegue exitoso de rel\u00e9s proporciona experiencia pr\u00e1ctica con la infraestructura de Nostr y te prepara para el desarrollo avanzado de protocolos. Entender los requisitos operacionales permite una contribuci\u00f3n efectiva a la infraestructura de red y el desarrollo de servicios especializados.</p>      Conceptos Avanzados del Protocolo \u2192"},{"location":"es/getting-started/relay-setup/#evaluacion-de-maestria-en-infraestructura","title":"Evaluaci\u00f3n de Maestr\u00eda en Infraestructura","text":"<p>Competencia en Operaciones de Rel\u00e9</p> <ol> <li>\u00bfCu\u00e1les son las consideraciones cr\u00edticas para la configuraci\u00f3n y optimizaci\u00f3n de la base de datos del rel\u00e9?</li> <li>\u00bfC\u00f3mo permiten las pol\u00edticas de escritura la moderaci\u00f3n de contenido mientras mantienen los principios de descentralizaci\u00f3n?</li> <li>\u00bfQu\u00e9 medidas de seguridad son esenciales para el despliegue de rel\u00e9s en producci\u00f3n?</li> <li>\u00bfC\u00f3mo pueden los operadores de rel\u00e9s equilibrar rendimiento, escalabilidad y costos de recursos?</li> </ol> An\u00e1lisis de Infraestructura <ol> <li>La configuraci\u00f3n de base de datos debe equilibrar eficiencia de almacenamiento, rendimiento de consultas y patrones de acceso concurrente mientras asegura integridad de datos y resistencia a fallos</li> <li>Las pol\u00edticas de escritura proporcionan filtrado program\u00e1tico de contenido a nivel de rel\u00e9, permitiendo a los operadores implementar reglas personalizadas mientras los usuarios conservan la capacidad de elegir rel\u00e9s que se alineen con sus preferencias</li> <li>Las medidas de seguridad incluyen endurecimiento del sistema, protecci\u00f3n de red, cifrado SSL/TLS, control de acceso, monitoreo y actualizaciones regulares de seguridad para proteger contra varios vectores de ataque</li> <li>La optimizaci\u00f3n de rendimiento requiere ajuste cuidadoso de par\u00e1metros de base de datos, l\u00edmites de conexi\u00f3n, estrategias de cach\u00e9 y recursos de hardware mientras implementa estrategias de escalado rentables</li> </ol>"},{"location":"es/getting-started/wallet-setup/","title":"Integraci\u00f3n de Billetera Lightning","text":"<p>Objetivos de Aprendizaje</p> <p>Al final de esta lecci\u00f3n, entender\u00e1s:</p> <ul> <li>El papel de Lightning Network en el ecosistema Nostr</li> <li>Diferentes arquitecturas de billeteras y sus implicaciones de seguridad</li> <li>C\u00f3mo configurar la integraci\u00f3n Lightning con clientes Nostr</li> <li>Mejores pr\u00e1cticas para gesti\u00f3n de llaves y seguridad operacional</li> </ul>"},{"location":"es/getting-started/wallet-setup/#integracion-de-lightning-network","title":"Integraci\u00f3n de Lightning Network","text":"<p>Lightning Network proporciona pagos Bitcoin instant\u00e1neos y de bajo costo que habilitan nuevos modelos econ\u00f3micos dentro del protocolo Nostr. Zaps - micropagos impulsados por Lightning - crean transferencia de valor directa entre usuarios, facilitando monetizaci\u00f3n de contenido e incentivos de red.</p> <p>Esta integraci\u00f3n transforma la interacci\u00f3n social de m\u00e9tricas basadas en engagement a transacciones basadas en valor, permitiendo a los creadores recibir compensaci\u00f3n inmediata por sus contribuciones.</p>"},{"location":"es/getting-started/wallet-setup/#tipos-de-arquitectura-de-billeteras","title":"Tipos de Arquitectura de Billeteras","text":""},{"location":"es/getting-started/wallet-setup/#billeteras-custodiales","title":"Billeteras Custodiales","text":"<p>Caracter\u00edsticas T\u00e9cnicas: - Llaves privadas gestionadas por proveedor de servicios - Experiencia de usuario simplificada con complejidad t\u00e9cnica reducida - Disponibilidad inmediata sin requisitos de gesti\u00f3n de canales - Riesgo de contraparte centralizada</p> <p>Consideraciones de Implementaci\u00f3n: - Menor barrera de entrada para usuarios nuevos - Requisitos de cumplimiento regulatorio para proveedores de servicios - Potencial para restricciones de cuenta o terminaci\u00f3n de servicio - Procesos simplificados de respaldo y recuperaci\u00f3n</p>"},{"location":"es/getting-started/wallet-setup/#billeteras-no-custodiales","title":"Billeteras No Custodiales","text":"<p>Caracter\u00edsticas T\u00e9cnicas: - Gesti\u00f3n de llaves privadas controlada por el usuario - Operaci\u00f3n directa de nodo Lightning Network o conexi\u00f3n a nodo confiable - Requisitos de gesti\u00f3n de liquidez de canales - Privacidad y soberan\u00eda mejoradas</p> <p>Consideraciones de Implementaci\u00f3n: - Mayor complejidad t\u00e9cnica y responsabilidad del usuario - Procedimientos de respaldo y recuperaci\u00f3n cr\u00edticos para seguridad de fondos - Consideraciones de gesti\u00f3n de canales y liquidez - Mayor resistencia a control externo o censura</p>"},{"location":"es/getting-started/wallet-setup/#matriz-de-seleccion-de-billeteras","title":"Matriz de Selecci\u00f3n de Billeteras","text":"Criterio Soluciones Custodiales Soluciones No Custodiales Modelo de Seguridad Basado en confianza Auto-soberano Gesti\u00f3n de Llaves Proveedor de servicios Responsabilidad del usuario Complejidad T\u00e9cnica Baja Media a Alta Nivel de Privacidad Limitado Mejorado Disponibilidad Alta Variable Riesgo Regulatorio Mayor Menor"},{"location":"es/getting-started/wallet-setup/#implementaciones-recomendadas","title":"Implementaciones Recomendadas","text":""},{"location":"es/getting-started/wallet-setup/#integracion-basada-en-web-alby","title":"Integraci\u00f3n Basada en Web: Alby","text":"<p>Especificaciones T\u00e9cnicas: - Extensi\u00f3n de navegador con soporte de protocolo WebLN - Cumplimiento NIP-07 para firma de eventos Nostr - Conectividad incorporada de nodo Lightning - Autorizaci\u00f3n estilo OAuth para aplicaciones web</p> <p>Proceso de Integraci\u00f3n: 1. Instalar extensi\u00f3n de navegador desde canales de distribuci\u00f3n oficiales 2. Completar creaci\u00f3n de cuenta y documentaci\u00f3n de frase de respaldo 3. Configurar conectividad de nodo Lightning (custodial o auto-hospedado) 4. Habilitar permisos NIP-07 para aplicaciones Nostr</p>"},{"location":"es/getting-started/wallet-setup/#soluciones-moviles","title":"Soluciones M\u00f3viles","text":""},{"location":"es/getting-started/wallet-setup/#wallet-of-satoshi-custodial","title":"Wallet of Satoshi (Custodial)","text":"<p>Caracter\u00edsticas T\u00e9cnicas: - Abstracci\u00f3n simplificada de Lightning Network - Procesamiento instant\u00e1neo de pagos - Soporte de direcci\u00f3n Lightning (LNURL-pay) - Requisitos m\u00ednimos de configuraci\u00f3n</p>"},{"location":"es/getting-started/wallet-setup/#phoenix-no-custodial","title":"Phoenix (No Custodial)","text":"<p>Caracter\u00edsticas T\u00e9cnicas: - Gesti\u00f3n autom\u00e1tica de canales - Infraestructura de nodo ACINQ - Mecanismos de respaldo en cadena - Opciones avanzadas de gesti\u00f3n de tarifas</p>"},{"location":"es/getting-started/wallet-setup/#breez-no-custodial","title":"Breez (No Custodial)","text":"<p>Caracter\u00edsticas T\u00e9cnicas: - Proveedor de Servicios Lightning (LSP) incorporado - Opci\u00f3n de nodo auto-hospedado - Integraci\u00f3n de podcast con pagos de streaming - Funcionalidad de punto de venta</p>"},{"location":"es/getting-started/wallet-setup/#configuracion-e-integracion","title":"Configuraci\u00f3n e Integraci\u00f3n","text":""},{"location":"es/getting-started/wallet-setup/#configuracion-de-direccion-lightning","title":"Configuraci\u00f3n de Direcci\u00f3n Lightning","text":"<p>Las direcciones Lightning proporcionan identificadores de pago legibles por humanos siguiendo el formato <code>usuario@dominio.com</code>. Esta abstracci\u00f3n simplifica el proceso de pago mientras mantiene compatibilidad con Lightning Network.</p> <p>Pasos de Implementaci\u00f3n: 1. Obtener direcci\u00f3n Lightning del proveedor de billetera 2. Configurar direcci\u00f3n en metadatos del perfil del cliente Nostr 3. Verificar funcionalidad de pago a trav\u00e9s de transacciones de prueba 4. Monitorear notificaciones y confirmaciones de pago</p>"},{"location":"es/getting-started/wallet-setup/#configuracion-del-cliente-nostr","title":"Configuraci\u00f3n del Cliente Nostr","text":"<p>Configuraci\u00f3n de Metadatos del Perfil: <pre><code>{\n  \"kind\": 0,\n  \"content\": {\n    \"name\": \"Nombre de Usuario\",\n    \"about\": \"Descripci\u00f3n del usuario\",\n    \"picture\": \"https://example.com/avatar.jpg\",\n    \"lud16\": \"usuario@dominio.com\"\n  }\n}\n</code></pre></p> <p>El campo <code>lud16</code> contiene la direcci\u00f3n Lightning, habilitando funcionalidad de zap autom\u00e1tica en clientes Nostr compatibles.</p>"},{"location":"es/getting-started/wallet-setup/#ejercicio-practico-configuracion-y-prueba-de-billetera","title":"Ejercicio Pr\u00e1ctico: Configuraci\u00f3n y Prueba de Billetera","text":"<p>Laboratorio de Integraci\u00f3n Lightning</p> <p>Objetivo: Configurar y probar integraci\u00f3n de billetera Lightning con protocolo Nostr</p> <p>Fase 1: Selecci\u00f3n y Configuraci\u00f3n de Billetera 1. Evaluar opciones de billetera basadas en requisitos t\u00e9cnicos y tolerancia al riesgo 2. Completar instalaci\u00f3n de billetera y configuraci\u00f3n inicial 3. Documentar procedimientos de respaldo y medidas de seguridad 4. Financiar billetera con cantidad m\u00ednima para prop\u00f3sitos de prueba</p> <p>Fase 2: Integraci\u00f3n Nostr 1. Configurar direcci\u00f3n Lightning en perfil del cliente Nostr 2. Verificar propagaci\u00f3n del perfil a trav\u00e9s de la red de rel\u00e9s 3. Probar funcionalidad de zap con cantidades peque\u00f1as 4. Monitorear confirmaciones de transacciones y notificaciones</p> <p>Fase 3: Validaci\u00f3n Operacional 1. Enviar zaps de prueba a otros usuarios o a ti mismo 2. Recibir zaps y verificar sistemas de notificaci\u00f3n 3. Analizar tarifas de transacci\u00f3n y tiempos de procesamiento 4. Documentar cualquier problema de conectividad o confiabilidad</p>"},{"location":"es/getting-started/wallet-setup/#implementacion-de-seguridad","title":"Implementaci\u00f3n de Seguridad","text":""},{"location":"es/getting-started/wallet-setup/#mejores-practicas-de-gestion-de-llaves","title":"Mejores Pr\u00e1cticas de Gesti\u00f3n de Llaves","text":"<p>Procedimientos de Respaldo: - Documentar frases semilla usando almacenamiento f\u00edsico, fuera de l\u00ednea - Verificar integridad del respaldo a trav\u00e9s de pruebas de recuperaci\u00f3n - Implementar almacenamiento multi-ubicaci\u00f3n con seguridad apropiada - Establecer planificaci\u00f3n clara de sucesi\u00f3n para recuperaci\u00f3n de fondos</p> <p>Seguridad Operacional: - Usar dispositivos dedicados para gesti\u00f3n de fondos significativos - Implementar mecanismos de autenticaci\u00f3n fuertes - Auditor\u00edas regulares de seguridad de aplicaciones conectadas - Monitorear acceso no autorizado o actividad inusual</p>"},{"location":"es/getting-started/wallet-setup/#estrategias-de-gestion-de-fondos","title":"Estrategias de Gesti\u00f3n de Fondos","text":"<p>Mitigaci\u00f3n de Riesgos: - Mantener balances m\u00ednimos en billeteras calientes para operaciones diarias - Usar almacenamiento fr\u00edo para seguridad de fondos a largo plazo - Implementar l\u00edmites de gasto y procesos de aprobaci\u00f3n - Movimiento regular de fondos para reducir ventanas de exposici\u00f3n</p>"},{"location":"es/getting-started/wallet-setup/#arquitectura-de-flujo-de-pagos","title":"Arquitectura de Flujo de Pagos","text":"<pre><code>sequenceDiagram\n    participant User as Usuario Nostr\n    participant Client as Cliente Nostr\n    participant Relay as Rel\u00e9 Nostr\n    participant Wallet as Billetera Lightning\n    participant LN as Lightning Network\n\n    User-&gt;&gt;Client: Iniciar Zap\n    Client-&gt;&gt;Wallet: Solicitar Factura\n    Wallet-&gt;&gt;LN: Generar Solicitud de Pago\n    LN--&gt;&gt;Wallet: Devolver Factura\n    Wallet--&gt;&gt;Client: Proporcionar Factura\n    Client-&gt;&gt;User: Mostrar Detalles de Pago\n    User-&gt;&gt;Wallet: Autorizar Pago\n    Wallet-&gt;&gt;LN: Ejecutar Pago\n    LN--&gt;&gt;Wallet: Confirmaci\u00f3n de Pago\n    Wallet--&gt;&gt;Client: Notificar \u00c9xito\n    Client-&gt;&gt;Relay: Publicar Evento Zap\n    Relay--&gt;&gt;Client: Confirmar Almacenamiento de Evento</code></pre>"},{"location":"es/getting-started/wallet-setup/#analisis-de-modelo-economico","title":"An\u00e1lisis de Modelo Econ\u00f3mico","text":""},{"location":"es/getting-started/wallet-setup/#mecanismos-de-transferencia-de-valor","title":"Mecanismos de Transferencia de Valor","text":"<p>Econom\u00eda de Micropagos: - Costos de transacci\u00f3n aproxim\u00e1ndose a cero habilitan transferencia de micro-valor - Compensaci\u00f3n directa al creador sin intermediarios de plataforma - Valoraci\u00f3n de contenido impulsada por el mercado a trav\u00e9s de cantidades de pago - Efectos de red de m\u00e9tricas de engagement basadas en valor</p> <p>Incentivos de Red: - Contenido de calidad recibe compensaci\u00f3n proporcional - Reducci\u00f3n de spam a trav\u00e9s de requisitos de pago - Compensaci\u00f3n de operadores de rel\u00e9s a trav\u00e9s de tarifas de uso - Incentivos de desarrolladores a trav\u00e9s de monetizaci\u00f3n de aplicaciones</p>"},{"location":"es/getting-started/wallet-setup/#solucion-de-problemas-y-diagnosticos","title":"Soluci\u00f3n de Problemas y Diagn\u00f3sticos","text":""},{"location":"es/getting-started/wallet-setup/#problemas-comunes-de-integracion","title":"Problemas Comunes de Integraci\u00f3n","text":"<p>Problemas de Conexi\u00f3n: - Verificar permisos y autorizaciones de aplicaci\u00f3n de billetera - Revisar conectividad de Lightning Network y estado de canales - Confirmar configuraci\u00f3n y propagaci\u00f3n de direcci\u00f3n Lightning - Probar con diferentes clientes Nostr para verificaci\u00f3n de compatibilidad</p> <p>Fallas de Pago: - Analizar restricciones de enrutamiento y liquidez de Lightning Network - Verificar validez y funcionalidad de direcci\u00f3n Lightning del destinatario - Revisar l\u00edmites de cantidad de pago y suficiencia de balance de billetera - Monitorear congesti\u00f3n temporal de red o problemas de conectividad</p> <p>Optimizaci\u00f3n de Rendimiento: - Configurar selecciones \u00f3ptimas de rel\u00e9s para notificaciones de pago - Implementar agrupaci\u00f3n de conexiones para mejor capacidad de respuesta - Cachear facturas Lightning para reducir latencia de generaci\u00f3n - Monitorear tasas de \u00e9xito de pagos y patrones de falla</p>"},{"location":"es/getting-started/wallet-setup/#configuracion-avanzada","title":"Configuraci\u00f3n Avanzada","text":""},{"location":"es/getting-started/wallet-setup/#infraestructura-lightning-personalizada","title":"Infraestructura Lightning Personalizada","text":"<p>Soluciones Auto-Hospedadas: - Despliegue y gesti\u00f3n de nodo Lightning - Estrategias de gesti\u00f3n de liquidez de canales - Implementaci\u00f3n de sistemas de respaldo y monitoreo - Integraci\u00f3n con infraestructura y sistemas de seguridad existentes</p> <p>Consideraciones Empresariales: - Configuraciones de billeteras multi-firma - Procesamiento y reconciliaci\u00f3n automatizada de pagos - Requisitos de cumplimiento y pista de auditor\u00eda - Planificaci\u00f3n de escalabilidad para operaciones de alto volumen</p>"},{"location":"es/getting-started/wallet-setup/#siguientes-pasos","title":"Siguientes Pasos","text":"<p>La integraci\u00f3n de billetera Lightning habilita participaci\u00f3n en la econom\u00eda basada en valor de Nostr. Entender la arquitectura t\u00e9cnica y consideraciones de seguridad te prepara para desarrollo e implementaci\u00f3n avanzada de protocolos.</p>      Herramientas de Desarrollo e Infraestructura \u2192"},{"location":"es/getting-started/wallet-setup/#validacion-tecnica","title":"Validaci\u00f3n T\u00e9cnica","text":"<p>Evaluaci\u00f3n de Comprensi\u00f3n de Integraci\u00f3n</p> <ol> <li>\u00bfCu\u00e1les son las principales compensaciones entre arquitecturas de billeteras custodiales y no custodiales?</li> <li>\u00bfC\u00f3mo simplifica el sistema de direcciones Lightning los procesos de pago?</li> <li>\u00bfQu\u00e9 consideraciones de seguridad son cr\u00edticas para operaciones de billeteras Lightning?</li> <li>\u00bfC\u00f3mo cambian los zaps los incentivos econ\u00f3micos en las redes sociales?</li> </ol> An\u00e1lisis T\u00e9cnico <ol> <li>Las billeteras custodiales intercambian seguridad y soberan\u00eda por simplicidad, mientras que las billeteras no custodiales proporcionan control completo al costo de mayor complejidad y responsabilidad</li> <li>Las direcciones Lightning abstraen solicitudes de pago complejas en identificadores legibles por humanos, habilitando integraci\u00f3n sin fricciones con protocolos de comunicaci\u00f3n existentes</li> <li>Gesti\u00f3n de llaves, procedimientos de respaldo y seguridad operacional son fundamentales para prevenir p\u00e9rdida de fondos y mantener integridad del sistema</li> <li>La transferencia de valor directa crea bucles de retroalimentaci\u00f3n inmediatos entre calidad de contenido y compensaci\u00f3n del creador, alterando fundamentalmente los incentivos de engagement</li> </ol>"},{"location":"es/getting-started/what-is-nostr/","title":"\u00bfQu\u00e9 es Nostr?","text":"<p>Objetivos de Aprendizaje</p> <p>Al final de esta lecci\u00f3n, entender\u00e1s:</p> <ul> <li>Qu\u00e9 significa Nostr y sus principios centrales</li> <li>C\u00f3mo Nostr difiere de las plataformas de redes sociales tradicionales</li> <li>Los componentes fundamentales del protocolo Nostr</li> <li>Los beneficios de las redes sociales descentralizadas</li> </ul>"},{"location":"es/getting-started/what-is-nostr/#introduccion","title":"Introducci\u00f3n","text":"<p>Nostr significa \"Notes and Other Stuff Transmitted by Relays\" (Notas y Otras Cosas Transmitidas por Rel\u00e9s). Es un protocolo simple y abierto que permite redes sociales globales, descentralizadas y resistentes a la censura.</p> <p>A diferencia de las plataformas de redes sociales tradicionales, Nostr opera sin una autoridad central, dando a los usuarios control completo sobre su identidad y datos a trav\u00e9s de pares de llaves criptogr\u00e1ficas.</p>"},{"location":"es/getting-started/what-is-nostr/#principios-centrales","title":"Principios Centrales","text":""},{"location":"es/getting-started/what-is-nostr/#arquitectura-descentralizada","title":"Arquitectura Descentralizada","text":"<p>Nostr opera en una red de rel\u00e9s independientes en lugar de servidores centralizados, eliminando puntos \u00fanicos de falla y control.</p>"},{"location":"es/getting-started/what-is-nostr/#soberania-del-usuario","title":"Soberan\u00eda del Usuario","text":"<p>Los usuarios mantienen propiedad completa de su identidad a trav\u00e9s de llaves criptogr\u00e1ficas, asegurando que ninguna plataforma pueda prohibirlos o silenciarlos permanentemente.</p>"},{"location":"es/getting-started/what-is-nostr/#simplicidad-del-protocolo","title":"Simplicidad del Protocolo","text":"<p>El protocolo prioriza la simplicidad sobre la complejidad, haci\u00e9ndolo confiable, eficiente y f\u00e1cil de implementar.</p>"},{"location":"es/getting-started/what-is-nostr/#resistencia-a-la-censura","title":"Resistencia a la Censura","text":"<p>La naturaleza distribuida de los rel\u00e9s asegura que el contenido no pueda ser censurado globalmente por ninguna entidad singular.</p>"},{"location":"es/getting-started/what-is-nostr/#arquitectura-del-protocolo","title":"Arquitectura del Protocolo","text":"<pre><code>graph TB\n    User[\ud83d\udc64 Usuario] --&gt;|publica eventos| R1[\ud83d\udd04 Rel\u00e9 1]\n    User --&gt;|publica eventos| R2[\ud83d\udd04 Rel\u00e9 2]\n    User --&gt;|publica eventos| R3[\ud83d\udd04 Rel\u00e9 3]\n\n    R1 --&gt;|distribuye a| Follower[\ud83d\udc64 Seguidor]\n    R2 --&gt;|distribuye a| Follower\n    R3 --&gt;|distribuye a| OtherUsers[\ud83d\udc64 Otros Usuarios]\n\n    Follower --&gt;|publica respuesta| R1\n    Follower --&gt;|publica respuesta| R2\n\n    R1 --&gt;|entrega a| User\n    R2 --&gt;|entrega a| User\n\n    style User fill:#e1f5fe\n    style Follower fill:#e8f5e8\n    style OtherUsers fill:#e8f5e8\n    style R1 fill:#fff3e0\n    style R2 fill:#fff3e0\n    style R3 fill:#fff3e0</code></pre> <p>El protocolo opera a trav\u00e9s del siguiente proceso:</p> <ol> <li>Creaci\u00f3n de Eventos: Los usuarios crean eventos firmados usando sus llaves privadas</li> <li>Distribuci\u00f3n por Rel\u00e9s: Los eventos se env\u00edan a m\u00faltiples rel\u00e9s para almacenamiento y distribuci\u00f3n</li> <li>Descubrimiento de Contenido: Otros usuarios consultan rel\u00e9s para recuperar eventos relevantes</li> <li>Interacci\u00f3n de Red: Los usuarios pueden responder e interactuar, creando nuevos eventos en la red</li> </ol>"},{"location":"es/getting-started/what-is-nostr/#componentes-del-protocolo","title":"Componentes del Protocolo","text":""},{"location":"es/getting-started/what-is-nostr/#eventos","title":"Eventos","text":"<p>Todo el contenido en Nostr se representa como eventos - objetos JSON que contienen campos estandarizados:</p> <pre><code>{\n  \"id\": \"hash_identificador_evento\",\n  \"pubkey\": \"llave_publica_autor\", \n  \"created_at\": 1234567890,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"Contenido del mensaje\",\n  \"sig\": \"firma_criptografica\"\n}\n</code></pre> <p>Propiedades Clave: - Inmutable: Los eventos no pueden modificarse despu\u00e9s de crearse - Verificable: Las firmas digitales aseguran autenticidad - Portable: Los eventos funcionan en todos los clientes y rel\u00e9s de Nostr</p>"},{"location":"es/getting-started/what-is-nostr/#reles","title":"Rel\u00e9s","text":"<p>Servidores independientes que almacenan y reenv\u00edan eventos. Las caracter\u00edsticas de los rel\u00e9s incluyen:</p> <ul> <li>Operaci\u00f3n Aut\u00f3noma: Cada rel\u00e9 opera independientemente con sus propias pol\u00edticas</li> <li>Filtrado Configurable: Los rel\u00e9s pueden implementar reglas personalizadas de moderaci\u00f3n de contenido</li> <li>Redundancia de Red: M\u00faltiples rel\u00e9s proporcionan tolerancia a fallos y resistencia a la censura</li> <li>Protocolo Simple: Los rel\u00e9s implementan una API directa basada en WebSocket</li> </ul>"},{"location":"es/getting-started/what-is-nostr/#clientes","title":"Clientes","text":"<p>Aplicaciones que proporcionan interfaces de usuario para interactuar con el protocolo Nostr:</p> <ul> <li>Gesti\u00f3n de Llaves: Generaci\u00f3n, almacenamiento y uso seguro de llaves criptogr\u00e1ficas</li> <li>Comunicaci\u00f3n Multi-Rel\u00e9: Conectar a m\u00faltiples rel\u00e9s simult\u00e1neamente para redundancia</li> <li>Procesamiento de Eventos: Crear, firmar, verificar y mostrar eventos seg\u00fan especificaciones del protocolo</li> <li>Experiencia de Usuario: Abstraer la complejidad del protocolo detr\u00e1s de interfaces intuitivas</li> </ul>"},{"location":"es/getting-started/what-is-nostr/#implementacion-tecnica","title":"Implementaci\u00f3n T\u00e9cnica","text":""},{"location":"es/getting-started/what-is-nostr/#estructura-y-validacion-de-eventos","title":"Estructura y Validaci\u00f3n de Eventos","text":"<p>Los eventos deben cumplir reglas espec\u00edficas de validaci\u00f3n:</p> Campos RequeridosProceso de Validaci\u00f3n <pre><code>{\n  \"id\": \"32 bytes en hex min\u00fascula del sha256 de datos serializados del evento\",\n  \"pubkey\": \"32 bytes en hex min\u00fascula de la llave p\u00fablica\",\n  \"created_at\": \"timestamp unix en segundos\",\n  \"kind\": \"entero entre 0 y 65535\",\n  \"tags\": \"arreglo de arreglos de strings\",\n  \"content\": \"string arbitrario\",\n  \"sig\": \"64 bytes en hex min\u00fascula de la firma\"\n}\n</code></pre> <pre><code>// Pseudoc\u00f3digo para validaci\u00f3n de eventos\nfunction validateEvent(event) {\n  // 1. Verificar que los campos requeridos est\u00e9n presentes\n  if (!hasRequiredFields(event)) return false;\n\n  // 2. Verificar que el ID coincida con el hash del contenido\n  if (event.id !== computeEventId(event)) return false;\n\n  // 3. Verificar firma\n  if (!verifySignature(event.sig, event.id, event.pubkey)) return false;\n\n  // 4. Verificar validez del timestamp\n  if (!isValidTimestamp(event.created_at)) return false;\n\n  return true;\n}\n</code></pre>"},{"location":"es/getting-started/what-is-nostr/#protocolo-de-comunicacion-de-reles","title":"Protocolo de Comunicaci\u00f3n de Rel\u00e9s","text":"<p>Los rel\u00e9s implementan un protocolo basado en WebSocket con tres tipos de mensajes:</p> Tipo de Mensaje Prop\u00f3sito Formato EVENT Publicar eventos al rel\u00e9 <code>[\"EVENT\", &lt;JSON del evento&gt;]</code> REQ Solicitar eventos del rel\u00e9 <code>[\"REQ\", &lt;id_suscripcion&gt;, &lt;filtros...&gt;]</code> CLOSE Cerrar suscripci\u00f3n <code>[\"CLOSE\", &lt;id_suscripcion&gt;]</code>"},{"location":"es/getting-started/what-is-nostr/#comparacion-arquitectonica","title":"Comparaci\u00f3n Arquitect\u00f3nica","text":"Aspecto Plataformas Tradicionales Protocolo Nostr Control de Identidad Cuentas propiedad de la plataforma Llaves criptogr\u00e1ficas controladas por el usuario Almacenamiento de Datos Bases de datos centralizadas Red distribuida de rel\u00e9s Moderaci\u00f3n de Contenido Pol\u00edticas de toda la plataforma Pol\u00edticas por rel\u00e9 con elecci\u00f3n del usuario Control de Algoritmo Propietario, impulsado por ganancias Abierto, configurable por el usuario Dependencia del Proveedor Altos costos de cambio Identidad y datos portables Punto \u00danico de Falla Infraestructura de la plataforma Sin dependencias globales"},{"location":"es/getting-started/what-is-nostr/#ejercicio-practico-exploracion-de-la-red","title":"Ejercicio Pr\u00e1ctico: Exploraci\u00f3n de la Red","text":"<p>Ejercicio de An\u00e1lisis del Protocolo</p> <p>Objetivo: Examinar eventos reales de Nostr para entender la estructura del protocolo</p> <p>Pasos: 1. Visita nostr.band para explorar la red 2. Busca eventos recientes usando el hashtag <code>#nostr</code> 3. Haz clic en eventos individuales para examinar su estructura JSON 4. Identifica los diferentes tipos de eventos y sus prop\u00f3sitos 5. Nota la variedad de rel\u00e9s siendo usados en toda la red</p> <p>Preguntas de An\u00e1lisis: - \u00bfCu\u00e1ntos tipos diferentes de eventos puedes identificar? - \u00bfQu\u00e9 patrones notas en las estructuras de etiquetas? - \u00bfC\u00f3mo proporcionan las llaves p\u00fablicas y firmas verificaci\u00f3n de identidad?</p>"},{"location":"es/getting-started/what-is-nostr/#beneficios-y-compensaciones-del-protocolo","title":"Beneficios y Compensaciones del Protocolo","text":"<p>Ventajas del Protocolo</p> <p>Beneficios de Descentralizaci\u00f3n</p> <ul> <li>\u2705 Eliminaci\u00f3n de puntos \u00fanicos de falla o control</li> <li>\u2705 Resistencia a la censura y manipulaci\u00f3n de plataformas</li> <li>\u2705 Propiedad del usuario sobre identidad y datos</li> <li>\u2705 Ecosistema competitivo de clientes y servicios</li> </ul> <p>Ventajas T\u00e9cnicas</p> <ul> <li>\u2705 Especificaci\u00f3n de protocolo simple y bien definida</li> <li>\u2705 Seguridad y verificaci\u00f3n criptogr\u00e1fica</li> <li>\u2705 Dise\u00f1o extensible a trav\u00e9s de NIPs (Posibilidades de Implementaci\u00f3n de Nostr)</li> <li>\u2705 Baja barrera de entrada para desarrolladores y operadores de rel\u00e9s</li> </ul> <p>Consideraciones T\u00e9cnicas</p> <p>Limitaciones Actuales</p> <ul> <li>\u26a0\ufe0f Complejidad de gesti\u00f3n de llaves para usuarios promedio</li> <li>\u26a0\ufe0f Potencial para spam sin filtrado centralizado</li> <li>\u26a0\ufe0f Desaf\u00edos de descubrimiento y selecci\u00f3n de rel\u00e9s</li> <li>\u26a0\ufe0f Funciones limitadas de privacidad incorporadas para metadatos</li> </ul> <p>Consideraciones de Escalabilidad</p> <ul> <li>\u26a0\ufe0f Requisitos de almacenamiento y ancho de banda de rel\u00e9s</li> <li>\u26a0\ufe0f Sobrecarga computacional de verificaci\u00f3n de eventos</li> <li>\u26a0\ufe0f Efectos de red y desaf\u00edos de adopci\u00f3n</li> </ul>"},{"location":"es/getting-started/what-is-nostr/#nips-extensiones-del-protocolo","title":"NIPs: Extensiones del Protocolo","text":"<p>Las Posibilidades de Implementaci\u00f3n de Nostr (NIPs) definen extensiones y est\u00e1ndares del protocolo:</p> NIP T\u00edtulo Prop\u00f3sito NIP-01 Flujo b\u00e1sico del protocolo Especificaciones centrales de eventos y rel\u00e9s NIP-02 Lista de contactos y nombres de mascotas Gesti\u00f3n de seguimiento y contactos NIP-04 Mensajes directos encriptados Comunicaci\u00f3n privada NIP-05 Verificaci\u00f3n basada en DNS Identificadores legibles por humanos NIP-09 Eliminaci\u00f3n de eventos Mecanismos de eliminaci\u00f3n de contenido NIP-11 Documento de informaci\u00f3n del rel\u00e9 Metadatos y pol\u00edticas del rel\u00e9"},{"location":"es/getting-started/what-is-nostr/#ejercicio-practico-analisis-de-eventos","title":"Ejercicio Pr\u00e1ctico: An\u00e1lisis de Eventos","text":"<p>Inmersi\u00f3n T\u00e9cnica Profunda</p> <p>Tarea: Analizar la estructura de diferentes tipos de eventos de Nostr</p> <p>Instrucciones: 1. Usa un cliente de Nostr o interfaz web para examinar eventos 2. Documenta las diferencias entre tipos de eventos (0, 1, 3, 7) 3. Analiza patrones de uso de etiquetas en diferentes tipos de eventos 4. Verifica firmas de eventos usando herramientas disponibles</p> <p>Resultados Esperados: - Comprensi\u00f3n de variaciones en estructura de eventos - Reconocimiento de patrones de metadatos basados en etiquetas - Apreciaci\u00f3n por mecanismos de verificaci\u00f3n criptogr\u00e1fica</p>"},{"location":"es/getting-started/what-is-nostr/#siguientes-pasos","title":"Siguientes Pasos","text":"<p>Entender la arquitectura fundamental de Nostr te prepara para implementar aplicaciones pr\u00e1cticas. La simplicidad del protocolo permite desarrollo r\u00e1pido mientras que sus fundamentos criptogr\u00e1ficos aseguran seguridad y soberan\u00eda del usuario.</p>      Integraci\u00f3n de Billetera Lightning \u2192"},{"location":"es/getting-started/what-is-nostr/#verificacion-de-conocimiento","title":"Verificaci\u00f3n de Conocimiento","text":"<p>Verificaci\u00f3n de Comprensi\u00f3n T\u00e9cnica</p> <ol> <li>\u00bfCu\u00e1les son los tres componentes fundamentales del protocolo Nostr?</li> <li>\u00bfC\u00f3mo funciona la verificaci\u00f3n de eventos en Nostr?</li> <li>\u00bfQu\u00e9 distingue a los rel\u00e9s de Nostr de los servidores tradicionales de redes sociales?</li> <li>\u00bfPor qu\u00e9 est\u00e1 dise\u00f1ado el protocolo alrededor de eventos JSON simples?</li> </ol> Respuestas T\u00e9cnicas <ol> <li>Eventos (estructuras de datos de contenido), Rel\u00e9s (infraestructura de almacenamiento y distribuci\u00f3n), y Clientes (aplicaciones de interfaz de usuario)</li> <li>Firmas digitales usando pares de llaves criptogr\u00e1ficas verifican la autenticidad del evento, mientras que hashing de contenido asegura integridad</li> <li>Los rel\u00e9s operan independientemente con pol\u00edticas individuales, creando una red distribuida sin puntos de control centrales</li> <li>La simplicidad de JSON asegura compatibilidad amplia, an\u00e1lisis f\u00e1cil, e implementaci\u00f3n directa del protocolo en diferentes lenguajes de programaci\u00f3n</li> </ol>"},{"location":"es/modules/","title":"M\u00f3dulos de Learn Nostr","text":"<p>\u00a1Bienvenido a los M\u00f3dulos de Learn Nostr! Este plan de estudios integral est\u00e1 dise\u00f1ado para llevarte de principiante completo a experto en Nostr a trav\u00e9s de rutas de aprendizaje estructuradas y progresivas.</p>"},{"location":"es/modules/#descripcion-general-del-camino-de-aprendizaje","title":"\ud83c\udfaf Descripci\u00f3n General del Camino de Aprendizaje","text":"<p>Nuestros m\u00f3dulos est\u00e1n cuidadosamente estructurados para construir tu conocimiento progresivamente:</p> <ul> <li>M\u00f3dulos 1-3: Fundamentos - Comprensi\u00f3n de los conceptos b\u00e1sicos</li> <li>M\u00f3dulos 4-6: Intermedio - Construcci\u00f3n e interacci\u00f3n</li> <li>M\u00f3dulos 7-9: Avanzado - Arquitectura y optimizaci\u00f3n</li> <li>M\u00f3dulos 10-12: Experto - Innovaci\u00f3n y contribuci\u00f3n</li> </ul>"},{"location":"es/modules/#modulos-disponibles","title":"\ud83d\udcda M\u00f3dulos Disponibles","text":""},{"location":"es/modules/#pista-de-fundamentos","title":"Pista de Fundamentos","text":"<ul> <li> <p> M\u00f3dulo 1: Introducci\u00f3n a Nostr</p> <p>Comienza tu viaje comprendiendo qu\u00e9 es Nostr, por qu\u00e9 es importante y c\u00f3mo revoluciona la comunicaci\u00f3n social.</p> <p> Comenzar M\u00f3dulo 1</p> </li> <li> <p> M\u00f3dulo 2: Claves e Identidad</p> <p>Domina los fundamentos de las claves criptogr\u00e1ficas, la identidad digital y la gesti\u00f3n de cuentas en Nostr.</p> <p> Comenzar M\u00f3dulo 2</p> </li> <li> <p> M\u00f3dulo 3: Eventos y Mensajes</p> <p>Aprende c\u00f3mo Nostr estructura los datos, crea eventos y habilita la comunicaci\u00f3n a trav\u00e9s del protocolo.</p> <p> Comenzar M\u00f3dulo 3</p> </li> </ul>"},{"location":"es/modules/#pista-intermedia","title":"Pista Intermedia","text":"<ul> <li> <p> M\u00f3dulo 4: Rel\u00e9s y Arquitectura</p> <p>Domina la comunicaci\u00f3n con rel\u00e9s, conexiones WebSocket y patrones de arquitectura de red.</p> <p> Comenzar M\u00f3dulo 4</p> </li> <li> <p> M\u00f3dulo 5: Construyendo Tu Cliente</p> <p>Construye una aplicaci\u00f3n cliente Nostr completa y lista para producci\u00f3n desde cero.</p> <p> Comenzar M\u00f3dulo 5</p> </li> <li> <p> M\u00f3dulo 6: NIPs Avanzados</p> <p>Domina tipos de eventos avanzados, NIPs y extensiones de protocolo para aplicaciones sofisticadas.</p> <p> Comenzar M\u00f3dulo 6</p> </li> </ul>"},{"location":"es/modules/#pista-avanzada","title":"Pista Avanzada","text":"<ul> <li> <p> M\u00f3dulo 7: Rel\u00e9s en Producci\u00f3n</p> <p>Dise\u00f1a, despliega y opera rel\u00e9s Nostr de grado de producci\u00f3n a escala.</p> <p> Comenzar M\u00f3dulo 7</p> </li> <li> <p> M\u00f3dulo 8: Escalado y Rendimiento</p> <p>Optimiza el rendimiento del rel\u00e9, implementa cach\u00e9 y escala a millones de usuarios.</p> <p> Comenzar M\u00f3dulo 8</p> </li> <li> <p> M\u00f3dulo 9: Mejores Pr\u00e1cticas de Seguridad</p> <p>Pr\u00f3ximamente - Patrones de seguridad avanzados, modelado de amenazas y estrategias de endurecimiento.</p> </li> </ul>"},{"location":"es/modules/#proximamente","title":"Pr\u00f3ximamente","text":"<ul> <li>M\u00f3dulo 10: Desarrollo de Protocolo</li> <li>M\u00f3dulo 11: Modelos Econ\u00f3micos y Lightning</li> <li>M\u00f3dulo 12: Contribuyendo a Nostr</li> </ul>"},{"location":"es/modules/#como-usar-estos-modulos","title":"\ud83d\ude80 C\u00f3mo Usar Estos M\u00f3dulos","text":"<ol> <li>Comienza desde el M\u00f3dulo 1 si eres nuevo en Nostr</li> <li>Completa los ejercicios al final de cada m\u00f3dulo</li> <li>\u00danete a las discusiones en nuestra comunidad de Discord</li> <li>Construye proyectos para aplicar lo que has aprendido</li> <li>Rastrea tu progreso usando los puntos de control</li> </ol>"},{"location":"es/modules/#progresion-de-habilidades","title":"\ud83d\udcca Progresi\u00f3n de Habilidades","text":"<pre><code>graph LR\n    A[Principiante] --&gt;|M\u00f3dulos 1-3| B[Fundamentos]\n    B --&gt;|M\u00f3dulos 4-6| C[Intermedio]\n    C --&gt;|M\u00f3dulos 7-9| D[Avanzado]\n    D --&gt;|M\u00f3dulos 10-12| E[Experto]</code></pre>"},{"location":"es/modules/#pista-de-certificacion","title":"\ud83c\udf93 Pista de Certificaci\u00f3n","text":"<p>Completa todos los m\u00f3dulos y proyectos para obtener tu Certificaci\u00f3n de Desarrollador Nostr (pr\u00f3ximamente).</p> <p>\u00danete a Nuestra Comunidad</p> <p>\u00bfTienes preguntas? \u00danete a nuestro Discord para conectarte con otros estudiantes y obtener ayuda de desarrolladores experimentados de Nostr!</p>"},{"location":"es/modules/module-01-introduction/","title":"M\u00f3dulo 1: Introducci\u00f3n a Nostr","text":"<p>Visi\u00f3n General del M\u00f3dulo</p> <p>Duraci\u00f3n: 2-3 horas Nivel: Principiante Prerrequisitos: Ninguno Objetivo: Comprender los fundamentos del protocolo Nostr y su arquitectura</p>"},{"location":"es/modules/module-01-introduction/#objetivos-de-aprendizaje","title":"\ud83d\udccb Objetivos de Aprendizaje","text":"<p>Al final de este m\u00f3dulo, podr\u00e1s:</p> <ul> <li>\u2705 Explicar qu\u00e9 es Nostr y c\u00f3mo funciona</li> <li>\u2705 Comprender la arquitectura descentralizada</li> <li>\u2705 Identificar casos de uso y aplicaciones</li> <li>\u2705 Comparar Nostr con plataformas tradicionales</li> <li>\u2705 Configurar tu primer cliente Nostr</li> </ul>"},{"location":"es/modules/module-01-introduction/#que-es-nostr","title":"\ud83c\udf1f \u00bfQu\u00e9 es Nostr?","text":"<p>Nostr significa \"Notes and Other Stuff Transmitted by Relays\" (Notas y Otras Cosas Transmitidas por Rel\u00e9s).</p> <p>Es un protocolo simple y abierto para redes sociales descentralizadas, resistente a la censura y verdaderamente distribuido.</p>"},{"location":"es/modules/module-01-introduction/#caracteristicas-principales","title":"Caracter\u00edsticas Principales","text":"<ul> <li>\ud83d\udd13 Sin Permisos: No se requiere autorizaci\u00f3n para publicar</li> <li>\ud83d\udd10 Criptograf\u00eda de Clave P\u00fablica: Tu identidad est\u00e1 controlada por tus claves</li> <li>\ud83c\udf10 Descentralizado: Sin servidor central, sin punto \u00fanico de fallo</li> <li>\ud83d\udeab Resistente a Censura: Nadie puede silenciarte</li> <li>\ud83c\udd93 Sin Tokens: No hay token nativo o criptomoneda requerida</li> </ul>"},{"location":"es/modules/module-01-introduction/#arquitectura-de-nostr","title":"\ud83c\udfd7\ufe0f Arquitectura de Nostr","text":"<pre><code>graph LR\n    A[Cliente] --&gt;|Publicar Evento| B[Rel\u00e9 1]\n    A --&gt;|Publicar Evento| C[Rel\u00e9 2]\n    A --&gt;|Publicar Evento| D[Rel\u00e9 3]\n\n    B --&gt;|Eventos| A\n    C --&gt;|Eventos| A\n    D --&gt;|Eventos| A\n\n    E[Otro Cliente] --&gt;|Suscribirse| B\n    E --&gt;|Suscribirse| C\n\n    style A fill:#667eea,stroke:#fff,color:#fff\n    style E fill:#667eea,stroke:#fff,color:#fff\n    style B fill:#764ba2,stroke:#fff,color:#fff\n    style C fill:#764ba2,stroke:#fff,color:#fff\n    style D fill:#764ba2,stroke:#fff,color:#fff</code></pre>"},{"location":"es/modules/module-01-introduction/#componentes-clave","title":"Componentes Clave","text":"<ol> <li>Clientes: Aplicaciones que usan los usuarios (navegador web, m\u00f3vil, escritorio)</li> <li>Rel\u00e9s: Servidores que almacenan y transmiten eventos</li> <li>Eventos: Mensajes firmados que contienen contenido</li> <li>Claves: Pares de claves p\u00fablicas/privadas para identidad</li> </ol>"},{"location":"es/modules/module-01-introduction/#por-que-nostr","title":"\ud83d\udca1 \u00bfPor Qu\u00e9 Nostr?","text":""},{"location":"es/modules/module-01-introduction/#problemas-con-las-redes-sociales-tradicionales","title":"Problemas con las Redes Sociales Tradicionales","text":"<ul> <li>\u274c Censura y deplatforming</li> <li>\u274c Control centralizado de datos</li> <li>\u274c Algoritmos opacos</li> <li>\u274c Lock-in de plataforma</li> <li>\u274c Sin portabilidad de identidad</li> </ul>"},{"location":"es/modules/module-01-introduction/#soluciones-de-nostr","title":"Soluciones de Nostr","text":"<ul> <li>\u2705 Imposible censurar (m\u00faltiples rel\u00e9s)</li> <li>\u2705 T\u00fa controlas tus datos</li> <li>\u2705 Protocolo abierto y transparente</li> <li>\u2705 Cambia de cliente cuando quieras</li> <li>\u2705 Una identidad en todas las aplicaciones</li> </ul>"},{"location":"es/modules/module-01-introduction/#primeros-pasos","title":"\ud83d\ude80 Primeros Pasos","text":""},{"location":"es/modules/module-01-introduction/#1-elige-un-cliente","title":"1. Elige un Cliente","text":"<p>Algunos clientes populares:</p> <ul> <li>Damus - iOS</li> <li>Amethyst - Android</li> <li>Snort - Web</li> <li>Iris - Web</li> <li>Nostrudel - Web</li> </ul>"},{"location":"es/modules/module-01-introduction/#2-crea-tu-identidad","title":"2. Crea Tu Identidad","text":"<p>Tu identidad es un par de claves:</p> <ul> <li>Clave Privada (nsec): MANT\u00c9N ESTO EN SECRETO - como una contrase\u00f1a</li> <li>Clave P\u00fablica (npub): Comparte esto - como un nombre de usuario</li> </ul> <p>Seguridad Importante</p> <p>Tu clave privada ES tu identidad. Si la pierdes, pierdes tu cuenta. Si alguien la obtiene, puede hacerse pasar por ti.</p>"},{"location":"es/modules/module-01-introduction/#3-conectate-a-reles","title":"3. Con\u00e9ctate a Rel\u00e9s","text":"<p>Los clientes se conectan a m\u00faltiples rel\u00e9s para: - Publicar tus eventos - Recibir eventos de otros - Aumentar la redundancia</p> <p>Rel\u00e9s populares: - <code>wss://relay.damus.io</code> - <code>wss://nos.lol</code> - <code>wss://relay.snort.social</code></p>"},{"location":"es/modules/module-01-introduction/#conceptos-fundamentales","title":"\ud83d\udcdd Conceptos Fundamentales","text":""},{"location":"es/modules/module-01-introduction/#eventos","title":"Eventos","text":"<p>Todo en Nostr es un evento:</p> <pre><code>{\n  \"id\": \"4376c65d2f232afbe9b882a35baa4f6fe8667c4e684749af565f981833ed6a65\",\n  \"pubkey\": \"6e468422dfb74a5738702a8823b9b28168abab8655faacb6853cd0ee15deee93\",\n  \"created_at\": 1673347337,\n  \"kind\": 1,\n  \"tags\": [],\n  \"content\": \"\u00a1Hola Nostr!\",\n  \"sig\": \"908a15e46fb4d8675bab026fc230a0e3542bfade63da02d542fb78b2a8513fcd0092619a2c8c1221e581946e0191f2af505dfdf8657a414dbca329186f009262\"\n}\n</code></pre>"},{"location":"es/modules/module-01-introduction/#tipos-de-eventos-kinds","title":"Tipos de Eventos (Kinds)","text":"<ul> <li><code>kind: 0</code> - Metadatos de perfil</li> <li><code>kind: 1</code> - Notas de texto</li> <li><code>kind: 3</code> - Lista de contactos</li> <li><code>kind: 4</code> - Mensajes cifrados</li> <li><code>kind: 7</code> - Reacciones</li> </ul>"},{"location":"es/modules/module-01-introduction/#ejercicio-practico","title":"\ud83c\udfaf Ejercicio Pr\u00e1ctico","text":"<ol> <li>Descarga un Cliente: Instala Damus (iOS) o Amethyst (Android)</li> <li>Crea Claves: Genera un nuevo par de claves</li> <li>Haz una Copia de Seguridad: Guarda tu clave privada de forma segura</li> <li>Tu Primera Nota: Publica \"\u00a1Hola Nostr!\"</li> <li>Sigue a Alguien: Encuentra y sigue otro usuario</li> <li>Explora: Navega el feed global</li> </ol>"},{"location":"es/modules/module-01-introduction/#recursos-adicionales","title":"\ud83d\udcda Recursos Adicionales","text":"<ul> <li>Sitio Web Oficial de Nostr</li> <li>NIPs (Propuestas de Implementaci\u00f3n de Nostr)</li> <li>Awesome Nostr</li> <li>Comunidad en Discord de LearnNostr</li> </ul>"},{"location":"es/modules/module-01-introduction/#evaluacion-del-modulo-1","title":"\ud83c\udfaf Evaluaci\u00f3n del M\u00f3dulo 1","text":"<p>Antes de pasar al M\u00f3dulo 2, aseg\u00farate de que puedes:</p> <ul> <li>[ ] Explicar qu\u00e9 es Nostr en tus propias palabras</li> <li>[ ] Describir la diferencia entre clientes y rel\u00e9s</li> <li>[ ] Entender por qu\u00e9 las claves privadas son importantes</li> <li>[ ] Haber creado tu primer par de claves</li> <li>[ ] Haber publicado tu primera nota</li> </ul>"},{"location":"es/modules/module-01-introduction/#discusion-comunitaria","title":"\ud83d\udcac Discusi\u00f3n Comunitaria","text":"<p>\u00danete a nuestro Discord para discutir el M\u00f3dulo 1: - Comparte tu primera experiencia con Nostr - Haz preguntas sobre el protocolo - Conecta con otros aprendices</p> <p>\u00a1Felicitaciones!</p> <p>\u00a1Has completado el M\u00f3dulo 1! Ahora entiendes los fundamentos de Nostr.</p> <p>Continuar al M\u00f3dulo 2: Claves e Identidad \u2192</p>"},{"location":"es/modules/module-02-keys-identity/","title":"M\u00f3dulo 2: Claves e Identidad","text":"<p>Visi\u00f3n General del M\u00f3dulo</p> <p>Duraci\u00f3n: 3-4 horas Nivel: Principiante Prerrequisitos: M\u00f3dulo 1 completado Objetivo: Dominar la gesti\u00f3n de claves criptogr\u00e1ficas y la identidad en Nostr</p>"},{"location":"es/modules/module-02-keys-identity/#objetivos-de-aprendizaje","title":"\ud83d\udccb Objetivos de Aprendizaje","text":"<p>Al final de este m\u00f3dulo, podr\u00e1s:</p> <ul> <li>\u2705 Generar pares de claves p\u00fablicas/privadas</li> <li>\u2705 Entender diferentes formatos de claves (hex, bech32)</li> <li>\u2705 Implementar almacenamiento seguro de claves</li> <li>\u2705 Usar extensiones de firma (NIP-07)</li> <li>\u2705 Gestionar m\u00faltiples identidades</li> </ul>"},{"location":"es/modules/module-02-keys-identity/#criptografia-de-curva-eliptica","title":"\ud83d\udd10 Criptograf\u00eda de Curva El\u00edptica","text":"<p>Nostr usa secp256k1 (la misma curva que Bitcoin) para:</p> <ul> <li>Generar pares de claves</li> <li>Firmar eventos</li> <li>Verificar firmas</li> </ul>"},{"location":"es/modules/module-02-keys-identity/#generacion-de-claves","title":"Generaci\u00f3n de Claves","text":"<pre><code>import { generatePrivateKey, getPublicKey } from 'nostr-tools'\n\n// Generar clave privada (32 bytes aleatorios)\nconst privateKey = generatePrivateKey()\n\n// Derivar clave p\u00fablica de la privada\nconst publicKey = getPublicKey(privateKey)\n\nconsole.log('Privada:', privateKey)\nconsole.log('P\u00fablica:', publicKey)\n</code></pre>"},{"location":"es/modules/module-02-keys-identity/#formatos-de-claves","title":"\ud83c\udff7\ufe0f Formatos de Claves","text":""},{"location":"es/modules/module-02-keys-identity/#formato-hexadecimal-predeterminado","title":"Formato Hexadecimal (Predeterminado)","text":"<pre><code>// Clave privada (64 caracteres hex)\nconst privHex = \"3bf0c63fcb93463407af97a5e5ee64fa883d107ef9e558472c4eb9aaaefa459d\"\n\n// Clave p\u00fablica (64 caracteres hex)\nconst pubHex = \"7e7e9c42a91bfef19fa929e5fda1b72e0ebc1a4c1141673e2794234d86addf4e\"\n</code></pre>"},{"location":"es/modules/module-02-keys-identity/#formato-bech32-amigable","title":"Formato Bech32 (Amigable)","text":"<p>Nostr usa codificaci\u00f3n bech32 con prefijos:</p> <ul> <li><code>npub1...</code> - Clave p\u00fablica (para compartir)</li> <li><code>nsec1...</code> - Clave privada (mantener secreta)</li> </ul> <pre><code>import { nip19 } from 'nostr-tools'\n\n// Codificar a bech32\nconst npub = nip19.npubEncode(publicKey)\nconst nsec = nip19.nsecEncode(privateKey)\n\nconsole.log('npub:', npub)\n// npub1qyt8wn3lfkej38...\n\nconsole.log('nsec:', nsec)\n// nsec1xxx... \u26a0\ufe0f NUNCA COMPARTIR\n\n// Decodificar de bech32\nconst { type, data } = nip19.decode(npub)\nconsole.log(type) // 'npub'\nconsole.log(data) // clave p\u00fablica hex\n</code></pre>"},{"location":"es/modules/module-02-keys-identity/#almacenamiento-seguro-de-claves","title":"\ud83d\udd12 Almacenamiento Seguro de Claves","text":""},{"location":"es/modules/module-02-keys-identity/#nunca-hagas-esto","title":"\u274c NUNCA Hagas Esto","text":"<pre><code>// \u00a1NO almacenes claves privadas en texto plano!\nlocalStorage.setItem('privateKey', nsec)\n\n// \u00a1NO las env\u00edes por correo/chat!\nsendEmail(nsec)\n\n// \u00a1NO las guardes en GitHub!\nconst PRIVATE_KEY = \"nsec1...\"\n</code></pre>"},{"location":"es/modules/module-02-keys-identity/#mejores-practicas","title":"\u2705 Mejores Pr\u00e1cticas","text":"<p>1. Usar Extensiones de Navegador (NIP-07)</p> <pre><code>// El usuario mantiene claves en extensi\u00f3n segura\nif (window.nostr) {\n  const pubkey = await window.nostr.getPublicKey()\n  const signedEvent = await window.nostr.signEvent(event)\n}\n</code></pre> <p>2. Gestores de Claves de Hardware</p> <ul> <li>Usar dispositivos de firma dedicados</li> <li>Mantener claves fuera de l\u00ednea</li> <li>Requiere confirmaci\u00f3n f\u00edsica</li> </ul> <p>3. Cifrado de Aplicaci\u00f3n</p> <pre><code>// Cifrar antes de almacenar\nimport { encrypt, decrypt } from 'crypto-library'\n\nconst encrypted = encrypt(privateKey, userPassword)\nlocalStorage.setItem('encryptedKey', encrypted)\n\n// Descifrar cuando sea necesario\nconst privateKey = decrypt(encrypted, userPassword)\n</code></pre>"},{"location":"es/modules/module-02-keys-identity/#nip-07-extension-de-firma-de-ventana","title":"\ud83c\udf10 NIP-07: Extensi\u00f3n de Firma de Ventana","text":""},{"location":"es/modules/module-02-keys-identity/#extensiones-populares","title":"Extensiones Populares","text":"<ul> <li>nos2x - Chrome/Firefox</li> <li>Alby - Chrome/Firefox (con funciones Lightning)</li> <li>Flamingo - Chrome</li> </ul>"},{"location":"es/modules/module-02-keys-identity/#integracion","title":"Integraci\u00f3n","text":"<pre><code>class NostrClient {\n  async init() {\n    // Verificar disponibilidad de extensi\u00f3n\n    if (!window.nostr) {\n      alert('\u00a1Por favor instala una extensi\u00f3n Nostr!')\n      return\n    }\n\n    try {\n      // Obtener clave p\u00fablica\n      this.pubkey = await window.nostr.getPublicKey()\n      console.log('Conectado:', this.pubkey)\n    } catch (error) {\n      console.error('Usuario rechaz\u00f3 acceso:', error)\n    }\n  }\n\n  async publishNote(content) {\n    // Crear evento sin firmar\n    const event = {\n      kind: 1,\n      created_at: Math.floor(Date.now() / 1000),\n      tags: [],\n      content: content,\n      pubkey: this.pubkey\n    }\n\n    try {\n      // Extensi\u00f3n firma el evento\n      const signedEvent = await window.nostr.signEvent(event)\n\n      // Publicar a rel\u00e9s\n      await this.publishToRelays(signedEvent)\n    } catch (error) {\n      console.error('Firma rechazada:', error)\n    }\n  }\n}\n</code></pre>"},{"location":"es/modules/module-02-keys-identity/#gestion-de-multiples-identidades","title":"\ud83d\udc65 Gesti\u00f3n de M\u00faltiples Identidades","text":""},{"location":"es/modules/module-02-keys-identity/#casos-de-uso","title":"Casos de Uso","text":"<ul> <li>Identidad Personal: Para uso diario</li> <li>Identidad Profesional: Para trabajo/negocios</li> <li>Identidad An\u00f3nima: Para privacidad</li> <li>Identidad de Bot: Para automatizaci\u00f3n</li> </ul>"},{"location":"es/modules/module-02-keys-identity/#implementacion","title":"Implementaci\u00f3n","text":"<pre><code>class IdentityManager {\n  constructor() {\n    this.identities = []\n    this.activeIdentity = null\n  }\n\n  addIdentity(name, privateKey) {\n    this.identities.push({\n      name,\n      privateKey,\n      publicKey: getPublicKey(privateKey)\n    })\n  }\n\n  switchIdentity(name) {\n    this.activeIdentity = this.identities.find(i =&gt; i.name === name)\n  }\n\n  async signAs(name, event) {\n    const identity = this.identities.find(i =&gt; i.name === name)\n    return finishEvent(event, identity.privateKey)\n  }\n}\n\n// Uso\nconst manager = new IdentityManager()\nmanager.addIdentity('personal', privateKey1)\nmanager.addIdentity('trabajo', privateKey2)\n\n// Publicar como 'personal'\nawait manager.signAs('personal', noteEvent)\n</code></pre>"},{"location":"es/modules/module-02-keys-identity/#rotacion-y-recuperacion-de-claves","title":"\ud83d\udd04 Rotaci\u00f3n y Recuperaci\u00f3n de Claves","text":""},{"location":"es/modules/module-02-keys-identity/#rotacion-de-claves","title":"Rotaci\u00f3n de Claves","text":"<p>Nostr NO soporta rotaci\u00f3n de claves nativa: - Tu clave p\u00fablica ES tu identidad - No puedes cambiarla sin perder seguidores/historia - Planifica backup cuidadoso desde el principio</p>"},{"location":"es/modules/module-02-keys-identity/#estrategias-de-backup","title":"Estrategias de Backup","text":"<pre><code>// 1. Frase mnem\u00f3nica (como Bitcoin)\nimport { generateMnemonic, mnemonicToPrivateKey } from 'nostr-mnemonic'\n\nconst mnemonic = generateMnemonic()\n// \"witch collapse practice feed shame open despair creek road again ice least\"\n\nconst privateKey = mnemonicToPrivateKey(mnemonic)\n\n// 2. M\u00faltiples backups\nconst backups = [\n  '1. Guardar en gestor de contrase\u00f1as',\n  '2. Escribir en papel (almacenar seguro)',\n  '3. Dividir usando Shamir Secret Sharing',\n  '4. Almacenamiento cifrado en nube'\n]\n</code></pre>"},{"location":"es/modules/module-02-keys-identity/#ejercicio-practico","title":"\ud83c\udfaf Ejercicio Pr\u00e1ctico","text":""},{"location":"es/modules/module-02-keys-identity/#ejercicio-1-generador-de-claves","title":"Ejercicio 1: Generador de Claves","text":"<p>Crea una herramienta simple de generaci\u00f3n de claves:</p> <pre><code>function generateNostrIdentity() {\n  const privateKey = generatePrivateKey()\n  const publicKey = getPublicKey(privateKey)\n\n  return {\n    privateKey: {\n      hex: privateKey,\n      nsec: nip19.nsecEncode(privateKey)\n    },\n    publicKey: {\n      hex: publicKey,\n      npub: nip19.npubEncode(publicKey)\n    }\n  }\n}\n\n// Probar\nconst identity = generateNostrIdentity()\nconsole.log(identity)\n</code></pre>"},{"location":"es/modules/module-02-keys-identity/#ejercicio-2-integracion-nip-07","title":"Ejercicio 2: Integraci\u00f3n NIP-07","text":"<p>Construye un bot\u00f3n de \"Conectar con Nostr\":</p> <pre><code>&lt;button id=\"connect\"&gt;Conectar Billetera Nostr&lt;/button&gt;\n&lt;div id=\"profile\" style=\"display:none\"&gt;\n  &lt;p&gt;Conectado: &lt;span id=\"npub\"&gt;&lt;/span&gt;&lt;/p&gt;\n&lt;/div&gt;\n\n&lt;script type=\"module\"&gt;\nimport { nip19 } from 'nostr-tools'\n\ndocument.getElementById('connect').onclick = async () =&gt; {\n  if (!window.nostr) {\n    alert('Instala extensi\u00f3n Nostr primero')\n    return\n  }\n\n  try {\n    const pubkey = await window.nostr.getPublicKey()\n    const npub = nip19.npubEncode(pubkey)\n\n    document.getElementById('npub').textContent = npub\n    document.getElementById('profile').style.display = 'block'\n  } catch (e) {\n    alert('Conexi\u00f3n rechazada')\n  }\n}\n&lt;/script&gt;\n</code></pre>"},{"location":"es/modules/module-02-keys-identity/#cuestionario-del-modulo-2","title":"\ud83d\udcdd Cuestionario del M\u00f3dulo 2","text":"<ol> <li> <p>\u00bfCu\u00e1l es la diferencia entre npub y nsec? Respuesta    npub es tu clave P\u00daBLICA (seguro compartir), nsec es tu clave PRIVADA (mantener secreta). npub es como nombre de usuario, nsec es como contrase\u00f1a.     </p> </li> <li> <p>\u00bfPor qu\u00e9 usar NIP-07 en lugar de almacenar claves directamente? Respuesta    NIP-07 mantiene las claves en una extensi\u00f3n segura del navegador. Las aplicaciones web nunca ven tu clave privada, solo solicitan firmas. M\u00e1s seguro que almacenar claves en aplicaciones web.     </p> </li> <li> <p>\u00bfPuedes cambiar tu clave p\u00fablica en Nostr? Respuesta    No. Tu clave p\u00fablica ES tu identidad. Cambiarla significa crear una nueva identidad y perder toda historia/seguidores. \u00a1Haz backup!     </p> </li> </ol>"},{"location":"es/modules/module-02-keys-identity/#evaluacion-del-modulo-2","title":"\ud83c\udfaf Evaluaci\u00f3n del M\u00f3dulo 2","text":"<ul> <li>[ ] Generar pares de claves program\u00e1ticamente</li> <li>[ ] Convertir entre formatos hex y bech32</li> <li>[ ] Integrar extensi\u00f3n de firma NIP-07</li> <li>[ ] Entender mejores pr\u00e1cticas de almacenamiento</li> <li>[ ] Gestionar m\u00faltiples identidades</li> </ul> <p>\u00a1Bien Hecho!</p> <p>\u00a1Dominas la gesti\u00f3n de claves de Nostr! Ahora est\u00e1s listo para eventos y mensajes.</p> <p>Continuar al M\u00f3dulo 3: Eventos y Mensajes \u2192</p>"},{"location":"es/modules/module-03-events-messages/","title":"M\u00f3dulo 3: Eventos y Mensajes","text":"<p>Visi\u00f3n General del M\u00f3dulo</p> <p>Duraci\u00f3n: 4-5 horas Nivel: Intermedio Prerrequisitos: M\u00f3dulos 1-2 completados Objetivo: Dominar la creaci\u00f3n, firma y validaci\u00f3n de eventos Nostr</p>"},{"location":"es/modules/module-03-events-messages/#objetivos-de-aprendizaje","title":"\ud83d\udccb Objetivos de Aprendizaje","text":"<p>Al final de este m\u00f3dulo, podr\u00e1s:</p> <ul> <li>\u2705 Crear y firmar eventos Nostr</li> <li>\u2705 Entender diferentes tipos de eventos (kinds)</li> <li>\u2705 Implementar etiquetas y referencias</li> <li>\u2705 Validar firmas de eventos</li> <li>\u2705 Manejar eventos reemplazables y ef\u00edmeros</li> </ul>"},{"location":"es/modules/module-03-events-messages/#estructura-de-eventos","title":"\ud83d\udce6 Estructura de Eventos","text":"<p>Todo en Nostr es un evento. Aqu\u00ed est\u00e1 la estructura b\u00e1sica:</p> <pre><code>{\n  \"id\": \"hash_del_evento\",\n  \"pubkey\": \"clave_p\u00fablica_del_autor\",\n  \"created_at\": timestamp_unix,\n  \"kind\": tipo_de_evento,\n  \"tags\": [],\n  \"content\": \"contenido_del_mensaje\",\n  \"sig\": \"firma\"\n}\n</code></pre>"},{"location":"es/modules/module-03-events-messages/#campos-requeridos","title":"Campos Requeridos","text":"Campo Tipo Descripci\u00f3n <code>id</code> string Hash SHA-256 del evento serializado <code>pubkey</code> string Clave p\u00fablica hex del creador <code>created_at</code> number Timestamp Unix (segundos) <code>kind</code> number Tipo de evento <code>tags</code> array Array de arrays de strings <code>content</code> string Contenido del evento <code>sig</code> string Firma Schnorr del id"},{"location":"es/modules/module-03-events-messages/#tipos-de-eventos-kinds","title":"\ud83c\udfa8 Tipos de Eventos (Kinds)","text":""},{"location":"es/modules/module-03-events-messages/#eventos-basicos","title":"Eventos B\u00e1sicos","text":"<pre><code>const eventKinds = {\n  METADATA: 0,        // Perfil de usuario\n  TEXT_NOTE: 1,       // Nota de texto\n  RECOMMEND_RELAY: 2, // Recomendaci\u00f3n de rel\u00e9 (obsoleto)\n  CONTACTS: 3,        // Lista de contactos\n  DM: 4,              // Mensaje directo cifrado\n  DELETE: 5,          // Solicitud de eliminaci\u00f3n\n  REPOST: 6,          // Repost/Boost\n  REACTION: 7,        // Reacci\u00f3n (like)\n  BADGE_AWARD: 8,     // Premio de insignia\n  // ... muchos m\u00e1s\n}\n</code></pre>"},{"location":"es/modules/module-03-events-messages/#rangos-de-eventos","title":"Rangos de Eventos","text":"<ul> <li><code>0-999</code>: Eventos regulares</li> <li><code>1000-9999</code>: Eventos regulares (futuro)</li> <li><code>10000-19999</code>: Eventos reemplazables</li> <li><code>20000-29999</code>: Eventos ef\u00edmeros</li> <li><code>30000-39999</code>: Eventos reemplazables parametrizados</li> </ul>"},{"location":"es/modules/module-03-events-messages/#crear-y-firmar-eventos","title":"\u270d\ufe0f Crear y Firmar Eventos","text":""},{"location":"es/modules/module-03-events-messages/#metodo-basico","title":"M\u00e9todo B\u00e1sico","text":"<pre><code>import { finishEvent, generatePrivateKey } from 'nostr-tools'\n\n// Crear evento sin firmar\nconst eventTemplate = {\n  kind: 1,\n  created_at: Math.floor(Date.now() / 1000),\n  tags: [],\n  content: '\u00a1Hola Nostr desde JavaScript!'\n}\n\n// Firmar el evento\nconst privateKey = generatePrivateKey()\nconst signedEvent = finishEvent(eventTemplate, privateKey)\n\nconsole.log(signedEvent)\n/*\n{\n  id: \"4376c65d...\",\n  pubkey: \"6e468422...\",\n  created_at: 1673347337,\n  kind: 1,\n  tags: [],\n  content: \"\u00a1Hola Nostr desde JavaScript!\",\n  sig: \"908a15e4...\"\n}\n*/\n</code></pre>"},{"location":"es/modules/module-03-events-messages/#proceso-manual-de-firma","title":"Proceso Manual de Firma","text":"<pre><code>import { getPublicKey, getEventHash, getSignature } from 'nostr-tools'\n\nfunction createAndSignEvent(privateKey, eventTemplate) {\n  // 1. Agregar clave p\u00fablica\n  const publicKey = getPublicKey(privateKey)\n  const event = {\n    ...eventTemplate,\n    pubkey: publicKey\n  }\n\n  // 2. Calcular ID (hash del evento)\n  event.id = getEventHash(event)\n\n  // 3. Firmar el ID\n  event.sig = getSignature(event, privateKey)\n\n  return event\n}\n</code></pre>"},{"location":"es/modules/module-03-events-messages/#trabajar-con-etiquetas","title":"\ud83c\udff7\ufe0f Trabajar con Etiquetas","text":"<p>Las etiquetas son arrays de strings que agregan metadatos:</p> <pre><code>const event = {\n  kind: 1,\n  content: \"\u00a1Mira esta nota genial!\",\n  tags: [\n    [\"e\", \"event_id_referenciado\", \"wss://relay.example.com\", \"reply\"],\n    [\"p\", \"pubkey_mencionado\", \"wss://relay.example.com\"],\n    [\"t\", \"nostr\"],\n    [\"t\", \"tutorial\"]\n  ]\n}\n</code></pre>"},{"location":"es/modules/module-03-events-messages/#tipos-comunes-de-etiquetas","title":"Tipos Comunes de Etiquetas","text":"Etiqueta Prop\u00f3sito Ejemplo <code>e</code> Referencia a evento <code>[\"e\", \"event_id\", \"relay_url\", \"marker\"]</code> <code>p</code> Referencia a pubkey <code>[\"p\", \"pubkey\", \"relay_url\"]</code> <code>t</code> Hashtag <code>[\"t\", \"nostr\"]</code> <code>d</code> Identificador (reemplazables parametrizados) <code>[\"d\", \"my-article\"]</code> <code>a</code> Referencia a direcci\u00f3n <code>[\"a\", \"30023:pubkey:d-tag\"]</code>"},{"location":"es/modules/module-03-events-messages/#construir-hilos-de-conversacion","title":"Construir Hilos de Conversaci\u00f3n","text":"<pre><code>// Nota ra\u00edz (sin etiquetas)\nconst rootNote = {\n  kind: 1,\n  content: \"\u00bfQui\u00e9n m\u00e1s ama Nostr?\",\n  tags: []\n}\n\n// Respuesta a la ra\u00edz\nconst reply = {\n  kind: 1,\n  content: \"\u00a1Yo amo Nostr!\",\n  tags: [\n    [\"e\", rootNote.id, \"\", \"root\"],\n    [\"p\", rootNote.pubkey]\n  ]\n}\n\n// Respuesta a la respuesta\nconst replyToReply = {\n  kind: 1,\n  content: \"\u00a1Yo tambi\u00e9n!\",\n  tags: [\n    [\"e\", rootNote.id, \"\", \"root\"],      // Nota ra\u00edz original\n    [\"e\", reply.id, \"\", \"reply\"],        // Respondiendo directamente a esto\n    [\"p\", rootNote.pubkey],              // Autor original\n    [\"p\", reply.pubkey]                  // Autor de la respuesta\n  ]\n}\n</code></pre>"},{"location":"es/modules/module-03-events-messages/#eventos-reemplazables","title":"\ud83d\udd04 Eventos Reemplazables","text":"<p>Los eventos reemplazables (kind 10000-19999) solo mantienen la versi\u00f3n m\u00e1s reciente:</p> <pre><code>// Actualizar metadatos de perfil (kind: 0)\nconst profileUpdate = {\n  kind: 0,\n  content: JSON.stringify({\n    name: \"Alice\",\n    about: \"Desarrolladora Nostr\",\n    picture: \"https://example.com/avatar.jpg\"\n  }),\n  tags: []\n}\n\n// Enviar a rel\u00e9s - versiones antiguas se eliminan autom\u00e1ticamente\n</code></pre>"},{"location":"es/modules/module-03-events-messages/#eventos-reemplazables-parametrizados","title":"Eventos Reemplazables Parametrizados","text":"<p>Los eventos con kind 30000-39999 son reemplazables por etiqueta <code>d</code>:</p> <pre><code>// Art\u00edculo (kind: 30023)\nconst article = {\n  kind: 30023,\n  content: \"# Mi primer art\u00edculo...\",\n  tags: [\n    [\"d\", \"my-first-article\"],     // Identificador \u00fanico\n    [\"title\", \"Mi Primer Art\u00edculo\"],\n    [\"published_at\", \"1673347337\"]\n  ]\n}\n\n// Actualizar el mismo art\u00edculo (misma etiqueta \"d\")\nconst updatedArticle = {\n  kind: 30023,\n  content: \"# Mi primer art\u00edculo (editado)...\",\n  tags: [\n    [\"d\", \"my-first-article\"],     // Mismo identificador\n    [\"title\", \"Mi Primer Art\u00edculo (Editado)\"]\n  ]\n}\n</code></pre>"},{"location":"es/modules/module-03-events-messages/#eventos-efimeros","title":"\u26a1 Eventos Ef\u00edmeros","text":"<p>Los eventos ef\u00edmeros (kind 20000-29999) no se almacenan en rel\u00e9s:</p> <pre><code>// Indicador de escritura (kind: 20001)\nconst typingIndicator = {\n  kind: 20001,\n  content: \"\",\n  tags: [\n    [\"p\", \"recipient_pubkey\"]\n  ]\n}\n\n// Los rel\u00e9s transmiten pero NO almacenan esto\n</code></pre>"},{"location":"es/modules/module-03-events-messages/#validar-eventos","title":"\u2705 Validar Eventos","text":"<p>Siempre valida eventos antes de confiar en ellos:</p> <pre><code>import { verifySignature } from 'nostr-tools'\n\nfunction validateEvent(event) {\n  // 1. Verificar campos requeridos\n  if (!event.id || !event.pubkey || !event.sig) {\n    return false\n  }\n\n  // 2. Verificar firma\n  const isValid = verifySignature(event)\n  if (!isValid) {\n    console.error('\u00a1Firma inv\u00e1lida!')\n    return false\n  }\n\n  // 3. Verificar timestamp (no demasiado en el futuro)\n  const now = Math.floor(Date.now() / 1000)\n  if (event.created_at &gt; now + 900) { // 15 minutos de margen\n    console.error('\u00a1Evento demasiado en el futuro!')\n    return false\n  }\n\n  return true\n}\n</code></pre>"},{"location":"es/modules/module-03-events-messages/#ejercicios-practicos","title":"\ud83c\udfaf Ejercicios Pr\u00e1cticos","text":""},{"location":"es/modules/module-03-events-messages/#ejercicio-1-crear-diferentes-tipos-de-eventos","title":"Ejercicio 1: Crear Diferentes Tipos de Eventos","text":"<pre><code>// 1. Nota de texto\nconst textNote = finishEvent({\n  kind: 1,\n  content: \"\u00a1Mi primera nota!\",\n  tags: [[\"t\", \"hola-mundo\"]],\n  created_at: Math.floor(Date.now() / 1000)\n}, privateKey)\n\n// 2. Reacci\u00f3n (like)\nconst reaction = finishEvent({\n  kind: 7,\n  content: \"\ud83d\udd25\",\n  tags: [\n    [\"e\", targetEventId],\n    [\"p\", targetPubkey]\n  ],\n  created_at: Math.floor(Date.now() / 1000)\n}, privateKey)\n\n// 3. Repost\nconst repost = finishEvent({\n  kind: 6,\n  content: \"\",\n  tags: [\n    [\"e\", targetEventId, \"wss://relay.example.com\"],\n    [\"p\", targetPubkey]\n  ],\n  created_at: Math.floor(Date.now() / 1000)\n}, privateKey)\n</code></pre>"},{"location":"es/modules/module-03-events-messages/#ejercicio-2-construir-un-hilo","title":"Ejercicio 2: Construir un Hilo","text":"<p>Crea una conversaci\u00f3n de 3 notas con referencias adecuadas.</p>"},{"location":"es/modules/module-03-events-messages/#ejercicio-3-actualizar-perfil","title":"Ejercicio 3: Actualizar Perfil","text":"<p>Crea un evento de metadatos con tu informaci\u00f3n.</p>"},{"location":"es/modules/module-03-events-messages/#cuestionario-del-modulo-3","title":"\ud83d\udcdd Cuestionario del M\u00f3dulo 3","text":"<ol> <li> <p>\u00bfCu\u00e1l es la diferencia entre eventos regulares y reemplazables? Respuesta    Los eventos regulares (kind 0-9999) se almacenan todos. Los eventos reemplazables (kind 10000-19999) solo mantienen la versi\u00f3n m\u00e1s reciente del mismo autor. Los rel\u00e9s eliminan autom\u00e1ticamente las versiones antiguas.     </p> </li> <li> <p>\u00bfPor qu\u00e9 los eventos ef\u00edmeros no se almacenan? Respuesta    Los eventos ef\u00edmeros (kind 20000-29999) son para datos de corta duraci\u00f3n como indicadores de escritura o presencia. Los rel\u00e9s solo los transmiten pero no los almacenan, reduciendo requisitos de almacenamiento.     </p> </li> </ol>"},{"location":"es/modules/module-03-events-messages/#evaluacion-del-modulo-3","title":"\ud83c\udfaf Evaluaci\u00f3n del M\u00f3dulo 3","text":"<ul> <li>[ ] Crear y firmar eventos b\u00e1sicos</li> <li>[ ] Usar etiquetas para referencias y metadatos</li> <li>[ ] Construir hilos de conversaci\u00f3n</li> <li>[ ] Implementar eventos reemplazables</li> <li>[ ] Validar firmas de eventos</li> </ul> <p>\u00a1Excelente Trabajo!</p> <p>\u00a1Dominas los eventos de Nostr! Siguiente: Rel\u00e9s y Arquitectura.</p> <p>Continuar al M\u00f3dulo 4: Rel\u00e9s y Arquitectura \u2192</p>"},{"location":"es/modules/module-04-relays-architecture/","title":"M\u00f3dulo 4: Rel\u00e9s y Arquitectura","text":"<p>Visi\u00f3n General del M\u00f3dulo</p> <p>Duraci\u00f3n: 4-5 horas Nivel: Intermedio Prerrequisitos: M\u00f3dulos 1-3 completados Objetivo: Entender c\u00f3mo funcionan los rel\u00e9s y c\u00f3mo conectarse a ellos</p>"},{"location":"es/modules/module-04-relays-architecture/#objetivos-de-aprendizaje","title":"\ud83d\udccb Objetivos de Aprendizaje","text":"<ul> <li>\u2705 Conectarse a rel\u00e9s v\u00eda WebSocket</li> <li>\u2705 Publicar eventos a rel\u00e9s</li> <li>\u2705 Suscribirse y filtrar eventos</li> <li>\u2705 Manejar m\u00faltiples rel\u00e9s</li> <li>\u2705 Implementar estrategias de failover</li> </ul>"},{"location":"es/modules/module-04-relays-architecture/#conectarse-a-reles","title":"\ud83d\udd0c Conectarse a Rel\u00e9s","text":"<pre><code>import { relayInit } from 'nostr-tools'\n\n// Conectar a un rel\u00e9\nconst relay = relayInit('wss://relay.damus.io')\n\nrelay.on('connect', () =&gt; {\n  console.log(`Conectado a ${relay.url}`)\n})\n\nrelay.on('error', () =&gt; {\n  console.log(`Error conectando a ${relay.url}`)\n})\n\nawait relay.connect()\n</code></pre>"},{"location":"es/modules/module-04-relays-architecture/#publicar-eventos","title":"\ud83d\udce4 Publicar Eventos","text":"<pre><code>// Publicar evento\nconst event = finishEvent({\n  kind: 1,\n  content: '\u00a1Hola desde el rel\u00e9!',\n  tags: [],\n  created_at: Math.floor(Date.now() / 1000)\n}, privateKey)\n\nlet pub = relay.publish(event)\n\npub.on('ok', () =&gt; {\n  console.log('\u00a1Evento publicado exitosamente!')\n})\n\npub.on('failed', (reason) =&gt; {\n  console.log(`Error al publicar: ${reason}`)\n})\n</code></pre>"},{"location":"es/modules/module-04-relays-architecture/#suscribirse-a-eventos","title":"\ud83d\udce5 Suscribirse a Eventos","text":"<pre><code>// Suscribirse a eventos\nconst sub = relay.sub([\n  {\n    kinds: [1],\n    authors: [publicKey],\n    limit: 10\n  }\n])\n\nsub.on('event', (event) =&gt; {\n  console.log('Nuevo evento:', event)\n})\n\nsub.on('eose', () =&gt; {\n  console.log('Fin del flujo de eventos almacenados')\n})\n\n// Cerrar suscripci\u00f3n cuando termines\nsub.unsub()\n</code></pre>"},{"location":"es/modules/module-04-relays-architecture/#filtros-de-suscripcion","title":"\ud83c\udfaf Filtros de Suscripci\u00f3n","text":"<pre><code>// Filtrar por tipo de evento\n{ kinds: [1, 6, 7] }\n\n// Filtrar por autor\n{ authors: [pubkey1, pubkey2] }\n\n// Filtrar por rango de tiempo\n{ since: timestamp, until: timestamp }\n\n// Filtrar por etiquetas\n{ '#e': [eventId], '#p': [pubkey] }\n\n// Combinar filtros\n{\n  kinds: [1],\n  authors: [pubkey],\n  since: Math.floor(Date.now() / 1000) - 86400,\n  limit: 50\n}\n</code></pre>"},{"location":"es/modules/module-04-relays-architecture/#gestion-de-multiples-reles","title":"\ud83c\udf10 Gesti\u00f3n de M\u00faltiples Rel\u00e9s","text":"<pre><code>class RelayPool {\n  constructor(relayUrls) {\n    this.relays = relayUrls.map(url =&gt; relayInit(url))\n  }\n\n  async connectAll() {\n    await Promise.all(this.relays.map(r =&gt; r.connect()))\n  }\n\n  publishToAll(event) {\n    this.relays.forEach(relay =&gt; {\n      relay.publish(event)\n    })\n  }\n\n  subscribeAll(filters) {\n    this.relays.forEach(relay =&gt; {\n      relay.sub(filters)\n    })\n  }\n}\n</code></pre>"},{"location":"es/modules/module-04-relays-architecture/#cuestionario","title":"\ud83d\udcdd Cuestionario","text":"<ol> <li>\u00bfPor qu\u00e9 usar m\u00faltiples rel\u00e9s? Respuesta    Para redundancia, resistencia a censura y mejor alcance. Si un rel\u00e9 cae o te censura, tus eventos siguen disponibles en otros.     </li> </ol>"},{"location":"es/modules/module-04-relays-architecture/#evaluacion-del-modulo-4","title":"\ud83c\udfaf Evaluaci\u00f3n del M\u00f3dulo 4","text":"<ul> <li>[ ] Conectarse a rel\u00e9s via WebSocket</li> <li>[ ] Publicar eventos exitosamente</li> <li>[ ] Crear suscripciones con filtros</li> <li>[ ] Gestionar pool de m\u00faltiples rel\u00e9s</li> </ul> <p>Continuar al M\u00f3dulo 5: Construyendo Tu Cliente \u2192</p>"},{"location":"es/modules/module-05-building-client/","title":"M\u00f3dulo 5: Construyendo Tu Cliente","text":"<p>Visi\u00f3n General del M\u00f3dulo</p> <p>Duraci\u00f3n: 6-8 horas Nivel: Intermedio-Avanzado Prerrequisitos: M\u00f3dulos 1-4 completados Objetivo: Construir un cliente Nostr completo y funcional</p>"},{"location":"es/modules/module-05-building-client/#objetivos-de-aprendizaje","title":"\ud83d\udccb Objetivos de Aprendizaje","text":"<ul> <li>\u2705 Dise\u00f1ar arquitectura de cliente</li> <li>\u2705 Implementar gesti\u00f3n de estado</li> <li>\u2705 Crear interfaz de usuario</li> <li>\u2705 Optimizar rendimiento</li> <li>\u2705 Manejar cach\u00e9 local</li> </ul>"},{"location":"es/modules/module-05-building-client/#arquitectura-del-cliente","title":"\ud83c\udfd7\ufe0f Arquitectura del Cliente","text":"<pre><code>class NostrClient {\n  constructor() {\n    this.relayPool = new RelayPool()\n    this.eventCache = new Map()\n    this.subscriptions = new Map()\n    this.userProfile = null\n  }\n\n  async init() {\n    await this.relayPool.connectAll()\n    await this.loadUserProfile()\n    this.subscribeToFeed()\n  }\n\n  async publishNote(content) {\n    const event = finishEvent({\n      kind: 1,\n      content,\n      tags: [],\n      created_at: Math.floor(Date.now() / 1000)\n    }, this.privateKey)\n\n    await this.relayPool.publishToAll(event)\n  }\n\n  subscribeToFeed() {\n    const sub = this.relayPool.subscribe([{\n      kinds: [1],\n      limit: 50\n    }])\n\n    sub.on('event', (event) =&gt; {\n      this.handleNewEvent(event)\n    })\n  }\n}\n</code></pre>"},{"location":"es/modules/module-05-building-client/#componentes-ui","title":"\ud83c\udfa8 Componentes UI","text":""},{"location":"es/modules/module-05-building-client/#feed-de-eventos","title":"Feed de Eventos","text":"<pre><code>class EventFeed {\n  constructor(container) {\n    this.container = container\n    this.events = []\n  }\n\n  addEvent(event) {\n    this.events.unshift(event)\n    this.render()\n  }\n\n  render() {\n    this.container.innerHTML = this.events\n      .map(e =&gt; this.renderEvent(e))\n      .join('')\n  }\n\n  renderEvent(event) {\n    return `\n      &lt;div class=\"event\"&gt;\n        &lt;div class=\"author\"&gt;${event.pubkey.slice(0, 8)}&lt;/div&gt;\n        &lt;div class=\"content\"&gt;${event.content}&lt;/div&gt;\n        &lt;div class=\"time\"&gt;${new Date(event.created_at * 1000).toLocaleString()}&lt;/div&gt;\n      &lt;/div&gt;\n    `\n  }\n}\n</code></pre>"},{"location":"es/modules/module-05-building-client/#cache-y-estado","title":"\ud83d\udcbe Cach\u00e9 y Estado","text":"<pre><code>class EventCache {\n  constructor() {\n    this.events = new Map()\n    this.profiles = new Map()\n  }\n\n  addEvent(event) {\n    this.events.set(event.id, event)\n  }\n\n  getEvent(id) {\n    return this.events.get(id)\n  }\n\n  addProfile(pubkey, profile) {\n    this.profiles.set(pubkey, profile)\n  }\n\n  getProfile(pubkey) {\n    return this.profiles.get(pubkey)\n  }\n}\n</code></pre>"},{"location":"es/modules/module-05-building-client/#ejercicios-practicos","title":"\ud83c\udfaf Ejercicios Pr\u00e1cticos","text":"<ol> <li>Crear componente de feed</li> <li>Implementar sistema de cach\u00e9</li> <li>Agregar perfil de usuario</li> <li>Construir formulario de composici\u00f3n</li> </ol>"},{"location":"es/modules/module-05-building-client/#evaluacion-del-modulo-5","title":"\ud83c\udfaf Evaluaci\u00f3n del M\u00f3dulo 5","text":"<ul> <li>[ ] Cliente completo funcional</li> <li>[ ] Gesti\u00f3n de estado implementada</li> <li>[ ] UI responsiva</li> <li>[ ] Cach\u00e9 optimizado</li> </ul> <p>Continuar al M\u00f3dulo 6: NIPs Avanzados \u2192</p>"},{"location":"es/modules/module-06-advanced-nips/","title":"M\u00f3dulo 6: NIPs Avanzados","text":"<p>Visi\u00f3n General del M\u00f3dulo</p> <p>Duraci\u00f3n: 5-6 horas Nivel: Avanzado Prerrequisitos: M\u00f3dulos 1-5 completados Objetivo: Implementar NIPs avanzados para funcionalidad extendida</p>"},{"location":"es/modules/module-06-advanced-nips/#objetivos-de-aprendizaje","title":"\ud83d\udccb Objetivos de Aprendizaje","text":"<ul> <li>\u2705 Implementar NIP-04 (mensajes cifrados)</li> <li>\u2705 Usar NIP-05 (verificaci\u00f3n de identificadores)</li> <li>\u2705 Implementar NIP-57 (Zaps/Lightning)</li> <li>\u2705 Trabajar con NIP-23 (art\u00edculos de formato largo)</li> <li>\u2705 Usar NIP-51 (listas)</li> </ul>"},{"location":"es/modules/module-06-advanced-nips/#nip-04-mensajes-directos-cifrados","title":"\ud83d\udd10 NIP-04: Mensajes Directos Cifrados","text":"<pre><code>import { nip04 } from 'nostr-tools'\n\n// Cifrar mensaje\nasync function sendDM(recipientPubkey, message, senderPrivkey) {\n  const encrypted = await nip04.encrypt(senderPrivkey, recipientPubkey, message)\n\n  const dmEvent = finishEvent({\n    kind: 4,\n    content: encrypted,\n    tags: [['p', recipientPubkey]],\n    created_at: Math.floor(Date.now() / 1000)\n  }, senderPrivkey)\n\n  return dmEvent\n}\n\n// Descifrar mensaje\nasync function receiveDM(event, recipientPrivkey) {\n  const senderPubkey = event.pubkey\n  const decrypted = await nip04.decrypt(recipientPrivkey, senderPubkey, event.content)\n  return decrypted\n}\n</code></pre>"},{"location":"es/modules/module-06-advanced-nips/#nip-05-verificacion-de-identificadores","title":"\u2705 NIP-05: Verificaci\u00f3n de Identificadores","text":"<pre><code>import { nip05 } from 'nostr-tools'\n\n// Verificar identificador\nasync function verifyNIP05(nip05Address, pubkey) {\n  try {\n    const profile = await nip05.queryProfile(nip05Address)\n    return profile.pubkey === pubkey\n  } catch {\n    return false\n  }\n}\n\n// Ejemplo de uso\nconst isVerified = await verifyNIP05('alice@example.com', publicKey)\nconsole.log(isVerified ? '\u2705 Verificado' : '\u274c No verificado')\n</code></pre>"},{"location":"es/modules/module-06-advanced-nips/#nip-57-zaps-propinas-lightning","title":"\u26a1 NIP-57: Zaps (Propinas Lightning)","text":"<pre><code>// Crear solicitud de Zap\nfunction createZapRequest(recipientPubkey, amount, comment) {\n  return finishEvent({\n    kind: 9734,\n    content: comment,\n    tags: [\n      ['p', recipientPubkey],\n      ['amount', amount.toString()],\n      ['relays', 'wss://relay.damus.io']\n    ],\n    created_at: Math.floor(Date.now() / 1000)\n  }, privateKey)\n}\n</code></pre>"},{"location":"es/modules/module-06-advanced-nips/#nip-23-articulos-de-formato-largo","title":"\ud83d\udcc4 NIP-23: Art\u00edculos de Formato Largo","text":"<pre><code>// Crear art\u00edculo\nconst article = finishEvent({\n  kind: 30023,\n  content: `# Mi Art\u00edculo\n\nEste es mi primer art\u00edculo en Nostr...`,\n  tags: [\n    ['d', 'mi-primer-articulo'],\n    ['title', 'Mi Primer Art\u00edculo'],\n    ['published_at', Math.floor(Date.now() / 1000).toString()],\n    ['t', 'tutorial'],\n    ['t', 'nostr']\n  ],\n  created_at: Math.floor(Date.now() / 1000)\n}, privateKey)\n</code></pre>"},{"location":"es/modules/module-06-advanced-nips/#nip-51-listas","title":"\ud83d\udccb NIP-51: Listas","text":"<pre><code>// Lista de favoritos\nconst bookmarks = finishEvent({\n  kind: 30001,\n  content: '',\n  tags: [\n    ['d', 'bookmarks'],\n    ['e', eventId1, 'wss://relay.damus.io'],\n    ['e', eventId2, 'wss://nos.lol'],\n    ['a', '30023:pubkey:article-id']\n  ],\n  created_at: Math.floor(Date.now() / 1000)\n}, privateKey)\n\n// Lista de silenciados\nconst mutelist = finishEvent({\n  kind: 10000,\n  content: '',\n  tags: [\n    ['p', pubkeyToMute1],\n    ['p', pubkeyToMute2]\n  ],\n  created_at: Math.floor(Date.now() / 1000)\n}, privateKey)\n</code></pre>"},{"location":"es/modules/module-06-advanced-nips/#ejercicios-practicos","title":"\ud83c\udfaf Ejercicios Pr\u00e1cticos","text":"<ol> <li>Implementar mensajes cifrados</li> <li>Agregar verificaci\u00f3n NIP-05</li> <li>Crear sistema de favoritos</li> <li>Construir editor de art\u00edculos</li> </ol>"},{"location":"es/modules/module-06-advanced-nips/#evaluacion-del-modulo-6","title":"\ud83c\udfaf Evaluaci\u00f3n del M\u00f3dulo 6","text":"<ul> <li>[ ] Mensajes directos cifrados funcionando</li> <li>[ ] Verificaci\u00f3n NIP-05 implementada</li> <li>[ ] Sistema de listas funcional</li> <li>[ ] Soporte para art\u00edculos largos</li> </ul> <p>Continuar al M\u00f3dulo 7: Rel\u00e9s en Producci\u00f3n \u2192</p>"},{"location":"es/modules/module-07-production-relays/","title":"M\u00f3dulo 7: Rel\u00e9s en Producci\u00f3n","text":"<p>Visi\u00f3n General del M\u00f3dulo</p> <p>Duraci\u00f3n: 6-8 horas Nivel: Avanzado Prerrequisitos: M\u00f3dulos 1-6 completados Objetivo: Desplegar y operar rel\u00e9s Nostr en producci\u00f3n</p>"},{"location":"es/modules/module-07-production-relays/#objetivos-de-aprendizaje","title":"\ud83d\udccb Objetivos de Aprendizaje","text":"<ul> <li>\u2705 Configurar un rel\u00e9 Nostr</li> <li>\u2705 Implementar almacenamiento en base de datos</li> <li>\u2705 Agregar autenticaci\u00f3n y rate limiting</li> <li>\u2705 Monitorear rendimiento</li> <li>\u2705 Optimizar para escala</li> </ul>"},{"location":"es/modules/module-07-production-relays/#implementaciones-de-reles","title":"\ud83d\ude80 Implementaciones de Rel\u00e9s","text":""},{"location":"es/modules/module-07-production-relays/#opciones-populares","title":"Opciones Populares","text":"<ol> <li>nostr-rs-relay (Rust)</li> <li>Alto rendimiento</li> <li>Bajo uso de recursos</li> <li> <p>Configuraci\u00f3n flexible</p> </li> <li> <p>strfry (C++)</p> </li> <li>Extremadamente r\u00e1pido</li> <li>Dise\u00f1o minimalista</li> <li> <p>Ideal para alto tr\u00e1fico</p> </li> <li> <p>nostream (TypeScript)</p> </li> <li>F\u00e1cil de configurar</li> <li>Buena documentaci\u00f3n</li> <li>Basado en Node.js</li> </ol>"},{"location":"es/modules/module-07-production-relays/#configurar-nostr-rs-relay","title":"\u2699\ufe0f Configurar nostr-rs-relay","text":"<pre><code># Instalar\ngit clone https://github.com/scsibug/nostr-rs-relay\ncd nostr-rs-relay\n\n# Configurar\ncp config.toml.example config.toml\nnano config.toml\n\n# Compilar y ejecutar\ncargo build --release\n./target/release/nostr-rs-relay\n</code></pre>"},{"location":"es/modules/module-07-production-relays/#configuracion-basica","title":"Configuraci\u00f3n B\u00e1sica","text":"<pre><code>[info]\nrelay_url = \"wss://relay.example.com\"\nname = \"Mi Rel\u00e9 Nostr\"\ndescription = \"Un rel\u00e9 comunitario\"\npubkey = \"tu_clave_p\u00fablica_hex\"\n\n[database]\ndata_directory = \"./db\"\n\n[network]\nport = 8080\naddress = \"0.0.0.0\"\n\n[limits]\nmax_event_bytes = 65536\nmax_ws_message_bytes = 131072\nmax_ws_frame_bytes = 131072\nmessages_per_sec = 10\n</code></pre>"},{"location":"es/modules/module-07-production-relays/#base-de-datos","title":"\ud83d\udcbe Base de Datos","text":""},{"location":"es/modules/module-07-production-relays/#postgresql-para-almacenamiento","title":"PostgreSQL para Almacenamiento","text":"<pre><code>-- Crear tabla de eventos\nCREATE TABLE events (\n  id TEXT PRIMARY KEY,\n  pubkey TEXT NOT NULL,\n  created_at INTEGER NOT NULL,\n  kind INTEGER NOT NULL,\n  tags JSONB,\n  content TEXT,\n  sig TEXT NOT NULL\n);\n\n-- \u00cdndices para rendimiento\nCREATE INDEX idx_pubkey ON events(pubkey);\nCREATE INDEX idx_kind ON events(kind);\nCREATE INDEX idx_created_at ON events(created_at DESC);\nCREATE INDEX idx_tags ON events USING gin(tags);\n</code></pre>"},{"location":"es/modules/module-07-production-relays/#autenticacion-nip-42","title":"\ud83d\udd10 Autenticaci\u00f3n (NIP-42)","text":"<pre><code>// Implementar autenticaci\u00f3n de rel\u00e9\nclass AuthenticatedRelay {\n  async handleAuth(ws, event) {\n    // Verificar desaf\u00edo firmado\n    if (verifySignature(event)) {\n      ws.authenticated = true\n      ws.pubkey = event.pubkey\n    }\n  }\n\n  requireAuth(ws) {\n    if (!ws.authenticated) {\n      ws.send(JSON.stringify([\n        'AUTH',\n        'Por favor autent\u00edcate para continuar'\n      ]))\n      return false\n    }\n    return true\n  }\n}\n</code></pre>"},{"location":"es/modules/module-07-production-relays/#rate-limiting","title":"\ud83d\udee1\ufe0f Rate Limiting","text":"<pre><code>class RateLimiter {\n  constructor(maxPerMinute = 60) {\n    this.requests = new Map()\n    this.maxPerMinute = maxPerMinute\n  }\n\n  check(clientId) {\n    const now = Date.now()\n    const requests = this.requests.get(clientId) || []\n\n    // Limpiar solicitudes antiguas\n    const recent = requests.filter(t =&gt; now - t &lt; 60000)\n\n    if (recent.length &gt;= this.maxPerMinute) {\n      return false // Rate limited\n    }\n\n    recent.push(now)\n    this.requests.set(clientId, recent)\n    return true\n  }\n}\n</code></pre>"},{"location":"es/modules/module-07-production-relays/#monitoreo","title":"\ud83d\udcca Monitoreo","text":"<pre><code>class RelayMetrics {\n  constructor() {\n    this.stats = {\n      events_received: 0,\n      events_stored: 0,\n      subscriptions_active: 0,\n      clients_connected: 0\n    }\n  }\n\n  recordEvent() {\n    this.stats.events_received++\n  }\n\n  getStats() {\n    return {\n      ...this.stats,\n      uptime: process.uptime(),\n      memory: process.memoryUsage()\n    }\n  }\n}\n</code></pre>"},{"location":"es/modules/module-07-production-relays/#ejercicios-practicos","title":"\ud83c\udfaf Ejercicios Pr\u00e1cticos","text":"<ol> <li>Desplegar rel\u00e9 en VPS</li> <li>Configurar base de datos</li> <li>Implementar rate limiting</li> <li>Agregar monitoreo b\u00e1sico</li> </ol>"},{"location":"es/modules/module-07-production-relays/#evaluacion-del-modulo-7","title":"\ud83c\udfaf Evaluaci\u00f3n del M\u00f3dulo 7","text":"<ul> <li>[ ] Rel\u00e9 desplegado y corriendo</li> <li>[ ] Base de datos configurada</li> <li>[ ] Autenticaci\u00f3n funcionando</li> <li>[ ] M\u00e9tricas siendo recolectadas</li> </ul> <p>Continuar al M\u00f3dulo 8: Escalado y Rendimiento \u2192</p>"},{"location":"es/modules/module-08-scaling-performance/","title":"M\u00f3dulo 8: Escalado y Rendimiento","text":"<p>Visi\u00f3n General del M\u00f3dulo</p> <p>Duraci\u00f3n: 8-10 horas Nivel: Avanzado Prerrequisitos: M\u00f3dulo 7 completado Objetivo: Escalar rel\u00e9s Nostr para manejar millones de usuarios</p>"},{"location":"es/modules/module-08-scaling-performance/#objetivos-de-aprendizaje","title":"\ud83d\udccb Objetivos de Aprendizaje","text":"<ul> <li>\u2705 Implementar estrategias de escalado horizontal</li> <li>\u2705 Dise\u00f1ar y desplegar capas de cach\u00e9</li> <li>\u2705 Optimizar consultas de base de datos</li> <li>\u2705 Implementar balanceo de carga</li> <li>\u2705 Construir distribuci\u00f3n de eventos estilo CDN</li> <li>\u2705 Monitorear y optimizar cuellos de botella</li> </ul>"},{"location":"es/modules/module-08-scaling-performance/#arquitectura-de-escalado-horizontal","title":"\ud83c\udfd7\ufe0f Arquitectura de Escalado Horizontal","text":"<pre><code>graph TB\n    LB[Balanceador de Carga&lt;br/&gt;HAProxy/Nginx]\n\n    R1[Instancia de Rel\u00e9 1]\n    R2[Instancia de Rel\u00e9 2]\n    R3[Instancia de Rel\u00e9 3]\n\n    REDIS[Cluster Redis&lt;br/&gt;Pub/Sub + Cach\u00e9]\n    PG_MASTER[PostgreSQL Master&lt;br/&gt;Operaciones de Escritura]\n    PG_REPLICA[PostgreSQL R\u00e9plica&lt;br/&gt;Operaciones de Lectura]\n\n    LB --&gt; R1\n    LB --&gt; R2\n    LB --&gt; R3\n\n    R1 --&gt; REDIS\n    R2 --&gt; REDIS\n    R3 --&gt; REDIS\n\n    R1 --&gt; PG_MASTER\n    R2 --&gt; PG_MASTER\n    R3 --&gt; PG_MASTER\n\n    R1 --&gt; PG_REPLICA\n    R2 --&gt; PG_REPLICA\n    R3 --&gt; PG_REPLICA\n\n    PG_MASTER -.-&gt;|Replicaci\u00f3n| PG_REPLICA\n\n    style LB fill:#667eea,stroke:#fff,color:#fff\n    style REDIS fill:#f093fb,stroke:#fff,color:#fff\n    style PG_MASTER fill:#4facfe,stroke:#fff,color:#fff\n    style PG_REPLICA fill:#43e97b,stroke:#fff,color:#fff</code></pre>"},{"location":"es/modules/module-08-scaling-performance/#cache-multi-capa","title":"\ud83d\udcbe Cach\u00e9 Multi-Capa","text":"<pre><code>class MultiLayerCache {\n  constructor() {\n    // L1: Cach\u00e9 en memoria (m\u00e1s r\u00e1pida, m\u00e1s peque\u00f1a)\n    this.l1Cache = new LRU({ max: 10000, ttl: 60000 })\n\n    // L2: Cach\u00e9 Redis (r\u00e1pida, compartida)\n    this.l2Cache = new Redis.Cluster(config.redisNodes)\n  }\n\n  async get(key) {\n    // Intentar L1\n    let value = this.l1Cache.get(key)\n    if (value) return { value, source: 'L1' }\n\n    // Intentar L2\n    value = await this.l2Cache.get(key)\n    if (value) {\n      this.l1Cache.set(key, value)\n      return { value: JSON.parse(value), source: 'L2' }\n    }\n\n    return { value: null, source: 'MISS' }\n  }\n}\n</code></pre>"},{"location":"es/modules/module-08-scaling-performance/#optimizacion-de-base-de-datos","title":"\ud83d\uddc4\ufe0f Optimizaci\u00f3n de Base de Datos","text":"<pre><code>-- Crear \u00edndices de cobertura para consultas comunes\nCREATE INDEX CONCURRENTLY idx_events_kind_created\nON events (kind, created_at DESC)\nINCLUDE (id, pubkey, tags, content, sig);\n\n-- Particionar tablas grandes por tiempo\nCREATE TABLE events_2024_01 PARTITION OF events\nFOR VALUES FROM ('2024-01-01') TO ('2024-02-01');\n\n-- Ajuste de auto-vacuum para tablas de alta escritura\nALTER TABLE events SET (\n  autovacuum_vacuum_scale_factor = 0.01,\n  autovacuum_analyze_scale_factor = 0.01\n);\n</code></pre>"},{"location":"es/modules/module-08-scaling-performance/#pool-de-conexiones","title":"\u26a1 Pool de Conexiones","text":"<pre><code>class OptimizedConnectionPool {\n  constructor(config) {\n    // Pool maestro para escrituras\n    this.masterPool = new Pool({\n      host: config.master.host,\n      max: 20,\n      min: 5,\n      idleTimeoutMillis: 30000,\n      connectionTimeoutMillis: 2000\n    })\n\n    // Pools de r\u00e9plica para lecturas\n    this.replicaPools = config.replicas.map(replica =&gt; \n      new Pool({\n        host: replica.host,\n        max: 50,\n        min: 10\n      })\n    )\n  }\n\n  async write(query, params) {\n    const client = await this.masterPool.connect()\n    try {\n      return await client.query(query, params)\n    } finally {\n      client.release()\n    }\n  }\n\n  async read(query, params) {\n    // Balanceo round-robin entre r\u00e9plicas\n    const pool = this.replicaPools[this.replicaIndex]\n    this.replicaIndex = (this.replicaIndex + 1) % this.replicaPools.length\n\n    const client = await pool.connect()\n    try {\n      return await client.query(query, params)\n    } finally {\n      client.release()\n    }\n  }\n}\n</code></pre>"},{"location":"es/modules/module-08-scaling-performance/#monitoreo-de-rendimiento","title":"\ud83d\udcca Monitoreo de Rendimiento","text":"<pre><code>class PerformanceMonitor {\n  constructor() {\n    this.metrics = {\n      // M\u00e9tricas de latencia\n      queryLatency: new Histogram({\n        name: 'nostr_query_latency_seconds',\n        help: 'Latencia de ejecuci\u00f3n de consultas',\n        buckets: [0.001, 0.005, 0.01, 0.05, 0.1, 0.5, 1]\n      }),\n\n      // M\u00e9tricas de throughput\n      eventsPerSecond: new Gauge({\n        name: 'nostr_events_per_second',\n        help: 'Eventos procesados por segundo'\n      }),\n\n      // M\u00e9tricas de cach\u00e9\n      cacheHitRate: new Gauge({\n        name: 'nostr_cache_hit_rate',\n        help: 'Tasa de aciertos de cach\u00e9',\n        labelNames: ['layer']\n      })\n    }\n  }\n\n  recordQuery(operation, duration) {\n    this.metrics.queryLatency.observe(\n      { operation },\n      duration\n    )\n  }\n}\n</code></pre>"},{"location":"es/modules/module-08-scaling-performance/#pruebas-de-carga","title":"\ud83e\uddea Pruebas de Carga","text":"<pre><code>class RelayLoadTester {\n  constructor(config) {\n    this.relayUrl = config.relayUrl\n    this.concurrentConnections = config.concurrentConnections || 1000\n    this.testDuration = config.testDuration || 60000\n    this.eventRate = config.eventRate || 100\n  }\n\n  async runLoadTest() {\n    console.log(`Iniciando prueba de carga:`)\n    console.log(`- Rel\u00e9: ${this.relayUrl}`)\n    console.log(`- Conexiones: ${this.concurrentConnections}`)\n    console.log(`- Duraci\u00f3n: ${this.testDuration}ms`)\n    console.log(`- Tasa de eventos: ${this.eventRate}/s`)\n\n    const results = await this.executeTest()\n    return this.generateReport(results)\n  }\n}\n</code></pre>"},{"location":"es/modules/module-08-scaling-performance/#ejercicios-practicos","title":"\ud83c\udfaf Ejercicios Pr\u00e1cticos","text":""},{"location":"es/modules/module-08-scaling-performance/#ejercicio-1-implementar-escalado-horizontal","title":"Ejercicio 1: Implementar Escalado Horizontal","text":"<ol> <li>Desplegar 3 instancias de rel\u00e9</li> <li>Configurar Redis Pub/Sub</li> <li>Configurar balanceador HAProxy</li> <li>Probar escenarios de failover</li> </ol>"},{"location":"es/modules/module-08-scaling-performance/#ejercicio-2-construir-cache-multi-capa","title":"Ejercicio 2: Construir Cach\u00e9 Multi-Capa","text":"<ol> <li>Configurar cach\u00e9 LRU en memoria (L1)</li> <li>Configurar cluster Redis (L2)</li> <li>Implementar patr\u00f3n cache-aside</li> <li>Medir tasas de acierto de cach\u00e9</li> </ol>"},{"location":"es/modules/module-08-scaling-performance/#ejercicio-3-optimizar-rendimiento-de-base-de-datos","title":"Ejercicio 3: Optimizar Rendimiento de Base de Datos","text":"<ol> <li>Analizar consultas lentas con EXPLAIN</li> <li>Agregar \u00edndices de cobertura</li> <li>Implementar r\u00e9plicas de lectura</li> <li>Configurar pool de conexiones</li> </ol>"},{"location":"es/modules/module-08-scaling-performance/#ejercicio-4-pruebas-de-carga","title":"Ejercicio 4: Pruebas de Carga","text":"<ol> <li>Ejecutar prueba con 1000 conexiones concurrentes</li> <li>Medir latencia en diferentes niveles de carga</li> <li>Identificar cuellos de botella</li> <li>Optimizar basado en resultados</li> </ol>"},{"location":"es/modules/module-08-scaling-performance/#cuestionario-del-modulo-8","title":"\ud83d\udcdd Cuestionario del M\u00f3dulo 8","text":"<ol> <li> <p>\u00bfCu\u00e1l es el beneficio principal del dise\u00f1o de rel\u00e9 sin estado? Respuesta    Permite escalado horizontal al eliminar dependencia de estado local. Cualquier instancia puede manejar cualquier solicitud, habilitando balanceo de carga y f\u00e1cil adici\u00f3n/eliminaci\u00f3n de instancias.     </p> </li> <li> <p>\u00bfPor qu\u00e9 usar m\u00faltiples capas de cach\u00e9 (L1, L2)? Respuesta    Cada capa equilibra velocidad vs capacidad: L1 (en memoria) es m\u00e1s r\u00e1pida pero m\u00e1s peque\u00f1a, L2 (Redis) es r\u00e1pida y compartida entre instancias. El cach\u00e9 multi-capa maximiza la tasa de acierto minimizando latencia.     </p> </li> <li> <p>\u00bfCu\u00e1l es la ventaja de r\u00e9plicas de lectura sobre escalar solo el maestro? Respuesta    Las r\u00e9plicas de lectura descargan consultas del maestro, permitiendo que el maestro se enfoque en escrituras. Esto proporciona mejor rendimiento de escritura, escalado horizontal para lecturas y distribuci\u00f3n geogr\u00e1fica.     </p> </li> </ol>"},{"location":"es/modules/module-08-scaling-performance/#evaluacion-del-modulo-8","title":"\ud83c\udfaf Evaluaci\u00f3n del M\u00f3dulo 8","text":"<p>Antes de continuar, aseg\u00farate de haber:</p> <ul> <li>[ ] Desplegado un cluster de rel\u00e9s escalado horizontalmente</li> <li>[ ] Implementado cach\u00e9 multi-capa con tasas de acierto medibles</li> <li>[ ] Configurado r\u00e9plicas de lectura de base de datos y pool de conexiones</li> <li>[ ] Configurado balanceo de carga con failover</li> <li>[ ] Implementado monitoreo completo de rendimiento</li> <li>[ ] Conducido pruebas de carga y optimizado cuellos de botella</li> <li>[ ] Documentado arquitectura de escalado y runbooks</li> <li>[ ] Alcanzado m\u00e9tricas de rendimiento objetivo (latencia p95 &lt; 100ms)</li> </ul>"},{"location":"es/modules/module-08-scaling-performance/#recursos-adicionales","title":"\ud83d\udcda Recursos Adicionales","text":"<ul> <li>Replicaci\u00f3n PostgreSQL</li> <li>Tutorial Redis Cluster</li> <li>Gu\u00eda de Configuraci\u00f3n HAProxy</li> <li>Mejores Pr\u00e1cticas Prometheus</li> <li>Pool de Conexiones de Base de Datos</li> </ul>"},{"location":"es/modules/module-08-scaling-performance/#discusion-comunitaria","title":"\ud83d\udcac Discusi\u00f3n Comunitaria","text":"<p>\u00danete a nuestro Discord para discutir el M\u00f3dulo 8: - Comparte tus estrategias de escalado y resultados - Obt\u00e9n ayuda con optimizaci\u00f3n de rendimiento - Discute metodolog\u00edas de pruebas de carga - Colabora en benchmarking</p> <p>\u00a1Felicitaciones!</p> <p>\u00a1Has dominado el escalado y optimizaci\u00f3n de rendimiento para rel\u00e9s Nostr! Ahora puedes manejar millones de usuarios con rendimiento \u00f3ptimo.</p> <p>\u2190 Volver a la Descripci\u00f3n General de M\u00f3dulos</p>"},{"location":"es/tutorials/relay-communication/","title":"Comunicaci\u00f3n con Rel\u00e9s","text":"<p>Lo Que Aprender\u00e1s</p> <p>En este tutorial, dominar\u00e1s:</p> <ul> <li>C\u00f3mo funcionan los rel\u00e9s Nostr y su papel en la red</li> <li>Patrones de comunicaci\u00f3n WebSocket</li> <li>Filtros de suscripci\u00f3n y actualizaciones en tiempo real</li> <li>Publicaci\u00f3n de eventos a m\u00faltiples rel\u00e9s</li> <li>Manejo de fallas de conexi\u00f3n y reintentos</li> <li>Estrategias de selecci\u00f3n de rel\u00e9s</li> </ul> <p>Prerrequisitos</p> <ul> <li>Comprensi\u00f3n de eventos Nostr</li> <li>Conocimiento b\u00e1sico de WebSocket</li> <li>Patrones de async/await en JavaScript</li> </ul>"},{"location":"es/tutorials/relay-communication/#entendiendo-los-reles","title":"Entendiendo los Rel\u00e9s","text":"<p>Los rel\u00e9s son la columna vertebral de la red Nostr. Son servidores simples que:</p> <ul> <li>Almacenan eventos enviados por clientes</li> <li>Sirven eventos a clientes bas\u00e1ndose en filtros</li> <li>Retransmiten eventos entre clientes en tiempo real</li> <li>No mantienen cuentas de usuario - solo eventos</li> </ul> <p>Piensa en los rel\u00e9s como bases de datos inteligentes que hablan un protocolo com\u00fan.</p>"},{"location":"es/tutorials/relay-communication/#el-protocolo-de-reles","title":"El Protocolo de Rel\u00e9s","text":"<p>Nostr usa WebSockets para comunicaci\u00f3n en tiempo real entre clientes y rel\u00e9s. Todos los mensajes son arrays JSON con formatos espec\u00edficos:</p>"},{"location":"es/tutorials/relay-communication/#mensajes-de-cliente-a-rele","title":"Mensajes de Cliente a Rel\u00e9","text":"Tipo de Mensaje Formato Prop\u00f3sito <code>EVENT</code> <code>[\"EVENT\", &lt;event&gt;]</code> Publicar un evento <code>REQ</code> <code>[\"REQ\", &lt;sub_id&gt;, &lt;filters&gt;...]</code> Suscribirse a eventos <code>CLOSE</code> <code>[\"CLOSE\", &lt;sub_id&gt;]</code> Cerrar una suscripci\u00f3n <code>AUTH</code> <code>[\"AUTH\", &lt;event&gt;]</code> Autenticarse con el rel\u00e9 <code>COUNT</code> <code>[\"COUNT\", &lt;sub_id&gt;, &lt;filters&gt;...]</code> Contar eventos coincidentes"},{"location":"es/tutorials/relay-communication/#mensajes-de-rele-a-cliente","title":"Mensajes de Rel\u00e9 a Cliente","text":"Tipo de Mensaje Formato Prop\u00f3sito <code>EVENT</code> <code>[\"EVENT\", &lt;sub_id&gt;, &lt;event&gt;]</code> Enviar evento al cliente <code>EOSE</code> <code>[\"EOSE\", &lt;sub_id&gt;]</code> Fin de eventos almacenados <code>OK</code> <code>[\"OK\", &lt;event_id&gt;, &lt;true\\|false&gt;, &lt;message&gt;]</code> Resultado de publicaci\u00f3n de evento <code>NOTICE</code> <code>[\"NOTICE\", &lt;message&gt;]</code> Mensaje legible para humanos <code>CLOSED</code> <code>[\"CLOSED\", &lt;sub_id&gt;, &lt;message&gt;]</code> Suscripci\u00f3n cerrada <code>AUTH</code> <code>[\"AUTH\", &lt;challenge&gt;]</code> Desaf\u00edo de autenticaci\u00f3n <code>COUNT</code> <code>[\"COUNT\", &lt;sub_id&gt;, &lt;count&gt;]</code> Respuesta de conteo de eventos"},{"location":"es/tutorials/relay-communication/#conectando-a-reles","title":"Conectando a Rel\u00e9s","text":"<p>Comencemos con una conexi\u00f3n b\u00e1sica a rel\u00e9:</p> Conexi\u00f3n B\u00e1sicaConexi\u00f3n con Reintentos <pre><code>import { relayInit } from 'nostr-tools'\n\nasync function conectarARel\u00e9(url) {\n    const relay = relayInit(url)\n\n    relay.on('connect', () =&gt; {\n        console.log(`Conectado a ${url}`)\n    })\n\n    relay.on('error', () =&gt; {\n        console.error(`Fall\u00f3 la conexi\u00f3n a ${url}`)\n    })\n\n    relay.on('disconnect', () =&gt; {\n        console.log(`Desconectado de ${url}`)\n    })\n\n    try {\n        await relay.connect()\n        return relay\n    } catch (error) {\n        console.error('Fall\u00f3 la conexi\u00f3n:', error)\n        throw error\n    }\n}\n\n// Uso\nconst relay = await conectarARel\u00e9('wss://relay.damus.io')\n</code></pre> <pre><code>async function conectarConReintentos(url, maxIntentos = 3) {\n    let intentos = 0\n\n    while (intentos &lt; maxIntentos) {\n        try {\n            const relay = relayInit(url)\n\n            await new Promise((resolve, reject) =&gt; {\n                const timeout = setTimeout(() =&gt; {\n                    reject(new Error('Timeout de conexi\u00f3n'))\n                }, 5000)\n\n                relay.on('connect', () =&gt; {\n                    clearTimeout(timeout)\n                    resolve()\n                })\n\n                relay.on('error', () =&gt; {\n                    clearTimeout(timeout)\n                    reject(new Error('Error de conexi\u00f3n'))\n                })\n\n                relay.connect()\n            })\n\n            console.log(`Conectado a ${url} en intento ${intentos + 1}`)\n            return relay\n\n        } catch (error) {\n            intentos++\n            console.log(`Intento ${intentos} fall\u00f3 para ${url}:`, error.message)\n\n            if (intentos &lt; maxIntentos) {\n                const delay = Math.min(1000 * Math.pow(2, intentos), 10000)\n                console.log(`Reintentando en ${delay}ms...`)\n                await new Promise(resolve =&gt; setTimeout(resolve, delay))\n            }\n        }\n    }\n\n    throw new Error(`No se pudo conectar a ${url} despu\u00e9s de ${maxIntentos} intentos`)\n}\n</code></pre>"},{"location":"es/tutorials/relay-communication/#suscribiendose-a-eventos","title":"Suscribi\u00e9ndose a Eventos","text":"<p>Las suscripciones son el coraz\u00f3n de la comunicaci\u00f3n en tiempo real en Nostr:</p> Suscripci\u00f3n B\u00e1sicaFiltros AvanzadosFiltros en Tiempo Real <pre><code>function suscribirseANotas(relay, pubkey = null) {\n    const filtros = {\n        kinds: [1], // Solo notas de texto\n        limit: 50   // M\u00e1ximo 50 eventos\n    }\n\n    // Si se proporciona pubkey, filtrar por autor\n    if (pubkey) {\n        filtros.authors = [pubkey]\n    }\n\n    const sub = relay.sub([filtros])\n\n    sub.on('event', (event) =&gt; {\n        console.log('Nueva nota recibida:', event.content)\n    })\n\n    sub.on('eose', () =&gt; {\n        console.log('Fin de eventos almacenados')\n    })\n\n    return sub\n}\n\n// Uso\nconst subscription = suscribirseANotas(relay)\n\n// Cerrar suscripci\u00f3n cuando termine\nsetTimeout(() =&gt; {\n    subscription.unsub()\n}, 60000) // Cerrar despu\u00e9s de 1 minuto\n</code></pre> <pre><code>function crearFiltrosAvanzados() {\n    return [\n        // Feed personal - solo autores que sigo\n        {\n            kinds: [1],\n            authors: ['pubkey1', 'pubkey2', 'pubkey3'],\n            limit: 20,\n            since: Math.floor(Date.now() / 1000) - 3600 // \u00daltima hora\n        },\n\n        // Menciones - eventos que me mencionan\n        {\n            kinds: [1],\n            '#p': ['mi-pubkey'],\n            limit: 10\n        },\n\n        // Hashtags espec\u00edficos\n        {\n            kinds: [1],\n            '#t': ['nostr', 'bitcoin', 'descentralizado'],\n            limit: 15,\n            since: Math.floor(Date.now() / 1000) - 86400 // \u00daltimo d\u00eda\n        },\n\n        // Reacciones a mis notas\n        {\n            kinds: [7], // Reacciones\n            '#e': ['id-de-mi-nota'],\n            limit: 100\n        }\n    ]\n}\n\nfunction suscripcionMultiple(relay) {\n    const filtros = crearFiltrosAvanzados()\n    const sub = relay.sub(filtros)\n\n    sub.on('event', (event) =&gt; {\n        switch (event.kind) {\n            case 1: // Nota de texto\n                manejarNota(event)\n                break\n            case 7: // Reacci\u00f3n\n                manejarReaccion(event)\n                break\n            default:\n                console.log('Evento no manejado:', event)\n        }\n    })\n\n    return sub\n}\n\nfunction manejarNota(event) {\n    // Verificar si es menci\u00f3n\n    const menciones = event.tags.filter(tag =&gt; tag[0] === 'p')\n    if (menciones.some(tag =&gt; tag[1] === miPubkey)) {\n        console.log('\ud83d\udce2 Nueva menci\u00f3n:', event.content)\n    } else {\n        console.log('\ud83d\udcdd Nueva nota:', event.content)\n    }\n}\n\nfunction manejarReaccion(event) {\n    const emoji = event.content || '\ud83d\udc4d'\n    console.log(`${emoji} Reacci\u00f3n recibida`)\n}\n</code></pre> <pre><code>class GestorSuscripciones {\n    constructor(relay) {\n        this.relay = relay\n        this.suscripciones = new Map()\n    }\n\n    suscribirseAHashtag(hashtag, callback) {\n        const subId = `hashtag-${hashtag}`\n\n        // Cerrar suscripci\u00f3n existente si existe\n        if (this.suscripciones.has(subId)) {\n            this.suscripciones.get(subId).unsub()\n        }\n\n        const sub = this.relay.sub([{\n            kinds: [1],\n            '#t': [hashtag],\n            limit: 20,\n            since: Math.floor(Date.now() / 1000)\n        }])\n\n        sub.on('event', callback)\n        this.suscripciones.set(subId, sub)\n\n        return sub\n    }\n\n    suscribirseAAutor(pubkey, callback) {\n        const subId = `autor-${pubkey}`\n\n        if (this.suscripciones.has(subId)) {\n            this.suscripciones.get(subId).unsub()\n        }\n\n        const sub = this.relay.sub([{\n            kinds: [1, 6, 7], // Notas, reposts, reacciones\n            authors: [pubkey],\n            limit: 50\n        }])\n\n        sub.on('event', callback)\n        this.suscripciones.set(subId, sub)\n\n        return sub\n    }\n\n    cerrarTodas() {\n        for (const [id, sub] of this.suscripciones) {\n            sub.unsub()\n        }\n        this.suscripciones.clear()\n    }\n}\n\n// Uso\nconst gestor = new GestorSuscripciones(relay)\n\ngestor.suscribirseAHashtag('nostr', (event) =&gt; {\n    console.log('Nuevo post sobre Nostr:', event.content)\n})\n</code></pre>"},{"location":"es/tutorials/relay-communication/#publicando-eventos","title":"Publicando Eventos","text":"<p>La publicaci\u00f3n de eventos requiere manejo cuidadoso de errores y confirmaciones:</p> Publicaci\u00f3n B\u00e1sicaPublicaci\u00f3n con Validaci\u00f3nPublicaci\u00f3n a M\u00faltiples Rel\u00e9s <pre><code>import { finishEvent } from 'nostr-tools'\n\nasync function publicarNota(relay, contenido, privateKey) {\n    try {\n        const evento = finishEvent({\n            kind: 1,\n            created_at: Math.floor(Date.now() / 1000),\n            tags: [],\n            content: contenido,\n        }, privateKey)\n\n        const pub = relay.publish(evento)\n\n        pub.on('ok', () =&gt; {\n            console.log(`\u2705 Evento publicado exitosamente: ${evento.id}`)\n        })\n\n        pub.on('failed', (reason) =&gt; {\n            console.error(`\u274c Fall\u00f3 la publicaci\u00f3n: ${reason}`)\n        })\n\n        return evento\n\n    } catch (error) {\n        console.error('Error creando evento:', error)\n        throw error\n    }\n}\n\n// Uso\nawait publicarNota(relay, '\u00a1Hola Nostr!', miPrivateKey)\n</code></pre> <pre><code>async function publicarConValidacion(relay, contenido, privateKey) {\n    // Validaciones previas\n    if (!contenido || contenido.trim().length === 0) {\n        throw new Error('El contenido no puede estar vac\u00edo')\n    }\n\n    if (contenido.length &gt; 5000) {\n        throw new Error('Contenido demasiado largo (m\u00e1x 5000 caracteres)')\n    }\n\n    if (relay.status !== 1) {\n        throw new Error('Rel\u00e9 no conectado')\n    }\n\n    try {\n        const evento = finishEvent({\n            kind: 1,\n            created_at: Math.floor(Date.now() / 1000),\n            tags: extraerHashtags(contenido),\n            content: contenido.trim(),\n        }, privateKey)\n\n        return new Promise((resolve, reject) =&gt; {\n            const pub = relay.publish(evento)\n            const timeout = setTimeout(() =&gt; {\n                reject(new Error('Timeout de publicaci\u00f3n'))\n            }, 10000)\n\n            pub.on('ok', () =&gt; {\n                clearTimeout(timeout)\n                resolve(evento)\n            })\n\n            pub.on('failed', (reason) =&gt; {\n                clearTimeout(timeout)\n                reject(new Error(`Publicaci\u00f3n fall\u00f3: ${reason}`))\n            })\n        })\n\n    } catch (error) {\n        console.error('Error en publicaci\u00f3n:', error)\n        throw error\n    }\n}\n\nfunction extraerHashtags(contenido) {\n    const hashtags = contenido.match(/#\\w+/g) || []\n    return hashtags.map(tag =&gt; ['t', tag.slice(1).toLowerCase()])\n}\n</code></pre> <pre><code>class PublicadorMultiRel\u00e9 {\n    constructor(rel\u00e9s) {\n        this.rel\u00e9s = rel\u00e9s\n    }\n\n    async publicar(evento) {\n        const resultados = await Promise.allSettled(\n            this.rel\u00e9s.map(relay =&gt; this.publicarARel\u00e9(relay, evento))\n        )\n\n        const exitosos = resultados.filter(r =&gt; r.status === 'fulfilled').length\n        const fallidos = resultados.filter(r =&gt; r.status === 'rejected').length\n\n        console.log(`\ud83d\udcca Publicaci\u00f3n: ${exitosos} exitosos, ${fallidos} fallidos`)\n\n        if (exitosos === 0) {\n            throw new Error('Fall\u00f3 publicaci\u00f3n en todos los rel\u00e9s')\n        }\n\n        return {\n            evento,\n            exitosos,\n            fallidos,\n            resultados\n        }\n    }\n\n    async publicarARel\u00e9(relay, evento) {\n        if (relay.status !== 1) {\n            throw new Error(`Rel\u00e9 ${relay.url} no conectado`)\n        }\n\n        return new Promise((resolve, reject) =&gt; {\n            const pub = relay.publish(evento)\n            const timeout = setTimeout(() =&gt; {\n                reject(new Error(`Timeout en ${relay.url}`))\n            }, 5000)\n\n            pub.on('ok', () =&gt; {\n                clearTimeout(timeout)\n                resolve(relay.url)\n            })\n\n            pub.on('failed', (reason) =&gt; {\n                clearTimeout(timeout)\n                reject(new Error(`${relay.url}: ${reason}`))\n            })\n        })\n    }\n}\n\n// Uso\nconst publicador = new PublicadorMultiRel\u00e9(misRel\u00e9s)\nconst resultado = await publicador.publicar(miEvento)\n</code></pre>"},{"location":"es/tutorials/relay-communication/#gestion-de-multiples-reles","title":"Gesti\u00f3n de M\u00faltiples Rel\u00e9s","text":"<p>Para una experiencia robusta, necesitas gestionar m\u00faltiples rel\u00e9s:</p> Pool de Rel\u00e9s <pre><code>class PoolRel\u00e9s {\n    constructor() {\n        this.rel\u00e9s = new Map()\n        this.urlsRel\u00e9s = [\n            'wss://relay.damus.io',\n            'wss://nos.lol',\n            'wss://relay.snort.social',\n            'wss://relay.nostr.band',\n            'wss://nostr.wine'\n        ]\n    }\n\n    async inicializar() {\n        const promesasConexi\u00f3n = this.urlsRel\u00e9s.map(url =&gt; \n            this.conectarRel\u00e9(url).catch(error =&gt; {\n                console.warn(`Fall\u00f3 conexi\u00f3n a ${url}:`, error.message)\n                return null\n            })\n        )\n\n        const resultados = await Promise.allSettled(promesasConexi\u00f3n)\n        const conectados = resultados.filter(r =&gt; r.status === 'fulfilled' &amp;&amp; r.value)\n\n        console.log(`Conectado a ${conectados.length}/${this.urlsRel\u00e9s.length} rel\u00e9s`)\n\n        if (conectados.length === 0) {\n            throw new Error('No se pudo conectar a ning\u00fan rel\u00e9')\n        }\n    }\n\n    async conectarRel\u00e9(url) {\n        try {\n            const relay = relayInit(url)\n\n            relay.on('disconnect', () =&gt; {\n                console.log(`Desconectado de ${url}, reintentando...`)\n                this.reconectar(url)\n            })\n\n            await relay.connect()\n            this.rel\u00e9s.set(url, {\n                relay,\n                conectado: true,\n                ultimaActividad: Date.now(),\n                errores: 0\n            })\n\n            return relay\n\n        } catch (error) {\n            console.error(`Error conectando a ${url}:`, error)\n            throw error\n        }\n    }\n\n    async reconectar(url) {\n        const info = this.rel\u00e9s.get(url)\n        if (info) {\n            info.conectado = false\n            info.errores++\n\n            // Backoff exponencial\n            const delay = Math.min(1000 * Math.pow(2, info.errores), 30000)\n\n            setTimeout(async () =&gt; {\n                try {\n                    await this.conectarRel\u00e9(url)\n                    info.errores = 0\n                    console.log(`Reconectado a ${url}`)\n                } catch (error) {\n                    console.error(`Fall\u00f3 reconexi\u00f3n a ${url}:`, error)\n                    this.reconectar(url)\n                }\n            }, delay)\n        }\n    }\n\n    getRel\u00e9sSaludables() {\n        return Array.from(this.rel\u00e9s.values())\n            .filter(info =&gt; info.conectado &amp;&amp; info.relay.status === 1)\n            .map(info =&gt; info.relay)\n    }\n\n    async publicarATodos(evento) {\n        const rel\u00e9s = this.getRel\u00e9sSaludables()\n\n        if (rel\u00e9s.length === 0) {\n            throw new Error('No hay rel\u00e9s disponibles')\n        }\n\n        const promesas = rel\u00e9s.map(relay =&gt; {\n            return new Promise((resolve) =&gt; {\n                const pub = relay.publish(evento)\n                pub.on('ok', () =&gt; resolve({ relay: relay.url, \u00e9xito: true }))\n                pub.on('failed', (reason) =&gt; resolve({ relay: relay.url, \u00e9xito: false, error: reason }))\n            })\n        })\n\n        const resultados = await Promise.all(promesas)\n        return resultados\n    }\n\n    suscribirseATodos(filtros, callback) {\n        const rel\u00e9s = this.getRel\u00e9sSaludables()\n        const suscripciones = []\n\n        for (const relay of rel\u00e9s) {\n            const sub = relay.sub(filtros)\n            sub.on('event', (event) =&gt; {\n                callback(event, relay.url)\n            })\n            suscripciones.push(sub)\n        }\n\n        return suscripciones\n    }\n\n    cerrarTodo() {\n        for (const [url, info] of this.rel\u00e9s) {\n            try {\n                info.relay.close()\n            } catch (error) {\n                console.error(`Error cerrando ${url}:`, error)\n            }\n        }\n        this.rel\u00e9s.clear()\n    }\n}\n\n// Uso\nconst pool = new PoolRel\u00e9s()\nawait pool.inicializar()\n\n// Publicar a todos los rel\u00e9s\nconst resultados = await pool.publicarATodos(miEvento)\nconsole.log('Resultados de publicaci\u00f3n:', resultados)\n</code></pre>"},{"location":"es/tutorials/relay-communication/#manejo-de-eventos-duplicados","title":"Manejo de Eventos Duplicados","text":"<p>Al usar m\u00faltiples rel\u00e9s, recibir\u00e1s eventos duplicados:</p> Deduplicaci\u00f3n <pre><code>class DeduplicadorEventos {\n    constructor() {\n        this.eventosVistos = new Set()\n        this.limpiarIntervalo = setInterval(() =&gt; {\n            this.limpiarCache()\n        }, 300000) // Limpiar cada 5 minutos\n    }\n\n    esNuevo(evento) {\n        if (this.eventosVistos.has(evento.id)) {\n            return false\n        }\n\n        this.eventosVistos.add(evento.id)\n        return true\n    }\n\n    limpiarCache() {\n        // Mantener solo los \u00faltimos 10,000 eventos\n        if (this.eventosVistos.size &gt; 10000) {\n            const array = Array.from(this.eventosVistos)\n            this.eventosVistos = new Set(array.slice(-5000))\n        }\n    }\n\n    destruir() {\n        clearInterval(this.limpiarIntervalo)\n        this.eventosVistos.clear()\n    }\n}\n\n// Uso con m\u00faltiples rel\u00e9s\nconst deduplicador = new DeduplicadorEventos()\n\npool.suscribirseATodos([{ kinds: [1], limit: 50 }], (evento, relayUrl) =&gt; {\n    if (deduplicador.esNuevo(evento)) {\n        console.log(`Nuevo evento \u00fanico de ${relayUrl}:`, evento.content)\n        procesarEvento(evento)\n    }\n})\n</code></pre>"},{"location":"es/tutorials/relay-communication/#monitoreo-de-salud-de-reles","title":"Monitoreo de Salud de Rel\u00e9s","text":"Monitor de Rel\u00e9s <pre><code>class MonitorRel\u00e9s {\n    constructor(pool) {\n        this.pool = pool\n        this.estad\u00edsticas = new Map()\n        this.iniciarMonitoreo()\n    }\n\n    iniciarMonitoreo() {\n        setInterval(() =&gt; {\n            this.verificarSalud()\n        }, 30000) // Verificar cada 30 segundos\n    }\n\n    async verificarSalud() {\n        for (const [url, info] of this.pool.rel\u00e9s) {\n            const stats = this.obtenerEstad\u00edsticas(url)\n\n            if (info.conectado) {\n                // Enviar ping para verificar latencia\n                const inicio = Date.now()\n                try {\n                    await this.ping(info.relay)\n                    stats.latencia = Date.now() - inicio\n                    stats.disponibilidad = Math.min(stats.disponibilidad + 0.1, 1.0)\n                } catch (error) {\n                    stats.erroresConsecutivos++\n                    stats.disponibilidad = Math.max(stats.disponibilidad - 0.2, 0.0)\n                }\n            } else {\n                stats.disponibilidad = Math.max(stats.disponibilidad - 0.1, 0.0)\n            }\n\n            this.evaluarCalidad(url, stats)\n        }\n    }\n\n    async ping(relay) {\n        return new Promise((resolve, reject) =&gt; {\n            const sub = relay.sub([{ kinds: [1], limit: 1 }])\n            const timeout = setTimeout(() =&gt; {\n                sub.unsub()\n                reject(new Error('Ping timeout'))\n            }, 5000)\n\n            sub.on('eose', () =&gt; {\n                clearTimeout(timeout)\n                sub.unsub()\n                resolve()\n            })\n        })\n    }\n\n    obtenerEstad\u00edsticas(url) {\n        if (!this.estad\u00edsticas.has(url)) {\n            this.estad\u00edsticas.set(url, {\n                latencia: 0,\n                disponibilidad: 1.0,\n                erroresConsecutivos: 0,\n                calidad: 'buena'\n            })\n        }\n        return this.estad\u00edsticas.get(url)\n    }\n\n    evaluarCalidad(url, stats) {\n        let calidad = 'buena'\n\n        if (stats.disponibilidad &lt; 0.5 || stats.erroresConsecutivos &gt; 3) {\n            calidad = 'mala'\n        } else if (stats.disponibilidad &lt; 0.8 || stats.latencia &gt; 2000) {\n            calidad = 'regular'\n        }\n\n        if (stats.calidad !== calidad) {\n            console.log(`\ud83d\udcca Calidad de ${url} cambi\u00f3 a: ${calidad}`)\n            stats.calidad = calidad\n        }\n    }\n\n    obtenerMejoresRel\u00e9s(cantidad = 3) {\n        return Array.from(this.estad\u00edsticas.entries())\n            .filter(([url, stats]) =&gt; stats.calidad !== 'mala')\n            .sort(([,a], [,b]) =&gt; {\n                // Ordenar por disponibilidad y luego por latencia\n                if (a.disponibilidad !== b.disponibilidad) {\n                    return b.disponibilidad - a.disponibilidad\n                }\n                return a.latencia - b.latencia\n            })\n            .slice(0, cantidad)\n            .map(([url]) =&gt; url)\n    }\n\n    mostrarEstad\u00edsticas() {\n        console.table(\n            Array.from(this.estad\u00edsticas.entries()).map(([url, stats]) =&gt; ({\n                url,\n                disponibilidad: `${(stats.disponibilidad * 100).toFixed(1)}%`,\n                latencia: `${stats.latencia}ms`,\n                calidad: stats.calidad,\n                errores: stats.erroresConsecutivos\n            }))\n        )\n    }\n}\n\n// Uso\nconst monitor = new MonitorRel\u00e9s(pool)\n\n// Mostrar estad\u00edsticas cada minuto\nsetInterval(() =&gt; {\n    monitor.mostrarEstad\u00edsticas()\n    console.log('Mejores rel\u00e9s:', monitor.obtenerMejoresRel\u00e9s())\n}, 60000)\n</code></pre>"},{"location":"es/tutorials/relay-communication/#mejores-practicas","title":"Mejores Pr\u00e1cticas","text":"<p>Mejores Pr\u00e1cticas de Comunicaci\u00f3n con Rel\u00e9s</p> <ol> <li>Usa M\u00faltiples Rel\u00e9s: Nunca dependas de un solo rel\u00e9</li> <li>Maneja Fallas Graciosamente: Siempre ten mecanismos de respaldo</li> <li>Monitorea Salud: Rastrea el rendimiento de rel\u00e9s y cambia cuando sea necesario</li> <li>Deduplica Eventos: Maneja el mismo evento de m\u00faltiples rel\u00e9s</li> <li>Limita Suscripciones: No sobrecargues rel\u00e9s con demasiados filtros</li> <li>Cierra Suscripciones No Usadas: Limpia cuando termines</li> <li>Respeta L\u00edmites de Velocidad: Verifica la informaci\u00f3n del rel\u00e9 para limitaciones</li> </ol> <p>Errores Comunes</p> <ul> <li>No manejar desconexiones: Los rel\u00e9s pueden desconectarse</li> <li>Olvidar cancelar suscripciones: Puede llevar a p\u00e9rdidas de memoria</li> <li>Demasiadas suscripciones concurrentes: Puede abrumar clientes</li> <li>Ignorar limitaciones del rel\u00e9: Verifica max_subscriptions y otros l\u00edmites</li> <li>No validar eventos: Siempre verifica firmas y formato</li> </ul>"},{"location":"es/tutorials/relay-communication/#ejemplo-completo-cliente-de-chat","title":"Ejemplo Completo: Cliente de Chat","text":"<p>Aqu\u00ed hay un ejemplo completo que combina todos los conceptos:</p> Cliente de Chat <pre><code>class ClienteChat {\n    constructor() {\n        this.pool = new PoolRel\u00e9s()\n        this.deduplicador = new DeduplicadorEventos()\n        this.monitor = new MonitorRel\u00e9s(this.pool)\n        this.suscripciones = []\n    }\n\n    async inicializar(privateKey, canales = ['general']) {\n        this.privateKey = privateKey\n        this.publicKey = getPublicKey(privateKey)\n\n        await this.pool.inicializar()\n        this.configurarSuscripciones(canales)\n\n        console.log('\ud83d\udcac Cliente de chat inicializado')\n    }\n\n    configurarSuscripciones(canales) {\n        // Suscribirse a mensajes de canales\n        const filtrosCanal = canales.map(canal =&gt; ({\n            kinds: [42], // Mensajes de canal\n            '#t': [canal],\n            limit: 50,\n            since: Math.floor(Date.now() / 1000) - 3600\n        }))\n\n        // Suscribirse a menciones directas\n        const filtroMenciones = {\n            kinds: [1, 42],\n            '#p': [this.publicKey],\n            limit: 20\n        }\n\n        const subs = this.pool.suscribirseATodos(\n            [...filtrosCanal, filtroMenciones],\n            (evento, relayUrl) =&gt; {\n                if (this.deduplicador.esNuevo(evento)) {\n                    this.procesarMensaje(evento)\n                }\n            }\n        )\n\n        this.suscripciones = subs\n    }\n\n    procesarMensaje(evento) {\n        const timestamp = new Date(evento.created_at * 1000).toLocaleTimeString()\n        const autor = evento.pubkey.slice(0, 8) + '...'\n\n        if (evento.kind === 42) {\n            // Mensaje de canal\n            const canal = evento.tags.find(tag =&gt; tag[0] === 't')?.[1] || 'desconocido'\n            console.log(`[${timestamp}] #${canal} ${autor}: ${evento.content}`)\n        } else {\n            // Menci\u00f3n directa\n            console.log(`[${timestamp}] \ud83d\udce2 ${autor}: ${evento.content}`)\n        }\n    }\n\n    async enviarMensaje(contenido, canal = 'general') {\n        const evento = finishEvent({\n            kind: 42,\n            created_at: Math.floor(Date.now() / 1000),\n            tags: [['t', canal]],\n            content: contenido,\n        }, this.privateKey)\n\n        try {\n            const resultados = await this.pool.publicarATodos(evento)\n            const exitosos = resultados.filter(r =&gt; r.\u00e9xito).length\n            console.log(`\ud83d\udce4 Mensaje enviado a ${exitosos} rel\u00e9s`)\n            return true\n        } catch (error) {\n            console.error('\u274c Error enviando mensaje:', error)\n            return false\n        }\n    }\n\n    async mencionar(pubkey, contenido) {\n        const evento = finishEvent({\n            kind: 1,\n            created_at: Math.floor(Date.now() / 1000),\n            tags: [['p', pubkey]],\n            content: contenido,\n        }, this.privateKey)\n\n        return this.pool.publicarATodos(evento)\n    }\n\n    cerrar() {\n        this.suscripciones.forEach(sub =&gt; sub.unsub())\n        this.pool.cerrarTodo()\n        this.deduplicador.destruir()\n        console.log('\ud83d\udc4b Cliente de chat cerrado')\n    }\n}\n\n// Uso\nconst cliente = new ClienteChat()\nawait cliente.inicializar(miPrivateKey, ['general', 'nostr', 'dev'])\n\n// Enviar mensajes\nawait cliente.enviarMensaje('\u00a1Hola a todos!', 'general')\nawait cliente.mencionar(otroPubkey, '\u00bfC\u00f3mo est\u00e1s?')\n\n// Cerrar cuando termine\nprocess.on('SIGINT', () =&gt; {\n    cliente.cerrar()\n    process.exit(0)\n})\n</code></pre>"},{"location":"es/tutorials/relay-communication/#proximos-pasos","title":"Pr\u00f3ximos Pasos","text":"<p>Ahora puedes explorar:</p> <ul> <li>Entendiendo Eventos - Estructuras de datos profundas</li> <li>Construir un Cliente Simple - Aplicaci\u00f3n pr\u00e1ctica</li> </ul>       Anterior: Entendiendo Eventos         Siguiente: Cliente Simple \u2192"},{"location":"es/tutorials/simple-client/","title":"Construir un Cliente Nostr Simple","text":"<p>Lo Que Construir\u00e1s</p> <p>En este tutorial, crear\u00e1s un cliente Nostr b\u00e1sico que puede:</p> <ul> <li>Generar y gestionar llaves criptogr\u00e1ficas</li> <li>Conectarse a rel\u00e9s Nostr</li> <li>Publicar notas de texto</li> <li>Suscribirse y mostrar eventos</li> <li>Manejar interacciones de usuario</li> </ul> <p>Prerrequisitos</p> <ul> <li>Conocimiento b\u00e1sico de JavaScript</li> <li>Comprensi\u00f3n de fundamentos de Nostr</li> <li>Node.js instalado en tu sistema</li> </ul>"},{"location":"es/tutorials/simple-client/#configuracion-del-proyecto","title":"Configuraci\u00f3n del Proyecto","text":"<p>Empecemos creando un nuevo proyecto e instalando las dependencias necesarias.</p>"},{"location":"es/tutorials/simple-client/#1-inicializar-el-proyecto","title":"1. Inicializar el Proyecto","text":"<pre><code>mkdir mi-cliente-nostr\ncd mi-cliente-nostr\nnpm init -y\n</code></pre>"},{"location":"es/tutorials/simple-client/#2-instalar-dependencias","title":"2. Instalar Dependencias","text":"<pre><code>npm install nostr-tools\nnpm install --save-dev vite\n</code></pre>"},{"location":"es/tutorials/simple-client/#3-crear-estructura-del-proyecto","title":"3. Crear Estructura del Proyecto","text":"<pre><code>mi-cliente-nostr/\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 main.js\n\u251c\u2500\u2500 style.css\n\u2514\u2500\u2500 package.json\n</code></pre>"},{"location":"es/tutorials/simple-client/#construir-la-interfaz-html","title":"Construir la Interfaz HTML","text":"<p>Crea una interfaz simple pero funcional:</p> index.htmlstyle.css <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"es\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;Mi Cliente Nostr&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=\"container\"&gt;\n        &lt;header&gt;\n            &lt;h1&gt;\ud83d\ude80 Mi Cliente Nostr&lt;/h1&gt;\n            &lt;div class=\"connection-status\" id=\"status\"&gt;Desconectado&lt;/div&gt;\n        &lt;/header&gt;\n\n        &lt;main&gt;\n            &lt;!-- Secci\u00f3n de Gesti\u00f3n de Llaves --&gt;\n            &lt;section class=\"key-section\"&gt;\n                &lt;h2&gt;\ud83d\udd11 Tu Identidad&lt;/h2&gt;\n                &lt;div class=\"key-display\"&gt;\n                    &lt;label&gt;Llave P\u00fablica (npub):&lt;/label&gt;\n                    &lt;input type=\"text\" id=\"pubkey\" readonly&gt;\n                    &lt;button id=\"generate-keys\"&gt;Generar Nuevas Llaves&lt;/button&gt;\n                &lt;/div&gt;\n            &lt;/section&gt;\n\n            &lt;!-- Secci\u00f3n de Composici\u00f3n --&gt;\n            &lt;section class=\"compose-section\"&gt;\n                &lt;h2&gt;\u270d\ufe0f Escribir Nota&lt;/h2&gt;\n                &lt;textarea id=\"note-content\" placeholder=\"\u00bfQu\u00e9 tienes en mente?\"&gt;&lt;/textarea&gt;\n                &lt;button id=\"publish-note\"&gt;Publicar Nota&lt;/button&gt;\n            &lt;/section&gt;\n\n            &lt;!-- Secci\u00f3n de Feed --&gt;\n            &lt;section class=\"feed-section\"&gt;\n                &lt;h2&gt;\ud83d\udcf0 Feed Global&lt;/h2&gt;\n                &lt;div id=\"feed\"&gt;&lt;/div&gt;\n            &lt;/section&gt;\n        &lt;/main&gt;\n    &lt;/div&gt;\n\n    &lt;script type=\"module\" src=\"main.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nbody {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    min-height: 100vh;\n    color: #333;\n}\n\n.container {\n    max-width: 800px;\n    margin: 0 auto;\n    padding: 20px;\n}\n\nheader {\n    background: white;\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n    margin-bottom: 20px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\nh1 {\n    color: #667eea;\n    font-size: 2rem;\n}\n\n.connection-status {\n    padding: 8px 16px;\n    border-radius: 20px;\n    font-weight: 600;\n    font-size: 0.9rem;\n}\n\n.connection-status.connected {\n    background: #10b981;\n    color: white;\n}\n\n.connection-status.disconnected {\n    background: #ef4444;\n    color: white;\n}\n\nsection {\n    background: white;\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n    margin-bottom: 20px;\n}\n\nh2 {\n    margin-bottom: 15px;\n    color: #374151;\n}\n\n.key-display {\n    display: flex;\n    gap: 10px;\n    align-items: center;\n    flex-wrap: wrap;\n}\n\ninput, textarea {\n    padding: 12px;\n    border: 2px solid #e5e7eb;\n    border-radius: 8px;\n    font-size: 14px;\n    transition: border-color 0.3s;\n}\n\ninput:focus, textarea:focus {\n    outline: none;\n    border-color: #667eea;\n}\n\n#pubkey {\n    flex: 1;\n    min-width: 300px;\n    font-family: monospace;\n    font-size: 12px;\n}\n\n#note-content {\n    width: 100%;\n    min-height: 100px;\n    resize: vertical;\n    margin-bottom: 10px;\n}\n\nbutton {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    padding: 12px 24px;\n    border-radius: 8px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: transform 0.2s, box-shadow 0.2s;\n}\n\nbutton:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n}\n\nbutton:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n}\n\n.note {\n    background: #f9fafb;\n    border: 1px solid #e5e7eb;\n    border-radius: 8px;\n    padding: 15px;\n    margin-bottom: 10px;\n}\n\n.note-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 10px;\n    font-size: 0.9rem;\n    color: #6b7280;\n}\n\n.note-author {\n    font-family: monospace;\n    font-weight: 600;\n}\n\n.note-content {\n    line-height: 1.6;\n    white-space: pre-wrap;\n}\n\n.loading {\n    text-align: center;\n    color: #6b7280;\n    font-style: italic;\n}\n</code></pre>"},{"location":"es/tutorials/simple-client/#implementar-la-logica-javascript","title":"Implementar la L\u00f3gica JavaScript","text":"<p>Ahora construyamos la funcionalidad principal:</p> main.js <pre><code>import { \n    generatePrivateKey, \n    getPublicKey, \n    finishEvent, \n    relayInit,\n    nip19\n} from 'nostr-tools'\n\nclass ClienteNostr {\n    constructor() {\n        this.privateKey = null\n        this.publicKey = null\n        this.relays = []\n        this.connectedRelays = new Set()\n\n        this.initializeElements()\n        this.setupEventListeners()\n        this.loadOrGenerateKeys()\n        this.connectToRelays()\n    }\n\n    initializeElements() {\n        this.elements = {\n            status: document.getElementById('status'),\n            pubkey: document.getElementById('pubkey'),\n            generateKeys: document.getElementById('generate-keys'),\n            noteContent: document.getElementById('note-content'),\n            publishNote: document.getElementById('publish-note'),\n            feed: document.getElementById('feed')\n        }\n    }\n\n    setupEventListeners() {\n        this.elements.generateKeys.addEventListener('click', () =&gt; {\n            this.generateNewKeys()\n        })\n\n        this.elements.publishNote.addEventListener('click', () =&gt; {\n            this.publishNote()\n        })\n\n        // Habilitar publicaci\u00f3n con Ctrl+Enter\n        this.elements.noteContent.addEventListener('keydown', (e) =&gt; {\n            if (e.ctrlKey &amp;&amp; e.key === 'Enter') {\n                this.publishNote()\n            }\n        })\n    }\n\n    loadOrGenerateKeys() {\n        // Intentar cargar llaves existentes desde localStorage\n        const savedPrivateKey = localStorage.getItem('nostr-private-key')\n\n        if (savedPrivateKey) {\n            this.privateKey = savedPrivateKey\n            this.publicKey = getPublicKey(savedPrivateKey)\n        } else {\n            this.generateNewKeys()\n        }\n\n        this.updateKeyDisplay()\n    }\n\n    generateNewKeys() {\n        this.privateKey = generatePrivateKey()\n        this.publicKey = getPublicKey(this.privateKey)\n\n        // Guardar en localStorage\n        localStorage.setItem('nostr-private-key', this.privateKey)\n\n        this.updateKeyDisplay()\n        this.showNotification('\u00a1Nuevas llaves generadas! \ud83c\udf89')\n    }\n\n    updateKeyDisplay() {\n        if (this.publicKey) {\n            const npub = nip19.npubEncode(this.publicKey)\n            this.elements.pubkey.value = npub\n        }\n    }\n\n    async connectToRelays() {\n        const relayUrls = [\n            'wss://relay.damus.io',\n            'wss://nos.lol',\n            'wss://relay.snort.social'\n        ]\n\n        this.updateStatus('Conectando...')\n\n        for (const url of relayUrls) {\n            try {\n                const relay = relayInit(url)\n\n                relay.on('connect', () =&gt; {\n                    console.log(`Conectado a ${url}`)\n                    this.connectedRelays.add(url)\n                    this.updateConnectionStatus()\n                    this.subscribeToFeed(relay)\n                })\n\n                relay.on('error', () =&gt; {\n                    console.log(`Fall\u00f3 conexi\u00f3n a ${url}`)\n                    this.connectedRelays.delete(url)\n                    this.updateConnectionStatus()\n                })\n\n                await relay.connect()\n                this.relays.push(relay)\n\n            } catch (error) {\n                console.error(`Error conectando a ${url}:`, error)\n            }\n        }\n    }\n\n    updateConnectionStatus() {\n        const connectedCount = this.connectedRelays.size\n        if (connectedCount &gt; 0) {\n            this.updateStatus(`Conectado a ${connectedCount} rel\u00e9s`, 'connected')\n        } else {\n            this.updateStatus('Desconectado', 'disconnected')\n        }\n    }\n\n    updateStatus(message, className = '') {\n        this.elements.status.textContent = message\n        this.elements.status.className = `connection-status ${className}`\n    }\n\n    subscribeToFeed(relay) {\n        const sub = relay.sub([\n            {\n                kinds: [1], // Notas de texto\n                limit: 20\n            }\n        ])\n\n        sub.on('event', (event) =&gt; {\n            this.addEventToFeed(event)\n        })\n    }\n\n    addEventToFeed(event) {\n        const noteElement = this.createNoteElement(event)\n\n        // Agregar al principio del feed\n        if (this.elements.feed.firstChild) {\n            this.elements.feed.insertBefore(noteElement, this.elements.feed.firstChild)\n        } else {\n            this.elements.feed.appendChild(noteElement)\n        }\n\n        // Limitar feed a 50 notas\n        while (this.elements.feed.children.length &gt; 50) {\n            this.elements.feed.removeChild(this.elements.feed.lastChild)\n        }\n    }\n\n    createNoteElement(event) {\n        const noteDiv = document.createElement('div')\n        noteDiv.className = 'note'\n\n        const date = new Date(event.created_at * 1000)\n        const timeString = date.toLocaleString()\n\n        // Truncar llave p\u00fablica para mostrar\n        const shortPubkey = event.pubkey.slice(0, 8) + '...' + event.pubkey.slice(-8)\n\n        noteDiv.innerHTML = `\n            &lt;div class=\"note-header\"&gt;\n                &lt;span class=\"note-author\"&gt;${shortPubkey}&lt;/span&gt;\n                &lt;span class=\"note-time\"&gt;${timeString}&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;div class=\"note-content\"&gt;${this.escapeHtml(event.content)}&lt;/div&gt;\n        `\n\n        return noteDiv\n    }\n\n    escapeHtml(text) {\n        const div = document.createElement('div')\n        div.textContent = text\n        return div.innerHTML\n    }\n\n    async publishNote() {\n        const content = this.elements.noteContent.value.trim()\n\n        if (!content) {\n            this.showNotification('\u00a1Por favor ingresa alg\u00fan contenido!', 'error')\n            return\n        }\n\n        if (this.connectedRelays.size === 0) {\n            this.showNotification('\u00a1No conectado a ning\u00fan rel\u00e9!', 'error')\n            return\n        }\n\n        try {\n            this.elements.publishNote.disabled = true\n            this.elements.publishNote.textContent = 'Publicando...'\n\n            const event = finishEvent({\n                kind: 1,\n                created_at: Math.floor(Date.now() / 1000),\n                tags: [],\n                content: content,\n            }, this.privateKey)\n\n            // Publicar a todos los rel\u00e9s conectados\n            const publishPromises = this.relays.map(relay =&gt; {\n                if (relay.status === 1) { // Conectado\n                    return relay.publish(event)\n                }\n            })\n\n            await Promise.allSettled(publishPromises)\n\n            this.elements.noteContent.value = ''\n            this.showNotification('\u00a1Nota publicada! \ud83c\udf89')\n\n        } catch (error) {\n            console.error('Error publicando nota:', error)\n            this.showNotification('Fall\u00f3 la publicaci\u00f3n de la nota', 'error')\n        } finally {\n            this.elements.publishNote.disabled = false\n            this.elements.publishNote.textContent = 'Publicar Nota'\n        }\n    }\n\n    showNotification(message, type = 'success') {\n        // Crear elemento de notificaci\u00f3n\n        const notification = document.createElement('div')\n        notification.className = `notification ${type}`\n        notification.textContent = message\n\n        // Estilar la notificaci\u00f3n\n        Object.assign(notification.style, {\n            position: 'fixed',\n            top: '20px',\n            right: '20px',\n            padding: '12px 20px',\n            borderRadius: '8px',\n            color: 'white',\n            fontWeight: '600',\n            zIndex: '1000',\n            transform: 'translateX(100%)',\n            transition: 'transform 0.3s ease'\n        })\n\n        if (type === 'error') {\n            notification.style.background = '#ef4444'\n        } else {\n            notification.style.background = '#10b981'\n        }\n\n        document.body.appendChild(notification)\n\n        // Animar entrada\n        setTimeout(() =&gt; {\n            notification.style.transform = 'translateX(0)'\n        }, 100)\n\n        // Remover despu\u00e9s de 3 segundos\n        setTimeout(() =&gt; {\n            notification.style.transform = 'translateX(100%)'\n            setTimeout(() =&gt; {\n                document.body.removeChild(notification)\n            }, 300)\n        }, 3000)\n    }\n}\n\n// Inicializar el cliente cuando la p\u00e1gina carga\ndocument.addEventListener('DOMContentLoaded', () =&gt; {\n    new ClienteNostr()\n})\n</code></pre>"},{"location":"es/tutorials/simple-client/#agregar-scripts-de-desarrollo","title":"Agregar Scripts de Desarrollo","text":"<p>Actualiza tu <code>package.json</code> para incluir scripts de desarrollo:</p> <pre><code>{\n  \"name\": \"mi-cliente-nostr\",\n  \"version\": \"1.0.0\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"vite build\",\n    \"preview\": \"vite preview\"\n  },\n  \"dependencies\": {\n    \"nostr-tools\": \"^1.17.0\"\n  },\n  \"devDependencies\": {\n    \"vite\": \"^4.4.0\"\n  }\n}\n</code></pre>"},{"location":"es/tutorials/simple-client/#ejecutar-tu-cliente","title":"Ejecutar Tu Cliente","text":"<p>Inicia el servidor de desarrollo:</p> <pre><code>npm run dev\n</code></pre> <p>Abre tu navegador en <code>http://localhost:5173</code> y \u00a1deber\u00edas ver tu cliente Nostr!</p>"},{"location":"es/tutorials/simple-client/#probar-tu-cliente","title":"Probar Tu Cliente","text":"<p>Prueba Estas Caracter\u00edsticas</p> <ol> <li>Generar Llaves: Haz clic en \"Generar Nuevas Llaves\" para crear una nueva identidad</li> <li>Publicar una Nota: Escribe algo en el \u00e1rea de texto y haz clic en \"Publicar Nota\"</li> <li>Ver Feed: Observa como aparecen notas de otros usuarios en el feed global</li> <li>Atajo de Teclado: Usa Ctrl+Enter para publicar notas r\u00e1pidamente</li> </ol>"},{"location":"es/tutorials/simple-client/#entendiendo-el-codigo","title":"Entendiendo el C\u00f3digo","text":""},{"location":"es/tutorials/simple-client/#gestion-de-llaves","title":"Gesti\u00f3n de Llaves","text":"<pre><code>// Generar una nueva llave privada\nconst privateKey = generatePrivateKey()\n\n// Derivar la llave p\u00fablica\nconst publicKey = getPublicKey(privateKey)\n\n// Codificar como npub para mostrar\nconst npub = nip19.npubEncode(publicKey)\n</code></pre>"},{"location":"es/tutorials/simple-client/#creacion-de-eventos","title":"Creaci\u00f3n de Eventos","text":"<pre><code>const event = finishEvent({\n    kind: 1,              // Nota de texto\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [],             // Sin etiquetas para notas simples\n    content: \"\u00a1Hola Nostr!\",\n}, privateKey)\n</code></pre>"},{"location":"es/tutorials/simple-client/#comunicacion-con-reles","title":"Comunicaci\u00f3n con Rel\u00e9s","text":"<pre><code>// Conectar a rel\u00e9\nconst relay = relayInit('wss://relay.damus.io')\nawait relay.connect()\n\n// Suscribirse a eventos\nconst sub = relay.sub([{ kinds: [1], limit: 20 }])\nsub.on('event', handleEvent)\n\n// Publicar evento\nawait relay.publish(event)\n</code></pre>"},{"location":"es/tutorials/simple-client/#proximos-pasos","title":"Pr\u00f3ximos Pasos","text":"<p>\u00a1Felicitaciones! Has construido un cliente Nostr funcional. Aqu\u00ed hay algunas ideas para mejoras:</p> <p>Ideas de Mejoras</p> <ul> <li>Perfiles de Usuario: Mostrar metadatos de usuario y avatares</li> <li>Respuestas: Implementar conversaciones con hilos</li> <li>Reacciones: Agregar funcionalidad de me gusta/no me gusta</li> <li>Multimedia: Soporte para subida de im\u00e1genes y videos</li> <li>B\u00fasqueda: Agregar b\u00fasqueda de contenido y usuarios</li> <li>Gesti\u00f3n de Rel\u00e9s: Permitir que usuarios agreguen/eliminen rel\u00e9s</li> </ul>"},{"location":"es/tutorials/simple-client/#solucion-de-problemas","title":"Soluci\u00f3n de Problemas","text":"<p>Problemas Comunes</p> <p>Problemas de Conexi\u00f3n - Verifica si los rel\u00e9s est\u00e1n en l\u00ednea - Prueba diferentes URLs de rel\u00e9s - Revisa la consola del navegador para errores</p> <p>Falla la Publicaci\u00f3n - Aseg\u00farate de tener llaves v\u00e1lidas - Verifica el estado de conexi\u00f3n del rel\u00e9 - Confirma que el contenido no est\u00e9 vac\u00edo</p>      \u2190 Anterior: Creando un Bot         Siguiente: Caracter\u00edsticas Avanzadas \u2192"},{"location":"es/tutorials/understanding-events/","title":"Entendiendo Eventos Nostr","text":"<p>Lo Que Aprender\u00e1s</p> <p>En este tutorial, entender\u00e1s:</p> <ul> <li>Qu\u00e9 son los eventos Nostr y c\u00f3mo funcionan</li> <li>Estructura de eventos y campos requeridos</li> <li>Diferentes tipos de eventos (kinds)</li> <li>C\u00f3mo crear, firmar y verificar eventos</li> <li>Etiquetas de eventos y sus prop\u00f3sitos</li> </ul> <p>Prerrequisitos</p> <ul> <li>Comprensi\u00f3n b\u00e1sica de fundamentos de Nostr</li> <li>Conocimiento b\u00e1sico de JavaScript</li> <li>Comprensi\u00f3n de firmas criptogr\u00e1ficas</li> </ul>"},{"location":"es/tutorials/understanding-events/#que-es-un-evento-nostr","title":"\u00bfQu\u00e9 es un Evento Nostr?","text":"<p>Un evento Nostr es la unidad fundamental de datos en el protocolo Nostr. Todo lo que sucede en Nostr - desde publicar una nota hasta seguir a alguien - se representa como un evento. Piensa en los eventos como mensajes inmutables, firmados criptogr\u00e1ficamente, que pueden compartirse a trav\u00e9s de la red.</p>"},{"location":"es/tutorials/understanding-events/#estructura-de-eventos","title":"Estructura de Eventos","text":"<p>Cada evento Nostr sigue una estructura JSON estandarizada con campos requeridos espec\u00edficos:</p> <pre><code>{\n  \"id\": \"4376c65d2f232afbe9b882a35baa4f6fe8667c4e684749af565f981833ed6a65\",\n  \"pubkey\": \"6e468422dfb74a5738702a8823b9b28168abab8655faacb6853cd0ee15deee93\",\n  \"created_at\": 1673347337,\n  \"kind\": 1,\n  \"tags\": [\n    [\"e\", \"5c83da77af1dec6d7289834998ad7aafbd9e2191396d75ec3cc27f5a77226f36\"],\n    [\"p\", \"f7234bd4c1394dda46d09f35bd384dd30cc552ad5541990f98844fb06676e9ca\"]\n  ],\n  \"content\": \"\u00a1Hola Nostr! Esta es mi primera nota.\",\n  \"sig\": \"908a15e46fb4d8675bab026fc230a0e3542bfade63da02d542fb78b2a8513fcd0092619a2c8c1221e581946e0191f2af505250431fcc808d5210a7d8e858c3e\"\n}\n</code></pre>"},{"location":"es/tutorials/understanding-events/#campos-requeridos","title":"Campos Requeridos","text":"<p>Desglosemos cada campo:</p> Campo Tipo Descripci\u00f3n <code>id</code> string Hash SHA256 de 32 bytes codificado en hex del evento serializado <code>pubkey</code> string Llave p\u00fablica de 32 bytes codificada en hex del creador del evento <code>created_at</code> number Timestamp Unix en segundos <code>kind</code> number Identificador del tipo de evento (0-65535) <code>tags</code> array Array de arrays de etiquetas para metadatos y referencias <code>content</code> string String de contenido arbitrario <code>sig</code> string Firma de 64 bytes en hex del hash del evento"},{"location":"es/tutorials/understanding-events/#creando-tu-primer-evento","title":"Creando Tu Primer Evento","text":"<p>Creemos un evento de nota de texto simple paso a paso:</p> JavaScriptAlternativa (usando finishEvent) <pre><code>import { \n    generatePrivateKey, \n    getPublicKey, \n    finishEvent,\n    getEventHash,\n    signEvent \n} from 'nostr-tools'\n\n// Generar llaves (en pr\u00e1ctica, cargar\u00edas llaves existentes)\nconst privateKey = generatePrivateKey()\nconst publicKey = getPublicKey(privateKey)\n\n// Crear el evento sin firmar\nconst unsignedEvent = {\n    kind: 1,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [],\n    content: \"\u00a1Hola Nostr! Este es mi primer evento.\",\n    pubkey: publicKey\n}\n\n// Calcular el ID del evento y firmarlo\nconst eventId = getEventHash(unsignedEvent)\nconst signature = signEvent(unsignedEvent, privateKey)\n\n// Evento completo\nconst signedEvent = {\n    ...unsignedEvent,\n    id: eventId,\n    sig: signature\n}\n\nconsole.log('Evento creado:', signedEvent)\n</code></pre> <pre><code>import { generatePrivateKey, getPublicKey, finishEvent } from 'nostr-tools'\n\nconst privateKey = generatePrivateKey()\nconst publicKey = getPublicKey(privateKey)\n\n// finishEvent maneja autom\u00e1ticamente el c\u00e1lculo de ID y la firma\nconst event = finishEvent({\n    kind: 1,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [],\n    content: \"\u00a1Hola Nostr! Este es mi primer evento.\"\n}, privateKey)\n\nconsole.log('Evento creado:', event)\n</code></pre>"},{"location":"es/tutorials/understanding-events/#serializacion-de-eventos","title":"Serializaci\u00f3n de Eventos","text":"<p>El ID del evento se calcula hasheando una representaci\u00f3n serializada espec\u00edfica del evento. Esto asegura que cualquier modificaci\u00f3n al evento resultar\u00e1 en un ID diferente.</p> <pre><code>// El formato de serializaci\u00f3n es un array JSON:\nconst serializedEvent = JSON.stringify([\n    0,                    // Reservado (siempre 0)\n    publicKey,           // Llave p\u00fablica como string hex\n    createdAt,           // Timestamp Unix como n\u00famero\n    kind,                // Kind del evento como n\u00famero\n    tags,                // Etiquetas como array de arrays\n    content              // Contenido como string\n])\n\n// El ID es el hash SHA256 de estos datos serializados\nconst eventId = sha256(serializedEvent)\n</code></pre> <p>Reglas de Serializaci\u00f3n</p> <p>Al serializar eventos para c\u00e1lculo de ID:</p> <ul> <li>Usar codificaci\u00f3n UTF-8</li> <li>Sin espacios en blanco o formato</li> <li>Escapar estos caracteres en contenido: <code>\\n</code>, <code>\\\"</code>, <code>\\\\</code>, <code>\\r</code>, <code>\\t</code>, <code>\\b</code>, <code>\\f</code></li> </ul>"},{"location":"es/tutorials/understanding-events/#tipos-de-eventos-kinds","title":"Tipos de Eventos (Kinds)","text":"<p>Los tipos de eventos determinan c\u00f3mo los clientes deben interpretar y mostrar eventos. Aqu\u00ed est\u00e1n los m\u00e1s comunes:</p>"},{"location":"es/tutorials/understanding-events/#eventos-regulares-almacenados-por-reles","title":"Eventos Regulares (Almacenados por Rel\u00e9s)","text":"Kind Nombre Descripci\u00f3n NIP 0 Metadatos de Usuario Informaci\u00f3n de perfil NIP-01 1 Nota de Texto Corta Posts tipo Twitter NIP-01 3 Lista de Seguidos A qui\u00e9n sigue un usuario NIP-02 4 Mensaje Directo Encriptado Mensajes privados NIP-04 5 Solicitud de Eliminaci\u00f3n de Evento Solicitud para eliminar eventos NIP-09 6 Repost Compartir otro evento NIP-18 7 Reacci\u00f3n Me gusta/no me gusta eventos NIP-25"},{"location":"es/tutorials/understanding-events/#eventos-reemplazables-el-ultimo-sobrescribe-el-anterior","title":"Eventos Reemplazables (El \u00daltimo Sobrescribe el Anterior)","text":"Kind Nombre Descripci\u00f3n NIP 10000 Lista de Silenciados Usuarios bloqueados NIP-51 10001 Lista de Fijados Eventos fijados NIP-51 10002 Lista de Rel\u00e9s Rel\u00e9s del usuario NIP-65"},{"location":"es/tutorials/understanding-events/#eventos-direccionables-reemplazables-con-identificador","title":"Eventos Direccionables (Reemplazables con Identificador)","text":"Kind Nombre Descripci\u00f3n NIP 30000 Conjuntos de Seguidos Listas de seguidos con nombre NIP-51 30001 Listas Gen\u00e9ricas Listas categorizadas NIP-51 30023 Contenido de Formato Largo Posts de blog/art\u00edculos NIP-23"},{"location":"es/tutorials/understanding-events/#trabajando-con-etiquetas","title":"Trabajando con Etiquetas","text":"<p>Las etiquetas proporcionan metadatos y crean relaciones entre eventos. Son arrays donde el primer elemento es el nombre de la etiqueta:</p>"},{"location":"es/tutorials/understanding-events/#tipos-de-etiquetas-comunes","title":"Tipos de Etiquetas Comunes","text":"<pre><code>// Referenciar otro evento\n[\"e\", \"event_id\", \"relay_url\", \"marker\"]\n\n// Referenciar un usuario\n[\"p\", \"pubkey\", \"relay_url\", \"petname\"]\n\n// Hashtag\n[\"t\", \"bitcoin\"]\n\n// Identificador de contenido\n[\"d\", \"mi-slug-articulo\"]\n\n// Asunto/t\u00edtulo\n[\"subject\", \"T\u00edtulo de Mi Art\u00edculo\"]\n</code></pre>"},{"location":"es/tutorials/understanding-events/#ejemplo-creando-una-respuesta","title":"Ejemplo: Creando una Respuesta","text":"<pre><code>const replyEvent = finishEvent({\n    kind: 1,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [\n        [\"e\", originalEventId, \"\", \"reply\"],     // Responder a este evento\n        [\"p\", originalAuthorPubkey]              // Notificar al autor\n    ],\n    content: \"\u00a1Gracias por compartir esto!\"\n}, privateKey)\n</code></pre>"},{"location":"es/tutorials/understanding-events/#ejemplo-metadatos-de-perfil","title":"Ejemplo: Metadatos de Perfil","text":"<pre><code>const profileEvent = finishEvent({\n    kind: 0,\n    created_at: Math.floor(Date.now() / 1000),\n    tags: [],\n    content: JSON.stringify({\n        name: \"Alicia\",\n        about: \"Desarrolladora Bitcoin y defensora de la privacidad\",\n        picture: \"https://example.com/alice.jpg\",\n        nip05: \"alice@example.com\"\n    })\n}, privateKey)\n</code></pre>"},{"location":"es/tutorials/understanding-events/#validacion-de-eventos","title":"Validaci\u00f3n de Eventos","text":"<p>Al recibir eventos, siempre val\u00eddalos:</p> Validaci\u00f3n B\u00e1sicaValidaci\u00f3n Avanzada <pre><code>import { verifySignature, getEventHash } from 'nostr-tools'\n\nfunction validateEvent(event) {\n    // Verificar campos requeridos\n    const requiredFields = ['id', 'pubkey', 'created_at', 'kind', 'tags', 'content', 'sig']\n    for (const field of requiredFields) {\n        if (!(field in event)) {\n            return false\n        }\n    }\n\n    // Verificar que el ID coincida con el contenido\n    const calculatedId = getEventHash(event)\n    if (calculatedId !== event.id) {\n        return false\n    }\n\n    // Verificar la firma\n    if (!verifySignature(event)) {\n        return false\n    }\n\n    return true\n}\n\n// Uso\nif (validateEvent(receivedEvent)) {\n    console.log('\u00a1Evento es v\u00e1lido!')\n} else {\n    console.log('Evento inv\u00e1lido recibido')\n}\n</code></pre> <pre><code>function validateEventAdvanced(event) {\n    // Validaci\u00f3n b\u00e1sica\n    if (!validateEvent(event)) {\n        return { valid: false, error: 'Fall\u00f3 validaci\u00f3n b\u00e1sica' }\n    }\n\n    // Verificar timestamp (no muy lejos en futuro/pasado)\n    const now = Math.floor(Date.now() / 1000)\n    const oneDay = 24 * 60 * 60\n\n    if (event.created_at &gt; now + oneDay) {\n        return { valid: false, error: 'Evento muy lejos en el futuro' }\n    }\n\n    if (event.created_at &lt; now - (365 * oneDay)) {\n        return { valid: false, error: 'Evento muy antiguo' }\n    }\n\n    // Verificar que kind es v\u00e1lido\n    if (event.kind &lt; 0 || event.kind &gt; 65535) {\n        return { valid: false, error: 'Kind inv\u00e1lido' }\n    }\n\n    // Verificar formato de pubkey\n    if (!/^[0-9a-f]{64}$/.test(event.pubkey)) {\n        return { valid: false, error: 'Formato de pubkey inv\u00e1lido' }\n    }\n\n    return { valid: true }\n}\n</code></pre>"},{"location":"es/tutorials/understanding-events/#transmitir-eventos","title":"Transmitir Eventos","text":"<p>Una vez que tienes un evento v\u00e1lido, puedes transmitirlo a rel\u00e9s:</p> <pre><code>import { relayInit } from 'nostr-tools'\n\nasync function broadcastEvent(event, relayUrls) {\n    const results = []\n\n    for (const url of relayUrls) {\n        try {\n            const relay = relayInit(url)\n            await relay.connect()\n\n            const pub = relay.publish(event)\n\n            pub.on('ok', () =&gt; {\n                console.log(`Publicado en ${url}`)\n                results.push({ url, success: true })\n            })\n\n            pub.on('failed', (reason) =&gt; {\n                console.log(`Fall\u00f3 publicaci\u00f3n en ${url}: ${reason}`)\n                results.push({ url, success: false, reason })\n            })\n\n        } catch (error) {\n            console.error(`Error con ${url}:`, error)\n            results.push({ url, success: false, error: error.message })\n        }\n    }\n\n    return results\n}\n\n// Uso\nconst relays = [\n    'wss://relay.damus.io',\n    'wss://nos.lol',\n    'wss://relay.snort.social'\n]\n\nawait broadcastEvent(myEvent, relays)\n</code></pre>"},{"location":"es/tutorials/understanding-events/#ejercicio-practico","title":"Ejercicio Pr\u00e1ctico","text":"<p>Construyamos un creador y validador de eventos simple:</p> Creador de EventosValidador de EventosPru\u00e9balo <pre><code>class CreadorEventos {\n    constructor(privateKey) {\n        this.privateKey = privateKey\n        this.publicKey = getPublicKey(privateKey)\n    }\n\n    crearNotaTexto(content, replyTo = null) {\n        const tags = []\n\n        if (replyTo) {\n            tags.push(['e', replyTo.id, '', 'reply'])\n            tags.push(['p', replyTo.pubkey])\n        }\n\n        return finishEvent({\n            kind: 1,\n            created_at: Math.floor(Date.now() / 1000),\n            tags,\n            content\n        }, this.privateKey)\n    }\n\n    crearPerfil(profile) {\n        return finishEvent({\n            kind: 0,\n            created_at: Math.floor(Date.now() / 1000),\n            tags: [],\n            content: JSON.stringify(profile)\n        }, this.privateKey)\n    }\n\n    crearReaccion(targetEvent, reaction = '+') {\n        return finishEvent({\n            kind: 7,\n            created_at: Math.floor(Date.now() / 1000),\n            tags: [\n                ['e', targetEvent.id],\n                ['p', targetEvent.pubkey]\n            ],\n            content: reaction\n        }, this.privateKey)\n    }\n\n    crearSeguimiento(pubkeysASeguir) {\n        const tags = pubkeysASeguir.map(pubkey =&gt; ['p', pubkey])\n\n        return finishEvent({\n            kind: 3,\n            created_at: Math.floor(Date.now() / 1000),\n            tags,\n            content: JSON.stringify({}) // Informaci\u00f3n de rel\u00e9s opcional\n        }, this.privateKey)\n    }\n\n    crearArticulo(titulo, contenido, resumen = '') {\n        const slug = titulo.toLowerCase()\n            .replace(/[^a-z0-9]+/g, '-')\n            .replace(/^-|-$/g, '')\n\n        return finishEvent({\n            kind: 30023,\n            created_at: Math.floor(Date.now() / 1000),\n            tags: [\n                ['d', slug],\n                ['title', titulo],\n                ['summary', resumen],\n                ['published_at', Math.floor(Date.now() / 1000).toString()]\n            ],\n            content: contenido\n        }, this.privateKey)\n    }\n\n    crearHashtag(contenido, hashtags = []) {\n        const tags = hashtags.map(tag =&gt; ['t', tag.toLowerCase()])\n\n        // Auto-detectar hashtags en contenido\n        const hashtagsEnTexto = contenido.match(/#\\w+/g) || []\n        hashtagsEnTexto.forEach(hashtag =&gt; {\n            const tag = hashtag.slice(1).toLowerCase()\n            if (!tags.some(t =&gt; t[1] === tag)) {\n                tags.push(['t', tag])\n            }\n        })\n\n        return finishEvent({\n            kind: 1,\n            created_at: Math.floor(Date.now() / 1000),\n            tags,\n            content: contenido\n        }, this.privateKey)\n    }\n}\n\n// Uso\nconst creador = new CreadorEventos(miPrivateKey)\n\nconst nota = creador.crearNotaTexto(\"\u00a1Hola Nostr!\")\nconst perfil = creador.crearPerfil({\n    name: \"Alicia\",\n    about: \"Desarrolladora Nostr\",\n    picture: \"https://example.com/alice.jpg\"\n})\nconst reaccion = creador.crearReaccion(algunEvento, '\ud83d\ude80')\nconst articulo = creador.crearArticulo(\n    \"Mi Primer Art\u00edculo Nostr\",\n    \"# Introducci\u00f3n\\n\\nEste es mi primer art\u00edculo...\",\n    \"Una introducci\u00f3n a escribir en Nostr\"\n)\n</code></pre> <pre><code>class ValidadorEventos {\n    constructor() {\n        this.eventosCache = new Map()\n    }\n\n    validarCompleto(event) {\n        const resultado = {\n            valido: true,\n            errores: [],\n            advertencias: []\n        }\n\n        // Validaci\u00f3n de estructura\n        const validacionEstructura = this.validarEstructura(event)\n        if (!validacionEstructura.valido) {\n            resultado.valido = false\n            resultado.errores.push(...validacionEstructura.errores)\n        }\n\n        // Validaci\u00f3n de contenido\n        const validacionContenido = this.validarContenido(event)\n        if (!validacionContenido.valido) {\n            resultado.valido = false\n            resultado.errores.push(...validacionContenido.errores)\n        }\n        resultado.advertencias.push(...validacionContenido.advertencias)\n\n        // Validaci\u00f3n de firmas\n        if (resultado.valido) {\n            const validacionFirma = this.validarFirma(event)\n            if (!validacionFirma.valido) {\n                resultado.valido = false\n                resultado.errores.push(...validacionFirma.errores)\n            }\n        }\n\n        return resultado\n    }\n\n    validarEstructura(event) {\n        const errores = []\n        const camposRequeridos = ['id', 'pubkey', 'created_at', 'kind', 'tags', 'content', 'sig']\n\n        // Verificar campos requeridos\n        for (const campo of camposRequeridos) {\n            if (!(campo in event)) {\n                errores.push(`Campo faltante: ${campo}`)\n            }\n        }\n\n        // Verificar tipos de datos\n        if (typeof event.id !== 'string' || !/^[0-9a-f]{64}$/.test(event.id)) {\n            errores.push('ID debe ser string hex de 64 caracteres')\n        }\n\n        if (typeof event.pubkey !== 'string' || !/^[0-9a-f]{64}$/.test(event.pubkey)) {\n            errores.push('pubkey debe ser string hex de 64 caracteres')\n        }\n\n        if (typeof event.created_at !== 'number' || event.created_at &lt;= 0) {\n            errores.push('created_at debe ser timestamp Unix positivo')\n        }\n\n        if (typeof event.kind !== 'number' || event.kind &lt; 0 || event.kind &gt; 65535) {\n            errores.push('kind debe ser n\u00famero entre 0 y 65535')\n        }\n\n        if (!Array.isArray(event.tags)) {\n            errores.push('tags debe ser un array')\n        } else {\n            event.tags.forEach((tag, i) =&gt; {\n                if (!Array.isArray(tag) || tag.length === 0 || typeof tag[0] !== 'string') {\n                    errores.push(`Tag ${i} inv\u00e1lida: debe ser array de strings`)\n                }\n            })\n        }\n\n        if (typeof event.content !== 'string') {\n            errores.push('content debe ser string')\n        }\n\n        if (typeof event.sig !== 'string' || !/^[0-9a-f]{128}$/.test(event.sig)) {\n            errores.push('sig debe ser string hex de 128 caracteres')\n        }\n\n        return { valido: errores.length === 0, errores }\n    }\n\n    validarContenido(event) {\n        const errores = []\n        const advertencias = []\n\n        // Verificar timestamp razonable\n        const now = Math.floor(Date.now() / 1000)\n        const unDia = 24 * 60 * 60\n        const unA\u00f1o = 365 * unDia\n\n        if (event.created_at &gt; now + unDia) {\n            errores.push('Evento demasiado lejos en el futuro')\n        }\n\n        if (event.created_at &lt; now - unA\u00f1o) {\n            advertencias.push('Evento m\u00e1s de un a\u00f1o en el pasado')\n        }\n\n        // Verificar l\u00edmites de contenido\n        if (event.content.length &gt; 50000) {\n            advertencias.push('Contenido muy largo (&gt;50KB)')\n        }\n\n        if (event.tags.length &gt; 100) {\n            advertencias.push('Muchas etiquetas (&gt;100)')\n        }\n\n        // Validaci\u00f3n espec\u00edfica por kind\n        switch (event.kind) {\n            case 0: // Metadatos de perfil\n                try {\n                    const profile = JSON.parse(event.content)\n                    if (typeof profile !== 'object') {\n                        errores.push('Kind 0: contenido debe ser objeto JSON')\n                    }\n                } catch (e) {\n                    errores.push('Kind 0: contenido debe ser JSON v\u00e1lido')\n                }\n                break\n\n            case 3: // Lista de contactos\n                const pTags = event.tags.filter(tag =&gt; tag[0] === 'p')\n                if (pTags.length === 0) {\n                    advertencias.push('Kind 3: no hay etiquetas p (contactos)')\n                }\n                break\n\n            case 7: // Reacci\u00f3n\n                const eTags = event.tags.filter(tag =&gt; tag[0] === 'e')\n                if (eTags.length === 0) {\n                    errores.push('Kind 7: requiere al menos una etiqueta e')\n                }\n                break\n        }\n\n        return { valido: errores.length === 0, errores, advertencias }\n    }\n\n    validarFirma(event) {\n        const errores = []\n\n        try {\n            // Verificar que el ID coincida\n            const calculatedId = getEventHash(event)\n            if (calculatedId !== event.id) {\n                errores.push('ID no coincide con el contenido del evento')\n            }\n\n            // Verificar la firma\n            if (!verifySignature(event)) {\n                errores.push('Firma criptogr\u00e1fica inv\u00e1lida')\n            }\n        } catch (error) {\n            errores.push(`Error validando firma: ${error.message}`)\n        }\n\n        return { valido: errores.length === 0, errores }\n    }\n\n    esEventoDuplicado(event) {\n        if (this.eventosCache.has(event.id)) {\n            return true\n        }\n\n        this.eventosCache.set(event.id, Date.now())\n\n        // Limpiar cache viejo\n        if (this.eventosCache.size &gt; 10000) {\n            const entries = Array.from(this.eventosCache.entries())\n                .sort(([,a], [,b]) =&gt; b - a)\n                .slice(0, 5000)\n            this.eventosCache = new Map(entries)\n        }\n\n        return false\n    }\n}\n\n// Uso\nconst validador = new ValidadorEventos()\n\nconst resultado = validador.validarCompleto(eventoRecibido)\nif (resultado.valido) {\n    if (!validador.esEventoDuplicado(eventoRecibido)) {\n        console.log('\u2705 Evento v\u00e1lido y \u00fanico')\n        procesarEvento(eventoRecibido)\n    } else {\n        console.log('\u26a0\ufe0f Evento duplicado ignorado')\n    }\n} else {\n    console.log('\u274c Evento inv\u00e1lido:', resultado.errores)\n}\n\nif (resultado.advertencias.length &gt; 0) {\n    console.log('\u26a0\ufe0f Advertencias:', resultado.advertencias)\n}\n</code></pre> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Creador de Eventos&lt;/title&gt;\n    &lt;script type=\"module\"&gt;\n        import { generatePrivateKey, getPublicKey, finishEvent } from 'https://unpkg.com/nostr-tools@1.17.0/lib/esm/index.js'\n\n        const privateKey = generatePrivateKey()\n        const publicKey = getPublicKey(privateKey)\n\n        document.getElementById('pubkey-display').textContent = `Tu pubkey: ${publicKey.slice(0,16)}...`\n\n        document.getElementById('create-note').onclick = () =&gt; {\n            const content = document.getElementById('note-content').value\n\n            if (!content.trim()) {\n                alert('Por favor ingresa alg\u00fan contenido')\n                return\n            }\n\n            const event = finishEvent({\n                kind: 1,\n                created_at: Math.floor(Date.now() / 1000),\n                tags: extraerHashtags(content),\n                content: content\n            }, privateKey)\n\n            document.getElementById('output').textContent = JSON.stringify(event, null, 2)\n            document.getElementById('event-id').textContent = `ID del evento: ${event.id}`\n        }\n\n        function extraerHashtags(content) {\n            const hashtags = content.match(/#\\w+/g) || []\n            return hashtags.map(tag =&gt; ['t', tag.slice(1).toLowerCase()])\n        }\n\n        document.getElementById('create-profile').onclick = () =&gt; {\n            const name = document.getElementById('profile-name').value\n            const about = document.getElementById('profile-about').value\n\n            const event = finishEvent({\n                kind: 0,\n                created_at: Math.floor(Date.now() / 1000),\n                tags: [],\n                content: JSON.stringify({ name, about })\n            }, privateKey)\n\n            document.getElementById('output').textContent = JSON.stringify(event, null, 2)\n            document.getElementById('event-id').textContent = `ID del evento: ${event.id}`\n        }\n    &lt;/script&gt;\n    &lt;style&gt;\n        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }\n        .section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }\n        textarea, input { width: 100%; margin: 5px 0; padding: 8px; }\n        button { background: #007cba; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; }\n        button:hover { background: #005a8b; }\n        pre { background: #f5f5f5; padding: 15px; border-radius: 4px; overflow-x: auto; font-size: 12px; }\n        .pubkey { font-family: monospace; font-size: 14px; color: #666; }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;\ud83d\udd27 Creador de Eventos Nostr&lt;/h1&gt;\n    &lt;div class=\"pubkey\" id=\"pubkey-display\"&gt;&lt;/div&gt;\n\n    &lt;div class=\"section\"&gt;\n        &lt;h2&gt;\ud83d\udcdd Crear Nota de Texto&lt;/h2&gt;\n        &lt;textarea id=\"note-content\" placeholder=\"\u00bfQu\u00e9 tienes en mente? Prueba usar #hashtags\" rows=\"3\"&gt;&lt;/textarea&gt;\n        &lt;button id=\"create-note\"&gt;Crear Nota&lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"section\"&gt;\n        &lt;h2&gt;\ud83d\udc64 Crear Perfil&lt;/h2&gt;\n        &lt;input id=\"profile-name\" placeholder=\"Tu nombre\" /&gt;\n        &lt;textarea id=\"profile-about\" placeholder=\"Acerca de ti\" rows=\"2\"&gt;&lt;/textarea&gt;\n        &lt;button id=\"create-profile\"&gt;Crear Perfil&lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"section\"&gt;\n        &lt;h2&gt;\ud83d\udcc4 Evento Generado&lt;/h2&gt;\n        &lt;div id=\"event-id\" style=\"margin-bottom: 10px; font-weight: bold;\"&gt;&lt;/div&gt;\n        &lt;pre id=\"output\"&gt;Los eventos aparecer\u00e1n aqu\u00ed...&lt;/pre&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"es/tutorials/understanding-events/#entendiendo-el-flujo-de-eventos","title":"Entendiendo el Flujo de Eventos","text":"<p>As\u00ed es como los eventos fluyen a trav\u00e9s de la red Nostr:</p> <pre><code>graph LR\n    A[Crear Evento] --&gt; B[Firmar Evento]\n    B --&gt; C[Validar Evento]\n    C --&gt; D[Transmitir a Rel\u00e9s]\n    D --&gt; E[Rel\u00e9 Almacena Evento]\n    E --&gt; F[Otros Clientes se Suscriben]\n    F --&gt; G[Clientes Reciben Evento]\n    G --&gt; H[Validar y Mostrar]</code></pre>"},{"location":"es/tutorials/understanding-events/#patrones-de-eventos-avanzados","title":"Patrones de Eventos Avanzados","text":""},{"location":"es/tutorials/understanding-events/#hilos-de-conversacion","title":"Hilos de Conversaci\u00f3n","text":"<pre><code>function crearHilo(eventos) {\n    // Primer evento del hilo\n    const eventoRaiz = finishEvent({\n        kind: 1,\n        created_at: Math.floor(Date.now() / 1000),\n        tags: [['t', 'hilo']],\n        content: \"\ud83e\uddf5 1/n Empezando un hilo sobre eventos Nostr...\"\n    }, privateKey)\n\n    // Eventos subsecuentes referencian la ra\u00edz\n    const evento2 = finishEvent({\n        kind: 1,\n        created_at: Math.floor(Date.now() / 1000),\n        tags: [\n            ['e', eventoRaiz.id, '', 'root'],\n            ['e', eventoRaiz.id, '', 'reply'],\n            ['t', 'hilo']\n        ],\n        content: \"2/n Los eventos son la unidad b\u00e1sica de datos...\"\n    }, privateKey)\n\n    return [eventoRaiz, evento2]\n}\n</code></pre>"},{"location":"es/tutorials/understanding-events/#eventos-con-caducidad","title":"Eventos con Caducidad","text":"<pre><code>function crearEventoTemporal(contenido, expiraEnSegundos) {\n    const expiracion = Math.floor(Date.now() / 1000) + expiraEnSegundos\n\n    return finishEvent({\n        kind: 1,\n        created_at: Math.floor(Date.now() / 1000),\n        tags: [['expiration', expiracion.toString()]],\n        content: contenido\n    }, privateKey)\n}\n\n// Evento que expira en 1 hora\nconst eventoTemporal = crearEventoTemporal(\"Mensaje temporal\", 3600)\n</code></pre>"},{"location":"es/tutorials/understanding-events/#eventos-geolocalizados","title":"Eventos Geolocalizados","text":"<pre><code>function crearEventoConUbicacion(contenido, latitud, longitud) {\n    // Convertir coordenadas a geohash\n    const geohash = encodeGeohash(latitud, longitud, 8)\n\n    return finishEvent({\n        kind: 1,\n        created_at: Math.floor(Date.now() / 1000),\n        tags: [\n            ['g', geohash],\n            ['location', `${latitud},${longitud}`]\n        ],\n        content: contenido\n    }, privateKey)\n}\n</code></pre>"},{"location":"es/tutorials/understanding-events/#mejores-practicas","title":"Mejores Pr\u00e1cticas","text":"<p>Mejores Pr\u00e1cticas para Creaci\u00f3n de Eventos</p> <ol> <li>Siempre valida eventos antes de transmitir</li> <li>Usa kinds apropiados para diferentes tipos de contenido</li> <li>Incluye etiquetas relevantes para descubrimiento</li> <li>Mant\u00e9n contenido razonable - algunos rel\u00e9s tienen l\u00edmites de tama\u00f1o</li> <li>Usa timestamps apropiados - no muy lejos en pasado/futuro</li> <li>Maneja fallas graciosamente al transmitir</li> <li>Deduplica eventos al recibir de m\u00faltiples rel\u00e9s</li> </ol> <p>Consideraciones de Seguridad</p> <ul> <li>Nunca compartas tu llave privada</li> <li>Siempre verifica firmas en eventos recibidos</li> <li>Ten cuidado con eventos de fuentes desconocidas</li> <li>Valida todos los campos de eventos antes de procesar</li> <li>Implementa l\u00edmites de velocidad para prevenir spam</li> </ul>"},{"location":"es/tutorials/understanding-events/#proximos-pasos","title":"Pr\u00f3ximos Pasos","text":"<p>Ahora que entiendes los eventos, puedes:</p> <ul> <li>Aprender sobre comunicaci\u00f3n con rel\u00e9s</li> <li>Construir tu cliente simple</li> </ul>      \u2190 Anterior: Cliente Simple         Siguiente: Comunicaci\u00f3n con Rel\u00e9s \u2192"}]}